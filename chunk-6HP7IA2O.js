import{A as wi,D as Mi,F as yi,G as Ei,H as Di,I as Ti,a as zt,b as ai,c as Ft,d as si,e as li,f as ci,g as di,h as pi,i as gi,j as ui,k as mi,l as At,m as fi,n as It,o as Vt,p as bi,q as xi,r as Pi,s as Wt,t as He,u as Nt,v as vi,w as jt,x as Ut,y as Ht,z as $t}from"./chunk-AXGZGPTE.js";import{b as Oi,e as ki}from"./chunk-4IAZ7G25.js";import{b as qn,c as Gn,e as Qn,g as Ue,i as Si}from"./chunk-4Q2FHIQY.js";import"./chunk-TZNZ53SR.js";import{a as ri}from"./chunk-E7F5BDVW.js";import{a as ii,b as oi}from"./chunk-6DYDZLAU.js";import{a as Ve,b as _i,c as Ci,d as Rt,e as Lt}from"./chunk-W6BH6EYV.js";import{a as hi}from"./chunk-JB3SIN2M.js";import{D as it,a as Be,b as G,c as Q,d as Nn,e as jn,f as Y,g as Un,h as ze,i as Oe,j as je,k as ue,l as me,m as fe,n as et,o as Ae,p as Hn,q as $n,r as Se,u as tt,w as Ie,y as Ot}from"./chunk-Y7A6MJVW.js";import{b as nt}from"./chunk-ZO574LIR.js";import{e as Bt}from"./chunk-JAFV3UXJ.js";import{A as Wn,ga as Yn,h as Vn,ha as Kn,i as $,ia as Xn,j as R,ka as Zn,la as Jn,m as Rn,ma as ei,na as ti,oa as ni,p as Ln,q as Tt,r as ge,x as wn}from"./chunk-DILZRO5C.js";import{$ as de,$b as p,Ac as vn,D as xn,F as En,Gb as Et,Hb as Dt,I as Dn,Jc as Fe,Lb as m,Mb as r,Nb as a,Ob as b,Pb as Pe,Qb as ye,Sb as te,Tb as ne,Va as Ce,Vb as y,Wb as Pn,Ya as Tn,Za as l,Zb as f,_b as Ke,aa as St,cb as Bn,da as De,db as N,dc as re,ea as X,ec as ae,f as Sn,fc as se,g as kn,gc as Te,hc as pe,ic as T,ja as g,ka as u,kb as F,kc as c,la as H,lb as kt,lc as B,m as yt,ma as we,mc as I,nc as We,oc as O,pc as S,qb as M,qc as k,r as bn,rc as zn,sb as D,sc as Fn,uc as Xe,vc as An,wc as In,xc as Ze,ya as ve,zc as Je}from"./chunk-2NYEL3ZQ.js";import{a as ce,b as Ne,j as P}from"./chunk-TWZW5B45.js";var ot=class s{getPatternTypes(){return[{value:"grid",label:"\uADF8\uB9AC\uB4DC",description:"\uADE0\uB4F1 \uAC04\uACA9 \uBC30\uCE58"},{value:"diagonal",label:"\uB300\uAC01\uC120",description:"\uB300\uAC01\uC120 \uBC29\uD5A5 \uBC30\uCE58"},{value:"stagger",label:"\uC9C0\uADF8\uC7AC\uADF8",description:"\uC5C7\uAC08\uB9B0 \uBC30\uCE58"},{value:"border",label:"\uD14C\uB450\uB9AC",description:"\uAC00\uC7A5\uC790\uB9AC\uB9CC \uBC30\uCE58"},{value:"cross",label:"\uC2ED\uC790\uD615",description:"\uC911\uC559 \uC2ED\uC790 \uBC30\uCE58"}]}getDefaultWatermarkConfig(){return{text:"WATERMARK",fontSize:48,color:"#cccccc",opacity:.3,rotation:-45,position:"diagonal",pattern:{enabled:!1,type:"grid",rows:3,columns:3,spacing:100}}}calculateWatermarkPosition(t,e){let{pageWidth:i=595,pageHeight:n=842,x:o,y:d}=e;if(o!==void 0&&d!==void 0)return{x:o,y:d,rotation:t.rotation};let h=t.text.length*t.fontSize*.6,_=t.fontSize;switch(t.position){case"center":return{x:(i-h)/2,y:n/2,rotation:t.rotation};case"diagonal":return{x:i/2,y:n/2,rotation:-45};case"top-left":return{x:50,y:50+_,rotation:0};case"top-right":return{x:i-h-50,y:50+_,rotation:0};case"bottom-left":return{x:50,y:n-50,rotation:0};case"bottom-right":return{x:i-h-50,y:n-50,rotation:0};default:return{x:i/2,y:n/2,rotation:-45}}}createWatermarkElement(t,e={}){let i=this.calculateWatermarkPosition(t,e),n=t.text.length*t.fontSize*.6,o=t.fontSize;return{id:`watermark-${Date.now()}`,type:"watermark",x:i.x,y:i.y,width:n,height:o,text:t.text,fontSize:t.fontSize,fontFamily:"Arial",fontWeight:"bold",color:t.color,opacity:t.opacity,rotation:i.rotation,textAlign:"center"}}createPatternWatermarks(t,e={}){let i=[];if(!t.pattern?.enabled)return[this.createWatermarkElement(t,e)];let{pageWidth:n=595,pageHeight:o=842}=e,{rows:d,columns:h,type:_}=t.pattern;switch(_){case"grid":return this.createGridPattern(t,n,o,d,h);case"diagonal":return this.createDiagonalPattern(t,n,o,d,h);case"stagger":return this.createStaggerPattern(t,n,o,d,h);case"border":return this.createBorderPattern(t,n,o);case"cross":return this.createCrossPattern(t,n,o,d,h);default:return this.createGridPattern(t,n,o,d,h)}}createGridPattern(t,e,i,n,o){let d=[],_=e-100,C=i-100,x=_/o,v=C/n;for(let w=0;w<n;w++)for(let E=0;E<o;E++){let z=50+E*x+x/2,A=50+w*v+v/2;d.push(this.createWatermarkAt(t,z,A,`grid-${w}-${E}`))}return d}createDiagonalPattern(t,e,i,n,o){let d=[],_=e-100,C=i-100,x=_/o,v=C/n,w=Math.min(n,o);for(let E=0;E<w;E++){let z=50+E*x+x/2,A=50+E*v+v/2;d.push(this.createWatermarkAt(t,z,A,`diagonal-${E}`));let V=50+(o-1-E)*x+x/2;d.push(this.createWatermarkAt(t,V,A,`diagonal-rev-${E}`))}return d}createStaggerPattern(t,e,i,n,o){let d=[],_=e-100,C=i-100,x=_/o,v=C/n;for(let w=0;w<n;w++){let E=w%2*(x/2);for(let z=0;z<o;z++){let A=50+E+z*x+x/2,V=50+w*v+v/2;A>50&&A<e-50&&d.push(this.createWatermarkAt(t,A,V,`stagger-${w}-${z}`))}}return d}createBorderPattern(t,e,i){let n=[];for(let h=50;h<e-50;h+=100)n.push(this.createWatermarkAt(t,h,80,`border-top-${h}`));for(let h=50;h<e-50;h+=100)n.push(this.createWatermarkAt(t,h,i-50-30,`border-bottom-${h}`));for(let h=150;h<i-50-100;h+=100)n.push(this.createWatermarkAt(t,80,h,`border-left-${h}`));for(let h=150;h<i-50-100;h+=100)n.push(this.createWatermarkAt(t,e-50-30,h,`border-right-${h}`));return n}createCrossPattern(t,e,i,n,o){let d=[],_=e-100,C=i-100,x=_/o,v=C/n,w=Math.floor(n/2),E=Math.floor(o/2);for(let z=0;z<o;z++){let A=50+z*x+x/2,V=50+w*v+v/2;d.push(this.createWatermarkAt(t,A,V,`cross-h-${z}`))}for(let z=0;z<n;z++){if(z===w)continue;let A=50+E*x+x/2,V=50+z*v+v/2;d.push(this.createWatermarkAt(t,A,V,`cross-v-${z}`))}return d}createWatermarkAt(t,e,i,n){let o=t.text.length*t.fontSize*.6,d=t.fontSize;return{id:`watermark-${n}-${Date.now()}`,type:"watermark",x:e,y:i,width:o,height:d,text:t.text,fontSize:t.fontSize,fontFamily:"Arial",fontWeight:"bold",color:t.color,opacity:t.opacity,rotation:t.rotation,textAlign:"center"}}applyWatermarkToAllPages(t,e,i=595,n=842){let o=[];for(let d=0;d<e;d++){let h=this.createWatermarkElement(t,{pageWidth:i,pageHeight:n});h.id=`watermark-page-${d+1}-${Date.now()}`,o.push(h)}return o}generateWatermarkPreview(t,e){let i=e.getContext("2d");i&&(e.width=300,e.height=424,i.fillStyle="#ffffff",i.fillRect(0,0,e.width,e.height),t.pattern?.enabled?this.generatePatternPreview(t,e,i):this.drawSingleWatermark(t,e,i,e.width/2,e.height/2))}drawSingleWatermark(t,e,i,n,o){i.save(),i.translate(n,o),i.rotate(t.rotation*Math.PI/180),i.font=`bold ${t.fontSize/2}px Arial`,i.fillStyle=t.color,i.globalAlpha=t.opacity,i.textAlign="center",i.textBaseline="middle",i.fillText(t.text,0,0),i.restore()}generatePatternPreview(t,e,i){if(!t.pattern)return;let{rows:n,columns:o,type:d}=t.pattern,h=25,_=e.width-h*2,C=e.height-h*2,x=_/o,v=C/n;switch(d){case"grid":this.previewGridPattern(t,i,h,x,v,n,o);break;case"diagonal":this.previewDiagonalPattern(t,e,i,h,x,v,n,o);break;case"stagger":this.previewStaggerPattern(t,e,i,h,x,v,n,o);break;case"border":this.previewBorderPattern(t,e,i,h);break;case"cross":this.previewCrossPattern(t,e,i,h,x,v,n,o);break;default:this.previewGridPattern(t,i,h,x,v,n,o)}}previewGridPattern(t,e,i,n,o,d,h){for(let _=0;_<d;_++)for(let C=0;C<h;C++){let x=i+C*n+n/2,v=i+_*o+o/2;this.drawSingleWatermark(t,null,e,x,v)}}previewDiagonalPattern(t,e,i,n,o,d,h,_){let C=Math.min(h,_);for(let x=0;x<C;x++){let v=n+x*o+o/2,w=n+x*d+d/2;this.drawSingleWatermark(t,e,i,v,w);let E=n+(_-1-x)*o+o/2;this.drawSingleWatermark(t,e,i,E,w)}}previewStaggerPattern(t,e,i,n,o,d,h,_){for(let C=0;C<h;C++){let x=C%2*(o/2);for(let v=0;v<_;v++){let w=n+x+v*o+o/2,E=n+C*d+d/2;w>n&&w<e.width-n&&this.drawSingleWatermark(t,e,i,w,E)}}}previewBorderPattern(t,e,i,n){for(let d=n;d<e.width-n;d+=50)this.drawSingleWatermark(t,e,i,d,n+15),this.drawSingleWatermark(t,e,i,d,e.height-n-15);for(let d=n+50;d<e.height-n-50;d+=50)this.drawSingleWatermark(t,e,i,n+15,d),this.drawSingleWatermark(t,e,i,e.width-n-15,d)}previewCrossPattern(t,e,i,n,o,d,h,_){let C=Math.floor(h/2),x=Math.floor(_/2);for(let v=0;v<_;v++){let w=n+v*o+o/2,E=n+C*d+d/2;this.drawSingleWatermark(t,e,i,w,E)}for(let v=0;v<h;v++){if(v===C)continue;let w=n+x*o+o/2,E=n+v*d+d/2;this.drawSingleWatermark(t,e,i,w,E)}}static \u0275fac=function(e){return new(e||s)};static \u0275prov=de({token:s,factory:s.\u0275fac,providedIn:"root"})};var qt=class s{constructor(){}saveCurrentDocument(t,e){if(!t){e.showWarning("\uC800\uC7A5\uD560 \uBB38\uC11C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4");return}e.showInfo("\uBB38\uC11C \uC800\uC7A5 \uAE30\uB2A5\uC740 \uAC1C\uBC1C \uC911\uC785\uB2C8\uB2E4")}updateRecentDocsCache(t,e,i){return P(this,null,function*(){try{let o=(yield t.getRecentDocuments(5)).map(d=>{let h=d.documentType||(d.pdfSrc?"viewer":"editor"),_=h==="viewer",C=_?"\u{1F4D6}":"\u{1F4DD}",x=_?"\uBDF0\uC5B4":"\uC0DD\uC131",v=_?"PDF \uBDF0\uC5B4\uB85C \uC5F4\uB9B0 \uBB38\uC11C":"\uD3B8\uC9D1\uAE30\uB85C \uC0DD\uC131\uD55C \uBB38\uC11C";return{id:d.id,title:d.title,description:`${v} | \uC800\uC7A5\uC77C: ${new Date(d.updatedAt).toLocaleDateString()} | ${d.elementCount||0}\uAC1C \uC694\uC18C`,date:d.updatedAt,data:d,typeIcon:C,typeLabel:x,documentType:h}});e(o)}catch(n){console.error("\uCD5C\uADFC \uBB38\uC11C \uCE90\uC2DC \uC5C5\uB370\uC774\uD2B8 \uC624\uB958:",n),i&&i()}})}loadAsViewerMode(t,e,i,n){let o="",d="";if(t.pdfBase64)try{let v=t.pdfBase64.split(",")[1]||t.pdfBase64,w=atob(v),E=new Uint8Array(w.length);for(let V=0;V<w.length;V++)E[V]=w.charCodeAt(V);let z=new Blob([E],{type:"application/pdf"});o=URL.createObjectURL(z),d=t.pdfBase64}catch(v){if(console.error("Base64 \uB370\uC774\uD130 \uBCC0\uD658 \uC2E4\uD328:",v),t.pdfSrc)o=t.pdfSrc;else{n.showError("PDF \uB370\uC774\uD130\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),i(!0,t);return}}else if(t.pdfSrc)o=t.pdfSrc;else{console.warn("PDF \uBDF0\uC5B4 \uBB38\uC11C\uC778\uB370 PDF \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uD3B8\uC9D1\uAE30 \uBAA8\uB4DC\uB85C \uB85C\uB4DC\uD569\uB2C8\uB2E4."),i(!0,t);return}let h=t.fileName||t.title,_=t.pages||[],C=_.length;e({pdfSrc:o,pdfBase64Data:d,loadedFileName:h,pdfPages:_,totalPages:C,currentPage:1})}loadAsEditorMode(t,e,i,n){let o=t.pages||[{id:"page-1",pageNumber:1,elements:[],width:e,height:i}],d=o.length;n({pdfSrc:null,loadedFileName:"",pdfBase64Data:"",pdfPages:o,selectedElement:null,editingElement:null,currentPage:1,totalPages:d})}static \u0275fac=function(e){return new(e||s)};static \u0275prov=de({token:s,factory:s.\u0275fac,providedIn:"root"})};var Gt=class s{constructor(t,e){this.snackbar=t;this.debugLogger=e}exportToPdf(n){return P(this,arguments,function*(t,e={},i){try{let o=e.fileName||"\uBB38\uC11C";if(t.length===0){i?.detectChanges(),this.snackbar.showWarning("\uB0B4\uBCF4\uB0BC \uD398\uC774\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uBA3C\uC800 \uBB38\uC11C\uB97C \uC0DD\uC131\uD558\uC138\uC694.");return}t.slice(0,5).forEach((q,U)=>{let le=q.elements.filter(Ee=>Ee.type==="text").length,_e=q.elements.filter(Ee=>Ee.type==="image").length,ke=q.elements.filter(Ee=>Ee.type==="svg").length;le>0&&q.elements.filter(Ee=>Ee.type==="text").slice(0,2).forEach((Ee,_n)=>{let Re=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(Ee.text||"")})});let d=t.reduce((q,U)=>q+U.elements.filter(le=>le.type==="text").length,0),h=t.reduce((q,U)=>q+U.elements.filter(le=>le.type==="image").length,0),_=t.reduce((q,U)=>q+U.elements.filter(le=>le.type==="svg").length,0),x=t.flatMap(q=>q.elements.filter(U=>U.type==="text").map(U=>U.text||"")).filter(q=>/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(q)),v=new Set(t.flatMap(q=>q.elements.filter(U=>U.type==="text"&&U.color).map(U=>U.color))),w=yield this.waitForPDFLib(),{PDFDocument:E,rgb:z,StandardFonts:A}=w,V=yield E.create(),ee=new Map,Z,L="Helvetica (\uAE30\uBCF8)",W=new Set,K=t.flatMap(q=>q.elements.filter(U=>U.type==="text")),he=0;K.forEach((q,U)=>{if(!q.fontFamily){let le=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(q.text||"");q.fontFamily=le?"Noto Sans KR, sans-serif":"Arial",he++}q.fontFamily&&W.add(q.fontFamily)});let xe=t.some(q=>q.elements.some(U=>U.type==="text"&&/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(U.text||"")));if(xe||W.size>0)try{window.fontkit?i?.detectChanges():(i?.detectChanges(),yield new Promise((U,le)=>{let _e=document.createElement("script");_e.src="https://unpkg.com/@pdf-lib/fontkit@1.1.1/dist/fontkit.umd.min.js",_e.onload=()=>{i?.detectChanges(),U(!0)},_e.onerror=()=>{i?.detectChanges(),le(new Error("fontkit \uB85C\uB529 \uC2E4\uD328"))},document.head.appendChild(_e)})),i?.detectChanges(),V.registerFontkit(window.fontkit),i?.detectChanges();let q={"Noto Sans KR":"fonts/NotoSansKR-Regular.ttf",NanumGothic:"fonts/NanumGothic-Regular.ttf",NanumBarunGothic:"fonts/NanumBarunGothic-Regular.ttf","IBM Plex Sans KR":"fonts/IBMPlexSansKR-Regular.ttf",NanumSquare:"fonts/NanumSquare-Regular.ttf","Black Han Sans":"fonts/BlackHanSans-Regular.ttf","Noto Serif KR":"fonts/NotoSerifKR-Regular.ttf",NanumMyeongjo:"fonts/NanumMyeongjo-Regular.ttf",NanumPen:"fonts/NanumPen-Regular.ttf",NanumBrush:"fonts/NanumBrush-Regular.ttf",DoHyeon:"fonts/DoHyeon-Regular.ttf",Jua:"fonts/Jua-Regular.ttf",Gaegu:"fonts/Gaegu-Regular.ttf",GamjaFlower:"fonts/GamjaFlower-Regular.ttf",Sunflower:"fonts/Sunflower-Medium.ttf",EastSeaDokdo:"fonts/EastSeaDokdo-Regular.ttf",HiMelody:"fonts/HiMelody-Regular.ttf",Roboto:"fonts/Roboto-Regular.ttf","Open Sans":"fonts/OpenSans-Regular.ttf",Lato:"fonts/Lato-Regular.ttf",Montserrat:"fonts/Montserrat-Regular.ttf",Poppins:"fonts/Poppins-Regular.ttf",Inter:"fonts/Inter-Regular.ttf",Ubuntu:"fonts/Ubuntu-Regular.ttf"};for(let U of W)try{let le=this.extractFontName(U);if(i?.detectChanges(),q[le]){let _e=q[le],ke=yield fetch(_e);if(ke.ok){let Ee=yield ke.arrayBuffer(),_n=yield V.embedFont(new Uint8Array(Ee));ee.set(U,_n),i?.detectChanges()}}}catch{i?.detectChanges()}if(xe){let U=null,le=["fonts/NanumGothic-Regular.ttf","fonts/NanumGothic.ttf"];for(let _e of le)try{let ke=yield fetch(_e);if(ke.ok){U=yield ke.arrayBuffer();break}}catch{continue}if(!U)try{let _e=yield fetch("https://cdn.jsdelivr.net/gh/google/fonts@main/ofl/nanumgothic/NanumGothic-Regular.ttf");_e.ok&&(U=yield _e.arrayBuffer())}catch{}if(U&&U.byteLength>0)Z=yield V.embedFont(new Uint8Array(U)),L="NanumGothic (\uD55C\uAE00 \uC9C0\uC6D0)",ee.set("Noto Sans KR, sans-serif",Z),ee.set("NanumGothic",Z),ee.set("default-korean",Z),i?.detectChanges();else throw new Error("\uD55C\uAE00 \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328")}else Z=yield V.embedFont(A.Helvetica),L="Helvetica (\uAE30\uBCF8)"}catch{i?.detectChanges(),Z=yield V.embedFont(A.Helvetica),L="Helvetica (\uAE30\uBCF8)"}else Z=yield V.embedFont(A.Helvetica),L="Helvetica (\uAE30\uBCF8)";let Me=q=>{if(!q)return Z;if(ee.has(q))return ee.get(q);let U=this.extractFontName(q);for(let[le,_e]of ee.entries())if(this.extractFontName(le)===U)return _e;return Z},Ye={text:0,image:0,svg:0,failed:0};for(let q=0;q<t.length;q++){let U=t[q],le=595,_e=842;if(U.width&&U.height){le=U.width,_e=U.height;let Le=le>_e}let ke=V.addPage([le,_e]),{width:Ee,height:_n}=ke.getSize(),Re={text:0,image:0,svg:0,failed:0};for(let Le of U.elements)try{if(Le.type==="text"){let Cn=Me(Le.fontFamily);yield this.addTextToPdfPage(ke,Le,w,Cn),Re.text++}else Le.type==="image"?(yield this.addImageToPdfPage(ke,Le,w,V),Re.image++):Le.type==="svg"&&(yield this.addSvgToPdfPage(ke,Le,w,i),Re.svg++)}catch(Cn){Re.failed++,console.error("\uC694\uC18C \uCD94\uAC00 \uC2E4\uD328:",Le,Cn)}Ye.text+=Re.text,Ye.image+=Re.image,Ye.svg+=Re.svg,Ye.failed+=Re.failed}let Ai=yield V.save(),Ii=new Blob([Ai],{type:"application/pdf"}),On=URL.createObjectURL(Ii),Mt=document.createElement("a");Mt.href=On,Mt.download=`${o}.pdf`,document.body.appendChild(Mt),Mt.click(),document.body.removeChild(Mt),URL.revokeObjectURL(On),this.snackbar.showSuccess("PDF\uAC00 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(o){console.error("PDF \uB0B4\uBCF4\uB0B4\uAE30 \uC2E4\uD328:",o),this.snackbar.showError("PDF \uB0B4\uBCF4\uB0B4\uAE30\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}waitForPDFLib(){return P(this,null,function*(){return new Promise((t,e)=>{if(window.PDFLib){t(window.PDFLib);return}let i=50,n=0,o=setInterval(()=>{n++,window.PDFLib?(clearInterval(o),t(window.PDFLib)):n>=i&&(clearInterval(o),e(new Error("PDF-lib \uB85C\uB529 \uD0C0\uC784\uC544\uC6C3")))},100)})})}addTextToPdfPage(t,e,i,n){return P(this,null,function*(){try{let{rgb:o}=i,{width:d,height:h}=t.getSize(),_=this.parseColor(e.color||"#000000"),C=e.x||0,x=e.fontSize||16,v=h-(e.y||0)-x,E=(e.text||"").trim()||"\uD14D\uC2A4\uD2B8",z={x:C,y:v,size:x,color:o(_.r,_.g,_.b)};n&&(z.font=n),t.drawText(E,z)}catch(o){console.error("\uD14D\uC2A4\uD2B8 \uCD94\uAC00 \uC2E4\uD328:",o)}})}addImageToPdfPage(t,e,i,n){return P(this,null,function*(){try{if(!e.src){console.error("\uC774\uBBF8\uC9C0 src\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let{width:o,height:d}=t.getSize(),h=e.x||0,_=e.width||100,C=e.height||100,x=d-(e.y||0)-C,v="jpeg";e.src.startsWith("data:image/png")?v="png":(e.src.startsWith("data:image/jpeg")||e.src.startsWith("data:image/jpg"))&&(v="jpeg");let w=e.src.split(",")[1];if(!w){console.error("\uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 Base64 \uB370\uC774\uD130");return}let E=Uint8Array.from(atob(w),A=>A.charCodeAt(0)),z;v==="png"?z=yield(n||t.doc).embedPng(E):z=yield(n||t.doc).embedJpg(E),t.drawImage(z,{x:h,y:x,width:_,height:C})}catch(o){console.error("\uC774\uBBF8\uC9C0 \uCD94\uAC00 \uC2E4\uD328:",o)}})}addSvgToPdfPage(t,e,i,n){return P(this,null,function*(){try{if(this.debugLogger.info("SVG\uB80C\uB354\uB9C1","\u{1F3A8} SVG \uC694\uC18C\uB97C PDF\uB85C \uB80C\uB354\uB9C1 \uC2DC\uC791"),!e.svgContent){this.debugLogger.warn("SVG\uB80C\uB354\uB9C1","\u26A0\uFE0F SVG \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4");return}try{this.debugLogger.info("SVG\uB80C\uB354\uB9C1","\u{1F504} SVG\u2192PNG \uC774\uBBF8\uC9C0 \uBCC0\uD658 \uC2DC\uB3C4"),yield this.addSvgAsImageToPdf(t,e,i,n),this.debugLogger.success("SVG\uB80C\uB354\uB9C1","\u2705 SVG\uB97C \uC774\uBBF8\uC9C0\uB85C \uBCC0\uD658\uD558\uC5EC PDF\uC5D0 \uC0BD\uC785 \uC644\uB8CC");return}catch(o){this.debugLogger.warn("SVG\uB80C\uB354\uB9C1",`\u26A0\uFE0F SVG \uC774\uBBF8\uC9C0 \uBCC0\uD658 \uC2E4\uD328: ${o}`)}}catch(o){console.error("SVG \uCD94\uAC00 \uC2E4\uD328:",o)}})}addSvgAsImageToPdf(t,e,i,n){return P(this,null,function*(){return new Promise((o,d)=>{try{if(!e.svgContent){d(new Error("SVG \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));return}let h=e.svgContent.replace(/<svg:/g,"<").replace(/<\/svg:/g,"</").replace(/xmlns:svg="[^"]*"/g,"").replace(/svg:xlink=/g,"xlink="),_=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),C=URL.createObjectURL(_),x=new Image;x.crossOrigin="anonymous";let v=setTimeout(()=>{URL.revokeObjectURL(C),d(new Error("SVG \uC774\uBBF8\uC9C0 \uB85C\uB4DC \uD0C0\uC784\uC544\uC6C3"))},1e4);x.onerror=w=>{clearTimeout(v),URL.revokeObjectURL(C),d(new Error("SVG \uC774\uBBF8\uC9C0 \uB85C\uB4DC \uC2E4\uD328"))},x.onload=()=>P(null,null,function*(){clearTimeout(v);try{let w=document.createElement("canvas"),E=2,z=e.width||x.naturalWidth||x.width||595,A=e.height||x.naturalHeight||x.height||842;w.width=z*E,w.height=A*E;let V=w.getContext("2d");if(!V)throw new Error("Canvas context\uB97C \uC0DD\uC131\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");V.clearRect(0,0,w.width,w.height),V.scale(E,E),V.drawImage(x,0,0,z,A),w.toBlob(ee=>P(null,null,function*(){try{if(!ee)throw new Error("Canvas\uB97C Blob\uC73C\uB85C \uBCC0\uD658\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let Z=yield ee.arrayBuffer(),L=new Uint8Array(Z),W=t.doc;if(!W)throw new Error("PDF \uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let K=yield W.embedPng(L),he=t.getSize().height,xe=e.x||0,oe=he-(e.y||0)-A;t.drawImage(K,{x:xe,y:oe,width:z,height:A}),URL.revokeObjectURL(C),o()}catch(Z){URL.revokeObjectURL(C),d(Z)}}),"image/png",.95)}catch(w){URL.revokeObjectURL(C),d(w)}}),x.src=C}catch(h){d(h)}})})}parseColor(t){let e=0,i=0,n=0;try{if(t.startsWith("#")){let o=t.slice(1);o.length===3?(e=parseInt(o[0]+o[0],16)/255,i=parseInt(o[1]+o[1],16)/255,n=parseInt(o[2]+o[2],16)/255):o.length===6&&(e=parseInt(o.slice(0,2),16)/255,i=parseInt(o.slice(2,4),16)/255,n=parseInt(o.slice(4,6),16)/255)}else if(t.startsWith("rgb")){let o=t.match(/\d+/g);o&&o.length>=3&&(e=parseInt(o[0])/255,i=parseInt(o[1])/255,n=parseInt(o[2])/255)}}catch(o){console.error("\uC0C9\uC0C1 \uD30C\uC2F1 \uC2E4\uD328:",o)}return{r:e,g:i,b:n}}extractFontName(t){return t?t.split(",")[0].trim().replace(/['"]/g,""):"Helvetica"}generatePdfBytes(n){return P(this,arguments,function*(t,e={},i){try{let o=e.fileName||"\uBB38\uC11C";if(t.length===0)return i?.detectChanges(),this.snackbar.showWarning("\uB0B4\uBCF4\uB0BC \uD398\uC774\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),null;let d=yield this.waitForPDFLib(),{PDFDocument:h,rgb:_,StandardFonts:C}=d,x=yield h.create(),v=new Map,w,E=new Set;t.flatMap(L=>L.elements.filter(W=>W.type==="text")).forEach(L=>{if(!L.fontFamily){let W=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(L.text||"");L.fontFamily=W?"Noto Sans KR, sans-serif":"Arial"}L.fontFamily&&E.add(L.fontFamily)});let A=t.some(L=>L.elements.some(W=>W.type==="text"&&/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(W.text||"")));if(A||E.size>0)try{if(window.fontkit||(yield new Promise((L,W)=>{let K=document.createElement("script");K.src="https://unpkg.com/@pdf-lib/fontkit@1.1.1/dist/fontkit.umd.min.js",K.onload=()=>L(!0),K.onerror=()=>W(new Error("fontkit \uB85C\uB529 \uC2E4\uD328")),document.head.appendChild(K)})),x.registerFontkit(window.fontkit),A){let L=["fonts/NanumGothic-Regular.ttf","fonts/NanumGothic.ttf"],W=null;for(let K of L)try{let he=yield fetch(K);if(he.ok){W=yield he.arrayBuffer();break}}catch{continue}if(!W)try{let K=yield fetch("https://cdn.jsdelivr.net/gh/google/fonts@main/ofl/nanumgothic/NanumGothic-Regular.ttf");K.ok&&(W=yield K.arrayBuffer())}catch{}if(W&&W.byteLength>0)w=yield x.embedFont(new Uint8Array(W)),v.set("Noto Sans KR, sans-serif",w),v.set("NanumGothic",w),v.set("default-korean",w);else throw new Error("\uD55C\uAE00 \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328")}else w=yield x.embedFont(C.Helvetica)}catch{w=yield x.embedFont(C.Helvetica)}else w=yield x.embedFont(C.Helvetica);let ee=L=>{if(!L)return w;if(v.has(L))return v.get(L);let W=this.extractFontName(L);for(let[K,he]of v.entries())if(this.extractFontName(K)===W)return he;return w};for(let L=0;L<t.length;L++){let W=t[L],K=595.28,he=841.89;W.width&&W.height&&(K=W.width,he=W.height);let xe=x.addPage([K,he]);for(let oe of W.elements)try{oe.type==="text"?yield this.addTextToPdfPage(xe,oe,d,ee(oe.fontFamily)):oe.type==="image"?yield this.addImageToPdfPage(xe,oe,d,x):oe.type==="svg"&&(yield this.addSvgAsImageToPdf(xe,oe,d,i))}catch(Me){console.error("\uC694\uC18C \uB80C\uB354\uB9C1 \uC2E4\uD328:",oe,Me)}}return yield x.save()}catch(o){return console.error("PDF \uBC14\uC774\uD2B8 \uC0DD\uC131 \uC2E4\uD328:",o),this.snackbar.showError("PDF \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),null}})}static \u0275fac=function(e){return new(e||s)(De(Ue),De(Bt))};static \u0275prov=de({token:s,factory:s.\u0275fac,providedIn:"root"})};function Ri(s,t){if(s&1){let e=y();r(0,"div",12)(1,"p",13),c(2,"\uBCD1\uD569 \uBC29\uC2DD\uC744 \uC120\uD0DD\uD558\uC138\uC694"),a(),r(3,"div",14)(4,"div",15),f("click",function(){g(e);let n=p(2);return u(n.selectOption("local"))}),r(5,"div",16),b(6,"img",17),a(),r(7,"h3"),c(8,"\uB85C\uCEEC \uD30C\uC77C \uC120\uD0DD"),a(),r(9,"p"),c(10,"\uCEF4\uD4E8\uD130\uC5D0 \uC800\uC7A5\uB41C PDF \uD30C\uC77C\uC744 \uC120\uD0DD\uD558\uC5EC \uBCD1\uD569\uD569\uB2C8\uB2E4"),a()(),r(11,"div",15),f("click",function(){g(e);let n=p(2);return u(n.selectOption("saved"))}),r(12,"div",16),b(13,"img",18),a(),r(14,"h3"),c(15,"\uC800\uC7A5\uB41C \uBB38\uC11C \uC120\uD0DD"),a(),r(16,"p"),c(17,"\uC5C5\uB85C\uB4DC\uB41C \uBB38\uC11C \uBAA9\uB85D\uC5D0\uC11C \uC120\uD0DD\uD558\uC5EC \uBCD1\uD569\uD569\uB2C8\uB2E4"),a(),r(18,"span",19),c(19),a()()()()}if(s&2){let e=p(2);l(19),I("",e.savedDocuments.length,"\uAC1C \uBB38\uC11C")}}function Li(s,t){s&1&&b(0,"img",37)}function Wi(s,t){s&1&&b(0,"div",38)}function Ni(s,t){if(s&1){let e=y();r(0,"div",28),f("click",function(){let n=g(e).$implicit,o=p(4);return u(o.toggleDocSelection(n.id))}),r(1,"div",29),M(2,Li,1,0,"img",30)(3,Wi,1,0,"div",31),a(),r(4,"div",32)(5,"h4"),c(6),a(),r(7,"div",33)(8,"span",34),c(9),a(),r(10,"span",35),c(11,"\u2022"),a(),r(12,"span",36),c(13),a()()()()}if(s&2){let e=t.$implicit,i=p(4);T("selected",i.isDocSelected(e.id)),l(2),m("ngIf",i.isDocSelected(e.id)),l(),m("ngIf",!i.isDocSelected(e.id)),l(3),B(e.title),l(3),I("",e.pages.length,"\uD398\uC774\uC9C0"),l(4),B(i.formatDate(e.updatedAt))}}function ji(s,t){if(s&1&&(r(0,"div",26),M(1,Ni,14,7,"div",27),a()),s&2){let e=p(3);l(),m("ngForOf",e.savedDocuments)}}function Ui(s,t){s&1&&(r(0,"div",39),b(1,"img",40),r(2,"p"),c(3,"\uC800\uC7A5\uB41C \uBB38\uC11C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),a()())}function Hi(s,t){if(s&1){let e=y();r(0,"div",20)(1,"div",21)(2,"button",22),f("click",function(){g(e);let n=p(2);return u(n.selectedOption=null)}),b(3,"img",23),c(4," \uB4A4\uB85C "),a(),r(5,"p",13),c(6),a()(),M(7,ji,2,1,"div",24)(8,Ui,4,0,"div",25),a()}if(s&2){let e=p(2);l(6),I("\uBCD1\uD569\uD560 \uBB38\uC11C \uC120\uD0DD (",e.selectedDocIds.size,"\uAC1C \uC120\uD0DD\uB428)"),l(),m("ngIf",e.savedDocuments.length>0),l(),m("ngIf",e.savedDocuments.length===0)}}function $i(s,t){if(s&1){let e=y();r(0,"div",1),f("click",function(){g(e);let n=p();return u(n.closeModal())}),r(1,"div",2),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",3)(3,"h2"),c(4,"PDF \uBCD1\uD569"),a(),r(5,"button",4),f("click",function(){g(e);let n=p();return u(n.closeModal())}),b(6,"img",5),a()(),r(7,"div",6),M(8,Ri,20,1,"div",7)(9,Hi,9,3,"div",8),a(),r(10,"div",9)(11,"button",10),f("click",function(){g(e);let n=p();return u(n.closeModal())}),c(12,"\uCDE8\uC18C"),a(),r(13,"button",11),f("click",function(){g(e);let n=p();return u(n.onConfirm())}),c(14),a()()()()}if(s&2){let e=p();l(8),m("ngIf",!e.selectedOption),l(),m("ngIf",e.selectedOption==="saved"),l(4),m("disabled",!e.selectedOption||e.selectedOption==="saved"&&e.selectedDocIds.size===0),l(),I(" ",e.selectedOption==="local"?"\uD30C\uC77C \uC120\uD0DD":"\uBCD1\uD569\uD558\uAE30"," ")}}var rt=class s{close=new D;confirm=new D;indexedDbService=X(nt);snackBar=X(Rt);isVisible=!1;selectedOption=null;savedDocuments=[];selectedDocIds=new Set;ngOnInit(){return P(this,null,function*(){let t=yield this.indexedDbService.getAllDocuments();this.savedDocuments=t.filter(e=>e.pdfBase64)})}open(){this.isVisible=!0,this.selectedOption=null,this.selectedDocIds.clear()}closeModal(){this.isVisible=!1,this.close.emit()}selectOption(t){this.selectedOption=t}toggleDocSelection(t){this.selectedDocIds.has(t)?this.selectedDocIds.delete(t):this.selectedDocIds.add(t)}isDocSelected(t){return this.selectedDocIds.has(t)}onConfirm(){if(this.selectedOption)if(this.selectedOption==="local")this.confirm.emit({type:"local"}),this.closeModal();else{let t=this.savedDocuments.filter(e=>this.selectedDocIds.has(e.id));if(t.length===0){this.snackBar.open("\uBCD1\uD569\uD560 \uBB38\uC11C\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694.","\uB2EB\uAE30",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"});return}this.confirm.emit({type:"saved",selectedDocs:t}),this.closeModal()}}formatDate(t){let e=new Date(t),n=new Date().getTime()-e.getTime(),o=Math.floor(n/(1e3*60*60*24));return o===0?"\uC624\uB298":o===1?"\uC5B4\uC81C":o<7?`${o}\uC77C \uC804`:o<30?`${Math.floor(o/7)}\uC8FC \uC804`:e.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-merge-modal"]],outputs:{close:"close",confirm:"confirm"},standalone:!1,decls:1,vars:1,consts:[["class","merge-modal-overlay",3,"click",4,"ngIf"],[1,"merge-modal-overlay",3,"click"],[1,"merge-modal-container",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","24","height","24"],[1,"modal-body"],["class","option-section",4,"ngIf"],["class","documents-section",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-confirm",3,"click","disabled"],[1,"option-section"],[1,"section-title"],[1,"option-cards"],[1,"option-card",3,"click"],[1,"card-icon"],["src","./images/icons/pc/btn-gnb-upload.svg","alt","\uC5C5\uB85C\uB4DC","width","48","height","48"],["src","./images/icons/pc/ico-file.svg","alt","\uD30C\uC77C","width","48","height","48"],[1,"doc-count"],[1,"documents-section"],[1,"section-header"],[1,"back-btn",3,"click"],["src","./images/icons/pc/ico-before.svg","alt","\uB4A4\uB85C","width","20","height","20"],["class","documents-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"documents-list"],["class","document-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"document-item",3,"click"],[1,"doc-checkbox"],["src","./images/icons/pc/ico-check.svg","alt","\uC120\uD0DD","width","20","height","20",4,"ngIf"],["class","checkbox-empty",4,"ngIf"],[1,"doc-info"],[1,"doc-meta"],[1,"page-count"],[1,"separator"],[1,"date"],["src","./images/icons/pc/ico-check.svg","alt","\uC120\uD0DD","width","20","height","20"],[1,"checkbox-empty"],[1,"empty-state"],["src","./images/icons/pc/ico-file.svg","alt","\uD30C\uC77C","width","64","height","64"]],template:function(e,i){e&1&&M(0,$i,15,4,"div",0),e&2&&m("ngIf",i.isVisible)},dependencies:[$,R],styles:[".merge-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.merge-modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 20px 60px #0000004d;width:90%;max-width:600px;max-height:80vh;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px 24px 16px;border-bottom:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#111827}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;color:#6b7280;border-radius:8px;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#111827}.modal-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:24px}.section-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#6b7280;margin:0 0 16px}.option-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.option-card[_ngcontent-%COMP%]{background:#f9fafb;border:2px solid #e5e7eb;border-radius:12px;padding:24px;text-align:center;cursor:pointer;transition:all .2s}.option-card[_ngcontent-%COMP%]:hover{background:#f3f4f6;border-color:#3b82f6;transform:translateY(-2px);box-shadow:0 4px 12px #3b82f61a}.option-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{color:#3b82f6;margin-bottom:16px}.option-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px}.option-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;font-weight:600;color:#111827}.option-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:13px;color:#6b7280;line-height:1.5}.option-card[_ngcontent-%COMP%]   .doc-count[_ngcontent-%COMP%]{display:inline-block;background:#3b82f6;color:#fff;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.documents-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.documents-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:#f3f4f6;border:none;padding:8px 12px;border-radius:8px;display:flex;align-items:center;gap:4px;cursor:pointer;font-size:14px;color:#374151;transition:all .2s}.documents-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb}.documents-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.documents-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;max-height:400px;overflow-y:auto;padding:4px}.document-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#f9fafb;border:2px solid #e5e7eb;border-radius:12px;cursor:pointer;transition:all .2s}.document-item[_ngcontent-%COMP%]:hover{background:#f3f4f6;border-color:#d1d5db}.document-item.selected[_ngcontent-%COMP%]{background:#eff6ff;border-color:#3b82f6}.document-item.selected[_ngcontent-%COMP%]   .doc-checkbox[_ngcontent-%COMP%]{color:#3b82f6}.document-item[_ngcontent-%COMP%]   .doc-checkbox[_ngcontent-%COMP%]{flex-shrink:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;color:#9ca3af}.document-item[_ngcontent-%COMP%]   .doc-checkbox[_ngcontent-%COMP%]   .checkbox-empty[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #d1d5db;border-radius:4px}.document-item[_ngcontent-%COMP%]   .doc-checkbox[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.document-item[_ngcontent-%COMP%]   .doc-info[_ngcontent-%COMP%]{flex:1;min-width:0}.document-item[_ngcontent-%COMP%]   .doc-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;font-weight:500;color:#111827;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.document-item[_ngcontent-%COMP%]   .doc-info[_ngcontent-%COMP%]   .doc-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:12px;color:#6b7280}.document-item[_ngcontent-%COMP%]   .doc-info[_ngcontent-%COMP%]   .doc-meta[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{color:#d1d5db}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;color:#9ca3af}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.modal-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #e5e7eb}.btn[_ngcontent-%COMP%]{padding:10px 24px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;border:none}.btn.btn-cancel[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.btn.btn-cancel[_ngcontent-%COMP%]:hover{background:#e5e7eb}.btn.btn-confirm[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn.btn-confirm[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.btn.btn-confirm[_ngcontent-%COMP%]:disabled{background:#d1d5db;cursor:not-allowed}.documents-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.documents-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f3f4f6;border-radius:4px}.documents-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:4px}.documents-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#9ca3af}"]})};var Qt=class s{pdfLibLoaded=!1;fontkitLoaded=!1;fontManager=X(Pi);constructor(){console.log("\u2705 [PdfLibService] \uC11C\uBE44\uC2A4 \uCD08\uAE30\uD654 \uC644\uB8CC")}loadPdfLib(){return P(this,null,function*(){if(!(this.pdfLibLoaded&&window.PDFLib))return new Promise((t,e)=>{if(window.PDFLib){this.pdfLibLoaded=!0,t();return}let i=document.createElement("script");i.src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js",i.onload=()=>{window.PDFLib?(this.pdfLibLoaded=!0,console.log("\u2705 [PdfLibService] pdf-lib \uB85C\uB4DC \uC644\uB8CC"),t()):e(new Error("pdf-lib \uB85C\uB4DC \uC2E4\uD328"))},i.onerror=()=>e(new Error("pdf-lib \uC2A4\uD06C\uB9BD\uD2B8 \uB85C\uB4DC \uC2E4\uD328")),document.head.appendChild(i)})})}loadFontkit(){return P(this,null,function*(){if(!(this.fontkitLoaded&&window.fontkit))return new Promise((t,e)=>{if(window.fontkit){this.fontkitLoaded=!0,t();return}let i=document.createElement("script");i.src="https://unpkg.com/@pdf-lib/fontkit@1.1.1/dist/fontkit.umd.min.js",i.onload=()=>{window.fontkit?(this.fontkitLoaded=!0,console.log("\u2705 [PdfLibService] fontkit \uB85C\uB4DC \uC644\uB8CC"),t()):e(new Error("fontkit \uB85C\uB4DC \uC2E4\uD328"))},i.onerror=()=>e(new Error("fontkit \uC2A4\uD06C\uB9BD\uD2B8 \uB85C\uB4DC \uC2E4\uD328")),document.head.appendChild(i)})})}loadAll(){return P(this,null,function*(){yield this.loadPdfLib(),yield this.loadFontkit()})}getPDFLib(){return window.PDFLib}loadExistingPdf(t){return P(this,null,function*(){yield this.loadAll();let{PDFDocument:e}=this.getPDFLib(),i=yield e.load(t);return i.registerFontkit(window.fontkit),i})}createNewPdf(){return P(this,null,function*(){yield this.loadAll();let{PDFDocument:t}=this.getPDFLib(),e=yield t.create();return e.registerFontkit(window.fontkit),e})}embedFontForText(t,e){return P(this,null,function*(){let i=this.fontManager.detectLanguage(e);return console.log(`\u{1F4DD} [PdfLibService] \uAC10\uC9C0\uB41C \uC5B8\uC5B4: ${i}, \uD14D\uC2A4\uD2B8: "${e.substring(0,20)}..."`),yield this.fontManager.embedFontForPdf(t,i)})}embedFontForLanguage(t,e){return P(this,null,function*(){return yield this.fontManager.embedFontForPdf(t,e)})}rgb(t,e,i){let{rgb:n}=this.getPDFLib();return n(t,e,i)}degrees(t){let{degrees:e}=this.getPDFLib();return e(t)}hexToRgb(t){let e=t.replace("#","");return{r:parseInt(e.substring(0,2),16)/255,g:parseInt(e.substring(2,4),16)/255,b:parseInt(e.substring(4,6),16)/255}}drawWatermarkText(t,e,i){return P(this,null,function*(){let n=t.doc,o=yield this.embedFontForText(n,e),d=this.hexToRgb(i.color),h=this.rgb(d.r,d.g,d.b),_=o.widthOfTextAtSize(e,i.size);t.drawText(e,{x:i.x-_/2,y:i.y,size:i.size,font:o,color:h,opacity:i.opacity,rotate:this.degrees(i.rotation)})})}static \u0275fac=function(e){return new(e||s)};static \u0275prov=de({token:s,factory:s.\u0275fac,providedIn:"root"})};var Yt=[{id:"general",name:"\uC77C\uBC18 \uBB38\uC11C",description:"\uBCF5\uC0AC\uC640 \uC778\uC1C4\uB97C \uD5C8\uC6A9\uD558\uB294 \uC77C\uBC18 \uBB38\uC11C",config:{permissions:{printing:!0,modifying:!0,copying:!0,annotating:!0,fillingForms:!0,contentAccessibility:!0,documentAssembly:!0}}},{id:"confidential",name:"\uAE30\uBC00 \uBB38\uC11C",description:"\uBCF5\uC0AC\uC640 \uC778\uC1C4\uB97C \uAE08\uC9C0\uD558\uB294 \uAE30\uBC00 \uBB38\uC11C",config:{permissions:{printing:!1,modifying:!1,copying:!1,annotating:!1,fillingForms:!1,contentAccessibility:!0,documentAssembly:!1}}},{id:"readonly",name:"\uC5F4\uB78C \uC804\uC6A9",description:"\uBAA8\uB4E0 \uD3B8\uC9D1\uC744 \uAE08\uC9C0\uD558\uB294 \uC77D\uAE30 \uC804\uC6A9 \uBB38\uC11C",config:{permissions:{printing:!0,modifying:!1,copying:!1,annotating:!1,fillingForms:!1,contentAccessibility:!0,documentAssembly:!1}}},{id:"print-only",name:"\uC778\uC1C4 \uC804\uC6A9",description:"\uC778\uC1C4\uB9CC \uD5C8\uC6A9\uD558\uACE0 \uBAA8\uB4E0 \uD3B8\uC9D1\uC744 \uAE08\uC9C0",config:{permissions:{printing:!0,modifying:!1,copying:!1,annotating:!1,fillingForms:!1,contentAccessibility:!0,documentAssembly:!1}}}],at={printing:!0,modifying:!0,copying:!0,annotating:!0,fillingForms:!0,contentAccessibility:!0,documentAssembly:!0};function Gi(s,t){s&1&&(r(0,"span"),c(1,"\u{1F4C4}"),a())}function Qi(s,t){s&1&&(r(0,"span"),c(1,"\u{1F512}"),a())}function Yi(s,t){s&1&&(r(0,"span"),c(1,"\u{1F441}\uFE0F"),a())}function Ki(s,t){s&1&&(r(0,"span"),c(1,"\u{1F5A8}\uFE0F"),a())}function Xi(s,t){s&1&&(r(0,"div",25),c(1,"\u2713"),a())}function Zi(s,t){if(s&1){let e=y();r(0,"div",18),f("click",function(){let n=g(e).$implicit,o=p(2);return u(o.selectPreset(n.id))}),r(1,"div",19),M(2,Gi,2,0,"span",20)(3,Qi,2,0,"span",20)(4,Yi,2,0,"span",20)(5,Ki,2,0,"span",20),a(),r(6,"div",21)(7,"div",22),c(8),a(),r(9,"div",23),c(10),a()(),M(11,Xi,2,0,"div",24),a()}if(s&2){let e=t.$implicit,i=p(2);T("selected",i.selectedPresetId===e.id),l(2),m("ngIf",e.id==="general"),l(),m("ngIf",e.id==="confidential"),l(),m("ngIf",e.id==="readonly"),l(),m("ngIf",e.id==="print-only"),l(3),B(e.name),l(2),B(e.description),l(),m("ngIf",i.selectedPresetId===e.id)}}function Ji(s,t){if(s&1){let e=y();r(0,"div",26)(1,"div",27)(2,"div",28),c(3),a(),r(4,"div",29),c(5),a()(),r(6,"label",30)(7,"input",31),f("change",function(){let n=g(e).$implicit,o=p(2);return u(o.togglePermission(n))}),a(),b(8,"span",32),a()()}if(s&2){let e=t.$implicit,i=p(2);l(3),B(i.getPermissionLabel(e)),l(2),B(i.getPermissionDescription(e)),l(2),m("checked",i.customPermissions[e])}}function eo(s,t){if(s&1){let e=y();r(0,"div",1),f("click",function(){g(e);let n=p();return u(n.onClose())}),r(1,"div",2),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",3)(3,"h2"),c(4,"\uBB38\uC11C \uAD8C\uD55C \uC124\uC815"),a(),r(5,"button",4),f("click",function(){g(e);let n=p();return u(n.onClose())}),c(6,"\xD7"),a()(),r(7,"div",5)(8,"div",6)(9,"h3"),c(10,"\uD504\uB9AC\uC14B \uC120\uD0DD"),a(),r(11,"div",7),M(12,Zi,12,9,"div",8),a()(),r(13,"div",9)(14,"h3"),c(15,"\uC0C1\uC138 \uAD8C\uD55C \uC124\uC815"),a(),r(16,"div",10),M(17,Ji,9,3,"div",11),a()(),r(18,"div",12)(19,"span",13),c(20,"\u2139\uFE0F"),a(),r(21,"div",14)(22,"strong"),c(23,"\uC8FC\uC758:"),a(),c(24," \uC774 \uC124\uC815\uC740 \uBA54\uD0C0\uB370\uC774\uD130\uB85C\uB9CC \uC800\uC7A5\uB429\uB2C8\uB2E4. \uC2E4\uC81C PDF \uC554\uD638\uD654\uB294 \uC11C\uBC84 \uC0AC\uC774\uB4DC\uC5D0\uC11C \uCC98\uB9AC\uB429\uB2C8\uB2E4. "),a()()(),r(25,"div",15)(26,"button",16),f("click",function(){g(e);let n=p();return u(n.onClose())}),c(27,"\uCDE8\uC18C"),a(),r(28,"button",17),f("click",function(){g(e);let n=p();return u(n.onConfirm())}),c(29,"\uC801\uC6A9"),a()()()()}if(s&2){let e=p();l(12),m("ngForOf",e.presets),l(5),m("ngForOf",e.getPermissionKeys())}}var st=class s{close=new D;confirm=new D;isVisible=!1;selectedPresetId=null;customPermissions=ce({},at);presets=Yt;open(){this.isVisible=!0,this.selectedPresetId=null,this.customPermissions=ce({},at)}selectPreset(t){this.selectedPresetId=t;let e=this.presets.find(i=>i.id===t);e&&(this.customPermissions=ce({},e.config.permissions))}togglePermission(t){this.customPermissions[t]=!this.customPermissions[t],this.selectedPresetId=null}onConfirm(){if(!Object.values(this.customPermissions).some(e=>e)){alert("\uCD5C\uC18C \uD558\uB098\uC758 \uAD8C\uD55C\uC740 \uD5C8\uC6A9\uB418\uC5B4\uC57C \uD569\uB2C8\uB2E4.");return}this.confirm.emit(ce({},this.customPermissions)),this.isVisible=!1}onClose(){this.close.emit(),this.isVisible=!1}getPermissionLabel(t){return{printing:"\uC778\uC1C4",modifying:"\uC218\uC815",copying:"\uBCF5\uC0AC",annotating:"\uC8FC\uC11D \uCD94\uAC00",fillingForms:"\uC591\uC2DD \uC791\uC131",contentAccessibility:"\uC811\uADFC\uC131",documentAssembly:"\uBB38\uC11C \uC870\uB9BD"}[t]}getPermissionDescription(t){return{printing:"PDF \uC778\uC1C4 \uD5C8\uC6A9",modifying:"PDF \uB0B4\uC6A9 \uC218\uC815 \uD5C8\uC6A9",copying:"\uD14D\uC2A4\uD2B8 \uBC0F \uC774\uBBF8\uC9C0 \uBCF5\uC0AC \uD5C8\uC6A9",annotating:"\uC8FC\uC11D \uBC0F \uB9C8\uD06C\uC5C5 \uCD94\uAC00 \uD5C8\uC6A9",fillingForms:"\uC591\uC2DD \uD544\uB4DC \uC791\uC131 \uD5C8\uC6A9",contentAccessibility:"\uD654\uBA74 \uC77D\uAE30 \uD504\uB85C\uADF8\uB7A8 \uC811\uADFC \uD5C8\uC6A9",documentAssembly:"\uD398\uC774\uC9C0 \uC0BD\uC785, \uC0AD\uC81C, \uD68C\uC804 \uD5C8\uC6A9"}[t]}getPermissionKeys(){return["printing","copying","modifying","annotating","fillingForms","documentAssembly","contentAccessibility"]}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-pdf-lock-modal"]],outputs:{close:"close",confirm:"confirm"},standalone:!1,decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"close-button",3,"click"],[1,"modal-content"],[1,"presets-section"],[1,"preset-cards"],["class","preset-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"permissions-section"],[1,"permission-list"],["class","permission-item",4,"ngFor","ngForOf"],[1,"info-box"],[1,"info-icon"],[1,"info-text"],[1,"modal-footer"],[1,"cancel-button",3,"click"],[1,"confirm-button",3,"click"],[1,"preset-card",3,"click"],[1,"preset-icon"],[4,"ngIf"],[1,"preset-info"],[1,"preset-name"],[1,"preset-description"],["class","check-icon",4,"ngIf"],[1,"check-icon"],[1,"permission-item"],[1,"permission-info"],[1,"permission-label"],[1,"permission-description"],[1,"toggle-switch"],["type","checkbox",3,"change","checked"],[1,"slider"]],template:function(e,i){e&1&&M(0,eo,30,2,"div",0),e&2&&m("ngIf",i.isVisible)},dependencies:[$,R],styles:['@charset "UTF-8";.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:90%;max-width:700px;max-height:85vh;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.modal-header[_ngcontent-%COMP%]{padding:24px 28px;border-bottom:1px solid #eee;display:flex;align-items:center;justify-content:space-between}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:600;color:#1a1a1a}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{width:32px;height:32px;border:none;background:#f5f5f5;border-radius:50%;font-size:24px;color:#666;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background:#e0e0e0;color:#333}.modal-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:24px 28px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f5f5;border-radius:4px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:silver;border-radius:4px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a0a0a0}.presets-section[_ngcontent-%COMP%]{margin-bottom:32px}.presets-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600;color:#333}.preset-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.preset-card[_ngcontent-%COMP%]{padding:16px;border:2px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:12px;position:relative;background:#fff}.preset-card[_ngcontent-%COMP%]:hover{border-color:#4caf50;box-shadow:0 2px 8px #4caf5026}.preset-card.selected[_ngcontent-%COMP%]{border-color:#4caf50;background:#f1f8f4;box-shadow:0 2px 8px #4caf5033}.preset-card[_ngcontent-%COMP%]   .preset-icon[_ngcontent-%COMP%]{font-size:32px;flex-shrink:0}.preset-card[_ngcontent-%COMP%]   .preset-info[_ngcontent-%COMP%]{flex:1}.preset-card[_ngcontent-%COMP%]   .preset-info[_ngcontent-%COMP%]   .preset-name[_ngcontent-%COMP%]{font-weight:600;font-size:15px;color:#1a1a1a;margin-bottom:4px}.preset-card[_ngcontent-%COMP%]   .preset-info[_ngcontent-%COMP%]   .preset-description[_ngcontent-%COMP%]{font-size:13px;color:#666;line-height:1.4}.preset-card[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;width:24px;height:24px;background:#4caf50;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700}.permissions-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600;color:#333}.permission-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.permission-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:#f8f9fa;border-radius:8px;transition:background .2s}.permission-item[_ngcontent-%COMP%]:hover{background:#f0f2f5}.permission-item[_ngcontent-%COMP%]   .permission-info[_ngcontent-%COMP%]{flex:1}.permission-item[_ngcontent-%COMP%]   .permission-info[_ngcontent-%COMP%]   .permission-label[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#1a1a1a;margin-bottom:4px}.permission-item[_ngcontent-%COMP%]   .permission-info[_ngcontent-%COMP%]   .permission-description[_ngcontent-%COMP%]{font-size:12px;color:#666}.toggle-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:48px;height:26px;flex-shrink:0}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#4caf50}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(22px)}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.3s;border-radius:26px}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%;box-shadow:0 2px 4px #0003}.info-box[_ngcontent-%COMP%]{margin-top:20px;padding:14px 16px;background:#fff3cd;border:1px solid #ffc107;border-radius:8px;display:flex;align-items:flex-start;gap:12px}.info-box[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.info-box[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{flex:1;font-size:13px;color:#856404;line-height:1.5}.info-box[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.modal-footer[_ngcontent-%COMP%]{padding:20px 28px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:12px}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.modal-footer[_ngcontent-%COMP%]   button.cancel-button[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.modal-footer[_ngcontent-%COMP%]   button.cancel-button[_ngcontent-%COMP%]:hover{background:#e0e0e0}.modal-footer[_ngcontent-%COMP%]   button.confirm-button[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.modal-footer[_ngcontent-%COMP%]   button.confirm-button[_ngcontent-%COMP%]:hover{background:#45a049;box-shadow:0 4px 12px #4caf504d}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width: 768px){.preset-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-container[_ngcontent-%COMP%]{width:95%;max-height:90vh}}']})};function io(s,t){s&1&&(r(0,"span",27),c(1,"\u2713"),a())}function oo(s,t){s&1&&(r(0,"span",28),c(1,"\u2717"),a())}function ro(s,t){if(s&1&&(r(0,"span",24),M(1,io,2,0,"span",25)(2,oo,2,0,"span",26),a()),s&2){let e=p(3);l(),m("ngIf",e.userPassword===e.userPasswordConfirm),l(),m("ngIf",e.userPassword!==e.userPasswordConfirm)}}function ao(s,t){if(s&1){let e=y();r(0,"div",11)(1,"input",22),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.userPasswordConfirm,n)||(o.userPasswordConfirm=n),u(n)}),a(),M(2,ro,3,2,"span",23),a()}if(s&2){let e=p(2);l(),T("error",e.userPasswordConfirm&&e.userPassword!==e.userPasswordConfirm),m("type",e.showUserPassword?"text":"password"),O("ngModel",e.userPasswordConfirm),l(),m("ngIf",e.userPasswordConfirm)}}function so(s,t){if(s&1&&(r(0,"div",29)(1,"div",30),b(2,"div",31),a(),r(3,"div",32)(4,"span",33),c(5),a(),r(6,"span",34),c(7),a()()()),s&2){let e=p(2);l(2),pe("width",e.userPasswordStrength.score,"%")("background-color",e.getStrengthColor(e.userPasswordStrength.strength)),l(2),pe("color",e.getStrengthColor(e.userPasswordStrength.strength)),l(),I(" ",e.getStrengthLabel(e.userPasswordStrength.strength)," "),l(2),B(e.userPasswordStrength.message)}}function lo(s,t){s&1&&(r(0,"span",27),c(1,"\u2713"),a())}function co(s,t){s&1&&(r(0,"span",28),c(1,"\u2717"),a())}function po(s,t){if(s&1&&(r(0,"span",24),M(1,lo,2,0,"span",25)(2,co,2,0,"span",26),a()),s&2){let e=p(3);l(),m("ngIf",e.ownerPassword===e.ownerPasswordConfirm),l(),m("ngIf",e.ownerPassword!==e.ownerPasswordConfirm)}}function go(s,t){if(s&1){let e=y();r(0,"div",11)(1,"input",22),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.ownerPasswordConfirm,n)||(o.ownerPasswordConfirm=n),u(n)}),a(),M(2,po,3,2,"span",23),a()}if(s&2){let e=p(2);l(),T("error",e.ownerPasswordConfirm&&e.ownerPassword!==e.ownerPasswordConfirm),m("type",e.showOwnerPassword?"text":"password"),O("ngModel",e.ownerPasswordConfirm),l(),m("ngIf",e.ownerPasswordConfirm)}}function uo(s,t){if(s&1&&(r(0,"div",29)(1,"div",30),b(2,"div",31),a(),r(3,"div",32)(4,"span",33),c(5),a(),r(6,"span",34),c(7),a()()()),s&2){let e=p(2);l(2),pe("width",e.ownerPasswordStrength.score,"%")("background-color",e.getStrengthColor(e.ownerPasswordStrength.strength)),l(2),pe("color",e.getStrengthColor(e.ownerPasswordStrength.strength)),l(),I(" ",e.getStrengthLabel(e.ownerPasswordStrength.strength)," "),l(2),B(e.ownerPasswordStrength.message)}}function mo(s,t){if(s&1){let e=y();r(0,"div",1),f("click",function(){g(e);let n=p();return u(n.onClose())}),r(1,"div",2),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",3)(3,"h2"),c(4,"\uBE44\uBC00\uBC88\uD638 \uC124\uC815"),a(),r(5,"button",4),f("click",function(){g(e);let n=p();return u(n.onClose())}),c(6,"\xD7"),a()(),r(7,"div",5)(8,"div",6)(9,"div",7),c(10,"\u{1F510}"),a(),r(11,"div",8)(12,"p")(13,"strong"),c(14,"\uC0AC\uC6A9\uC790 \uBE44\uBC00\uBC88\uD638:"),a(),c(15," PDF\uB97C \uC5F4 \uB54C \uD544\uC694\uD55C \uBE44\uBC00\uBC88\uD638"),a(),r(16,"p")(17,"strong"),c(18,"\uC18C\uC720\uC790 \uBE44\uBC00\uBC88\uD638:"),a(),c(19," \uAD8C\uD55C \uC124\uC815\uC744 \uBCC0\uACBD\uD560 \uB54C \uD544\uC694\uD55C \uBE44\uBC00\uBC88\uD638"),a()()(),r(20,"div",9)(21,"h3"),c(22,"\uC0AC\uC6A9\uC790 \uBE44\uBC00\uBC88\uD638 (\uC120\uD0DD)"),a(),r(23,"div",10)(24,"div",11)(25,"input",12),k("ngModelChange",function(n){g(e);let o=p();return S(o.userPassword,n)||(o.userPassword=n),u(n)}),f("input",function(){g(e);let n=p();return u(n.onUserPasswordChange())}),a(),r(26,"button",13),f("click",function(){g(e);let n=p();return u(n.toggleUserPasswordVisibility())}),c(27),a()(),M(28,ao,3,5,"div",14),a(),M(29,so,8,8,"div",15),a(),r(30,"div",9)(31,"h3"),c(32,"\uC18C\uC720\uC790 \uBE44\uBC00\uBC88\uD638 (\uC120\uD0DD)"),a(),r(33,"div",10)(34,"div",11)(35,"input",12),k("ngModelChange",function(n){g(e);let o=p();return S(o.ownerPassword,n)||(o.ownerPassword=n),u(n)}),f("input",function(){g(e);let n=p();return u(n.onOwnerPasswordChange())}),a(),r(36,"button",13),f("click",function(){g(e);let n=p();return u(n.toggleOwnerPasswordVisibility())}),c(37),a()(),M(38,go,3,5,"div",14),a(),M(39,uo,8,8,"div",15),a(),r(40,"div",16)(41,"span",17),c(42,"\u26A0\uFE0F"),a(),r(43,"div",18),c(44," \uBE44\uBC00\uBC88\uD638\uB97C \uBD84\uC2E4\uD558\uBA74 \uBB38\uC11C\uB97C \uBCF5\uAD6C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uC548\uC804\uD55C \uACF3\uC5D0 \uBE44\uBC00\uBC88\uD638\uB97C \uBCF4\uAD00\uD558\uC138\uC694. "),a()()(),r(45,"div",19)(46,"button",20),f("click",function(){g(e);let n=p();return u(n.onClose())}),c(47,"\uCDE8\uC18C"),a(),r(48,"button",21),f("click",function(){g(e);let n=p();return u(n.onConfirm())}),c(49,"\uC124\uC815"),a()()()()}if(s&2){let e=p();l(25),m("type",e.showUserPassword?"text":"password"),O("ngModel",e.userPassword),l(2),I(" ",e.showUserPassword?"\u{1F441}\uFE0F":"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F"," "),l(),m("ngIf",e.userPassword),l(),m("ngIf",e.userPasswordStrength),l(6),m("type",e.showOwnerPassword?"text":"password"),O("ngModel",e.ownerPassword),l(2),I(" ",e.showOwnerPassword?"\u{1F441}\uFE0F":"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F"," "),l(),m("ngIf",e.ownerPassword),l(),m("ngIf",e.ownerPasswordStrength)}}var lt=class s{constructor(t){this.securityService=t}close=new D;confirm=new D;isVisible=!1;userPassword="";userPasswordConfirm="";ownerPassword="";ownerPasswordConfirm="";showUserPassword=!1;showOwnerPassword=!1;userPasswordStrength=null;ownerPasswordStrength=null;open(){this.isVisible=!0,this.reset()}reset(){this.userPassword="",this.userPasswordConfirm="",this.ownerPassword="",this.ownerPasswordConfirm="",this.showUserPassword=!1,this.showOwnerPassword=!1,this.userPasswordStrength=null,this.ownerPasswordStrength=null}onUserPasswordChange(){this.userPassword?this.userPasswordStrength=this.securityService.validatePasswordStrength(this.userPassword):this.userPasswordStrength=null}onOwnerPasswordChange(){this.ownerPassword?this.ownerPasswordStrength=this.securityService.validatePasswordStrength(this.ownerPassword):this.ownerPasswordStrength=null}toggleUserPasswordVisibility(){this.showUserPassword=!this.showUserPassword}toggleOwnerPasswordVisibility(){this.showOwnerPassword=!this.showOwnerPassword}getStrengthColor(t){switch(t){case"strong":return"#4CAF50";case"medium":return"#FF9800";case"weak":return"#f44336";default:return"#ccc"}}getStrengthLabel(t){switch(t){case"strong":return"\uAC15\uD568";case"medium":return"\uBCF4\uD1B5";case"weak":return"\uC57D\uD568";default:return""}}validateForm(){if(!this.userPassword&&!this.ownerPassword)return{isValid:!1,error:"\uCD5C\uC18C \uD558\uB098\uC758 \uBE44\uBC00\uBC88\uD638\uB97C \uC124\uC815\uD574\uC8FC\uC138\uC694."};if(this.userPassword){if(!this.userPasswordStrength||!this.userPasswordStrength.isValid)return{isValid:!1,error:`\uC0AC\uC6A9\uC790 \uBE44\uBC00\uBC88\uD638: ${this.userPasswordStrength?.message||"\uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uBE44\uBC00\uBC88\uD638"}`};if(this.userPassword!==this.userPasswordConfirm)return{isValid:!1,error:"\uC0AC\uC6A9\uC790 \uBE44\uBC00\uBC88\uD638\uAC00 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4."}}if(this.ownerPassword){if(!this.ownerPasswordStrength||!this.ownerPasswordStrength.isValid)return{isValid:!1,error:`\uC18C\uC720\uC790 \uBE44\uBC00\uBC88\uD638: ${this.ownerPasswordStrength?.message||"\uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uBE44\uBC00\uBC88\uD638"}`};if(this.ownerPassword!==this.ownerPasswordConfirm)return{isValid:!1,error:"\uC18C\uC720\uC790 \uBE44\uBC00\uBC88\uD638\uAC00 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4."}}return{isValid:!0}}onConfirm(){let t=this.validateForm();if(!t.isValid){alert(t.error);return}let e={};this.userPassword&&(e.userPassword=this.userPassword),this.ownerPassword&&(e.ownerPassword=this.ownerPassword),this.confirm.emit(e),this.isVisible=!1}onClose(){this.close.emit(),this.isVisible=!1}static \u0275fac=function(e){return new(e||s)(N(Wt))};static \u0275cmp=F({type:s,selectors:[["app-pdf-password-modal"]],outputs:{close:"close",confirm:"confirm"},standalone:!1,decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"close-button",3,"click"],[1,"modal-content"],[1,"info-section"],[1,"info-icon"],[1,"info-text"],[1,"password-section"],[1,"password-input-group"],[1,"input-wrapper"],["placeholder","\uBE44\uBC00\uBC88\uD638 \uC785\uB825 (\uCD5C\uC18C 6\uC790)",1,"password-input",3,"ngModelChange","input","type","ngModel"],["type","button",1,"toggle-visibility",3,"click"],["class","input-wrapper",4,"ngIf"],["class","strength-indicator",4,"ngIf"],[1,"warning-box"],[1,"warning-icon"],[1,"warning-text"],[1,"modal-footer"],[1,"cancel-button",3,"click"],[1,"confirm-button",3,"click"],["placeholder","\uBE44\uBC00\uBC88\uD638 \uD655\uC778",1,"password-input",3,"ngModelChange","type","ngModel"],["class","match-indicator",4,"ngIf"],[1,"match-indicator"],["class","match",4,"ngIf"],["class","mismatch",4,"ngIf"],[1,"match"],[1,"mismatch"],[1,"strength-indicator"],[1,"strength-bar"],[1,"strength-fill"],[1,"strength-info"],[1,"strength-label"],[1,"strength-message"]],template:function(e,i){e&1&&M(0,mo,50,10,"div",0),e&2&&m("ngIf",i.isVisible)},dependencies:[R,G,Q,Y],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:90%;max-width:600px;max-height:85vh;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.modal-header[_ngcontent-%COMP%]{padding:24px 28px;border-bottom:1px solid #eee;display:flex;align-items:center;justify-content:space-between}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:600;color:#1a1a1a}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{width:32px;height:32px;border:none;background:#f5f5f5;border-radius:50%;font-size:24px;color:#666;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background:#e0e0e0;color:#333}.modal-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:24px 28px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f5f5;border-radius:4px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:silver;border-radius:4px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a0a0a0}.info-section[_ngcontent-%COMP%]{display:flex;gap:16px;padding:16px;background:#e3f2fd;border-radius:12px;margin-bottom:24px}.info-section[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:32px;flex-shrink:0}.info-section[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{flex:1}.info-section[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:13px;color:#1565c0;line-height:1.5}.info-section[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.info-section[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.password-section[_ngcontent-%COMP%]{margin-bottom:28px}.password-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;font-weight:600;color:#333}.password-input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]{flex:1;padding:12px 40px 12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;transition:all .2s}.input-wrapper[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 0 3px #2196f31a}.input-wrapper[_ngcontent-%COMP%]   .password-input.error[_ngcontent-%COMP%]{border-color:#f44336}.input-wrapper[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]::placeholder{color:#999}.input-wrapper[_ngcontent-%COMP%]   .toggle-visibility[_ngcontent-%COMP%]{position:absolute;right:12px;background:none;border:none;font-size:18px;cursor:pointer;padding:4px;opacity:.6;transition:opacity .2s}.input-wrapper[_ngcontent-%COMP%]   .toggle-visibility[_ngcontent-%COMP%]:hover{opacity:1}.input-wrapper[_ngcontent-%COMP%]   .match-indicator[_ngcontent-%COMP%]{position:absolute;right:12px;font-size:16px}.input-wrapper[_ngcontent-%COMP%]   .match-indicator[_ngcontent-%COMP%]   .match[_ngcontent-%COMP%]{color:#4caf50}.input-wrapper[_ngcontent-%COMP%]   .match-indicator[_ngcontent-%COMP%]   .mismatch[_ngcontent-%COMP%]{color:#f44336}.strength-indicator[_ngcontent-%COMP%]{margin-top:8px}.strength-indicator[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]{height:6px;background:#e0e0e0;border-radius:3px;overflow:hidden;margin-bottom:8px}.strength-indicator[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]   .strength-fill[_ngcontent-%COMP%]{height:100%;transition:all .3s ease;border-radius:3px}.strength-indicator[_ngcontent-%COMP%]   .strength-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:12px}.strength-indicator[_ngcontent-%COMP%]   .strength-info[_ngcontent-%COMP%]   .strength-label[_ngcontent-%COMP%]{font-weight:600}.strength-indicator[_ngcontent-%COMP%]   .strength-info[_ngcontent-%COMP%]   .strength-message[_ngcontent-%COMP%]{color:#666}.warning-box[_ngcontent-%COMP%]{margin-top:20px;padding:14px 16px;background:#fff3cd;border:1px solid #ffc107;border-radius:8px;display:flex;align-items:flex-start;gap:12px}.warning-box[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.warning-box[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{flex:1;font-size:13px;color:#856404;line-height:1.5}.modal-footer[_ngcontent-%COMP%]{padding:20px 28px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:12px}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.modal-footer[_ngcontent-%COMP%]   button.cancel-button[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.modal-footer[_ngcontent-%COMP%]   button.cancel-button[_ngcontent-%COMP%]:hover{background:#e0e0e0}.modal-footer[_ngcontent-%COMP%]   button.confirm-button[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.modal-footer[_ngcontent-%COMP%]   button.confirm-button[_ngcontent-%COMP%]:hover{background:#1976d2;box-shadow:0 4px 12px #2196f34d}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{width:95%;max-height:90vh}}"]})};var ho=()=>["RC4","AES-128","AES-256"];function _o(s,t){s&1&&(r(0,"span"),c(1,"\u{1F4C4}"),a())}function Co(s,t){s&1&&(r(0,"span"),c(1,"\u{1F512}"),a())}function bo(s,t){s&1&&(r(0,"span"),c(1,"\u{1F441}\uFE0F"),a())}function xo(s,t){s&1&&(r(0,"span"),c(1,"\u{1F5A8}\uFE0F"),a())}function Po(s,t){s&1&&(r(0,"div",25),c(1,"\u2713"),a())}function vo(s,t){if(s&1){let e=y();r(0,"div",18),f("click",function(){let n=g(e).$implicit,o=p(3);return u(o.selectPreset(n.id))}),r(1,"div",19),M(2,_o,2,0,"span",20)(3,Co,2,0,"span",20)(4,bo,2,0,"span",20)(5,xo,2,0,"span",20),a(),r(6,"div",21)(7,"div",22),c(8),a(),r(9,"div",23),c(10),a()(),M(11,Po,2,0,"div",24),a()}if(s&2){let e=t.$implicit,i=p(3);T("selected",i.selectedPresetId===e.id),l(2),m("ngIf",e.id==="general"),l(),m("ngIf",e.id==="confidential"),l(),m("ngIf",e.id==="readonly"),l(),m("ngIf",e.id==="print-only"),l(3),B(e.name),l(2),B(e.description),l(),m("ngIf",i.selectedPresetId===e.id)}}function wo(s,t){if(s&1&&(r(0,"div",15)(1,"div",16),M(2,vo,12,9,"div",17),a()()),s&2){let e=p(2);l(2),m("ngForOf",e.presets)}}function Mo(s,t){if(s&1){let e=y();r(0,"div",28)(1,"div",29),c(2),a(),r(3,"label",30)(4,"input",31),f("change",function(){let n=g(e).$implicit,o=p(3);return u(o.togglePermission(n))}),a(),b(5,"span",32),a()()}if(s&2){let e=t.$implicit,i=p(3);l(2),B(i.getPermissionLabel(e)),l(2),m("checked",i.permissions[e])}}function yo(s,t){if(s&1&&(r(0,"div",15)(1,"div",26),M(2,Mo,6,2,"div",27),a()()),s&2){let e=p(2);l(2),m("ngForOf",e.getPermissionKeys())}}function Oo(s,t){if(s&1){let e=y();r(0,"label",40)(1,"input",41),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.encryptionAlgorithm,n)||(o.encryptionAlgorithm=n),u(n)}),a(),r(2,"span",42),c(3),a()()}if(s&2){let e=t.$implicit,i=p(3);T("selected",i.encryptionAlgorithm===e),l(),m("value",e),O("ngModel",i.encryptionAlgorithm),l(2),B(i.getAlgorithmLabel(e))}}function So(s,t){if(s&1){let e=y();r(0,"div",15)(1,"div",33)(2,"div",34)(3,"label"),c(4,"\uC0AC\uC6A9\uC790 \uBE44\uBC00\uBC88\uD638 (\uC5F4\uB78C)"),a(),r(5,"input",35),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.userPassword,n)||(o.userPassword=n),u(n)}),a()(),r(6,"div",34)(7,"label"),c(8,"\uC18C\uC720\uC790 \uBE44\uBC00\uBC88\uD638 (\uAD8C\uD55C)"),a(),r(9,"input",36),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.ownerPassword,n)||(o.ownerPassword=n),u(n)}),a()(),r(10,"div",37)(11,"label"),c(12,"\uC554\uD638\uD654 \uC54C\uACE0\uB9AC\uC998"),a(),r(13,"div",38),M(14,Oo,4,5,"label",39),a()()()()}if(s&2){let e=p(2);l(5),O("ngModel",e.userPassword),l(4),O("ngModel",e.ownerPassword),l(5),m("ngForOf",Xe(3,ho))}}function ko(s,t){if(s&1){let e=y();r(0,"div",1),f("click",function(){g(e);let n=p();return u(n.onClose())}),r(1,"div",2),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",3)(3,"h2"),c(4,"\uBCF4\uC548 \uC124\uC815"),a(),r(5,"button",4),f("click",function(){g(e);let n=p();return u(n.onClose())}),c(6,"\xD7"),a()(),r(7,"div",5)(8,"button",6),f("click",function(){g(e);let n=p();return u(n.selectTab("preset"))}),c(9," \u{1F4CB} \uD504\uB9AC\uC14B "),a(),r(10,"button",6),f("click",function(){g(e);let n=p();return u(n.selectTab("permissions"))}),c(11," \u{1F510} \uAD8C\uD55C "),a(),r(12,"button",6),f("click",function(){g(e);let n=p();return u(n.selectTab("password"))}),c(13," \u{1F511} \uBE44\uBC00\uBC88\uD638 "),a()(),r(14,"div",7),M(15,wo,3,1,"div",8)(16,yo,3,1,"div",8)(17,So,15,4,"div",8),r(18,"div",9)(19,"div",10),c(20,"\uD604\uC7AC \uC124\uC815"),a(),r(21,"div",11),c(22),a()()(),r(23,"div",12)(24,"button",13),f("click",function(){g(e);let n=p();return u(n.onClose())}),c(25,"\uCDE8\uC18C"),a(),r(26,"button",14),f("click",function(){g(e);let n=p();return u(n.onConfirm())}),c(27,"\uC801\uC6A9"),a()()()()}if(s&2){let e=p();l(8),T("active",e.activeTab==="preset"),l(2),T("active",e.activeTab==="permissions"),l(2),T("active",e.activeTab==="password"),l(3),m("ngIf",e.activeTab==="preset"),l(),m("ngIf",e.activeTab==="permissions"),l(),m("ngIf",e.activeTab==="password"),l(5),B(e.getSummary())}}var ct=class s{close=new D;confirm=new D;isVisible=!1;activeTab="preset";selectedPresetId=null;presets=Yt;permissions=ce({},at);userPassword="";ownerPassword="";encryptionAlgorithm="AES-256";open(){this.isVisible=!0,this.reset()}reset(){this.activeTab="preset",this.selectedPresetId=null,this.permissions=ce({},at),this.userPassword="",this.ownerPassword="",this.encryptionAlgorithm="AES-256"}selectTab(t){this.activeTab=t}selectPreset(t){this.selectedPresetId=t;let e=this.presets.find(i=>i.id===t);e&&(this.permissions=ce({},e.config.permissions))}togglePermission(t){this.permissions[t]=!this.permissions[t],this.selectedPresetId=null}getPermissionKeys(){return["printing","copying","modifying","annotating","fillingForms","documentAssembly","contentAccessibility"]}onConfirm(){if(!Object.values(this.permissions).some(i=>i)){alert("\uCD5C\uC18C \uD558\uB098\uC758 \uAD8C\uD55C\uC740 \uD5C8\uC6A9\uB418\uC5B4\uC57C \uD569\uB2C8\uB2E4.");return}let e={permissions:ce({},this.permissions),encryptionAlgorithm:this.encryptionAlgorithm};(this.userPassword||this.ownerPassword)&&(e.passwords={},this.userPassword&&(e.passwords.userPassword=this.userPassword),this.ownerPassword&&(e.passwords.ownerPassword=this.ownerPassword)),this.confirm.emit(e),this.isVisible=!1}onClose(){this.close.emit(),this.isVisible=!1}getPermissionLabel(t){return{printing:"\uC778\uC1C4",modifying:"\uC218\uC815",copying:"\uBCF5\uC0AC",annotating:"\uC8FC\uC11D \uCD94\uAC00",fillingForms:"\uC591\uC2DD \uC791\uC131",contentAccessibility:"\uC811\uADFC\uC131",documentAssembly:"\uBB38\uC11C \uC870\uB9BD"}[t]||t}getAlgorithmLabel(t){return{RC4:"RC4 (40-bit, \uB0AE\uC740 \uBCF4\uC548)","AES-128":"AES-128 (\uC911\uAC04 \uBCF4\uC548)","AES-256":"AES-256 (\uB192\uC740 \uBCF4\uC548, \uAD8C\uC7A5)"}[t]||t}getSummary(){let t=[];if(this.selectedPresetId){let e=this.presets.find(i=>i.id===this.selectedPresetId);e&&t.push(`\uD504\uB9AC\uC14B: ${e.name}`)}return(this.userPassword||this.ownerPassword)&&(this.userPassword&&t.push("\uC0AC\uC6A9\uC790 \uBE44\uBC00\uBC88\uD638 \uC124\uC815\uB428"),this.ownerPassword&&t.push("\uC18C\uC720\uC790 \uBE44\uBC00\uBC88\uD638 \uC124\uC815\uB428")),t.push(`\uC554\uD638\uD654: ${this.encryptionAlgorithm}`),t.join(" \xB7 ")}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-pdf-security-settings"]],outputs:{close:"close",confirm:"confirm"},standalone:!1,decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"close-button",3,"click"],[1,"tabs"],[1,"tab",3,"click"],[1,"modal-content"],["class","tab-content",4,"ngIf"],[1,"summary-box"],[1,"summary-title"],[1,"summary-content"],[1,"modal-footer"],[1,"cancel-button",3,"click"],[1,"confirm-button",3,"click"],[1,"tab-content"],[1,"preset-cards"],["class","preset-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"preset-card",3,"click"],[1,"preset-icon"],[4,"ngIf"],[1,"preset-info"],[1,"preset-name"],[1,"preset-description"],["class","check-icon",4,"ngIf"],[1,"check-icon"],[1,"permission-list"],["class","permission-item",4,"ngFor","ngForOf"],[1,"permission-item"],[1,"permission-label"],[1,"toggle-switch"],["type","checkbox",3,"change","checked"],[1,"slider"],[1,"password-section"],[1,"password-group"],["type","password","placeholder","\uBB38\uC11C \uC5F4\uB78C \uC2DC \uD544\uC694\uD55C \uBE44\uBC00\uBC88\uD638",1,"password-input",3,"ngModelChange","ngModel"],["type","password","placeholder","\uAD8C\uD55C \uBCC0\uACBD \uC2DC \uD544\uC694\uD55C \uBE44\uBC00\uBC88\uD638",1,"password-input",3,"ngModelChange","ngModel"],[1,"encryption-group"],[1,"algorithm-options"],["class","radio-option",3,"selected",4,"ngFor","ngForOf"],[1,"radio-option"],["type","radio","name","algorithm",3,"ngModelChange","value","ngModel"],[1,"radio-label"]],template:function(e,i){e&1&&M(0,ko,28,10,"div",0),e&2&&m("ngIf",i.isVisible)},dependencies:[$,R,G,Oe,Q,Y],styles:['@charset "UTF-8";.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:90%;max-width:800px;max-height:85vh;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.modal-header[_ngcontent-%COMP%]{padding:24px 28px;border-bottom:1px solid #eee;display:flex;align-items:center;justify-content:space-between}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:600;color:#1a1a1a}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{width:32px;height:32px;border:none;background:#f5f5f5;border-radius:50%;font-size:24px;color:#666;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background:#e0e0e0;color:#333}.tabs[_ngcontent-%COMP%]{display:flex;border-bottom:2px solid #f0f0f0;background:#fafafa}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:1;padding:16px 20px;border:none;background:none;font-size:14px;font-weight:500;color:#666;cursor:pointer;transition:all .2s;border-bottom:3px solid transparent;position:relative;top:2px}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:#333}.tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#2196f3;background:#fff;border-bottom-color:#2196f3}.modal-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:24px 28px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f5f5;border-radius:4px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:silver;border-radius:4px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a0a0a0}.tab-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.preset-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.preset-card[_ngcontent-%COMP%]{padding:16px;border:2px solid #e0e0e0;border-radius:12px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:12px;position:relative;background:#fff}.preset-card[_ngcontent-%COMP%]:hover{border-color:#2196f3;box-shadow:0 2px 8px #2196f326}.preset-card.selected[_ngcontent-%COMP%]{border-color:#2196f3;background:#e3f2fd;box-shadow:0 2px 8px #2196f333}.preset-card[_ngcontent-%COMP%]   .preset-icon[_ngcontent-%COMP%]{font-size:32px;flex-shrink:0}.preset-card[_ngcontent-%COMP%]   .preset-info[_ngcontent-%COMP%]{flex:1}.preset-card[_ngcontent-%COMP%]   .preset-info[_ngcontent-%COMP%]   .preset-name[_ngcontent-%COMP%]{font-weight:600;font-size:15px;color:#1a1a1a;margin-bottom:4px}.preset-card[_ngcontent-%COMP%]   .preset-info[_ngcontent-%COMP%]   .preset-description[_ngcontent-%COMP%]{font-size:13px;color:#666;line-height:1.4}.preset-card[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;width:24px;height:24px;background:#2196f3;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700}.permission-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.permission-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:#f8f9fa;border-radius:8px;transition:background .2s}.permission-item[_ngcontent-%COMP%]:hover{background:#f0f2f5}.permission-item[_ngcontent-%COMP%]   .permission-label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#1a1a1a}.toggle-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:48px;height:26px;flex-shrink:0}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(22px)}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.3s;border-radius:26px}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%;box-shadow:0 2px 4px #0003}.password-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.password-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .encryption-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;font-size:14px;color:#333}.password-group[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%], .encryption-group[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;transition:all .2s}.password-group[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]:focus, .encryption-group[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 0 3px #2196f31a}.password-group[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]::placeholder, .encryption-group[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]::placeholder{color:#999}.algorithm-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.radio-option[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .2s}.radio-option[_ngcontent-%COMP%]:hover{border-color:#2196f3;background:#f8f9fa}.radio-option.selected[_ngcontent-%COMP%]{border-color:#2196f3;background:#e3f2fd}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:12px;width:18px;height:18px;cursor:pointer}.radio-option[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{font-size:14px;color:#333}.summary-box[_ngcontent-%COMP%]{margin-top:20px;padding:16px;background:#f0f7ff;border:2px solid #2196F3;border-radius:8px}.summary-box[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{font-weight:600;font-size:13px;color:#1565c0;margin-bottom:8px}.summary-box[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]{font-size:14px;color:#1976d2;line-height:1.5}.modal-footer[_ngcontent-%COMP%]{padding:20px 28px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:12px}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.modal-footer[_ngcontent-%COMP%]   button.cancel-button[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.modal-footer[_ngcontent-%COMP%]   button.cancel-button[_ngcontent-%COMP%]:hover{background:#e0e0e0}.modal-footer[_ngcontent-%COMP%]   button.confirm-button[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.modal-footer[_ngcontent-%COMP%]   button.confirm-button[_ngcontent-%COMP%]:hover{background:#1976d2;box-shadow:0 4px 12px #2196f34d}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width: 768px){.preset-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-container[_ngcontent-%COMP%]{width:95%;max-height:90vh}}']})};function Do(s,t){if(s&1&&(r(0,"div",15)(1,"div",16),c(2,"\u26A0\uFE0F"),a(),r(3,"div",17)(4,"div",18),c(5,"\uAE30\uC874 \uBB38\uC11C\uAC00 \uC788\uC2B5\uB2C8\uB2E4"),a(),r(6,"div",19)(7,"div",20)(8,"span",21),c(9,"\uC81C\uBAA9:"),a(),r(10,"span",22),c(11),a()(),r(12,"div",20)(13,"span",21),c(14,"\uB9C8\uC9C0\uB9C9 \uC218\uC815:"),a(),r(15,"span",22),c(16),a()(),r(17,"div",20)(18,"span",21),c(19,"\uD398\uC774\uC9C0 \uC218:"),a(),r(20,"span",22),c(21),a()()(),r(22,"div",23),c(23," \uC800\uC7A5\uD558\uBA74 \uAE30\uC874 \uBB38\uC11C\uB97C \uB36E\uC5B4\uC501\uB2C8\uB2E4. \uACC4\uC18D\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? "),a()()()),s&2){let e=p(2);l(11),B(e.existingDoc.title),l(5),B(e.formatDate(e.existingDoc.updatedAt)),l(5),I("",e.existingDoc.elementCount||0,"\uAC1C")}}function To(s,t){s&1&&(r(0,"div",24)(1,"div",25),c(2,"\u{1F4BE}"),a(),r(3,"div",26),c(4," \uBB38\uC11C\uAC00 \uBE0C\uB77C\uC6B0\uC800\uC5D0 \uC548\uC804\uD558\uAC8C \uC800\uC7A5\uB429\uB2C8\uB2E4. \uC800\uC7A5\uB41C \uBB38\uC11C\uB294 \uCD5C\uADFC \uD30C\uC77C \uBAA9\uB85D\uC5D0\uC11C \uC5B8\uC81C\uB4E0\uC9C0 \uB2E4\uC2DC \uC5F4 \uC218 \uC788\uC2B5\uB2C8\uB2E4. "),a()())}function Bo(s,t){if(s&1){let e=y();r(0,"div",1),f("click",function(){g(e);let n=p();return u(n.onClose())}),r(1,"div",2),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",3)(3,"h2"),c(4,"\uBB38\uC11C \uC800\uC7A5"),a(),r(5,"button",4),f("click",function(){g(e);let n=p();return u(n.onClose())}),c(6,"\xD7"),a()(),r(7,"div",5)(8,"div",6)(9,"label",7),c(10,"\uBB38\uC11C \uC81C\uBAA9"),a(),r(11,"input",8),k("ngModelChange",function(n){g(e);let o=p();return S(o.title,n)||(o.title=n),u(n)}),f("keyup.enter",function(){g(e);let n=p();return u(n.onConfirm())}),a(),r(12,"div",9),c(13," \uC81C\uBAA9\uC740 \uB098\uC911\uC5D0 \uAC80\uC0C9\uD558\uACE0 \uCC3E\uC744 \uB54C \uC0AC\uC6A9\uB429\uB2C8\uB2E4. "),a()(),M(14,Do,24,3,"div",10)(15,To,5,0,"div",11),a(),r(16,"div",12)(17,"button",13),f("click",function(){g(e);let n=p();return u(n.onClose())}),c(18,"\uCDE8\uC18C"),a(),r(19,"button",14),f("click",function(){g(e);let n=p();return u(n.onConfirm())}),c(20),a()()()()}if(s&2){let e=p();l(11),O("ngModel",e.title),l(3),m("ngIf",e.existingDoc),l(),m("ngIf",!e.existingDoc),l(4),T("overwrite",e.existingDoc),l(),I(" ",e.existingDoc?"\uB36E\uC5B4\uC4F0\uAE30":"\uC800\uC7A5"," ")}}var dt=class s{close=new D;confirm=new D;isVisible=!1;title="";defaultTitle="";existingDoc=null;open(t,e){this.isVisible=!0,this.defaultTitle=t,this.title=t,this.existingDoc=e||null}onClose(){this.close.emit(),this.isVisible=!1,this.reset()}onConfirm(){if(!this.title.trim()){alert("\uC81C\uBAA9\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694.");return}this.confirm.emit({title:this.title.trim(),overwrite:!!this.existingDoc}),this.isVisible=!1,this.reset()}reset(){this.title="",this.defaultTitle="",this.existingDoc=null}formatDate(t){let e=new Date(t),n=new Date().getTime()-e.getTime(),o=Math.floor(n/(1e3*60*60*24));return o===0?"\uC624\uB298 "+e.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}):o===1?"\uC5B4\uC81C "+e.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"}):o<7?`${o}\uC77C \uC804`:e.toLocaleDateString("ko-KR")}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-save-confirm-modal"]],outputs:{close:"close",confirm:"confirm"},standalone:!1,decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"close-button",3,"click"],[1,"modal-content"],[1,"input-section"],["for","doc-title"],["id","doc-title","type","text","placeholder","\uBB38\uC11C \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694","autofocus","",1,"title-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"input-hint"],["class","warning-box",4,"ngIf"],["class","info-box",4,"ngIf"],[1,"modal-footer"],[1,"cancel-button",3,"click"],[1,"confirm-button",3,"click"],[1,"warning-box"],[1,"warning-icon"],[1,"warning-content"],[1,"warning-title"],[1,"warning-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"warning-message"],[1,"info-box"],[1,"info-icon"],[1,"info-text"]],template:function(e,i){e&1&&M(0,Bo,21,6,"div",0),e&2&&m("ngIf",i.isVisible)},dependencies:[R,G,Q,Y],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:90%;max-width:550px;max-height:85vh;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.modal-header[_ngcontent-%COMP%]{padding:24px 28px;border-bottom:1px solid #eee;display:flex;align-items:center;justify-content:space-between}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:600;color:#1a1a1a}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{width:32px;height:32px;border:none;background:#f5f5f5;border-radius:50%;font-size:24px;color:#666;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background:#e0e0e0;color:#333}.modal-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:24px 28px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f5f5;border-radius:4px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:silver;border-radius:4px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a0a0a0}.input-section[_ngcontent-%COMP%]{margin-bottom:24px}.input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;font-size:14px;color:#333}.input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;transition:all .2s}.input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50;box-shadow:0 0 0 3px #4caf501a}.input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]::placeholder{color:#999}.input-section[_ngcontent-%COMP%]   .input-hint[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#666}.warning-box[_ngcontent-%COMP%]{padding:16px;background:#fff3cd;border:2px solid #ffc107;border-radius:12px;display:flex;gap:12px;margin-bottom:20px;animation:_ngcontent-%COMP%_shake .5s ease-in-out}.warning-box[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{font-size:28px;flex-shrink:0}.warning-box[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]{flex:1}.warning-box[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]   .warning-title[_ngcontent-%COMP%]{font-weight:600;font-size:15px;color:#856404;margin-bottom:12px}.warning-box[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]   .warning-details[_ngcontent-%COMP%]{background:#ffffff80;padding:12px;border-radius:8px;margin-bottom:12px}.warning-box[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]   .warning-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:6px}.warning-box[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]   .warning-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.warning-box[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]   .warning-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-weight:600;font-size:13px;color:#856404;min-width:80px}.warning-box[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]   .warning-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:13px;color:#664d03}.warning-box[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%]{font-size:13px;color:#856404;line-height:1.5;font-weight:500}.info-box[_ngcontent-%COMP%]{padding:16px;background:#e3f2fd;border:1px solid #2196F3;border-radius:12px;display:flex;gap:12px;align-items:flex-start}.info-box[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.info-box[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{flex:1;font-size:13px;color:#1565c0;line-height:1.5}.modal-footer[_ngcontent-%COMP%]{padding:20px 28px;border-top:1px solid #eee;display:flex;justify-content:flex-end;gap:12px}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.modal-footer[_ngcontent-%COMP%]   button.cancel-button[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.modal-footer[_ngcontent-%COMP%]   button.cancel-button[_ngcontent-%COMP%]:hover{background:#e0e0e0}.modal-footer[_ngcontent-%COMP%]   button.confirm-button[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.modal-footer[_ngcontent-%COMP%]   button.confirm-button[_ngcontent-%COMP%]:hover{background:#45a049;box-shadow:0 4px 12px #4caf504d}.modal-footer[_ngcontent-%COMP%]   button.confirm-button.overwrite[_ngcontent-%COMP%]{background:#ff9800}.modal-footer[_ngcontent-%COMP%]   button.confirm-button.overwrite[_ngcontent-%COMP%]:hover{background:#f57c00;box-shadow:0 4px 12px #ff98004d}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-4px)}75%{transform:translate(4px)}}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{width:95%;max-height:90vh}}"]})};function Fo(s,t){s&1&&b(0,"img",38)}function Ao(s,t){s&1&&b(0,"img",39)}function Io(s,t){if(s&1){let e=y();r(0,"div",2),f("click",function(){g(e);let n=p();return u(n.onClose())}),r(1,"div",3),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",4)(3,"h2"),c(4,"\uC554\uD638\uD654"),a(),r(5,"button",5),f("click",function(){g(e);let n=p();return u(n.onClose())}),b(6,"img",6),a()(),r(7,"div",7)(8,"div",8)(9,"label",9)(10,"input",10),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.requireOpenPassword,n)||(o.config.requireOpenPassword=n),u(n)}),a(),r(11,"span"),c(12,"\uBB38\uC11C\uB97C \uC5F4 \uB54C \uC554\uD638\uB97C \uC694\uAD6C\uD569\uB2C8\uB2E4."),a()(),r(13,"div",11)(14,"input",12),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.openPassword,n)||(o.config.openPassword=n),u(n)}),a(),r(15,"div",13)(16,"input",14),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.openPasswordConfirm,n)||(o.config.openPasswordConfirm=n),u(n)}),a(),r(17,"button",15),f("click",function(){g(e);let n=p();return u(n.toggleOpenPasswordVisibility())}),M(18,Fo,1,0,"img",16)(19,Ao,1,0,"img",17),a()()()(),r(20,"div",8)(21,"label",9)(22,"input",10),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.requirePermissionPassword,n)||(o.config.requirePermissionPassword=n),u(n)}),a(),r(23,"span"),c(24,"\uBB38\uC11C \uBCF4\uC548 \uC124\uC815 \uBCC0\uACBD\uC774\uB098 \uD2B9\uC815 \uAE30\uB2A5 \uC0AC\uC6A9 \uC2DC \uC554\uD638\uB97C \uC694\uAD6C\uD569\uB2C8\uB2E4."),a()(),r(25,"div",11)(26,"input",18),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.permissionPassword,n)||(o.config.permissionPassword=n),u(n)}),a()()(),r(27,"div",8)(28,"label",19),c(29,"\uAD8C\uD55C \uBCF5\uC0AC"),a(),r(30,"select",20),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.printPermission,n)||(o.config.printPermission=n),u(n)}),r(31,"option",21),c(32,"\uC778\uC1C4\uB294 \uC81C\uD55C\uB429\uB2C8\uB2E4"),a(),r(33,"option",22),c(34,"\uC800\uD574\uC0C1\uB3C4 \uC778\uC1C4\uB9CC \uD5C8\uC6A9"),a(),r(35,"option",23),c(36,"\uACE0\uD574\uC0C1\uB3C4 \uC778\uC1C4 \uD5C8\uC6A9"),a()()(),r(37,"div",8)(38,"label",19),c(39,"\uAD8C\uD55C \uC218\uC815"),a(),r(40,"select",20),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.modifyPermission,n)||(o.config.modifyPermission=n),u(n)}),r(41,"option",24),c(42,"\uBCC0\uACBD\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4"),a(),r(43,"option",25),c(44,"\uC8FC\uC11D \uCD94\uAC00\uB9CC \uAC00\uB2A5"),a(),r(45,"option",26),c(46,"\uC591\uC2DD \uC791\uC131\uB9CC \uAC00\uB2A5"),a(),r(47,"option",27),c(48,"\uBAA8\uB4E0 \uBCC0\uACBD \uD5C8\uC6A9"),a()(),r(49,"label",28)(50,"input",29),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.allowCopy,n)||(o.config.allowCopy=n),u(n)}),a(),r(51,"span"),c(52,"\uD14D\uC2A4\uD2B8, \uC774\uBBF8\uC9C0 \uBC0F \uAE30\uD0C0 \uB0B4\uC6A9\uC758 \uBCF5\uC0AC\uAC00 \uAC00\uB2A5\uD569\uB2C8\uB2E4"),a()()(),r(53,"div",8)(54,"label",19),c(55,"\uAD8C\uD55C \uC218\uC815"),a(),r(56,"div",30)(57,"label",31)(58,"input",32),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.encryptionMethod,n)||(o.config.encryptionMethod=n),u(n)}),a(),r(59,"span"),c(60,"128 bit AES"),a()(),r(61,"label",31)(62,"input",33),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.encryptionMethod,n)||(o.config.encryptionMethod=n),u(n)}),a(),r(63,"span"),c(64,"256 bit AES"),a()(),r(65,"label",31)(66,"input",34),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.encryptionMethod,n)||(o.config.encryptionMethod=n),u(n)}),a(),r(67,"span"),c(68,"128 bit RC4"),a()()()()(),r(69,"div",35)(70,"button",36),f("click",function(){g(e);let n=p();return u(n.onSave())}),c(71,"\uC800\uC7A5"),a(),r(72,"button",37),f("click",function(){g(e);let n=p();return u(n.onClose())}),c(73,"\uCDE8\uC18C"),a()()()()}if(s&2){let e=p();l(10),O("ngModel",e.config.requireOpenPassword),l(3),T("disabled",!e.config.requireOpenPassword),l(),O("ngModel",e.config.openPassword),m("disabled",!e.config.requireOpenPassword),l(2),m("type",e.showOpenPassword?"text":"password"),O("ngModel",e.config.openPasswordConfirm),m("disabled",!e.config.requireOpenPassword),l(),m("disabled",!e.config.requireOpenPassword),l(),m("ngIf",!e.showOpenPassword),l(),m("ngIf",e.showOpenPassword),l(3),O("ngModel",e.config.requirePermissionPassword),l(3),T("disabled",!e.config.requirePermissionPassword),l(),O("ngModel",e.config.permissionPassword),m("disabled",!e.config.requirePermissionPassword),l(4),O("ngModel",e.config.printPermission),m("disabled",!e.config.requirePermissionPassword),l(10),O("ngModel",e.config.modifyPermission),m("disabled",!e.config.requirePermissionPassword),l(10),O("ngModel",e.config.allowCopy),m("disabled",!e.config.requirePermissionPassword),l(8),O("ngModel",e.config.encryptionMethod),l(4),O("ngModel",e.config.encryptionMethod),l(4),O("ngModel",e.config.encryptionMethod)}}function Vo(s,t){if(s&1){let e=y();r(0,"div",40),f("click",function(){g(e);let n=p();return u(n.closeErrorModal())}),r(1,"div",41),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",42)(3,"span"),c(4,"\uC624\uB958"),a(),r(5,"button",5),f("click",function(){g(e);let n=p();return u(n.closeErrorModal())}),b(6,"img",43),a()(),r(7,"div",44)(8,"div",45),b(9,"img",46),a(),r(10,"p",47),c(11),a()(),r(12,"div",48)(13,"button",36),f("click",function(){g(e);let n=p();return u(n.closeErrorModal())}),c(14,"\uC608"),a()()()()}if(s&2){let e=p();l(11),B(e.errorMessage)}}var pt=class s{close=new D;confirm=new D;isVisible=!1;showOpenPassword=!1;showPermissionPassword=!1;config=this.getDefaultConfig();errorMessage="";getDefaultConfig(){return{requireOpenPassword:!1,openPassword:"",openPasswordConfirm:"",requirePermissionPassword:!1,permissionPassword:"",printPermission:"restricted",modifyPermission:"none",allowCopy:!1,encryptionMethod:"128-aes"}}open(){this.isVisible=!0,this.config=this.getDefaultConfig(),this.errorMessage="",this.showOpenPassword=!1,this.showPermissionPassword=!1}onClose(){this.close.emit(),this.isVisible=!1}toggleOpenPasswordVisibility(){this.showOpenPassword=!this.showOpenPassword}togglePermissionPasswordVisibility(){this.showPermissionPassword=!this.showPermissionPassword}validatePassword(t){if(t.length<8)return!1;let e=0;return/[a-z]/.test(t)&&e++,/[A-Z]/.test(t)&&e++,/[0-9]/.test(t)&&e++,/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(t)&&e++,e>=2}onSave(){if(this.errorMessage="",this.config.requireOpenPassword){if(!this.config.openPassword){this.errorMessage="\uC5F4\uAE30 \uC554\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}if(!this.validatePassword(this.config.openPassword)){this.errorMessage=`\uC785\uB825\uB41C \uBE44\uBC00\uBC88\uD638\uAC00 \uC0DD\uC131 \uC870\uAC74\uC5D0 \uB9DE\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4!
* \uBE44\uBC00\uBC88\uD638\uB294 \uC601\uBB38 \uB300/\uC18C\uBB38\uC790, \uC22B\uC790, \uD2B9\uC218\uBB38\uC790 \uC911 2\uAC1C \uC774\uC0C1\uC744 \uC870\uD569\uD558\uC5EC 8\uC790 \uC774\uC0C1 \uC785\uB825\uD574 \uC8FC\uC138\uC694.`;return}if(this.config.openPassword!==this.config.openPasswordConfirm){this.errorMessage="\uC554\uD638\uAC00 \uC77C\uCE58\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.";return}}if(this.config.requirePermissionPassword){if(!this.config.permissionPassword){this.errorMessage="\uAD8C\uD55C \uC554\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}if(!this.validatePassword(this.config.permissionPassword)){this.errorMessage=`\uC785\uB825\uB41C \uBE44\uBC00\uBC88\uD638\uAC00 \uC0DD\uC131 \uC870\uAC74\uC5D0 \uB9DE\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4!
* \uBE44\uBC00\uBC88\uD638\uB294 \uC601\uBB38 \uB300/\uC18C\uBB38\uC790, \uC22B\uC790, \uD2B9\uC218\uBB38\uC790 \uC911 2\uAC1C \uC774\uC0C1\uC744 \uC870\uD569\uD558\uC5EC 8\uC790 \uC774\uC0C1 \uC785\uB825\uD574 \uC8FC\uC138\uC694.`;return}if(this.config.requireOpenPassword&&this.config.openPassword===this.config.permissionPassword){this.errorMessage="\uC5F4\uAE30 \uC554\uD638\uC640 \uAD8C\uD55C \uC554\uD638\uB294 \uC11C\uB85C \uB2EC\uB77C\uC57C \uD569\uB2C8\uB2E4.";return}}this.confirm.emit(ce({},this.config)),this.isVisible=!1}closeErrorModal(){this.errorMessage=""}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-security-encryption-modal"]],outputs:{close:"close",confirm:"confirm"},standalone:!1,decls:2,vars:2,consts:[["class","modal-overlay",3,"click",4,"ngIf"],["class","error-modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","20","height","20"],[1,"modal-body"],[1,"section"],[1,"checkbox-row"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"password-fields"],["type","password","placeholder","\uC554\uD638\uB97C \uC785\uB825",1,"form-input",3,"ngModelChange","ngModel","disabled"],[1,"password-input-wrapper"],["placeholder","\uC554\uD638 \uD655\uC778",1,"form-input",3,"ngModelChange","type","ngModel","disabled"],["type","button",1,"toggle-password-btn",3,"click","disabled"],["src","images/icons/btn-top-find.svg","alt","\uBCF4\uC774\uAE30","width","18","height","18",4,"ngIf"],["src","images/icons/btn-top-find.svg","alt","\uC228\uAE30\uAE30","width","18","height","18","style","opacity: 0.5;",4,"ngIf"],["type","password","placeholder","\uBE44\uBC00\uBC88\uD638 \uC785\uB825(\uACF5\uAC1C \uBE44\uBC00\uBC88\uD638\uC640 \uB2E4\uB984)",1,"form-input",3,"ngModelChange","ngModel","disabled"],[1,"section-label"],[1,"form-select",3,"ngModelChange","ngModel","disabled"],["value","restricted"],["value","lowRes"],["value","highRes"],["value","none"],["value","annotate"],["value","formFill"],["value","all"],[1,"checkbox-row","sub-checkbox"],["type","checkbox",3,"ngModelChange","ngModel","disabled"],[1,"radio-group"],[1,"radio-row"],["type","radio","name","encryptionMethod","value","128-aes",3,"ngModelChange","ngModel"],["type","radio","name","encryptionMethod","value","256-aes",3,"ngModelChange","ngModel"],["type","radio","name","encryptionMethod","value","128-rc4",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],["src","images/icons/btn-top-find.svg","alt","\uBCF4\uC774\uAE30","width","18","height","18"],["src","images/icons/btn-top-find.svg","alt","\uC228\uAE30\uAE30","width","18","height","18",2,"opacity","0.5"],[1,"error-modal-overlay",3,"click"],[1,"error-modal",3,"click"],[1,"error-modal-header"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","16","height","16"],[1,"error-modal-body"],[1,"error-icon"],["src","./images/icons/pc/ico-info.svg","alt","\uC624\uB958","width","48","height","48"],[1,"error-message"],[1,"error-modal-footer"]],template:function(e,i){e&1&&M(0,Io,74,25,"div",0)(1,Vo,15,1,"div",1),e&2&&(m("ngIf",i.isVisible),l(),m("ngIf",i.errorMessage))},dependencies:[R,me,fe,G,Be,ue,Oe,Q,Y],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:420px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 4px 20px #00000026}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;color:#666;border-radius:4px}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.modal-body[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.section[_ngcontent-%COMP%]{margin-bottom:20px}.section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.section-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#333;margin-bottom:8px}.checkbox-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;cursor:pointer;font-size:14px;color:#333}.checkbox-row[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;margin-top:2px;accent-color:#E54D42;cursor:pointer}.checkbox-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;line-height:1.4}.checkbox-row.sub-checkbox[_ngcontent-%COMP%]{margin-top:12px}.password-fields[_ngcontent-%COMP%]{margin-top:12px;display:flex;flex-direction:column;gap:10px}.password-fields.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.form-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#e54d42}.form-input[_ngcontent-%COMP%]::placeholder{color:#999}.form-input[_ngcontent-%COMP%]:disabled{background:#f5f5f5}.password-input-wrapper[_ngcontent-%COMP%]{position:relative}.password-input-wrapper[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{padding-right:40px}.password-input-wrapper[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;padding:4px;color:#666}.password-input-wrapper[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]:hover:not(:disabled){color:#333}.password-input-wrapper[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.form-select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;background:#fff;cursor:pointer}.form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#e54d42}.form-select[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.radio-group[_ngcontent-%COMP%]{display:flex;gap:24px}.radio-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;cursor:pointer;font-size:14px;color:#333}.radio-row[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:16px;height:16px;accent-color:#E54D42;cursor:pointer}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:16px 20px;border-top:1px solid #e0e0e0}.btn[_ngcontent-%COMP%]{padding:10px 24px;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background:#e54d42;color:#fff;border:none}.btn.btn-primary[_ngcontent-%COMP%]:hover{background:#d43c31}.btn.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#333;border:1px solid #ddd}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.error-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10001}.error-modal[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:360px;box-shadow:0 4px 20px #0003}.error-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #e0e0e0}.error-modal-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.error-modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;color:#666}.error-modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.error-modal-body[_ngcontent-%COMP%]{padding:24px;text-align:center}.error-modal-body[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-bottom:16px}.error-modal-body[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:14px;color:#333;line-height:1.6;margin:0;white-space:pre-line}.error-modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:12px 16px;border-top:1px solid #e0e0e0}"]})};function Lo(s,t){if(s&1){let e=y();r(0,"div",12)(1,"label",13)(2,"input",14),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.source,n)||(o.source=n),u(n)}),a(),r(3,"span",15),c(4,"\uD30C\uC77C\uC5D0\uC11C \uAE30\uC874 \uB514\uC9C0\uD138 ID\uB97C \uAC00\uC838\uC624\uAE30"),a()(),r(5,"div",16)(6,"div",17)(7,"input",18),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.importFilePath,n)||(o.importFilePath=n),u(n)}),a(),r(8,"button",19),f("click",function(){g(e);let n=p(2);return u(n.browseFile("import"))}),c(9," \uBE0C\uB77C\uC6B0\uC800... "),a()(),r(10,"div",20)(11,"label"),c(12,"\uBE44\uBC00\uBC88\uD638 :"),a(),r(13,"input",21),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.importPassword,n)||(o.importPassword=n),u(n)}),a()()(),r(14,"label",13)(15,"input",22),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.source,n)||(o.source=n),u(n)}),a(),r(16,"span",15),c(17,"\uC0C8\uB85C\uC6B4 \uB514\uC9C0\uD138 ID \uB9CC\uB4E4\uAE30"),a()()()}if(s&2){let e=p(2);l(2),O("ngModel",e.source),l(3),T("disabled",e.source!=="import"),l(2),O("ngModel",e.importFilePath),m("disabled",e.source!=="import"),l(),m("disabled",e.source!=="import"),l(5),O("ngModel",e.importPassword),m("disabled",e.source!=="import"),l(2),O("ngModel",e.source)}}function Wo(s,t){if(s&1){let e=y();r(0,"div",12)(1,"label",23)(2,"input",24),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.storageType,n)||(o.storageType=n),u(n)}),a(),r(3,"div",25)(4,"span",15),c(5,"\uC0C8 PKCS#12 \uB514\uC9C0\uD138 ID \uD30C\uC77C"),a(),r(6,"p",26),c(7," \uD45C\uC900 PKCS#12 \uD615\uC2DD\uC744 \uC0AC\uC6A9\uD558\uB294 \uB514\uC9C0\uD138 \uD30C\uC77C\uC744 \uBCF4\uD638\uD558\uAE30 \uC704\uD574 \uC0C8 \uC554\uD638\uB97C \uB9CC\uB4ED\uB2C8\uB2E4. \uC774 \uC77C\uBC18\uC801\uC778 \uB514\uC9C0\uD138 ID \uD30C\uC77C \uD615\uC2DD\uC740 \uC8FC\uC694 \uC6F9 \uBE0C\uB77C\uC6B0\uC800\uB97C \uD3EC\uD568\uD55C \uB300\uBD80\uBD84\uC758 \uBCF4\uC548 \uC18C\uD504\uD2B8\uC6E8\uC5B4 \uC751\uC6A9 \uD504\uB85C\uADF8\uB7A8\uC5D0\uC11C \uC9C0\uC6D0\uB429\uB2C8\uB2E4. PKCS#12 \uD30C\uC77C\uC758 \uD655\uC7A5\uC790\uC5D0\uB294 .pdx \uB610\uB294 .p12\uAC00 \uC788\uC2B5\uB2C8\uB2E4. "),a()()(),r(8,"label",23)(9,"input",27),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.storageType,n)||(o.storageType=n),u(n)}),a(),r(10,"div",25)(11,"span",15),c(12,"Windows \uC778\uC99D\uC11C \uC800\uC7A5 \uC704\uCE58"),a(),r(13,"p",26),c(14," \uB514\uC9C0\uD138 ID\uB294 \uB2E4\uB978 windows \uC751\uC6A9 \uD504\uB85C\uADF8\uB7A8\uC5D0\uC11C\uB3C4 \uC0AC\uC6A9\uD560 \uC218 \uC788\uB294 windows \uC778\uC99D\uC11C \uC800\uC7A5 \uC704\uCE58\uC5D0 \uC800\uC7A5\uB429\uB2C8\uB2E4. \uB514\uC9C0\uD138 ID\uB294 window \uB85C\uADF8\uC778\uC73C\uB85C \uBCF4\uD638\uB429\uB2C8\uB2E4. "),a()()()()}if(s&2){let e=p(2);l(2),O("ngModel",e.storageType),l(7),O("ngModel",e.storageType)}}function No(s,t){if(s&1&&(r(0,"option",35),c(1),a()),s&2){let e=t.$implicit;m("value",e.code),l(),B(e.name)}}function jo(s,t){if(s&1){let e=y();r(0,"div",12)(1,"div",28)(2,"label"),c(3,"\uC774\uB984:"),a(),r(4,"div",29)(5,"input",30),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.identityName,n)||(o.identityName=n),u(n)}),a(),r(6,"span",31),c(7,"*"),a()()(),r(8,"div",28)(9,"label"),c(10,"\uAD6C\uC131 \uB2E8\uC704:"),a(),r(11,"input",30),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.organizationUnit,n)||(o.organizationUnit=n),u(n)}),a()(),r(12,"div",28)(13,"label"),c(14,"\uC870\uC9C1 \uC774\uB984:"),a(),r(15,"input",30),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.organizationName,n)||(o.organizationName=n),u(n)}),a()(),r(16,"div",28)(17,"label"),c(18,"\uC774\uBA54\uC77C \uC8FC\uC18C:"),a(),r(19,"div",29)(20,"input",32),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.email,n)||(o.email=n),u(n)}),a(),r(21,"span",31),c(22,"*"),a()()(),r(23,"div",28)(24,"label"),c(25,"\uAD6D\uAC00/\uC9C0\uC5ED:"),a(),r(26,"select",33),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.country,n)||(o.country=n),u(n)}),M(27,No,2,2,"option",34),a()()()}if(s&2){let e=p(2);l(5),O("ngModel",e.identityName),l(6),O("ngModel",e.organizationUnit),l(4),O("ngModel",e.organizationName),l(5),O("ngModel",e.email),l(6),O("ngModel",e.country),l(),m("ngForOf",e.countries)}}function Uo(s,t){if(s&1){let e=y();te(0),r(1,"div",28)(2,"label"),c(3,"\uD30C\uC77C \uC774\uB984:"),a(),r(4,"div",17)(5,"input",37),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.saveFilePath,n)||(o.saveFilePath=n),u(n)}),a(),r(6,"button",38),f("click",function(){g(e);let n=p(3);return u(n.browseFile("save"))}),c(7," \uBE0C\uB77C\uC6B0\uC800... "),a()()(),r(8,"div",28)(9,"label"),c(10,"\uBE44\uBC00\uBC88\uD638:"),a(),r(11,"input",39),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.savePassword,n)||(o.savePassword=n),u(n)}),a()(),r(12,"div",28)(13,"label"),c(14,"\uBE44\uBC00\uBC88\uD638 \uD655\uC778:"),a(),r(15,"input",39),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.savePasswordConfirm,n)||(o.savePasswordConfirm=n),u(n)}),a()(),ne()}if(s&2){let e=p(3);l(5),O("ngModel",e.saveFilePath),l(6),O("ngModel",e.savePassword),l(4),O("ngModel",e.savePasswordConfirm)}}function Ho(s,t){if(s&1&&(te(0),r(1,"div",40)(2,"table",41)(3,"thead")(4,"tr")(5,"th"),c(6,"\uC774\uB984"),a(),r(7,"th"),c(8,"\uBC1C\uD589\uC778"),a(),r(9,"th"),c(10,"\uB9CC\uB8CC"),a()()(),r(11,"tbody")(12,"tr")(13,"td"),c(14),a(),r(15,"td"),c(16),a(),r(17,"td"),c(18),Ze(19,"date"),a()()()()(),ne()),s&2){let e=p(3);l(14),B(e.importedId.name),l(2),B(e.importedId.issuer),l(2),B(Je(19,3,e.importedId.validTo,"yyyy-MM-dd a hh:mm:ss Z"))}}function $o(s,t){if(s&1&&(r(0,"div",12),M(1,Uo,16,3,"ng-container",36)(2,Ho,20,6,"ng-container",36),a()),s&2){let e=p(2);l(),m("ngIf",e.source==="create"),l(),m("ngIf",e.source==="import"&&e.importedId)}}function qo(s,t){if(s&1){let e=y();r(0,"div",1),f("click",function(){g(e);let n=p();return u(n.onClose())}),r(1,"div",2),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",3)(3,"h2"),c(4,"\uB514\uC9C0\uD138 ID \uCD94\uAC00"),a(),r(5,"button",4),f("click",function(){g(e);let n=p();return u(n.onClose())}),b(6,"img",5),a()(),r(7,"div",6)(8,"p",7),c(9),a(),M(10,Lo,18,9,"div",8)(11,Wo,15,2,"div",8)(12,jo,28,6,"div",8)(13,$o,3,2,"div",8),a(),r(14,"div",9)(15,"button",10),f("click",function(){g(e);let n=p();return u(n.goBack())}),c(16," < \uB3CC\uC544\uAC00\uAE30 "),a(),r(17,"button",11),f("click",function(){g(e);let n=p();return u(n.goNext())}),c(18),a()()()()}if(s&2){let e=p();l(9),B(e.getStepTitle()),l(),m("ngIf",e.currentStep===1),l(),m("ngIf",e.currentStep===2&&e.source==="create"),l(),m("ngIf",e.currentStep===3&&e.source==="create"),l(),m("ngIf",e.currentStep===4),l(2),m("disabled",e.currentStep===1),l(2),m("disabled",!e.canGoNext()),l(),I(" ",(e.currentStep===4||e.source==="import"&&e.currentStep===1&&e.importFilePath&&e.importPassword,"\uB2E4\uC74C >")," ")}}var Go=[{code:"KR",name:"KR - \uB300\uD55C\uBBFC\uAD6D"},{code:"US",name:"US - \uBBF8\uAD6D"},{code:"JP",name:"JP - \uC77C\uBCF8"},{code:"CN",name:"CN - \uC911\uAD6D"},{code:"GB",name:"GB - \uC601\uAD6D"},{code:"DE",name:"DE - \uB3C5\uC77C"},{code:"FR",name:"FR - \uD504\uB791\uC2A4"},{code:"AU",name:"AU - \uD638\uC8FC"},{code:"CA",name:"CA - \uCE90\uB098\uB2E4"}],$e=class s{close=new D;complete=new D;isVisible=!1;currentStep=1;totalSteps=4;source="import";importFilePath="";importPassword="";storageType="pkcs12";identityName="";organizationUnit="";organizationName="";email="";country="KR";saveFilePath="";savePassword="";savePasswordConfirm="";countries=Go;errorMessage="";importedId=null;open(){this.isVisible=!0,this.currentStep=1,this.resetForm()}resetForm(){this.source="import",this.importFilePath="",this.importPassword="",this.storageType="pkcs12",this.identityName="",this.organizationUnit="",this.organizationName="",this.email="",this.country="KR",this.saveFilePath="",this.savePassword="",this.savePasswordConfirm="",this.errorMessage="",this.importedId=null}onClose(){this.close.emit(),this.isVisible=!1}canGoNext(){switch(this.currentStep){case 1:return this.source==="import"?!!this.importFilePath&&!!this.importPassword:!0;case 2:return!0;case 3:return!!this.identityName&&!!this.email;case 4:return this.source==="import"?!0:!!this.saveFilePath&&!!this.savePassword&&this.savePassword===this.savePasswordConfirm;default:return!1}}goBack(){this.currentStep>1&&(this.source==="import"&&this.currentStep===4?this.currentStep=1:this.currentStep--)}goNext(){this.errorMessage="",this.canGoNext()&&(this.source==="import"?this.currentStep===1?(this.simulateImport(),this.currentStep=4):this.currentStep===4&&this.onComplete():this.currentStep<this.totalSteps?this.currentStep++:this.onComplete())}simulateImport(){let e=(this.importFilePath.split(/[/\\]/).pop()||"certificate").replace(/\.(p12|pfx|pdx)$/i,"");this.importedId={id:"imported-"+Date.now(),name:e,email:e+"@example.com",issuer:e,country:"KR",validFrom:new Date,validTo:new Date(Date.now()+10*365*24*60*60*1e3),storageType:"file",filePath:this.importFilePath}}onComplete(){let t;this.source==="import"&&this.importedId?t=this.importedId:t={id:"created-"+Date.now(),name:this.identityName,email:this.email,issuer:this.identityName,organization:this.organizationName||void 0,organizationUnit:this.organizationUnit||void 0,country:this.country,validFrom:new Date,validTo:new Date(Date.now()+10*365*24*60*60*1e3),storageType:this.storageType==="pkcs12"?"file":"windows",filePath:this.saveFilePath},this.complete.emit(t),this.isVisible=!1}browseFile(t){let e=document.createElement("input");e.type="file",e.accept=".p12,.pfx,.pdx",e.onchange=i=>{let n=i.target.files[0];n&&(t==="import"?this.importFilePath=n.name:this.saveFilePath=n.name.replace(/\.[^/.]+$/,"")+".p12")},e.click()}getStepTitle(){if(this.source==="import")return this.currentStep===4?"\uB2E4\uC74C \uB514\uC9C0\uD138 ID\uAC00 \uC11C\uBA85 \uB610\uB294 \uC554\uD638\uD654\uC5D0 \uC0AC\uC6A9\uD560 \uC218 \uC788\uB294 \uB514\uC9C0\uD138 ID \uBAA9\uB85D\uC5D0 \uCD94\uAC00\uB429\uB2C8\uB2E4:":"\uB514\uC9C0\uD138 \uC11C\uBA85\uC744 \uB2E4\uC74C \uBB38\uC11C\uC5D0 \uC0AC\uC6A9:";switch(this.currentStep){case 1:return"\uB514\uC9C0\uD138 \uC11C\uBA85\uC744 \uB2E4\uC74C \uBB38\uC11C\uC5D0 \uC0AC\uC6A9:";case 2:return"\uC790\uCCB4 \uC11C\uBA85\uB41C \uB514\uC9C0\uD138 ID\uB97C \uC5B4\uB514\uC5D0 \uC800\uC7A5\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?";case 3:return"\uC790\uCCB4 \uC11C\uBA85\uB41C \uC778\uC99D\uC11C\uB97C \uC0DD\uC131\uD560 \uB54C \uC0AC\uC6A9\uD560 \uC2DD\uBCC4 \uC815\uBCF4\uB97C \uC785\uB825\uD558\uC138\uC694.";case 4:return"\uC0C8 \uB514\uC9C0\uD138 ID \uD30C\uC77C\uC758 \uD30C\uC77C \uC704\uCE58\uC640 \uC554\uD638\uB97C \uC785\uB825\uD569\uB2C8\uB2E4. \uB514\uC9C0\uD138 ID\uB97C \uC0AC\uC6A9\uD558\uC5EC \uBB38\uC11C\uC5D0 \uC11C\uBA85\uD558\uAC70\uB098 \uC554\uD638\uB97C \uD574\uC81C\uD558\uB824\uBA74 \uC554\uD638\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4. \uBC31\uC5C5 \uB610\uB294 \uAE30\uD0C0 \uC6A9\uB3C4\uB85C \uC774 \uD30C\uC77C\uC744 \uBCF5\uC0AC\uD560 \uC218 \uC788\uB3C4\uB85D \uD30C\uC77C \uC704\uCE58\uB97C \uAE30\uB85D\uD574\uB450\uC5B4\uC57C \uD569\uB2C8\uB2E4. \uB098\uC911\uC5D0 \uBCF4\uC548 \uC124\uC815 \uB300\uD654 \uC0C1\uC790\uB97C \uC0AC\uC6A9\uD558\uC5EC \uC774 \uD30C\uC77C\uC5D0 \uB300\uD55C \uC635\uC158\uC744 \uBCC0\uACBD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.";default:return""}}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-digital-id-wizard-modal"]],outputs:{close:"close",complete:"complete"},standalone:!1,decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","20","height","20"],[1,"modal-body"],[1,"step-description"],["class","step-content",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[1,"step-content"],[1,"radio-option"],["type","radio","name","source","value","import",3,"ngModelChange","ngModel"],[1,"radio-label"],[1,"import-fields"],[1,"file-input-row"],["type","text","placeholder","\uD30C\uC77C \uACBD\uB85C","readonly","",1,"form-input",3,"ngModelChange","ngModel","disabled"],[1,"browse-btn",3,"click","disabled"],[1,"password-row"],["type","password",1,"form-input","password-input",3,"ngModelChange","ngModel","disabled"],["type","radio","name","source","value","create",3,"ngModelChange","ngModel"],[1,"radio-option","with-description"],["type","radio","name","storageType","value","pkcs12",3,"ngModelChange","ngModel"],[1,"option-content"],[1,"option-description"],["type","radio","name","storageType","value","windows",3,"ngModelChange","ngModel"],[1,"form-row"],[1,"input-wrapper"],["type","text",1,"form-input",3,"ngModelChange","ngModel"],[1,"required"],["type","email",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngIf"],["type","text","placeholder","\uD30C\uC77C \uACBD\uB85C",1,"form-input",3,"ngModelChange","ngModel"],[1,"browse-btn",3,"click"],["type","password",1,"form-input",3,"ngModelChange","ngModel"],[1,"imported-id-info"],[1,"id-info-table"]],template:function(e,i){e&1&&M(0,qo,19,8,"div",0),e&2&&m("ngIf",i.isVisible)},dependencies:[$,R,me,fe,G,ue,Oe,Q,Y,Ln],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:520px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 4px 20px #00000026}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;color:#666;border-radius:4px}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1;min-height:300px}.step-description[_ngcontent-%COMP%]{font-size:14px;color:#333;margin:0 0 24px;line-height:1.5}.step-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.radio-option[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;cursor:pointer}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:18px;height:18px;margin-top:2px;accent-color:#E54D42;cursor:pointer}.radio-option[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333}.radio-option.with-description[_ngcontent-%COMP%]{align-items:flex-start}.radio-option.with-description[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]{flex:1}.radio-option.with-description[_ngcontent-%COMP%]   .option-description[_ngcontent-%COMP%]{font-size:13px;color:#666;margin:8px 0 0;line-height:1.5}.import-fields[_ngcontent-%COMP%]{margin-left:28px;margin-top:12px;margin-bottom:16px}.import-fields.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.file-input-row[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:12px}.file-input-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1}.browse-btn[_ngcontent-%COMP%]{padding:10px 16px;background:#fff;border:1px solid #ddd;border-radius:4px;font-size:14px;cursor:pointer;white-space:nowrap}.browse-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5}.browse-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.password-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.password-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#333;white-space:nowrap}.password-row[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]{width:200px}.form-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100px;font-size:14px;color:#333;text-align:right;flex-shrink:0}.form-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{flex:1}.input-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:4px}.input-wrapper[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1}.input-wrapper[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#e54d42;font-size:16px}.form-input[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#e54d42}.form-input[_ngcontent-%COMP%]:disabled{background:#f5f5f5}.form-select[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;background:#fff;cursor:pointer}.form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#e54d42}.imported-id-info[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px;overflow:hidden}.id-info-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.id-info-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .id-info-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #eee}.id-info-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9f9f9;font-weight:500;color:#666}.id-info-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#333}.id-info-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;padding:16px 20px;border-top:1px solid #e0e0e0}.btn[_ngcontent-%COMP%]{padding:10px 24px;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;min-width:100px}.btn.btn-primary[_ngcontent-%COMP%]{background:#e54d42;color:#fff;border:none}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#d43c31}.btn.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#333;border:1px solid #ddd}.btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5}.btn.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})};var Qo=["idWizard"];function Yo(s,t){if(s&1){let e=y();r(0,"div",32)(1,"button",27),f("click",function(){g(e);let n=p().index,o=p(3);return u(o.exportDigitalId(n))}),c(2,"\uB0B4\uBCF4\uB0B4\uAE30"),a(),r(3,"button",33),f("click",function(){g(e);let n=p().index,o=p(3);return u(o.deleteDigitalId(n))}),c(4,"\uC0AD\uC81C"),a()()}}function Ko(s,t){if(s&1){let e=y();r(0,"tr",27),f("click",function(){let n=g(e).$implicit,o=p(3);return u(o.selectDigitalId(n))}),r(1,"td"),c(2),a(),r(3,"td"),c(4),a(),r(5,"td",28)(6,"button",29),f("click",function(n){let o=g(e).index,d=p(3);return u(d.toggleMoreMenu(o,n))}),b(7,"img",30),a(),M(8,Yo,5,0,"div",31),a()()}if(s&2){let e=t.$implicit,i=t.index,n=p(3);T("selected",n.selectedId===e),l(2),B(e.name),l(2),B(n.getStorageTypeLabel(e.storageType)),l(4),m("ngIf",n.showMoreMenu&&n.moreMenuIdIndex===i)}}function Xo(s,t){s&1&&(r(0,"tr")(1,"td",34),c(2,"\uB4F1\uB85D\uB41C \uB514\uC9C0\uD138 ID\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),a()())}function Zo(s,t){if(s&1&&(r(0,"div",35)(1,"h3"),c(2,"\uC778\uC99D\uC11C \uC815\uBCF4"),a(),r(3,"div",36)(4,"div",37)(5,"span",38),c(6,"\uC778\uC99D\uC11C \uC774\uB984:"),a(),r(7,"span",39),c(8),a()(),r(9,"div",37)(10,"span",38),c(11,"\uC774\uC288:"),a(),r(12,"span",39),c(13),a()(),r(14,"div",37)(15,"span",38),c(16,"\uC720\uD6A8:"),a(),r(17,"span",39),c(18),a()(),r(19,"div",37)(20,"span",38),c(21,"\uC720\uD6A8:"),a(),r(22,"span",39),c(23),a()(),r(24,"div",37)(25,"span",38),c(26,"\uC0AC\uC6A9 \uBAA9\uC801:"),a(),r(27,"span",39),c(28),a()(),r(29,"div",37),b(30,"span",38),r(31,"a",40),c(32,"\uB354\uBCF4\uAE30"),a()()()()),s&2){let e=p(3);l(8),We("",e.selectedId.name," <",e.selectedId.email,">"),l(5),We("",e.selectedId.issuer," <",e.selectedId.email,">"),l(5),B(e.formatDate(e.selectedId.validFrom)),l(5),B(e.formatDate(e.selectedId.validTo)),l(5),B(e.selectedId.purpose||"\uC9C0\uC815\uB418\uC9C0 \uC54A\uC74C")}}function Jo(s,t){if(s&1){let e=y();r(0,"div",15)(1,"div",16)(2,"span",17),c(3,"\uB514\uC9C0\uD138 ID \uBAA9\uB85D"),a(),r(4,"div",18)(5,"button",19),f("click",function(){g(e);let n=p(2);return u(n.openAddWizard())}),b(6,"img",20),c(7," \uCD94\uAC00 "),a(),r(8,"button",19),f("click",function(){g(e);let n=p(2);return u(n.refresh())}),b(9,"img",21),c(10," \uC0C8\uB85C \uACE0\uCE68 "),a()()(),r(11,"div",22)(12,"table",23)(13,"thead")(14,"tr")(15,"th"),c(16,"\uC774\uB984"),a(),r(17,"th"),c(18,"\uC800\uC7A5 \uBC29\uC2DD"),a(),b(19,"th"),a()(),r(20,"tbody"),M(21,Ko,9,5,"tr",24)(22,Xo,3,0,"tr",25),a()()(),M(23,Zo,33,7,"div",26),a()}if(s&2){let e=p(2);l(21),m("ngForOf",e.digitalIds),l(),m("ngIf",e.digitalIds.length===0),l(),m("ngIf",e.selectedId)}}function er(s,t){s&1&&(r(0,"div",15)(1,"div",41)(2,"p"),c(3,"\uC11C\uBA85 \uC870\uD569 \uAE30\uB2A5\uC740 \uCD94\uD6C4 \uC9C0\uC6D0 \uC608\uC815\uC785\uB2C8\uB2E4."),a()()())}function tr(s,t){if(s&1){let e=y();r(0,"div",3),f("click",function(){g(e);let n=p();return u(n.onClose())}),r(1,"div",4),f("click",function(n){g(e);let o=p();return n.stopPropagation(),u(o.closeMoreMenu())}),r(2,"div",5)(3,"button",6),f("click",function(){g(e);let n=p();return u(n.onClose())}),b(4,"img",7),a()(),r(5,"div",8)(6,"button",9),f("click",function(){g(e);let n=p();return u(n.selectTab("digital-id"))}),c(7," \uB514\uC9C0\uD138 ID "),a(),r(8,"button",9),f("click",function(){g(e);let n=p();return u(n.selectTab("signature"))}),c(9," \uC11C\uBA85 \uC870\uD569 "),a()(),r(10,"div",10),M(11,Jo,24,3,"div",11)(12,er,4,0,"div",11),a(),r(13,"div",12)(14,"button",13),f("click",function(){g(e);let n=p();return u(n.onApply())}),c(15,"\uC801\uC6A9"),a(),r(16,"button",14),f("click",function(){g(e);let n=p();return u(n.onClose())}),c(17,"\uCDE8\uC18C"),a()()()()}if(s&2){let e=p();l(6),T("active",e.activeTab==="digital-id"),l(2),T("active",e.activeTab==="signature"),l(3),m("ngIf",e.activeTab==="digital-id"),l(),m("ngIf",e.activeTab==="signature")}}var gt=class s{close=new D;apply=new D;idWizardModal;isVisible=!1;activeTab="digital-id";digitalIds=[];selectedId=null;showMoreMenu=!1;moreMenuIdIndex=-1;open(){this.isVisible=!0,this.activeTab="digital-id",this.selectedId=null,this.loadDigitalIds()}onClose(){this.close.emit(),this.isVisible=!1}selectTab(t){this.activeTab=t}loadDigitalIds(){let t=localStorage.getItem("digitalIds");if(t)try{this.digitalIds=JSON.parse(t)}catch{this.digitalIds=[]}}saveDigitalIds(){localStorage.setItem("digitalIds",JSON.stringify(this.digitalIds))}selectDigitalId(t){this.selectedId=t}openAddWizard(){this.idWizardModal&&this.idWizardModal.open()}onWizardComplete(t){this.digitalIds.push(t),this.saveDigitalIds(),this.selectedId=t}refresh(){this.loadDigitalIds()}toggleMoreMenu(t,e){e.stopPropagation(),this.moreMenuIdIndex===t&&this.showMoreMenu?(this.showMoreMenu=!1,this.moreMenuIdIndex=-1):(this.showMoreMenu=!0,this.moreMenuIdIndex=t)}closeMoreMenu(){this.showMoreMenu=!1,this.moreMenuIdIndex=-1}deleteDigitalId(t){if(confirm("\uC774 \uB514\uC9C0\uD138 ID\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")){let e=this.digitalIds[t];this.digitalIds.splice(t,1),this.saveDigitalIds(),this.selectedId===e&&(this.selectedId=null)}this.closeMoreMenu()}exportDigitalId(t){alert("\uB514\uC9C0\uD138 ID \uB0B4\uBCF4\uB0B4\uAE30 \uAE30\uB2A5\uC740 \uCD94\uD6C4 \uC9C0\uC6D0 \uC608\uC815\uC785\uB2C8\uB2E4."),this.closeMoreMenu()}onApply(){this.apply.emit(this.selectedId),this.isVisible=!1}formatDate(t){let e=new Date(t),i=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),d=e.getHours(),h=String(e.getMinutes()).padStart(2,"0"),_=String(e.getSeconds()).padStart(2,"0"),C=d>=12?"\uC624\uD6C4":"\uC624\uC804",x=d%12||12,v=-e.getTimezoneOffset(),w=String(Math.floor(Math.abs(v)/60)).padStart(2,"0"),E=String(Math.abs(v)%60).padStart(2,"0"),z=v>=0?"+":"-";return`${i}-${n}-${o} ${C} ${x}:${h}:${_} ${z}${w}:${E}`}getStorageTypeLabel(t){return t==="file"?"\uB514\uC9C0\uD138 ID \uD30C\uC77C":"Windows \uC778\uC99D\uC11C"}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-digital-id-manager-modal"]],viewQuery:function(e,i){if(e&1&&re(Qo,5),e&2){let n;ae(n=se())&&(i.idWizardModal=n.first)}},outputs:{close:"close",apply:"apply"},standalone:!1,decls:3,vars:1,consts:[["idWizard",""],["class","modal-overlay",3,"click",4,"ngIf"],[3,"complete","close"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","20","height","20"],[1,"tab-bar"],[1,"tab-btn",3,"click"],[1,"modal-body"],["class","tab-content",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"tab-content"],[1,"list-header"],[1,"list-title"],[1,"list-actions"],[1,"action-btn",3,"click"],["src","./images/icons/pc/btn-gnb-upload.svg","alt","\uCD94\uAC00","width","14","height","14"],["src","./images/icons/pc/btn-gnb-rotation-right.svg","alt","\uC0C8\uB85C\uACE0\uCE68","width","14","height","14"],[1,"id-list-container"],[1,"id-list-table"],[3,"selected","click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","certificate-info",4,"ngIf"],[3,"click"],[1,"more-cell"],[1,"more-btn",3,"click"],["src","./images/icons/pc/ico-more.svg","alt","\uB354\uBCF4\uAE30","width","16","height","16"],["class","more-menu",4,"ngIf"],[1,"more-menu"],[1,"delete",3,"click"],["colspan","3",1,"empty-message"],[1,"certificate-info"],[1,"info-table"],[1,"info-row"],[1,"info-label"],[1,"info-value"],["href","javascript:void(0)",1,"more-link"],[1,"empty-state"]],template:function(e,i){if(e&1){let n=y();M(0,tr,18,6,"div",1),r(1,"app-digital-id-wizard-modal",2,0),f("complete",function(d){return g(n),u(i.onWizardComplete(d))})("close",function(){return g(n),u(i.closeMoreMenu())}),a()}e&2&&m("ngIf",i.isVisible)},dependencies:[$,R,$e],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:560px;max-width:95vw;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 4px 20px #00000026}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:8px 12px;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;color:#666;border-radius:4px}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.tab-bar[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #e0e0e0}.tab-bar[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{flex:1;padding:12px 16px;background:#f5f5f5;border:none;cursor:pointer;font-size:14px;color:#666;transition:all .2s}.tab-bar[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover{background:#eee}.tab-bar[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{background:#fff;color:#1976d2;font-weight:500;border-bottom:2px solid #1976d2;margin-bottom:-1px}.tab-bar[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid #e0e0e0}.modal-body[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex;flex-direction:column}.tab-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#f5f5f5;border-bottom:1px solid #e0e0e0}.list-header[_ngcontent-%COMP%]   .list-title[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:#333}.list-header[_ngcontent-%COMP%]   .list-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.list-header[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:6px 12px;background:#fff;border:1px solid #ccc;border-radius:4px;font-size:12px;cursor:pointer;color:#333}.list-header[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;border-color:#999}.list-header[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.id-list-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;min-height:150px;max-height:200px}.id-list-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.id-list-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;background:#f9f9f9}.id-list-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 12px;text-align:left;font-size:12px;font-weight:500;color:#666;border-bottom:1px solid #e0e0e0}.id-list-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:40px}.id-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer;transition:background .15s}.id-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f5f5f5}.id-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background:#e3f2fd}.id-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:13px;color:#333;border-bottom:1px solid #f0f0f0}.id-list-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.empty-message[_ngcontent-%COMP%]{text-align:center;color:#999;padding:30px 12px}.more-cell[_ngcontent-%COMP%]{position:relative;text-align:center}.more-cell[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;color:#666;border-radius:4px}.more-cell[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0}.more-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:100%;background:#fff;border:1px solid #e0e0e0;border-radius:4px;box-shadow:0 2px 8px #00000026;z-index:100;min-width:100px}.more-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;width:100%;padding:8px 12px;text-align:left;background:none;border:none;cursor:pointer;font-size:13px;color:#333}.more-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f5f5f5}.more-menu[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%]{color:#d32f2f}.more-menu[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%]:hover{background:#ffebee}.certificate-info[_ngcontent-%COMP%]{padding:16px;background:#fafafa;border-top:1px solid #e0e0e0}.certificate-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:#333;margin:0 0 12px}.certificate-info[_ngcontent-%COMP%]   .info-table[_ngcontent-%COMP%]{display:table;width:100%}.certificate-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:table-row}.certificate-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{display:table-cell;width:100px;padding:4px 8px 4px 0;font-size:12px;color:#666;vertical-align:top}.certificate-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{display:table-cell;padding:4px 0;font-size:12px;color:#333}.certificate-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .more-link[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-size:12px}.certificate-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .more-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.empty-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:60px 20px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#999;font-size:14px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;padding:16px;border-top:1px solid #e0e0e0}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 20px;border-radius:4px;font-size:14px;cursor:pointer;border:1px solid transparent}.modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:#1976d2;color:#fff;border-color:#1976d2}.modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background:#1565c0}.modal-footer[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#333;border-color:#ccc}.modal-footer[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}"]})};function ir(s,t){s&1&&(r(0,"div",23),b(1,"img",24),a())}function or(s,t){if(s&1){let e=y();r(0,"div",19),f("click",function(){let n=g(e).$implicit,o=p(2);return u(o.selectColor(n.value))}),b(1,"div",20),r(2,"span",21),c(3),a(),M(4,ir,2,0,"div",22),a()}if(s&2){let e=t.$implicit,i=p(2);T("selected",i.selectedColor===e.value),l(),pe("background-color",e.preview),l(2),B(e.name),l(),m("ngIf",i.selectedColor===e.value)}}function rr(s,t){if(s&1){let e=y();r(0,"button",25),f("click",function(){let n=g(e).$implicit,o=p(2);return u(o.selectOpacity(n.value))}),c(1),a()}if(s&2){let e=t.$implicit,i=p(2);T("selected",i.selectedOpacity===e.value),l(),I(" ",e.name," ")}}function ar(s,t){if(s&1){let e=y();r(0,"div",1),f("click",function(){g(e);let n=p();return u(n.closeModal())}),r(1,"div",2),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",3)(3,"h2"),c(4,"\uD558\uC774\uB77C\uC774\uD2B8 \uC18D\uC131"),a(),r(5,"button",4),f("click",function(){g(e);let n=p();return u(n.closeModal())}),b(6,"img",5),a()(),r(7,"div",6)(8,"div",7)(9,"h3",8),c(10,"\uC0C9\uC0C1"),a(),r(11,"div",9),M(12,or,5,6,"div",10),a()(),r(13,"div",7)(14,"h3",8),c(15,"\uD22C\uBA85\uB3C4"),a(),r(16,"div",11),M(17,rr,2,3,"button",12),a()(),r(18,"div",7)(19,"h3",8),c(20,"\uBBF8\uB9AC\uBCF4\uAE30"),a(),r(21,"div",13)(22,"div",14),c(23," \uC0D8\uD50C \uD14D\uC2A4\uD2B8\uC785\uB2C8\uB2E4. "),r(24,"span",15),c(25,"\uD558\uC774\uB77C\uC774\uD2B8 \uD6A8\uACFC"),a(),c(26," \uB97C \uBBF8\uB9AC \uD655\uC778\uD558\uC138\uC694. "),a()()()(),r(27,"div",16)(28,"button",17),f("click",function(){g(e);let n=p();return u(n.closeModal())}),c(29,"\uCDE8\uC18C"),a(),r(30,"button",18),f("click",function(){g(e);let n=p();return u(n.onConfirm())}),c(31,"\uC801\uC6A9"),a()()()()}if(s&2){let e=p();l(12),m("ngForOf",e.colorOptions),l(5),m("ngForOf",e.opacityOptions),l(7),m("ngStyle",e.previewStyle)}}var ut=class s{close=new D;confirm=new D;isVisible=!1;colorOptions=[{name:"\uB178\uB780\uC0C9",value:"#FFFF00",preview:"#FFFF00"},{name:"\uCD08\uB85D\uC0C9",value:"#00FF00",preview:"#00FF00"},{name:"\uD30C\uB780\uC0C9",value:"#00BFFF",preview:"#00BFFF"},{name:"\uBD84\uD64D\uC0C9",value:"#FF69B4",preview:"#FF69B4"},{name:"\uC8FC\uD669\uC0C9",value:"#FFA500",preview:"#FFA500"},{name:"\uBCF4\uB77C\uC0C9",value:"#DA70D6",preview:"#DA70D6"}];opacityOptions=[{name:"10%",value:.1},{name:"25%",value:.25},{name:"50%",value:.5},{name:"75%",value:.75},{name:"100%",value:1}];selectedColor="#FFFF00";selectedOpacity=.5;open(){this.isVisible=!0,this.selectedColor="#FFFF00",this.selectedOpacity=.5}closeModal(){this.isVisible=!1,this.close.emit()}selectColor(t){this.selectedColor=t}selectOpacity(t){this.selectedOpacity=t}onConfirm(){this.confirm.emit({color:this.selectedColor,opacity:this.selectedOpacity}),this.closeModal()}get previewStyle(){return{"background-color":this.selectedColor,opacity:this.selectedOpacity}}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-highlight-properties-modal"]],outputs:{close:"close",confirm:"confirm"},standalone:!1,decls:1,vars:1,consts:[["class","highlight-modal-overlay",3,"click",4,"ngIf"],[1,"highlight-modal-overlay",3,"click"],[1,"highlight-modal-container",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","24","height","24"],[1,"modal-body"],[1,"property-section"],[1,"section-title"],[1,"color-grid"],["class","color-option",3,"selected","click",4,"ngFor","ngForOf"],[1,"opacity-options"],["class","opacity-btn",3,"selected","click",4,"ngFor","ngForOf"],[1,"preview-container"],[1,"preview-text"],[1,"preview-highlight",3,"ngStyle"],[1,"modal-footer"],[1,"btn","btn-cancel",3,"click"],[1,"btn","btn-confirm",3,"click"],[1,"color-option",3,"click"],[1,"color-preview"],[1,"color-name"],["class","check-mark",4,"ngIf"],[1,"check-mark"],["src","./images/icons/pc/ico-check.svg","alt","\uC120\uD0DD","width","16","height","16"],[1,"opacity-btn",3,"click"]],template:function(e,i){e&1&&M(0,ar,32,3,"div",0),e&2&&m("ngIf",i.isVisible)},dependencies:[$,R,Rn],styles:[".highlight-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.highlight-modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 40px #00000040;width:90%;max-width:380px;max-height:70vh;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px 12px;border-bottom:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:17px;font-weight:600;color:#111827}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;color:#6b7280;border-radius:6px;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#111827}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.modal-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px 20px}.property-section[_ngcontent-%COMP%]{margin-bottom:20px}.property-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.section-title[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#374151;margin:0 0 12px}.color-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}.color-option[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;gap:6px;padding:10px 8px;border:2px solid #e5e7eb;border-radius:8px;cursor:pointer;transition:all .2s}.color-option[_ngcontent-%COMP%]:hover{border-color:#d1d5db;background:#f9fafb}.color-option.selected[_ngcontent-%COMP%]{border-color:#3b82f6;background:#eff6ff}.color-option[_ngcontent-%COMP%]   .color-preview[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;border:2px solid rgba(0,0,0,.1);box-shadow:0 1px 4px #0000001a}.color-option[_ngcontent-%COMP%]   .color-name[_ngcontent-%COMP%]{font-size:11px;color:#6b7280;font-weight:500}.color-option[_ngcontent-%COMP%]   .check-mark[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:16px;height:16px;background:#3b82f6;border-radius:50%;display:flex;align-items:center;justify-content:center}.color-option[_ngcontent-%COMP%]   .check-mark[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px}.opacity-options[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap}.opacity-btn[_ngcontent-%COMP%]{flex:1;min-width:60px;padding:8px 12px;border:2px solid #e5e7eb;border-radius:6px;background:#fff;font-size:13px;font-weight:500;color:#6b7280;cursor:pointer;transition:all .2s}.opacity-btn[_ngcontent-%COMP%]:hover{border-color:#d1d5db;background:#f9fafb}.opacity-btn.selected[_ngcontent-%COMP%]{border-color:#3b82f6;background:#eff6ff;color:#3b82f6;font-weight:600}.preview-container[_ngcontent-%COMP%]{padding:12px;background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px}.preview-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.5;color:#374151}.preview-highlight[_ngcontent-%COMP%]{padding:2px 4px;border-radius:2px}.modal-footer[_ngcontent-%COMP%]{display:flex;gap:10px;padding:12px 20px;border-top:1px solid #e5e7eb}.btn[_ngcontent-%COMP%]{flex:1;padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.btn-cancel[_ngcontent-%COMP%]{background:#fff;color:#6b7280;border:1px solid #d1d5db}.btn-cancel[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#9ca3af}.btn-confirm[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn-confirm[_ngcontent-%COMP%]:hover{background:#2563eb}.btn-confirm[_ngcontent-%COMP%]:disabled{background:#d1d5db;cursor:not-allowed}@media (max-width: 480px){.color-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.opacity-options[_ngcontent-%COMP%]{flex-direction:column}.opacity-options[_ngcontent-%COMP%]   .opacity-btn[_ngcontent-%COMP%]{width:100%}}"]})};var qe=class s{search=new D;close=new D;isVisible=!1;searchQuery="";caseSensitive=!1;wholeWords=!1;highlightAll=!0;open(t=""){this.isVisible=!0,this.searchQuery=t}hide(){this.isVisible=!1}onSearch(){this.searchQuery.trim()&&this.search.emit({query:this.searchQuery,caseSensitive:this.caseSensitive,wholeWords:this.wholeWords,highlightAll:this.highlightAll})}onClose(){this.hide(),this.close.emit()}onOverlayClick(t){t.target===t.currentTarget&&this.onClose()}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-search-modal"]],outputs:{search:"search",close:"close"},decls:32,vars:7,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-title"],["title","\uB2EB\uAE30",1,"close-btn",3,"click"],[1,"material-icons"],[1,"modal-body"],[1,"search-input-group"],["type","text","placeholder","\uAC80\uC0C9\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694","autofocus","",1,"search-input",3,"ngModelChange","keyup.enter","ngModel"],["title","\uAC80\uC0C9",1,"search-btn",3,"click"],[1,"search-options"],[1,"option-item"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){e&1&&(r(0,"div",0),f("click",function(o){return i.onOverlayClick(o)}),r(1,"div",1),f("click",function(o){return o.stopPropagation()}),r(2,"div",2)(3,"h3",3),c(4,"PDF \uAC80\uC0C9"),a(),r(5,"button",4),f("click",function(){return i.onClose()}),r(6,"span",5),c(7,"close"),a()()(),r(8,"div",6)(9,"div",7)(10,"input",8),k("ngModelChange",function(o){return S(i.searchQuery,o)||(i.searchQuery=o),o}),f("keyup.enter",function(){return i.onSearch()}),a(),r(11,"button",9),f("click",function(){return i.onSearch()}),r(12,"span",5),c(13,"search"),a()()(),r(14,"div",10)(15,"label",11)(16,"input",12),k("ngModelChange",function(o){return S(i.caseSensitive,o)||(i.caseSensitive=o),o}),a(),r(17,"span"),c(18,"\uB300\uC18C\uBB38\uC790 \uAD6C\uBD84"),a()(),r(19,"label",11)(20,"input",12),k("ngModelChange",function(o){return S(i.wholeWords,o)||(i.wholeWords=o),o}),a(),r(21,"span"),c(22,"\uB2E8\uC5B4 \uB2E8\uC704\uB85C \uAC80\uC0C9"),a()(),r(23,"label",11)(24,"input",12),k("ngModelChange",function(o){return S(i.highlightAll,o)||(i.highlightAll=o),o}),a(),r(25,"span"),c(26,"\uBAA8\uB4E0 \uACB0\uACFC \uAC15\uC870"),a()()()(),r(27,"div",13)(28,"button",14),f("click",function(){return i.onClose()}),c(29,"\uCDE8\uC18C"),a(),r(30,"button",15),f("click",function(){return i.onSearch()}),c(31," \uAC80\uC0C9 (Enter) "),a()()()()),e&2&&(T("visible",i.isVisible),l(10),O("ngModel",i.searchQuery),l(6),O("ngModel",i.caseSensitive),l(4),O("ngModel",i.wholeWords),l(4),O("ngModel",i.highlightAll),l(6),m("disabled",!i.searchQuery.trim()))},dependencies:[ge,Se,G,Be,Q,Y],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:10000;opacity:0;visibility:hidden;transition:opacity .2s ease,visibility .2s ease}.modal-overlay.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 20px #00000026;max-width:500px;width:90%;max-height:90vh;overflow:auto;animation:_ngcontent-%COMP%_slideIn .2s ease}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;padding:4px;cursor:pointer;color:#666;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:background-color .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px}.modal-body[_ngcontent-%COMP%]{padding:20px}.search-input-group[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:20px}.search-input-group[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1;padding:10px 14px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s}.search-input-group[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4285f4;box-shadow:0 0 0 3px #4285f41a}.search-input-group[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#999}.search-input-group[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]{padding:10px 16px;background-color:#4285f4;color:#fff;border:none;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .2s}.search-input-group[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:hover{background-color:#3367d6}.search-input-group[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:active{background-color:#2851a3}.search-input-group[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.search-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.search-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;-webkit-user-select:none;user-select:none}.search-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#4285f4}.search-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#333}.search-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#4285f4}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:16px 20px;border-top:1px solid #e0e0e0}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.modal-footer[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333}.modal-footer[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff}.modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#3367d6}.modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}"]})};function cr(s,t){if(s&1){let e=y();r(0,"div",1),f("click",function(){g(e);let n=p();return u(n.closeModal())}),r(1,"div",2),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",3)(3,"h2"),c(4),a(),r(5,"button",4),f("click",function(){g(e);let n=p();return u(n.closeModal())}),b(6,"img",5),a()(),r(7,"div",6)(8,"div",7)(9,"label",8),c(10),a(),r(11,"input",9),k("ngModelChange",function(n){g(e);let o=p();return S(o.title,n)||(o.title=n),u(n)}),f("keypress",function(n){g(e);let o=p();return u(o.onKeyPress(n))}),a(),r(12,"p",10),c(13),a()()(),r(14,"div",11)(15,"button",12),f("click",function(){g(e);let n=p();return u(n.closeModal())}),c(16," \uCDE8\uC18C "),a(),r(17,"button",13),f("click",function(){g(e);let n=p();return u(n.confirmTitle())}),c(18),a()()()()}if(s&2){let e=p();l(4),B(e.modalTitle),l(6),I(" ",e.actionType==="download"?"\uD30C\uC77C\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694":"\uBB38\uC11C \uC81C\uBAA9\uC744 \uC785\uB825\uD558\uC138\uC694"," "),l(),O("ngModel",e.title),m("placeholder",e.actionType==="download"?"\uC608: 2025\uB144_\uBCF4\uACE0\uC11C.pdf":"\uC608: 2025\uB144 \uBCF4\uACE0\uC11C"),l(2),I(" ",e.actionType==="download"?"Enter\uB97C \uB204\uB974\uAC70\uB098 \uB2E4\uC6B4\uB85C\uB4DC \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC138\uC694":"Enter\uB97C \uB204\uB974\uAC70\uB098 \uC800\uC7A5 \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC138\uC694"," "),l(4),m("disabled",!e.title.trim()),l(),I(" ",e.actionType==="download"?"\uB2E4\uC6B4\uB85C\uB4DC":"\uC800\uC7A5"," ")}}var mt=class s{close=new D;confirm=new D;isVisible=!1;title="";defaultTitle="";modalTitle="\uBB38\uC11C \uC81C\uBAA9 \uC785\uB825";actionType="save";isEditor=!1;open(t="",e="save",i=!1){this.defaultTitle=t,this.title=t,this.actionType=e,this.isEditor=i,e==="download"?this.modalTitle="PDF \uB2E4\uC6B4\uB85C\uB4DC":this.modalTitle=i?"\uD3B8\uC9D1 \uBB38\uC11C \uC800\uC7A5":"\uBB38\uC11C \uC800\uC7A5",this.isVisible=!0}closeModal(){this.isVisible=!1,this.title="",this.defaultTitle="",this.modalTitle="\uBB38\uC11C \uC81C\uBAA9 \uC785\uB825",this.actionType="save",this.isEditor=!1,this.close.emit()}confirmTitle(){let t=this.title.trim();t&&(this.isVisible=!1,this.confirm.emit(t),this.title="",this.defaultTitle="",this.modalTitle="\uBB38\uC11C \uC81C\uBAA9 \uC785\uB825",this.actionType="save",this.isEditor=!1)}onKeyPress(t){t.key==="Enter"?this.confirmTitle():t.key==="Escape"&&this.closeModal()}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-title-input-modal"]],outputs:{close:"close",confirm:"confirm"},standalone:!1,decls:1,vars:1,consts:[["class","title-input-modal-overlay",3,"click",4,"ngIf"],[1,"title-input-modal-overlay",3,"click"],[1,"title-input-modal-container",3,"click"],[1,"modal-header"],["type","button",1,"close-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","24","height","24"],[1,"modal-body"],[1,"input-section"],["for","documentTitle"],["id","documentTitle","type","text","autofocus","",1,"title-input",3,"ngModelChange","keypress","ngModel","placeholder"],[1,"input-hint"],[1,"modal-footer"],["type","button",1,"btn-cancel",3,"click"],["type","button",1,"btn-confirm",3,"click","disabled"]],template:function(e,i){e&1&&M(0,cr,19,7,"div",0),e&2&&m("ngIf",i.isVisible)},dependencies:[R,G,Q,Y],styles:[".title-input-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out}.title-input-modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 40px #0003;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#1f2937}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;color:#6b7280;transition:color .2s;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#1f2937}.modal-body[_ngcontent-%COMP%]{padding:24px;flex:1}.modal-body[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.modal-body[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#374151}.modal-body[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e5e7eb;border-radius:8px;font-size:16px;transition:all .2s;outline:none}.modal-body[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.modal-body[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.modal-body[_ngcontent-%COMP%]   .input-section[_ngcontent-%COMP%]   .input-hint[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin:0}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #e5e7eb}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;border:none}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.98)}.modal-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.modal-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:#e5e7eb}.modal-footer[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.modal-footer[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.modal-footer[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]:disabled{background:#d1d5db;cursor:not-allowed;opacity:.6}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})};function pr(s,t){if(s&1&&(r(0,"p",9),c(1),a()),s&2){let e=p();l(),I(' "',e.data.fileName,'" ')}}var Kt=class s{constructor(t,e){this.dialogRef=t;this.data=e}onSave(){this.dialogRef.close("save")}onDiscard(){this.dialogRef.close("discard")}onCancel(){this.dialogRef.close("cancel")}static \u0275fac=function(e){return new(e||s)(N(Yn),N(Kn))};static \u0275cmp=F({type:s,selectors:[["app-save-confirm-dialog"]],decls:16,vars:2,consts:[[1,"save-confirm-dialog"],[1,"dialog-header"],[1,"dialog-icon"],[1,"warning-icon"],[1,"dialog-title"],["class","dialog-subtitle",4,"ngIf"],["mat-button","","cdkFocusInitial","",1,"action-btn","save-btn",3,"click"],["mat-button","",1,"action-btn","discard-btn",3,"click"],["mat-button","",1,"action-btn","cancel-btn",3,"click"],[1,"dialog-subtitle"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),c(4,"warning"),a()(),r(5,"mat-dialog-content")(6,"h2",4),c(7),a(),M(8,pr,2,1,"p",5),a()(),r(9,"mat-dialog-actions")(10,"button",6),f("click",function(){return i.onSave()}),c(11," \uC800\uC7A5 "),a(),r(12,"button",7),f("click",function(){return i.onDiscard()}),c(13," \uC544\uB2C8\uC624 "),a(),r(14,"button",8),f("click",function(){return i.onCancel()}),c(15," \uCDE8\uC18C "),a()()()),e&2&&(l(7),B(i.data.message),l(),m("ngIf",i.data.fileName))},dependencies:[ge,R,ei,Jn,Zn,ni,ti,oi,ii],styles:["[_nghost-%COMP%]     .mat-mdc-dialog-container{border-radius:16px!important;padding:0;overflow:hidden}[_nghost-%COMP%]     .mat-mdc-dialog-surface{border-radius:16px!important;overflow:hidden}[_nghost-%COMP%]     .mdc-dialog__surface{border-radius:16px!important;overflow:hidden}.save-confirm-dialog[_ngcontent-%COMP%]{min-width:320px;max-width:480px;padding:24px}.dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px}.dialog-icon[_ngcontent-%COMP%]{flex-shrink:0}.dialog-icon[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{width:48px;height:48px;font-size:48px;color:#ff6200;line-height:1}mat-dialog-content[_ngcontent-%COMP%]{padding:0;margin:0;flex:1;text-align:left}mat-dialog-content[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{margin:4px 0 8px;font-size:16px;font-weight:600;color:#333;line-height:1.5}mat-dialog-content[_ngcontent-%COMP%]   .dialog-subtitle[_ngcontent-%COMP%]{margin:0;font-size:14px;line-height:1.5;color:#666;word-break:break-all}mat-dialog-actions[_ngcontent-%COMP%]{padding:0;margin:0;display:flex;gap:8px;justify-content:flex-end}mat-dialog-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{min-width:80px;height:44px;border-radius:8px;font-size:14px;font-weight:500;transition:all .2s ease}mat-dialog-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}mat-dialog-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:#ff6200;color:#fff}mat-dialog-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover{background:#e65100}mat-dialog-actions[_ngcontent-%COMP%]   .discard-btn[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}mat-dialog-actions[_ngcontent-%COMP%]   .discard-btn[_ngcontent-%COMP%]:hover{background:#e8e8e8}mat-dialog-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}mat-dialog-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background:#e8e8e8}"]})};var ft=class s{constructor(){}deletePages(t,e){return P(this,null,function*(){try{let n=yield(yield fetch(t)).arrayBuffer(),o=yield PDFLib.PDFDocument.load(n),d=o.getPageCount(),h=[...e].sort((v,w)=>w-v);for(let v of h)if(v<1||v>d)throw new Error(`\uD398\uC774\uC9C0 ${v}\uB294 \uC720\uD6A8\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. (\uCD1D ${d}\uD398\uC774\uC9C0)`);for(let v of h){let w=v-1;o.removePage(w)}let _=yield o.save(),C=new Blob([_],{type:"application/pdf"});return URL.createObjectURL(C)}catch(i){throw i}})}getPageCount(t){return P(this,null,function*(){try{let i=yield(yield fetch(t)).arrayBuffer();return(yield PDFLib.PDFDocument.load(i)).getPageCount()}catch(e){throw e}})}static \u0275fac=function(e){return new(e||s)};static \u0275prov=de({token:s,factory:s.\u0275fac,providedIn:"root"})};var ht=class s{db=null;config={dbName:"EzReader_TabStorage_v1_2025",version:2,storeName:"recent_files",maxRecentFiles:20,maxFileSize:50,autoCleanupDays:30};dbInitPromise=null;constructor(){this.dbInitPromise=this.initDB()}initDB(){return P(this,null,function*(){return new Promise((t,e)=>{if(!window.indexedDB){console.error("IndexedDB not supported"),e(new Error("IndexedDB not supported"));return}let i=indexedDB.open(this.config.dbName,this.config.version);i.onerror=()=>{console.error("IndexedDB open error:",i.error),e(i.error)},i.onsuccess=()=>{this.db=i.result,t()},i.onupgradeneeded=n=>{let o=n.target.result;if(!o.objectStoreNames.contains(this.config.storeName)){let d=o.createObjectStore(this.config.storeName,{keyPath:"id"});d.createIndex("name","name",{unique:!1}),d.createIndex("date","date",{unique:!1}),d.createIndex("addedAt","addedAt",{unique:!1}),d.createIndex("lastAccessedAt","lastAccessedAt",{unique:!1}),d.createIndex("accessCount","accessCount",{unique:!1})}}})})}ensureDB(){return P(this,null,function*(){if(this.dbInitPromise&&(yield this.dbInitPromise),!this.db)throw new Error("Database not initialized")})}addRecentFile(t,e,i,n){return P(this,null,function*(){yield this.ensureDB();let o=i/(1024*1024);if(o>this.config.maxFileSize){console.warn(`File too large for recent files: ${t} (${o.toFixed(2)}MB)`);return}let d=yield this.blobToArrayBuffer(e),h=this.generateFileId(t),_=Date.now(),C={id:h,name:t,date:new Date().toISOString(),size:n,sizeBytes:i,pdfData:d,pdfType:e.type,addedAt:_,lastAccessedAt:_,accessCount:1},x=this.db.transaction([this.config.storeName],"readwrite"),v=x.objectStore(this.config.storeName),w=v.get(h);return new Promise((E,z)=>{w.onsuccess=()=>{let A=w.result;A&&(C.accessCount=A.accessCount+1,C.addedAt=A.addedAt),v.put(C)},x.oncomplete=()=>P(this,null,function*(){yield this.cleanupOldFiles(),E()}),x.onerror=()=>z(x.error)})})}loadRecentFiles(){return P(this,null,function*(){try{yield this.ensureDB();let i=this.db.transaction([this.config.storeName],"readonly").objectStore(this.config.storeName).getAll();return new Promise((n,o)=>{i.onsuccess=()=>{let d=i.result;d.sort((h,_)=>_.lastAccessedAt-h.lastAccessedAt),d=d.slice(0,this.config.maxRecentFiles),n({success:!0,files:d})},i.onerror=()=>{o(i.error)}})}catch(t){return console.error("Error loading recent files:",t),{success:!1,files:[],errors:[t instanceof Error?t.message:"Unknown error"]}}})}deleteRecentFile(t){return P(this,null,function*(){yield this.ensureDB();let e=this.db.transaction([this.config.storeName],"readwrite");return e.objectStore(this.config.storeName).delete(t),new Promise((n,o)=>{e.oncomplete=()=>{n()},e.onerror=()=>o(e.error)})})}deleteRecentFileByName(t){return P(this,null,function*(){let e=this.generateFileId(t);yield this.deleteRecentFile(e)})}clearAllRecentFiles(){return P(this,null,function*(){yield this.ensureDB();let t=this.db.transaction([this.config.storeName],"readwrite");return t.objectStore(this.config.storeName).clear(),new Promise((i,n)=>{t.oncomplete=()=>{i()},t.onerror=()=>n(t.error)})})}cleanupOldFiles(){return P(this,null,function*(){yield this.ensureDB();let e=this.db.transaction([this.config.storeName],"readwrite").objectStore(this.config.storeName),i=yield this.getAllFilesSync(e);i.sort((_,C)=>C.lastAccessedAt-_.lastAccessedAt);let n=i.slice(this.config.maxRecentFiles),o=Date.now()-this.config.autoCleanupDays*24*60*60*1e3,d=i.filter(_=>_.lastAccessedAt<o),h=new Set([...n,...d]);h.forEach(_=>{e.delete(_.id)}),h.size>0})}getAllFilesSync(t){return P(this,null,function*(){return new Promise((e,i)=>{let n=t.getAll();n.onsuccess=()=>e(n.result),n.onerror=()=>i(n.error)})})}generateFileId(t){return`recent_${t.toLowerCase().replace(/[^a-z0-9]/g,"_")}`}blobToArrayBuffer(t){return P(this,null,function*(){return new Promise((e,i)=>{let n=new FileReader;n.onload=()=>e(n.result),n.onerror=()=>i(n.error),n.readAsArrayBuffer(t)})})}arrayBufferToBlob(t,e){return new Blob([t],{type:e})}getRecentFileCount(){return P(this,null,function*(){yield this.ensureDB();let i=this.db.transaction([this.config.storeName],"readonly").objectStore(this.config.storeName).count();return new Promise((n,o)=>{i.onsuccess=()=>n(i.result),i.onerror=()=>o(i.error)})})}getStorageSize(){return P(this,null,function*(){let t=yield this.loadRecentFiles();return t.success?t.files.reduce((i,n)=>i+n.sizeBytes,0)/(1024*1024):0})}closeDB(){this.db&&(this.db.close(),this.db=null)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=de({token:s,factory:s.\u0275fac,providedIn:"root"})};var _t=class s{constructor(t,e){this.router=t;this.recentFileStorage=e;this.initializeRecentFiles()}RECENT_FILES_KEY="ezReaderRecentFiles";recentFilesSubject=new kn([]);recentFiles$=this.recentFilesSubject.asObservable();config={maxRecentFiles:20,supportedImageFormats:["image/jpeg","image/png","image/gif","image/webp"],supportedDocumentFormats:["application/pdf",".doc",".docx",".txt"],maxFileSize:50*1024*1024};initializeRecentFiles(){return P(this,null,function*(){yield this.loadRecentFiles(),yield this.migrateFromLocalStorage()})}migrateFromLocalStorage(){return P(this,null,function*(){let t=localStorage.getItem(this.RECENT_FILES_KEY);if(t)try{let e=JSON.parse(t);if(e.length>0){for(let i of e)if(i.data&&i.data.startsWith("data:"))try{let n=yield this.base64ToBlob(i.data),o=n.size;yield this.recentFileStorage.addRecentFile(i.name,n,o,i.size)}catch(n){console.warn(`Failed to migrate file: ${i.name}`,n)}localStorage.removeItem(this.RECENT_FILES_KEY),yield this.loadRecentFiles()}}catch(e){console.error("Migration error:",e)}})}base64ToBlob(t){return P(this,null,function*(){return yield(yield fetch(t)).blob()})}loadRecentFiles(){return P(this,null,function*(){let t=yield this.recentFileStorage.loadRecentFiles();if(t.success){let e=t.files.map(i=>({name:i.name,date:i.date,data:"",size:i.size}));return this.recentFilesSubject.next(e),e}return[]})}getRecentFileWithBlob(t){return P(this,null,function*(){let e=yield this.recentFileStorage.loadRecentFiles();if(e.success){let i=e.files.find(n=>n.name===t);if(i&&i.pdfData)return this.recentFileStorage.arrayBufferToBlob(i.pdfData,i.pdfType)}return null})}saveRecentFiles(t){this.recentFilesSubject.next(t)}addRecentFile(t,e,i){return P(this,null,function*(){let n;if(e.startsWith("blob:"))n=yield(yield fetch(e)).blob();else if(e.startsWith("data:"))n=yield this.base64ToBlob(e);else{console.warn("Unknown data format for recent file");return}let o=n.size;yield this.recentFileStorage.addRecentFile(t,n,o,i),yield this.loadRecentFiles()})}deleteRecentFile(t){return P(this,null,function*(){yield this.recentFileStorage.deleteRecentFileByName(t.name),yield this.loadRecentFiles()})}handleFileUpload(t,e=!1){return new Promise(i=>{let n=document.createElement("input");n.type="file",n.multiple=e,n.accept=t.join(","),n.onchange=o=>{i(o.target.files)},n.onclick=()=>{setTimeout(()=>{n.files||i(null)},1e3)},n.click()})}processPdfFile(t){return P(this,null,function*(){return new Promise((e,i)=>{let n=new FileReader;n.onload=()=>{let o=n.result;this.addRecentFile(t.name,o,this.formatFileSize(t.size)),e(o)},n.onerror=()=>i(n.error),n.readAsDataURL(t)})})}openInViewer(t,e,i="desktop"){let n=i==="mobile"?"/docs_mobile/viewer":"/viewer";this.router.navigate([n],{state:{pdfData:t,name:e}})}formatFileSize(t){if(t===0)return"0 Bytes";let e=1024,i=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,n)).toFixed(2))+" "+i[n]}handleFileDrop(t){t.preventDefault();let e=t.dataTransfer?.files;if(e&&e.length>0){let i=e[0];return i.type==="application/pdf"||i.name.toLowerCase().endsWith(".pdf")?i:null}return null}handleFileAction(t,e){return P(this,null,function*(){switch(t){case"open":e.length>0&&e[0].data&&this.openInViewer(e[0].data,e[0].name);break;case"share":break;case"rename":break;case"copy":break;case"delete":break;default:}})}static \u0275fac=function(e){return new(e||s)(De(Ie),De(ht))};static \u0275prov=de({token:s,factory:s.\u0275fac,providedIn:"root"})};function fr(s,t){s&1&&(r(0,"div",17),b(1,"div",18),r(2,"p"),c(3,"\uC378\uB124\uC77C \uB85C\uB529 \uC911..."),a()())}function hr(s,t){s&1&&(r(0,"div",25),b(1,"div",26),a())}function _r(s,t){if(s&1&&b(0,"img",27),s&2){let e=p().$implicit;m("src",e.icon,Ce)("alt","\uD398\uC774\uC9C0 "+e.pageNumber)}}function Cr(s,t){s&1&&(r(0,"div",28),b(1,"img",29),a())}function br(s,t){if(s&1){let e=y();r(0,"div",19),f("click",function(){let n=g(e).$implicit,o=p(2);return u(o.onThumbnailClick(n))}),r(1,"span",20),c(2),a(),r(3,"div",21),M(4,hr,2,0,"div",22)(5,_r,1,2,"img",23)(6,Cr,2,0,"div",24),a()()}if(s&2){let e=t.$implicit;T("active",e.active)("loading",e.isLoading),m("title","\uD398\uC774\uC9C0 "+e.pageNumber),l(2),B(e.pageNumber),l(2),m("ngIf",e.isLoading),l(),m("ngIf",!e.isLoading&&e.icon&&e.icon.startsWith("data:")),l(),m("ngIf",!e.isLoading&&(!e.icon||!e.icon.startsWith("data:")))}}function xr(s,t){if(s&1){let e=y();r(0,"div",11)(1,"button",12),f("click",function(){g(e);let n=p();return u(n.togglePanel())}),b(2,"img",13),a(),r(3,"div",14),M(4,fr,4,0,"div",15)(5,br,7,9,"div",16),a()()}if(s&2){let e=p();l(4),m("ngIf",!e.thumbnails||e.thumbnails.length===0),l(),m("ngForOf",e.thumbnails)}}var Zt=class s{constructor(t){this.cdr=t}isVisible=!1;thumbnails=[];close=new D;thumbnailClick=new D;zoomIn=new D;zoomOut=new D;panelExpanded=new D;isExpanded=!1;ngOnChanges(t){t.thumbnails&&this.cdr.detectChanges()}onThumbnailClick(t){this.thumbnails.forEach(e=>e.active=!1),t.active=!0,this.thumbnailClick.emit(t)}onClose(){this.close.emit()}togglePanel(){this.isExpanded=!this.isExpanded,this.panelExpanded.emit(this.isExpanded)}onZoomIn(){this.zoomIn.emit()}onZoomOut(){this.zoomOut.emit()}static \u0275fac=function(e){return new(e||s)(N(Fe))};static \u0275cmp=F({type:s,selectors:[["app-shared-pdf-left-panel"]],inputs:{isVisible:"isVisible",thumbnails:"thumbnails"},outputs:{close:"close",thumbnailClick:"thumbnailClick",zoomIn:"zoomIn",zoomOut:"zoomOut",panelExpanded:"panelExpanded"},standalone:!1,features:[ve],decls:11,vars:3,consts:[[1,"left-sidebar"],[1,"icon-bar"],[1,"icon-group","top"],["title","\uD398\uC774\uC9C0 \uBAA9\uB85D",1,"icon-btn","thumbnail-btn",3,"click"],["src","./images/icons/pc/ico-page.svg","alt","\uD398\uC774\uC9C0","width","24","height","24"],[1,"icon-group","bottom"],["title","\uD655\uB300",1,"icon-btn","zoom-in-btn",3,"click"],["src","./images/icons/pc/btn-gnb-zoom2.svg","alt","\uD655\uB300","width","24","height","24"],["title","\uCD95\uC18C",1,"icon-btn","zoom-out-btn",3,"click"],["src","./images/icons/pc/btn-gnb-zoom.svg","alt","\uCD95\uC18C","width","24","height","24"],["class","expanded-panel",4,"ngIf"],[1,"expanded-panel"],["title","\uD328\uB110 \uC811\uAE30",1,"panel-collapse-btn",3,"click"],["src","./images/icons/pc/btn-fold-left.svg","alt","\uC811\uAE30","width","16","height","16"],[1,"thumbnail-list"],["class","empty-state",4,"ngIf"],["class","thumbnail-item",3,"active","loading","title","click",4,"ngFor","ngForOf"],[1,"empty-state"],[1,"loading-spinner"],[1,"thumbnail-item",3,"click","title"],[1,"page-num"],[1,"thumbnail-preview"],["class","thumbnail-loading",4,"ngIf"],["class","thumbnail-img",3,"src","alt",4,"ngIf"],["class","page-placeholder",4,"ngIf"],[1,"thumbnail-loading"],[1,"loading-spinner","small"],[1,"thumbnail-img",3,"src","alt"],[1,"page-placeholder"],["src","./images/icons/pc/ico-file.svg","alt","\uD398\uC774\uC9C0","width","24","height","24"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),f("click",function(){return i.togglePanel()}),b(4,"img",4),a()(),r(5,"div",5)(6,"button",6),f("click",function(){return i.onZoomIn()}),b(7,"img",7),a(),r(8,"button",8),f("click",function(){return i.onZoomOut()}),b(9,"img",9),a()()(),M(10,xr,6,2,"div",10),a()),e&2&&(l(3),T("active",i.isExpanded),l(7),m("ngIf",i.isExpanded))},dependencies:[$,R],styles:['@charset "UTF-8";.left-sidebar[_ngcontent-%COMP%]{display:flex;height:100%;position:absolute;left:0;top:0;bottom:0;z-index:900;pointer-events:none}.icon-bar[_ngcontent-%COMP%]{width:48px;background:#fff;border-right:1px solid #e0e0e0;display:flex;flex-direction:column;align-items:center;padding:8px 0;box-shadow:2px 0 4px #0000000d;pointer-events:auto}.icon-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.icon-group.bottom[_ngcontent-%COMP%]{margin-top:auto;padding-bottom:8px}.icon-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:none;background:transparent;cursor:pointer;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#666;transition:all .15s ease}.icon-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.icon-btn.active[_ngcontent-%COMP%]{background:#fa3d22;color:#fff;box-shadow:0 2px 8px #fa3d224d}.icon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}.icon-btn.thumbnail-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background:#555;border-radius:4px;padding:2px}.icon-btn.thumbnail-btn.active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background:transparent}.expanded-panel[_ngcontent-%COMP%]{width:200px;background:#f8f9fa;border-right:1px solid #e0e0e0;display:flex;flex-direction:column;box-shadow:2px 0 8px #00000014;position:relative;pointer-events:auto}.panel-collapse-btn[_ngcontent-%COMP%]{position:absolute;right:8px;top:8px;width:32px;height:32px;border:1px solid #e0e0e0;background:#fff;cursor:pointer;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#666;transition:all .15s ease;z-index:10;box-shadow:0 2px 4px #0000001a}.panel-collapse-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:#333;border-color:#d0d0d0}.panel-collapse-btn[_ngcontent-%COMP%]:active{background:#eee}.panel-collapse-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.thumbnail-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:48px 12px 12px}.empty-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;color:#999;font-size:13px;text-align:center}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:16px}.thumbnail-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;padding:8px 8px 8px 0;margin-bottom:8px;cursor:pointer;transition:all .15s ease}.thumbnail-item[_ngcontent-%COMP%]:hover   .thumbnail-preview[_ngcontent-%COMP%]{border-color:#d0d0d0;box-shadow:0 2px 6px #0000001a}.thumbnail-item.active[_ngcontent-%COMP%]   .thumbnail-preview[_ngcontent-%COMP%]{border-color:#f44336;border-width:3px;box-shadow:0 2px 8px #f4433640}.page-num[_ngcontent-%COMP%]{min-width:28px;font-size:14px;font-weight:600;color:#888;text-align:center;padding-top:4px;flex-shrink:0}.thumbnail-item.active[_ngcontent-%COMP%]   .page-num[_ngcontent-%COMP%]{color:#f44336;font-weight:700}.thumbnail-preview[_ngcontent-%COMP%]{width:120px;height:160px;background:#fff;border:2px solid #e0e0e0;border-radius:6px;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0;transition:all .15s ease}.thumbnail-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.page-placeholder[_ngcontent-%COMP%]{color:#ccc;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}.page-placeholder[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.4}50%{opacity:.8}}.thumbnail-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.thumbnail-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.thumbnail-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d0d0d0;border-radius:3px}.thumbnail-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#b0b0b0}.loading-spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:3px solid #e0e0e0;border-top-color:#fa3d22;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.loading-spinner.small[_ngcontent-%COMP%]{width:16px;height:16px;border-width:2px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.thumbnail-loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:#f5f5f5}.thumbnail-item.loading[_ngcontent-%COMP%]   .thumbnail-preview[_ngcontent-%COMP%]{border-color:#fa3d22;border-style:dashed}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:24px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;font-size:12px}']})};function vr(s,t){if(s&1&&(r(0,"option",47),c(1),a()),s&2){let e=t.$implicit;m("value",e.value),l(),B(e.label)}}function wr(s,t){if(s&1&&(r(0,"option",47),c(1),a()),s&2){let e=t.$implicit;m("value",e.value),l(),B(e.label)}}function Mr(s,t){if(s&1){let e=y();r(0,"div",35)(1,"div",36)(2,"label",37),c(3,"\uD398\uC774\uC9C0 \uBC94\uC704"),a(),r(4,"div",38)(5,"label",39)(6,"input",40),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.summaryPageRange,n)||(o.summaryPageRange=n),u(n)}),a(),r(7,"span"),c(8),a()(),r(9,"label",39)(10,"input",41),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.summaryPageRange,n)||(o.summaryPageRange=n),u(n)}),a(),r(11,"span"),c(12),a()()()(),r(13,"div",36)(14,"label",37),c(15,"\uC694\uC57D \uC720\uD615"),a(),r(16,"select",42),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.summaryType,n)||(o.summaryType=n),u(n)}),M(17,vr,2,2,"option",43),a()(),r(18,"div",36)(19,"label",37),c(20,"\uC694\uC57D \uAE38\uC774"),a(),r(21,"select",42),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.summaryLength,n)||(o.summaryLength=n),u(n)}),M(22,wr,2,2,"option",43),a()(),r(23,"button",44),f("click",function(){g(e);let n=p(3);return u(n.onRequestSummary())}),H(),r(24,"svg",45),b(25,"path",46),a(),c(26," AI \uC694\uC57D \uC2DC\uC791 "),a()()}if(s&2){let e=p(3);l(6),O("ngModel",e.summaryPageRange),l(2),I("\uD604\uC7AC \uD398\uC774\uC9C0 (",e.currentPage,")"),l(2),O("ngModel",e.summaryPageRange),l(2),I("\uC804\uCCB4 \uBB38\uC11C (",e.totalPages,"\uD398\uC774\uC9C0)"),l(4),O("ngModel",e.summaryType),l(),m("ngForOf",e.summaryTypeOptions),l(4),O("ngModel",e.summaryLength),l(),m("ngForOf",e.summaryLengthOptions)}}function yr(s,t){s&1&&(r(0,"div",48),b(1,"div",49),r(2,"p"),c(3,"AI\uAC00 \uC694\uC57D \uC911\uC785\uB2C8\uB2E4..."),a()())}function Or(s,t){if(s&1){let e=y();r(0,"div",50)(1,"pre",51),c(2),a(),r(3,"div",52)(4,"button",53),f("click",function(){g(e);let n=p(3);return u(n.onRequestSummary())}),c(5," \u{1F504} \uB2E4\uC2DC \uC694\uC57D "),a()()()}if(s&2){let e=p(3);l(2),B(e.aiSummaryContent)}}function Sr(s,t){if(s&1&&(r(0,"div",29)(1,"div",30),M(2,Mr,27,8,"div",31)(3,yr,4,0,"div",32)(4,Or,6,1,"div",33),a(),r(5,"div",34)(6,"p"),c(7,"AI\uAC00 \uC0DD\uC131\uD55C \uC694\uC57D\uC740 \uBD80\uC815\uD655\uD558\uAC70\uB098"),b(8,"br"),c(9,"\uC624\uD574\uC758 \uC18C\uC9C0\uAC00 \uC788\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),b(10,"br"),c(11,"\uC694\uC57D\uACFC \uCD9C\uCC98\uB97C \uB2E4\uC2DC \uD55C\uBC88 \uD655\uC778\uD558\uC138\uC694."),a()()()),s&2){let e=p(2);l(2),m("ngIf",!e.isAiLoading&&!e.aiSummaryContent),l(),m("ngIf",e.isAiLoading),l(),m("ngIf",!e.isAiLoading&&e.aiSummaryContent)}}function kr(s,t){if(s&1&&(r(0,"option",47),c(1),a()),s&2){let e=t.$implicit;m("value",e.value),l(),B(e.label)}}function Er(s,t){if(s&1){let e=y();r(0,"div",35)(1,"div",36)(2,"label",37),c(3,"\uD398\uC774\uC9C0 \uBC94\uC704"),a(),r(4,"div",38)(5,"label",39)(6,"input",55),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.translatePageRange,n)||(o.translatePageRange=n),u(n)}),a(),r(7,"span"),c(8),a()(),r(9,"label",39)(10,"input",56),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.translatePageRange,n)||(o.translatePageRange=n),u(n)}),a(),r(11,"span"),c(12),a()()()(),r(13,"div",36)(14,"label",37),c(15,"\uBC88\uC5ED \uC5B8\uC5B4"),a(),r(16,"select",42),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.targetLanguage,n)||(o.targetLanguage=n),u(n)}),M(17,kr,2,2,"option",43),a()(),r(18,"button",44),f("click",function(){g(e);let n=p(3);return u(n.onRequestTranslate())}),H(),r(19,"svg",45),b(20,"circle",57)(21,"path",58),a(),c(22," AI \uBC88\uC5ED \uC2DC\uC791 "),a()()}if(s&2){let e=p(3);l(6),O("ngModel",e.translatePageRange),l(2),I("\uD604\uC7AC \uD398\uC774\uC9C0 (",e.currentPage,")"),l(2),O("ngModel",e.translatePageRange),l(2),I("\uC804\uCCB4 \uBB38\uC11C (",e.totalPages,"\uD398\uC774\uC9C0)"),l(4),O("ngModel",e.targetLanguage),l(),m("ngForOf",e.languages)}}function Dr(s,t){s&1&&(r(0,"div",48),b(1,"div",49),r(2,"p"),c(3,"AI\uAC00 \uBC88\uC5ED \uC911\uC785\uB2C8\uB2E4..."),a()())}function Tr(s,t){if(s&1){let e=y();r(0,"div",59)(1,"pre",51),c(2),a(),r(3,"div",52)(4,"button",60),f("click",function(){g(e);let n=p(3);return u(n.onRequestTranslate())}),c(5," \u{1F504} \uB2E4\uC2DC \uBC88\uC5ED "),a()()()}if(s&2){let e=p(3);l(2),B(e.aiTranslateContent)}}function Br(s,t){if(s&1&&(r(0,"div",29)(1,"div",30),M(2,Er,23,6,"div",31)(3,Dr,4,0,"div",32)(4,Tr,6,1,"div",54),a(),r(5,"div",34)(6,"p"),c(7,"AI\uAC00 \uC0DD\uC131\uD55C \uBC88\uC5ED\uC740 \uBD80\uC815\uD655\uD558\uAC70\uB098"),b(8,"br"),c(9,"\uC624\uD574\uC758 \uC18C\uC9C0\uAC00 \uC788\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),b(10,"br"),c(11,"\uBC88\uC5ED\uACFC \uCD9C\uCC98\uB97C \uB2E4\uC2DC \uD55C\uBC88 \uD655\uC778\uD558\uC138\uC694."),a()()()),s&2){let e=p(2);l(2),m("ngIf",!e.isAiLoading&&!e.aiTranslateContent),l(),m("ngIf",e.isAiLoading),l(),m("ngIf",!e.isAiLoading&&e.aiTranslateContent)}}function zr(s,t){if(s&1&&(r(0,"option",47),c(1),a()),s&2){let e=t.$implicit;m("value",e.value),l(),B(e.label)}}function Fr(s,t){if(s&1&&(r(0,"optgroup",87),M(1,zr,2,2,"option",43),a()),s&2){let e=t.$implicit;m("label",e.label),l(),m("ngForOf",e.options)}}function Ar(s,t){if(s&1){let e=y();r(0,"div",74)(1,"h5"),c(2,"\uD14D\uC2A4\uD2B8"),a(),r(3,"div",75)(4,"label"),c(5,"\uB0B4\uC6A9:"),a(),r(6,"textarea",76),f("change",function(n){g(e);let o=p(4);return u(o.onPropertyChange("text",n))}),a()(),r(7,"div",65)(8,"label"),c(9,"\uAE00\uAF34 \uD06C\uAE30:"),a(),r(10,"input",66),f("change",function(n){g(e);let o=p(4);return u(o.onPropertyChange("fontSize",n))}),a(),r(11,"span",67),c(12,"px"),a()(),r(13,"div",75)(14,"label"),c(15,"\uAE00\uAF34:"),a(),r(16,"select",77),f("change",function(n){g(e);let o=p(4);return u(o.onPropertyChange("fontFamily",n))}),M(17,Fr,2,2,"optgroup",78),a()(),r(18,"div",65)(19,"label"),c(20,"\uAD75\uAE30:"),a(),r(21,"select",77),f("change",function(n){g(e);let o=p(4);return u(o.onPropertyChange("fontWeight",n))}),r(22,"option",79),c(23,"Normal"),a(),r(24,"option",80),c(25,"Bold"),a(),r(26,"option",81),c(27,"Light"),a(),r(28,"option",82),c(29,"Medium"),a(),r(30,"option",83),c(31,"Semi Bold"),a()()(),r(32,"div",65)(33,"label"),c(34,"\uC0C9\uC0C1:"),a(),r(35,"input",84),f("change",function(n){g(e);let o=p(4);return u(o.onPropertyChange("color",n))}),a()(),r(36,"div",75)(37,"label"),c(38,"\uC815\uB82C:"),a(),r(39,"div",85)(40,"button",86),f("click",function(){g(e);let n=p(4);return u(n.onPropertyChange("textAlign","left"))}),c(41,"\uC67C\uCABD"),a(),r(42,"button",86),f("click",function(){g(e);let n=p(4);return u(n.onPropertyChange("textAlign","center"))}),c(43,"\uAC00\uC6B4\uB370"),a(),r(44,"button",86),f("click",function(){g(e);let n=p(4);return u(n.onPropertyChange("textAlign","right"))}),c(45,"\uC624\uB978\uCABD"),a()()()()}if(s&2){let e=p(4);l(6),m("value",e.selectedElement.text||e.selectedElement.content),l(4),m("value",e.selectedElement.fontSize),l(6),m("value",e.selectedElement.fontFamily),l(),m("ngForOf",e.fontGroups),l(4),m("value",e.selectedElement.fontWeight||"normal"),l(14),m("value",e.selectedElement.color||"#000000"),l(5),T("active",e.selectedElement.textAlign==="left"||!e.selectedElement.textAlign),l(2),T("active",e.selectedElement.textAlign==="center"),l(2),T("active",e.selectedElement.textAlign==="right")}}function Ir(s,t){if(s&1){let e=y();r(0,"div",88)(1,"h5"),c(2,"\uC774\uBBF8\uC9C0"),a(),r(3,"div",89)(4,"div",90)(5,"span",91),c(6,"\uD22C\uBA85\uB3C4"),a()(),r(7,"div",92)(8,"div",93),H(),r(9,"svg",94),b(10,"rect",95)(11,"rect",96)(12,"rect",97)(13,"rect",98),a()(),we(),r(14,"input",99),f("input",function(n){g(e);let o=p(4);return u(o.onPropertyChange("opacity",n))}),a(),r(15,"span",100),c(16),Ze(17,"number"),a()()(),r(18,"div",89)(19,"div",90)(20,"span",91),c(21,"\uB3D9\uC791"),a()(),r(22,"div",101)(23,"button",102),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("rotate-left"))}),H(),r(24,"svg",103),b(25,"path",104)(26,"path",105),a()(),we(),r(27,"button",106),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("rotate-right"))}),H(),r(28,"svg",103),b(29,"path",107)(30,"path",108),a()(),we(),r(31,"button",109),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("flip-horizontal"))}),H(),r(32,"svg",103),b(33,"path",110)(34,"path",111)(35,"path",112),a()(),we(),r(36,"button",113),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("flip-vertical"))}),H(),r(37,"svg",103),b(38,"path",114)(39,"path",115)(40,"path",116),a()(),we(),r(41,"button",117),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("center-page"))}),H(),r(42,"svg",103),b(43,"rect",118)(44,"line",119)(45,"line",120),a()(),we(),r(46,"button",121),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("crop"))}),H(),r(47,"svg",103),b(48,"path",122)(49,"path",123),a()(),we(),r(50,"button",124),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("replace"))}),H(),r(51,"svg",103),b(52,"rect",125)(53,"circle",126)(54,"polyline",127),a()()()(),we(),r(55,"div",89)(56,"div",90)(57,"span",91),c(58,"\uC815\uB82C"),a()(),r(59,"div",128)(60,"div",129)(61,"button",130),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("align-left"))}),H(),r(62,"svg",45),b(63,"line",131)(64,"rect",132),a()(),we(),r(65,"button",133),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("align-center-h"))}),H(),r(66,"svg",45),b(67,"line",134)(68,"rect",135),a()(),we(),r(69,"button",136),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("align-right"))}),H(),r(70,"svg",45),b(71,"line",137)(72,"rect",138),a()()(),we(),r(73,"div",129)(74,"button",139),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("align-top"))}),H(),r(75,"svg",45),b(76,"line",140)(77,"rect",141),a()(),we(),r(78,"button",142),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("align-center-v"))}),H(),r(79,"svg",45),b(80,"line",143)(81,"rect",144),a()(),we(),r(82,"button",145),f("click",function(){g(e);let n=p(4);return u(n.onImageAction("align-bottom"))}),H(),r(83,"svg",45),b(84,"line",146)(85,"rect",147),a()()()()()()}if(s&2){let e=p(4);l(14),m("value",e.selectedElement.opacity||1),l(2),I("",Je(17,2,(e.selectedElement.opacity||1)*100,"1.0-0"),"%")}}function Vr(s,t){if(s&1){let e=y();r(0,"div",63)(1,"h4"),c(2),a(),r(3,"div",64)(4,"div",65)(5,"label"),c(6,"X:"),a(),r(7,"input",66),f("change",function(n){g(e);let o=p(3);return u(o.onPropertyChange("x",n))}),a(),r(8,"span",67),c(9,"px"),a()(),r(10,"div",65)(11,"label"),c(12,"Y:"),a(),r(13,"input",66),f("change",function(n){g(e);let o=p(3);return u(o.onPropertyChange("y",n))}),a(),r(14,"span",67),c(15,"px"),a()(),r(16,"div",65)(17,"label"),c(18,"\uB108\uBE44:"),a(),r(19,"input",66),f("change",function(n){g(e);let o=p(3);return u(o.onPropertyChange("width",n))}),a(),r(20,"span",67),c(21,"px"),a()(),r(22,"div",65)(23,"label"),c(24,"\uB192\uC774:"),a(),r(25,"input",66),f("change",function(n){g(e);let o=p(3);return u(o.onPropertyChange("height",n))}),a(),r(26,"span",67),c(27,"px"),a()()(),M(28,Ar,46,12,"div",68)(29,Ir,86,5,"div",69),r(30,"div",70)(31,"button",71),f("click",function(){g(e);let n=p(3);return u(n.onDeleteElement())}),H(),r(32,"svg",45),b(33,"polyline",72)(34,"path",73),a(),c(35," \uC694\uC18C \uC0AD\uC81C "),a()()()}if(s&2){let e=p(3);l(2),B(e.getElementPropertyTitle()),l(5),m("value",e.selectedElement.x),l(6),m("value",e.selectedElement.y),l(6),m("value",e.selectedElement.width),l(6),m("value",e.selectedElement.height),l(3),m("ngIf",e.selectedElement.type==="text"),l(),m("ngIf",e.selectedElement.type==="image")}}function Rr(s,t){s&1&&(r(0,"div",148)(1,"div",149),H(),r(2,"svg",150),b(3,"rect",125)(4,"line",151)(5,"line",152),a(),we(),r(6,"p"),c(7,"\uC120\uD0DD\uB41C \uC694\uC18C \uC5C6\uC74C"),a(),r(8,"span"),c(9,"\uD3B8\uC9D1\uAE30\uC5D0\uC11C \uD14D\uC2A4\uD2B8\uB098 \uC774\uBBF8\uC9C0 \uC694\uC18C\uB97C \uD074\uB9AD\uD558\uC138\uC694"),a()()())}function Lr(s,t){if(s&1&&(r(0,"div",29)(1,"div",30),M(2,Vr,36,7,"div",61)(3,Rr,10,0,"div",62),a()()),s&2){let e=p(2);l(2),m("ngIf",e.selectedElement),l(),m("ngIf",!e.selectedElement)}}function Wr(s,t){if(s&1){let e=y();r(0,"div",23)(1,"div",24)(2,"span",25),c(3),a(),r(4,"button",26),f("click",function(){g(e);let n=p();return u(n.collapsePanel())}),b(5,"img",27),a()(),M(6,Sr,12,3,"div",28)(7,Br,12,3,"div",28)(8,Lr,4,2,"div",28),a()}if(s&2){let e=p();l(3),B(e.getMenuTitle()),l(3),m("ngIf",e.activeMenuId==="ai-summary"),l(),m("ngIf",e.activeMenuId==="ai-translate"),l(),m("ngIf",e.activeMenuId==="settings")}}var Jt=class s{constructor(t){this.cdr=t}isVisible=!1;currentPage=1;totalPages=1;aiSummaryContent="";aiTranslateContent="";isAiLoading=!1;selectedElement=null;close=new D;zoomIn=new D;zoomOut=new D;pageChange=new D;menuSelect=new D;requestAiSummary=new D;requestAiTranslate=new D;elementPropertyChange=new D;deleteElement=new D;imageAction=new D;fontGroups=He;activeMenuId=null;isExpanded=!1;summaryPageRange="current";summaryType="general";summaryLength="medium";translatePageRange="current";targetLanguage="english";summaryTypeOptions=[{value:"general",label:"\uC77C\uBC18 \uC694\uC57D"},{value:"bullet",label:"\uD575\uC2EC \uD3EC\uC778\uD2B8"},{value:"qa",label:"Q&A \uD615\uC2DD"},{value:"structure",label:"\uAD6C\uC870\uC801 \uC694\uC57D"}];summaryLengthOptions=[{value:"short",label:"\uC9E7\uAC8C (1-2\uBB38\uB2E8)"},{value:"medium",label:"\uBCF4\uD1B5 (3-4\uBB38\uB2E8)"},{value:"long",label:"\uC790\uC138\uD788 (5-6\uBB38\uB2E8)"}];languages=[{value:"english",label:"\uC601\uC5B4"},{value:"korean",label:"\uD55C\uAD6D\uC5B4"},{value:"japanese",label:"\uC77C\uBCF8\uC5B4"},{value:"chinese",label:"\uC911\uAD6D\uC5B4"},{value:"spanish",label:"\uC2A4\uD398\uC778\uC5B4"},{value:"french",label:"\uD504\uB791\uC2A4\uC5B4"},{value:"german",label:"\uB3C5\uC77C\uC5B4"}];menuItems=[{id:"ai-summary",title:"AI \uC694\uC57D",icon:"summary"},{id:"ai-translate",title:"AI \uBC88\uC5ED",icon:"translate"},{id:"settings",title:"\uC694\uC18C \uC18D\uC131",icon:"settings"}];ngOnChanges(t){(t.currentPage||t.totalPages)&&this.cdr.detectChanges()}toggleMenu(t){this.activeMenuId===t?this.isExpanded=!this.isExpanded:(this.activeMenuId=t,this.isExpanded=!0,this.menuSelect.emit(t))}collapsePanel(){this.isExpanded=!1}toggleExpand(){this.isExpanded=!this.isExpanded}prevPage(){this.currentPage>1&&this.pageChange.emit(this.currentPage-1)}nextPage(){this.currentPage<this.totalPages&&this.pageChange.emit(this.currentPage+1)}onPageInput(t){let e=t.target,i=parseInt(e.value,10);i>=1&&i<=this.totalPages?this.pageChange.emit(i):e.value=this.currentPage.toString()}onZoomIn(){this.zoomIn.emit()}onZoomOut(){this.zoomOut.emit()}onClose(){this.close.emit()}onRequestSummary(){this.requestAiSummary.emit({pageRange:this.summaryPageRange,summaryType:this.summaryType,summaryLength:this.summaryLength})}onRequestTranslate(){this.requestAiTranslate.emit({pageRange:this.translatePageRange,targetLanguage:this.targetLanguage})}resetAiContent(){}isMenuActive(t){return this.activeMenuId===t&&this.isExpanded}getMenuTitle(){switch(this.activeMenuId){case"ai-summary":return"AI \uC694\uC57D";case"ai-translate":return"AI \uBC88\uC5ED";case"settings":if(this.selectedElement)switch(this.selectedElement.type){case"text":return"\uD14D\uC2A4\uD2B8 \uC18D\uC131";case"image":return"\uC774\uBBF8\uC9C0 \uC18D\uC131";case"shape":return"\uB3C4\uD615 \uC18D\uC131";case"signature":return"\uC11C\uBA85 \uC18D\uC131";default:return"\uC694\uC18C \uC18D\uC131"}return"\uC694\uC18C \uC18D\uC131";default:return""}}getElementPropertyTitle(){if(!this.selectedElement)return"\uC694\uC18C \uC18D\uC131";switch(this.selectedElement.type){case"text":return"\uD14D\uC2A4\uD2B8 \uC18D\uC131";case"image":return"\uC774\uBBF8\uC9C0 \uC18D\uC131";case"shape":return"\uB3C4\uD615 \uC18D\uC131";case"signature":return"\uC11C\uBA85 \uC18D\uC131";default:return"\uC694\uC18C \uC18D\uC131"}}onPropertyChange(t,e){if(!this.selectedElement)return;let i=e;if(e?.target&&(i=e.target.type==="number"?parseFloat(e.target.value):e.target.value),t.includes(".")){let[n,o]=t.split(".");this.selectedElement[n]||(this.selectedElement[n]={}),this.selectedElement[n][o]=i}else this.selectedElement[t]=i;this.elementPropertyChange.emit({elementId:this.selectedElement.id,property:t,value:i})}onDeleteElement(){this.selectedElement&&this.deleteElement.emit(this.selectedElement.id)}onImageAction(t){this.selectedElement&&this.selectedElement.type==="image"&&this.imageAction.emit({elementId:this.selectedElement.id,action:t})}static \u0275fac=function(e){return new(e||s)(N(Fe))};static \u0275cmp=F({type:s,selectors:[["app-shared-pdf-right-panel"]],inputs:{isVisible:"isVisible",currentPage:"currentPage",totalPages:"totalPages",aiSummaryContent:"aiSummaryContent",aiTranslateContent:"aiTranslateContent",isAiLoading:"isAiLoading",selectedElement:"selectedElement"},outputs:{close:"close",zoomIn:"zoomIn",zoomOut:"zoomOut",pageChange:"pageChange",menuSelect:"menuSelect",requestAiSummary:"requestAiSummary",requestAiTranslate:"requestAiTranslate",elementPropertyChange:"elementPropertyChange",deleteElement:"deleteElement",imageAction:"imageAction"},standalone:!1,features:[ve],decls:24,vars:12,consts:[[1,"right-sidebar"],["class","expanded-panel",4,"ngIf"],[1,"icon-bar"],[1,"icon-group","top"],["title","AI \uC694\uC57D",1,"icon-btn",3,"click"],["src","./images/icons/pc/ico-tool-ai-summary.svg","alt","AI \uC694\uC57D","width","24","height","24"],["title","AI \uBC88\uC5ED",1,"icon-btn",3,"click"],["src","./images/icons/pc/ico-tool-ai-translation.svg","alt","AI \uBC88\uC5ED","width","24","height","24"],["title","\uC694\uC18C \uC18D\uC131",1,"icon-btn",3,"click"],["src","./images/icons/pc/ico-tool-setting.svg","alt","\uC124\uC815","width","24","height","24"],[1,"icon-group","bottom"],[1,"page-nav"],["type","number","min","1","title","\uD604\uC7AC \uD398\uC774\uC9C0",1,"page-input",3,"change","value","max"],[1,"page-total"],["title","\uC774\uC804 \uD398\uC774\uC9C0",1,"icon-btn","nav-btn",3,"click","disabled"],["src","./images/icons/pc/ico-page-up.svg","alt","\uC774\uC804","width","20","height","20"],["title","\uB2E4\uC74C \uD398\uC774\uC9C0",1,"icon-btn","nav-btn",3,"click","disabled"],["src","./images/icons/pc/ico-page-down.svg","alt","\uB2E4\uC74C","width","20","height","20"],[1,"icon-divider"],["title","\uD655\uB300",1,"icon-btn","zoom-btn",3,"click"],["src","./images/icons/pc/btn-gnb-zoom2.svg","alt","\uD655\uB300","width","24","height","24"],["title","\uCD95\uC18C",1,"icon-btn","zoom-btn",3,"click"],["src","./images/icons/pc/btn-gnb-zoom.svg","alt","\uCD95\uC18C","width","24","height","24"],[1,"expanded-panel"],[1,"panel-header"],[1,"panel-title"],["title","\uD328\uB110 \uC811\uAE30",1,"panel-collapse-btn",3,"click"],["src","./images/icons/pc/btn-fold-right.svg","alt","\uC811\uAE30","width","16","height","16"],["class","panel-content",4,"ngIf"],[1,"panel-content"],[1,"content-area"],["class","ai-options",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","summary-content",4,"ngIf"],[1,"warning-footer"],[1,"ai-options"],[1,"option-group"],[1,"option-label"],[1,"radio-group"],[1,"radio-item"],["type","radio","name","summaryPageRange","value","current",3,"ngModelChange","ngModel"],["type","radio","name","summaryPageRange","value","all",3,"ngModelChange","ngModel"],[1,"option-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"action-btn","primary",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"],[3,"value"],[1,"loading-state"],[1,"loading-spinner"],[1,"summary-content"],[1,"result-text"],[1,"result-actions"],["title","\uB2E4\uC2DC \uC694\uC57D",1,"action-btn","secondary",3,"click"],["class","translate-content",4,"ngIf"],["type","radio","name","translatePageRange","value","current",3,"ngModelChange","ngModel"],["type","radio","name","translatePageRange","value","all",3,"ngModelChange","ngModel"],["cx","12","cy","12","r","10"],["d","M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"],[1,"translate-content"],["title","\uB2E4\uC2DC \uBC88\uC5ED",1,"action-btn","secondary",3,"click"],["class","settings-section element-properties",4,"ngIf"],["class","no-element",4,"ngIf"],[1,"settings-section","element-properties"],[1,"property-group"],[1,"property-row"],["type","number",1,"property-input",3,"change","value"],[1,"unit"],["class","property-group text-properties",4,"ngIf"],["class","property-group image-properties",4,"ngIf"],[1,"property-actions"],[1,"delete-btn",3,"click"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"property-group","text-properties"],[1,"property-row","full-width"],["rows","3",1,"property-textarea",3,"change","value"],[1,"property-select",3,"change","value"],[3,"label",4,"ngFor","ngForOf"],["value","normal"],["value","bold"],["value","300"],["value","500"],["value","600"],["type","color",1,"property-color",3,"change","value"],[1,"button-group"],[1,"align-btn",3,"click"],[3,"label"],[1,"property-group","image-properties"],[1,"property-section"],[1,"section-header"],[1,"section-title"],[1,"opacity-control"],[1,"opacity-preview"],["width","24","height","24","viewBox","0 0 24 24"],["x","0","y","0","width","12","height","12","fill","#ccc"],["x","12","y","12","width","12","height","12","fill","#ccc"],["x","12","y","0","width","12","height","12","fill","#fff"],["x","0","y","12","width","12","height","12","fill","#fff"],["type","range","min","0","max","1","step","0.01",1,"opacity-slider",3,"input","value"],[1,"opacity-value"],[1,"image-actions-grid"],["title","\uC67C\uCABD\uC73C\uB85C \uD68C\uC804",1,"action-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M1 4v6h6"],["d","M3.51 15a9 9 0 1 0 2.13-9.36L1 10"],["title","\uC624\uB978\uCABD\uC73C\uB85C \uD68C\uC804",1,"action-btn",3,"click"],["d","M23 4v6h-6"],["d","M20.49 15a9 9 0 1 1-2.12-9.36L23 10"],["title","\uC218\uD3C9 \uB4A4\uC9D1\uAE30",1,"action-btn",3,"click"],["d","M12 3v18"],["d","M16 7l4 5-4 5"],["d","M8 7l-4 5 4 5"],["title","\uC218\uC9C1 \uB4A4\uC9D1\uAE30",1,"action-btn",3,"click"],["d","M3 12h18"],["d","M7 16l5 4 5-4"],["d","M7 8l5-4 5 4"],["title","\uD398\uC774\uC9C0 \uC911\uC559 \uC815\uB82C",1,"action-btn",3,"click"],["x","4","y","4","width","16","height","16","rx","2"],["x1","12","y1","8","x2","12","y2","16"],["x1","8","y1","12","x2","16","y2","12"],["title","\uC774\uBBF8\uC9C0 \uC790\uB974\uAE30",1,"action-btn",3,"click"],["d","M6.13 1L6 16a2 2 0 0 0 2 2h15"],["d","M1 6.13L16 6a2 2 0 0 1 2 2v15"],["title","\uC774\uBBF8\uC9C0 \uAD50\uCCB4",1,"action-btn","replace-btn",3,"click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["cx","8.5","cy","8.5","r","1.5"],["points","21 15 16 10 5 21"],[1,"align-options"],[1,"align-row"],["title","\uC67C\uCABD \uC815\uB82C",1,"align-btn-sm",3,"click"],["x1","4","y1","6","x2","4","y2","18"],["x","8","y","8","width","12","height","8","rx","1"],["title","\uC218\uD3C9 \uC911\uC559 \uC815\uB82C",1,"align-btn-sm",3,"click"],["x1","12","y1","2","x2","12","y2","22"],["x","6","y","8","width","12","height","8","rx","1"],["title","\uC624\uB978\uCABD \uC815\uB82C",1,"align-btn-sm",3,"click"],["x1","20","y1","6","x2","20","y2","18"],["x","4","y","8","width","12","height","8","rx","1"],["title","\uC0C1\uB2E8 \uC815\uB82C",1,"align-btn-sm",3,"click"],["x1","6","y1","4","x2","18","y2","4"],["x","8","y","8","width","8","height","12","rx","1"],["title","\uC218\uC9C1 \uC911\uC559 \uC815\uB82C",1,"align-btn-sm",3,"click"],["x1","2","y1","12","x2","22","y2","12"],["x","8","y","6","width","8","height","12","rx","1"],["title","\uD558\uB2E8 \uC815\uB82C",1,"align-btn-sm",3,"click"],["x1","6","y1","20","x2","18","y2","20"],["x","8","y","4","width","8","height","12","rx","1"],[1,"no-element"],[1,"empty-element-state"],["width","40","height","40","viewBox","0 0 24 24","fill","none","stroke","#ccc","stroke-width","1.5"],["x1","9","y1","9","x2","15","y2","15"],["x1","15","y1","9","x2","9","y2","15"]],template:function(e,i){e&1&&(r(0,"div",0),M(1,Wr,9,4,"div",1),r(2,"div",2)(3,"div",3)(4,"button",4),f("click",function(){return i.toggleMenu("ai-summary")}),b(5,"img",5),a(),r(6,"button",6),f("click",function(){return i.toggleMenu("ai-translate")}),b(7,"img",7),a(),r(8,"button",8),f("click",function(){return i.toggleMenu("settings")}),b(9,"img",9),a()(),r(10,"div",10)(11,"div",11)(12,"input",12),f("change",function(o){return i.onPageInput(o)}),a(),r(13,"span",13),c(14),a()(),r(15,"button",14),f("click",function(){return i.prevPage()}),b(16,"img",15),a(),r(17,"button",16),f("click",function(){return i.nextPage()}),b(18,"img",17),a(),b(19,"div",18),r(20,"button",19),f("click",function(){return i.onZoomIn()}),b(21,"img",20),a(),r(22,"button",21),f("click",function(){return i.onZoomOut()}),b(23,"img",22),a()()()()),e&2&&(l(),m("ngIf",i.isExpanded&&i.activeMenuId),l(3),T("active",i.isMenuActive("ai-summary")),l(2),T("active",i.isMenuActive("ai-translate")),l(2),T("active",i.isMenuActive("settings")),l(4),m("value",i.currentPage)("max",i.totalPages),l(2),B(i.totalPages),l(),m("disabled",i.currentPage<=1),l(2),m("disabled",i.currentPage>=i.totalPages))},dependencies:[$,R,me,fe,G,ue,Oe,Q,Y,Tt],styles:['@charset "UTF-8";.right-sidebar[_ngcontent-%COMP%]{display:flex;height:100%;position:absolute;right:0;top:0;bottom:0;z-index:900;pointer-events:none}.icon-bar[_ngcontent-%COMP%]{width:48px;background:#fff;border-left:1px solid #e0e0e0;display:flex;flex-direction:column;align-items:center;padding:8px 0;box-shadow:-2px 0 4px #0000000d;order:2;pointer-events:auto}.icon-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.icon-group.top[_ngcontent-%COMP%]{flex-shrink:0}.icon-group.bottom[_ngcontent-%COMP%]{margin-top:auto;padding:8px 0}.icon-divider[_ngcontent-%COMP%]{width:32px;height:1px;background:#e8e8e8;margin:8px 0}.icon-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:none;background:transparent;cursor:pointer;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#666;transition:all .15s ease;position:relative}.icon-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.icon-btn.active[_ngcontent-%COMP%]{background:#fff0f0;color:#f44336}.icon-btn.active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-4px;top:50%;transform:translateY(-50%);width:3px;height:28px;background:#f44336;border-radius:0 2px 2px 0}.icon-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.icon-btn[_ngcontent-%COMP%]:disabled:hover{background:transparent;color:#666}.icon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}.page-nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;margin-bottom:8px}.page-input[_ngcontent-%COMP%]{width:32px;height:28px;border:1px solid #e0e0e0;border-radius:4px;text-align:center;font-size:12px;font-weight:600;color:#333;background:#fff;-moz-appearance:textfield;appearance:textfield}.page-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f44336}.page-input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .page-input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.page-total[_ngcontent-%COMP%]{font-size:11px;color:#999}.nav-btn[_ngcontent-%COMP%]{width:32px;height:28px}.nav-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.expanded-panel[_ngcontent-%COMP%]{width:280px;background:#f8f9fa;border-left:1px solid #e0e0e0;display:flex;flex-direction:column;box-shadow:-2px 0 8px #00000014;order:1;pointer-events:auto}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #e5e5e5;background:#fff;flex-shrink:0}.panel-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333}.panel-collapse-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid #e0e0e0;background:#fff;cursor:pointer;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#666;transition:all .15s ease}.panel-collapse-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:#333;border-color:#d0d0d0}.panel-collapse-btn[_ngcontent-%COMP%]:active{background:#eee}.panel-collapse-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.collapse-btn[_ngcontent-%COMP%]{width:28px;height:28px;border:none;background:transparent;cursor:pointer;border-radius:6px;display:flex;align-items:center;justify-content:center;color:#888;transition:all .15s ease}.collapse-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.panel-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.content-area[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:#999;font-size:14px;text-align:center;gap:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:#666;font-size:14px;gap:12px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.loading-spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid #e0e0e0;border-top-color:#f44336;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.action-btn[_ngcontent-%COMP%]{padding:10px 20px;background:#f44336;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:background .15s ease}.action-btn[_ngcontent-%COMP%]:hover{background:#d32f2f}.summary-content[_ngcontent-%COMP%], .translate-content[_ngcontent-%COMP%]{font-size:14px;line-height:1.6;color:#333;white-space:pre-wrap}.settings-section[_ngcontent-%COMP%]:not(:first-child){margin-top:16px;padding-top:16px;border-top:1px solid #e5e5e5}.settings-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;font-weight:600;color:#333}.warning-footer[_ngcontent-%COMP%]{padding:12px 16px;background:#f5f5f5;border-top:1px solid #e5e5e5}.warning-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:11px;line-height:1.5;color:#888;text-align:center}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d0d0d0;border-radius:3px}.content-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#b0b0b0}.element-properties[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:12px 0 8px;font-size:12px;font-weight:600;color:#666;text-transform:uppercase}.property-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.property-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.property-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:60px;font-size:12px;color:#555}.property-row.full-width[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.property-row.full-width[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:4px}.property-input[_ngcontent-%COMP%]{flex:1;max-width:80px;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:12px}.property-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f44336}.property-textarea[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;font-size:12px;resize:vertical;min-height:60px}.property-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f44336}.property-select[_ngcontent-%COMP%]{flex:1;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:12px;background:#fff}.property-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#f44336}.property-color[_ngcontent-%COMP%]{width:40px;height:28px;padding:0;border:1px solid #ddd;border-radius:4px;cursor:pointer}.property-color[_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:2px}.property-color[_ngcontent-%COMP%]::-webkit-color-swatch{border:none;border-radius:2px}.property-range[_ngcontent-%COMP%]{flex:1;max-width:100px}.unit[_ngcontent-%COMP%]{font-size:11px;color:#888;min-width:25px}.button-group[_ngcontent-%COMP%]{display:flex;gap:4px;width:100%}.align-btn[_ngcontent-%COMP%]{flex:1;padding:6px 8px;border:1px solid #ddd;border-radius:4px;background:#fff;font-size:11px;cursor:pointer;transition:all .15s ease}.align-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.align-btn.active[_ngcontent-%COMP%]{background:#f44336;color:#fff;border-color:#f44336}.property-actions[_ngcontent-%COMP%]{margin-top:16px;padding-top:12px;border-top:1px solid #e5e5e5}.delete-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;width:100%;padding:8px 12px;border:1px solid #ff5252;border-radius:6px;background:#fff;color:#ff5252;font-size:12px;cursor:pointer;transition:all .15s ease}.delete-btn[_ngcontent-%COMP%]:hover{background:#ff5252;color:#fff}.no-element[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:200px}.empty-element-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:24px 16px;text-align:center}.empty-element-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:12px}.empty-element-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:13px;font-weight:500;color:#666}.empty-element-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;color:#999}.text-properties[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px dashed #e5e5e5}.ai-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.option-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.option-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#555}.radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.radio-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:13px;color:#333}.radio-item[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:16px;height:16px;margin:0;accent-color:#F44336;cursor:pointer}.radio-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.radio-item[_ngcontent-%COMP%]:hover{color:#f44336}.option-select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:8px;font-size:13px;background:#fff;color:#333;cursor:pointer;transition:all .15s ease}.option-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#f44336;box-shadow:0 0 0 3px #f443361a}.option-select[_ngcontent-%COMP%]:hover{border-color:#ccc}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .15s ease}.action-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f44336,#d32f2f);color:#fff;box-shadow:0 2px 8px #f443364d}.action-btn.primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ef5350,#c62828);box-shadow:0 4px 12px #f4433666;transform:translateY(-1px)}.action-btn.primary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 6px #f443364d}.action-btn.secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#666;border:1px solid #e0e0e0}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:#eee;color:#333}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.result-text[_ngcontent-%COMP%]{font-size:13px;line-height:1.7;color:#333;white-space:pre-wrap;word-break:break-word;margin:0;padding:12px;background:#fff;border-radius:8px;border:1px solid #e5e5e5;max-height:400px;overflow-y:auto}.result-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px;padding-top:12px;border-top:1px solid #e5e5e5}.image-properties[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px dashed #e5e5e5}.property-section[_ngcontent-%COMP%]{margin-bottom:16px}.property-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:10px}.section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:#666;text-transform:uppercase;letter-spacing:.5px}.section-header[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:#e5e5e5}.opacity-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px 12px;background:#f8f9fa;border-radius:8px}.opacity-preview[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:4px;overflow:hidden;border:1px solid #e0e0e0;flex-shrink:0}.opacity-preview[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.opacity-slider[_ngcontent-%COMP%]{flex:1;height:4px;-webkit-appearance:none;appearance:none;background:linear-gradient(to right,#e0e0e0,#333);border-radius:2px;outline:none}.opacity-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:#fff;border:2px solid #F44336;cursor:pointer;box-shadow:0 2px 4px #00000026;transition:all .15s ease}.opacity-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.1);box-shadow:0 2px 8px #f443364d}.opacity-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:#fff;border:2px solid #F44336;cursor:pointer;box-shadow:0 2px 4px #00000026}.opacity-value[_ngcontent-%COMP%]{min-width:40px;font-size:12px;font-weight:600;color:#333;text-align:right}.image-actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}.image-actions-grid[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;padding:0;border:1px solid #e0e0e0;border-radius:8px;background:#fff;color:#555;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .15s ease}.image-actions-grid[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#ccc;color:#333}.image-actions-grid[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:active{background:#eee;transform:scale(.95)}.image-actions-grid[_ngcontent-%COMP%]   .action-btn.replace-btn[_ngcontent-%COMP%]{grid-column:span 1;background:#f8f9fa;border-style:dashed}.image-actions-grid[_ngcontent-%COMP%]   .action-btn.replace-btn[_ngcontent-%COMP%]:hover{background:#fff0f0;border-color:#f44336;color:#f44336}.image-actions-grid[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.align-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.align-row[_ngcontent-%COMP%]{display:flex;gap:8px}.align-btn-sm[_ngcontent-%COMP%]{flex:1;height:36px;border:1px solid #e0e0e0;border-radius:6px;background:#fff;color:#555;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s ease}.align-btn-sm[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#ccc;color:#333}.align-btn-sm[_ngcontent-%COMP%]:active{background:#eee}.align-btn-sm.active[_ngcontent-%COMP%]{background:#fff0f0;border-color:#f44336;color:#f44336}.align-btn-sm[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}']})};var Ge=class s{constructor(t){this.snackBar=t}defaultConfig={duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"};show(t,e){this.snackBar.open(t,"\uD655\uC778",Ne(ce({},this.defaultConfig),{duration:e||this.defaultConfig.duration,panelClass:["snackbar-info"]}))}success(t,e){this.snackBar.open(t,"\uD655\uC778",Ne(ce({},this.defaultConfig),{duration:e||this.defaultConfig.duration,panelClass:["snackbar-success"]}))}warning(t,e){this.snackBar.open(t,"\uD655\uC778",Ne(ce({},this.defaultConfig),{duration:e||this.defaultConfig.duration,panelClass:["snackbar-warning"]}))}error(t,e){this.snackBar.open(t,"\uD655\uC778",Ne(ce({},this.defaultConfig),{duration:e||this.defaultConfig.duration,panelClass:["snackbar-error"]}))}showLong(t,e){this.snackBar.open(t,"\uD655\uC778",Ne(ce({},this.defaultConfig),{duration:e||5e3,panelClass:["snackbar-long"]}))}static \u0275fac=function(e){return new(e||s)(De(Rt))};static \u0275prov=de({token:s,factory:s.\u0275fac,providedIn:"root"})};function jr(s,t){if(s&1&&(r(0,"span"),c(1),a()),s&2){let e=p();l(),I("",e.selectedPages.size,"\uAC1C \uC120\uD0DD\uB428")}}function Ur(s,t){s&1&&(r(0,"span"),c(1,"\uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694"),a())}function Hr(s,t){s&1&&(r(0,"span"),c(1,"\u2713"),a())}function $r(s,t){if(s&1&&b(0,"img",18),s&2){let e=p().$implicit;m("src",e.thumbnail,Ce)("alt","\uD398\uC774\uC9C0 "+e.pageNumber+" \uC378\uB124\uC77C")}}function qr(s,t){if(s&1&&(r(0,"div",19)(1,"div",20),c(2),a()()),s&2){let e=p().$implicit;l(2),B(e.pageNumber)}}function Gr(s,t){if(s&1){let e=y();r(0,"div",11),f("dragstart",function(n){let o=g(e).index,d=p();return u(d.onDragStart(n,o))})("dragover",function(n){g(e);let o=p();return u(o.onDragOver(n))})("drop",function(n){let o=g(e).index,d=p();return u(d.onDrop(n,o))})("dragend",function(){g(e);let n=p();return u(n.onDragEnd())})("click",function(n){let o=g(e).$implicit,d=p();return u(d.togglePageSelection(o.pageNumber,n))}),r(1,"div",12),f("click",function(n){let o=g(e).$implicit,d=p();return n.stopPropagation(),u(d.togglePageSelection(o.pageNumber,n))}),M(2,Hr,2,0,"span",3),a(),r(3,"div",13)(4,"div",14),M(5,$r,1,2,"img",15)(6,qr,3,1,"div",16),a()(),r(7,"div",17),c(8),a()()}if(s&2){let e=t.$implicit,i=t.index,n=p();T("selected",n.isPageSelected(e.pageNumber))("dragging",n.draggedIndex===i),l(),T("checked",n.isPageSelected(e.pageNumber)),l(),m("ngIf",n.isPageSelected(e.pageNumber)),l(3),m("ngIf",e.thumbnail),l(),m("ngIf",!e.thumbnail),l(2),B(e.pageNumber)}}var en=class s{constructor(t){this.notification=t}pdfjsLibService=X(Ft);isVisible=!1;pages=[];currentPageCount=0;pdfSrc=null;close=new D;pageOrderChanged=new D;deletePages=new D;confirmDelete=new D;pageSelected=new D;pageList=[];selectedPages=new Set;draggedIndex=null;dragOverIndex=null;ngOnInit(){this.initializePages()}ngOnChanges(t){t.currentPageCount&&t.currentPageCount.currentValue!==t.currentPageCount.previousValue&&this.initializePages(),t.pdfSrc&&t.pdfSrc.currentValue&&this.pageList.length>0&&this.generateThumbnails()}initializePages(){this.currentPageCount>0?(this.selectedPages.clear(),this.pageList=Array.from({length:this.currentPageCount},(t,e)=>({pageNumber:e+1,title:`\uD398\uC774\uC9C0 ${e+1}`})),this.pdfSrc&&this.generateThumbnails()):this.pages.length>0&&(this.pageList=[...this.pages])}trackByPageNumber(t,e){return e.pageNumber}onDragStart(t,e){this.draggedIndex=e,t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",""))}onDragOver(t){t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="move")}onDrop(t,e){if(t.preventDefault(),this.draggedIndex!==null&&this.draggedIndex!==e){let i=this.pageList[this.draggedIndex];this.pageList.splice(this.draggedIndex,1),this.pageList.splice(e,0,i),this.pageList.forEach((n,o)=>{n.pageNumber=o+1}),this.pageOrderChanged.emit([...this.pageList])}this.draggedIndex=null,this.dragOverIndex=null}onDragEnd(){this.draggedIndex=null,this.dragOverIndex=null}togglePageSelection(t,e){this.selectedPages.has(t)?this.selectedPages.delete(t):this.selectedPages.add(t),this.pageSelected.emit(Array.from(this.selectedPages))}isPageSelected(t){return this.selectedPages.has(t)}selectAllPages(){this.pageList.forEach(t=>this.selectedPages.add(t.pageNumber)),this.pageSelected.emit(Array.from(this.selectedPages))}deselectAllPages(){this.selectedPages.clear(),this.pageSelected.emit([])}onDeleteSelected(){if(this.selectedPages.size===0){this.notification.show("\uC0AD\uC81C\uD560 \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694.");return}let t=Array.from(this.selectedPages);this.confirmDelete.emit({pages:t,callback:()=>{this.deletePages.emit(t)}})}generateThumbnails(){return P(this,null,function*(){if(!(!this.pdfSrc||!this.pdfjsLibService.isLoaded))try{let t=yield this.pdfjsLibService.getDocument(this.pdfSrc);for(let e=0;e<this.pageList.length;e++){let i=yield t.getPage(e+1),n=yield this.generatePageThumbnail(i,e+1),o=this.pageList.findIndex(d=>d.pageNumber===e+1);o!==-1&&(this.pageList[o].thumbnail=n)}}catch{}})}generatePageThumbnail(t,e){return P(this,null,function*(){let n=t.getViewport({scale:.3}),o=document.createElement("canvas"),d=o.getContext("2d");if(!d)throw new Error("Canvas context\uB97C \uC0DD\uC131\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");o.height=n.height,o.width=n.width;let h={canvasContext:d,viewport:n};return yield t.render(h).promise,o.toDataURL("image/png")})}static \u0275fac=function(e){return new(e||s)(N(Ge))};static \u0275cmp=F({type:s,selectors:[["app-shared-page-reorder"]],inputs:{isVisible:"isVisible",pages:"pages",currentPageCount:"currentPageCount",pdfSrc:"pdfSrc"},outputs:{close:"close",pageOrderChanged:"pageOrderChanged",deletePages:"deletePages",confirmDelete:"confirmDelete",pageSelected:"pageSelected"},standalone:!1,features:[ve],decls:15,vars:10,consts:[[1,"page-reorder-panel"],[1,"reorder-header"],[1,"selection-info"],[4,"ngIf"],[1,"header-buttons"],["title","\uC804\uCCB4 \uC120\uD0DD",1,"btn-select-all",3,"click"],["title","\uC120\uD0DD \uD574\uC81C",1,"btn-deselect-all",3,"click"],["title","\uC120\uD0DD \uC0AD\uC81C",1,"btn-delete-selected",3,"click","disabled"],[1,"page-list-container"],[1,"page-grid"],["class","page-card","draggable","true",3,"selected","dragging","dragstart","dragover","drop","dragend","click",4,"ngFor","ngForOf","ngForTrackBy"],["draggable","true",1,"page-card",3,"dragstart","dragover","drop","dragend","click"],[1,"selection-checkbox",3,"click"],[1,"page-thumbnail"],[1,"thumbnail-content"],["class","thumbnail-image",3,"src","alt",4,"ngIf"],["class","thumbnail-placeholder",4,"ngIf"],[1,"page-number"],[1,"thumbnail-image",3,"src","alt"],[1,"thumbnail-placeholder"],[1,"page-number-overlay"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),M(3,jr,2,1,"span",3)(4,Ur,2,0,"span",3),a(),r(5,"div",4)(6,"button",5),f("click",function(){return i.selectAllPages()}),c(7," \uC804\uCCB4 \uC120\uD0DD "),a(),r(8,"button",6),f("click",function(){return i.deselectAllPages()}),c(9," \uC120\uD0DD \uD574\uC81C "),a(),r(10,"button",7),f("click",function(){return i.onDeleteSelected()}),c(11),a()()(),r(12,"div",8)(13,"div",9),M(14,Gr,9,10,"div",10),a()()()),e&2&&(pe("display",i.isVisible?"":"none"),T("closed",!i.isVisible),l(3),m("ngIf",i.selectedPages.size>0),l(),m("ngIf",i.selectedPages.size===0),l(6),m("disabled",i.selectedPages.size===0),l(),I(" \uC120\uD0DD \uC0AD\uC81C (",i.selectedPages.size,") "),l(3),m("ngForOf",i.pageList)("ngForTrackBy",i.trackByPageNumber))},dependencies:[$,R],styles:['@charset "UTF-8";.page-reorder-panel[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 150px);background:#fff;display:flex;flex-direction:column;overflow:hidden;position:relative}@media (max-height: 800px){.page-reorder-panel[_ngcontent-%COMP%]{height:calc(100vh - 120px)}}@media (max-height: 600px){.page-reorder-panel[_ngcontent-%COMP%]{height:calc(100vh - 100px)}}.page-reorder-panel.closed[_ngcontent-%COMP%]{transform:translate(100%);opacity:0;pointer-events:none}.reorder-header[_ngcontent-%COMP%]{padding:16px 40px;background:#f8f9fa;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center;flex-shrink:0}.reorder-header[_ngcontent-%COMP%]   .selection-info[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333}.reorder-header[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.reorder-header[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #ddd;border-radius:6px;background:#fff;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s}.reorder-header[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5;border-color:#bbb}.reorder-header[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.reorder-header[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   button.btn-select-all[_ngcontent-%COMP%]{color:#2196f3;border-color:#2196f3}.reorder-header[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   button.btn-select-all[_ngcontent-%COMP%]:hover{background:#e3f2fd}.reorder-header[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   button.btn-deselect-all[_ngcontent-%COMP%]{color:#666}.reorder-header[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   button.btn-delete-selected[_ngcontent-%COMP%]{color:#f44336;border-color:#f44336}.reorder-header[_ngcontent-%COMP%]   .header-buttons[_ngcontent-%COMP%]   button.btn-delete-selected[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffebee}.page-list-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px 40px 40px;background:#f8f9fa;display:flex;justify-content:center;align-items:flex-start;min-height:0}.page-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px;max-width:1200px;margin:0 auto;width:100%;justify-items:center;padding-bottom:20px}.page-card[_ngcontent-%COMP%]{position:relative;background:#fff;border:2px solid #e0e0e0;border-radius:8px;padding:16px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 8px #0000001a}.page-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #00000026;border-color:#ccc}.page-card.selected[_ngcontent-%COMP%]{border-color:var(--selection-color, #F44336);border-width:3px;box-shadow:0 4px 16px var(--selection-color-light, rgba(244, 67, 54, .3));background:var(--selection-color-light, rgba(244, 67, 54, .1))}.page-card.dragging[_ngcontent-%COMP%]{opacity:.5;transform:rotate(5deg)}.selection-checkbox[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;width:24px;height:24px;border:2px solid var(--selection-color, #F44336);border-radius:4px;background:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;transition:all .2s}.selection-checkbox[_ngcontent-%COMP%]:hover{background:#e3f2fd;transform:scale(1.1)}.selection-checkbox.checked[_ngcontent-%COMP%]{background:#2196f3;color:#fff;font-weight:700;font-size:16px}.selection-checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.page-thumbnail[_ngcontent-%COMP%]{width:100%;height:200px;border:1px solid #e0e0e0;border-radius:4px;overflow:hidden;background:#f9f9f9;display:flex;align-items:center;justify-content:center;margin-bottom:12px}.thumbnail-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.thumbnail-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;border-radius:4px}.thumbnail-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;background:#f8f9fa;border:2px dashed #dee2e6;border-radius:4px;display:flex;align-items:center;justify-content:center;position:relative}.page-number-overlay[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#6c757d;background:#fffc;padding:8px 16px;border-radius:20px;border:2px solid #dee2e6}.page-preview[_ngcontent-%COMP%]{width:80%;height:80%;background:#fff;border:1px solid #ddd;border-radius:2px;box-shadow:0 2px 4px #0000001a}.page-number[_ngcontent-%COMP%]{text-align:center;font-size:14px;font-weight:500;color:#333}.page-list-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;display:flex;justify-content:center;align-items:flex-start;padding:40px 20px;background:#f8f9fa}.page-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;padding:20px;max-width:95%;width:100%;justify-content:center;align-items:flex-start;background:#fff;border-radius:12px;box-shadow:0 4px 16px #0000001a;min-height:400px}.page-item[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;gap:12px;padding:16px;border:1px solid #e0e0e0;border-radius:8px;background:#fff;cursor:pointer;transition:all .2s ease;-webkit-user-select:none;user-select:none;width:160px;min-height:220px}.page-item[_ngcontent-%COMP%]:hover{border-color:var(--selection-color, #F44336);background:var(--selection-color-light, rgba(244, 67, 54, .05))}.page-item.selected[_ngcontent-%COMP%]{border-color:var(--selection-color, #F44336);background:var(--selection-color-light, rgba(244, 67, 54, .1))}.page-item.dragging[_ngcontent-%COMP%]{opacity:.7;transform:rotate(3deg) scale(1.05);box-shadow:0 8px 24px #0003;z-index:1000}.drag-handle[_ngcontent-%COMP%]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;color:#666;cursor:grab;font-size:16px;line-height:1;position:absolute;top:8px;right:8px;background:#ffffffe6;border-radius:50%;border:1px solid #ddd;transition:all .2s ease}.drag-handle[_ngcontent-%COMP%]:hover{background:#007acc;color:#fff;border-color:#007acc}.drag-handle[_ngcontent-%COMP%]:active{cursor:grabbing}.page-thumbnail[_ngcontent-%COMP%]{width:90px;height:120px;flex-shrink:0}.thumbnail-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #ddd;border-radius:4px;display:flex;align-items:center;justify-content:center;background:#f8f9fa;position:relative}.page-number[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#666}.page-info[_ngcontent-%COMP%]{text-align:center;width:100%}.page-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.page-details[_ngcontent-%COMP%]{font-size:12px;color:#666}.page-checkbox[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.page-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.panel-footer[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e0e0e0;background:#f8f9fa}.page-count[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;margin-bottom:8px}.instructions[_ngcontent-%COMP%]{font-size:12px;color:#666;line-height:1.4}.page-item[draggable=true][_ngcontent-%COMP%]{position:relative}.page-item.drag-over[_ngcontent-%COMP%]{border-color:#007acc;border-style:dashed;background:#e3f2fd}.page-item.drag-target[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-4px;left:0;right:0;height:2px;background:#007acc;border-radius:1px}.action-buttons[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #e0e0e0;background:#f8f9fa;display:flex;justify-content:center;gap:12px}.action-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;min-width:80px}.rotate-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.rotate-btn[_ngcontent-%COMP%]:hover{background:#0056b3;transform:translateY(-1px);box-shadow:0 4px 12px #007bff4d}.rotate-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.delete-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#c82333;transform:translateY(-1px);box-shadow:0 4px 12px #dc35454d}.delete-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;opacity:.6}']})};var Yr=["previewCanvas"],Kr=()=>[1,2,3,4,5,6,7,8,9];function Xr(s,t){if(s&1){let e=y();r(0,"div",55)(1,"textarea",56,1),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.text,n)||(o.config.text=n),u(n)}),f("keyup",function(){g(e);let n=Te(2),o=p();return u(o.onTextInputChange(n.value))})("compositionend",function(){g(e);let n=Te(2),o=p();return u(o.onTextInputChange(n.value))}),a()()}if(s&2){let e=p();l(),O("ngModel",e.config.text)}}function Zr(s,t){if(s&1&&(r(0,"div",62),b(1,"img",63),a()),s&2){let e=p(2);l(),m("src",e.config.imageUrl,Ce)}}function Jr(s,t){s&1&&(r(0,"div",64),b(1,"img",65),r(2,"span"),c(3,"\uC774\uBBF8\uC9C0\uB97C \uC120\uD0DD\uD558\uAC70\uB098 \uB4DC\uB798\uADF8\uD558\uC138\uC694"),a()())}function ea(s,t){if(s&1){let e=y();r(0,"div",57)(1,"div",58),f("click",function(){g(e);let n=Te(5);return u(n.click())})("dragover",function(n){g(e);let o=p();return u(o.onDragOver(n))})("drop",function(n){g(e);let o=p();return u(o.onFileDrop(n))}),M(2,Zr,2,1,"div",59)(3,Jr,4,0,"div",60),a(),r(4,"input",61,2),f("change",function(n){g(e);let o=p();return u(o.onFileSelect(n))}),a()()}if(s&2){let e=p();l(2),m("ngIf",e.config.imageUrl),l(),m("ngIf",!e.config.imageUrl)}}function ta(s,t){if(s&1&&(r(0,"option",21),c(1),a()),s&2){let e=t.$implicit;m("value",e.value),l(),B(e.label)}}function na(s,t){if(s&1&&(r(0,"optgroup",76),M(1,ta,2,2,"option",77),a()),s&2){let e=t.$implicit;m("label",e.label),l(),m("ngForOf",e.options)}}function ia(s,t){if(s&1){let e=y();r(0,"div",66)(1,"select",67),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.fontFamily,n)||(o.config.fontFamily=n),u(n)}),f("ngModelChange",function(){g(e);let n=p();return u(n.onConfigChange())}),M(2,na,2,2,"optgroup",68),a(),r(3,"div",69)(4,"input",70),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.fontSize,n)||(o.config.fontSize=n),u(n)}),f("ngModelChange",function(){g(e);let n=p();return u(n.onConfigChange())}),a(),r(5,"input",71),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.fontColor,n)||(o.config.fontColor=n),u(n)}),f("ngModelChange",function(){g(e);let n=p();return u(n.onConfigChange())}),a(),r(6,"button",72),f("click",function(){g(e);let n=p();return u(n.toggleBold())}),r(7,"strong"),c(8,"T"),a()(),r(9,"button",73),f("click",function(){g(e);let n=p();return u(n.toggleItalic())}),r(10,"em"),c(11,"I"),a()(),r(12,"button",74),f("click",function(){g(e);let n=p();return u(n.toggleUnderline())}),r(13,"span",75),c(14,"T"),a()()()()}if(s&2){let e=p();l(),O("ngModel",e.config.fontFamily),l(),m("ngForOf",e.fontGroups),l(2),O("ngModel",e.config.fontSize),l(),O("ngModel",e.config.fontColor),l(),T("active",e.config.isBold),l(3),T("active",e.config.isItalic),l(3),T("active",e.config.isUnderline)}}function oa(s,t){if(s&1){let e=y();r(0,"button",78),f("click",function(){let n=g(e).$implicit,o=p();return u(o.setPositionGrid(n))}),a()}if(s&2){let e=t.$implicit,i=p();T("active",i.config.position.grid===e)}}function ra(s,t){if(s&1){let e=y();r(0,"div",79)(1,"div",80)(2,"div",81),b(3,"img",82),r(4,"input",83),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.tile.rows,n)||(o.config.tile.rows=n),u(n)}),f("ngModelChange",function(){g(e);let n=p();return u(n.onConfigChange())}),a()(),r(5,"div",81),b(6,"img",84),r(7,"input",85),k("ngModelChange",function(n){g(e);let o=p();return S(o.config.tile.columns,n)||(o.config.tile.columns=n),u(n)}),f("ngModelChange",function(){g(e);let n=p();return u(n.onConfigChange())}),a()()()()}if(s&2){let e=p();l(4),O("ngModel",e.config.tile.rows),l(3),O("ngModel",e.config.tile.columns)}}var Ct=class s{constructor(t){this.watermarkService=t}canvasRef;totalPages=3;pdfDocument;watermarkCreated=new D;cancel=new D;config=this.getDefaultConfig();fontGroups=He;currentPreviewPage=1;ngAfterViewInit(){setTimeout(()=>this.updatePreview(),100)}ngOnDestroy(){this.config.imageUrl&&this.config.imageUrl.startsWith("blob:")&&URL.revokeObjectURL(this.config.imageUrl)}getDefaultConfig(){return{contentType:"text",text:"abcdefg",fontFamily:"NanumGothic",fontSize:30,fontColor:"#000000",isBold:!1,isItalic:!1,isUnderline:!1,imageFile:void 0,imageUrl:void 0,usePageRatio:!1,pageRatio:50,position:{grid:5,offsetY:0,offsetX:50},tile:{enabled:!0,rows:2,columns:0},rotation:45,opacity:.3,saveAsTemplate:!1}}setContentType(t){this.config.contentType=t,this.updatePreview()}setPositionGrid(t){this.config.position.grid=t,this.updatePreview()}toggleBold(){this.config.isBold=!this.config.isBold,this.updatePreview()}toggleItalic(){this.config.isItalic=!this.config.isItalic,this.updatePreview()}toggleUnderline(){this.config.isUnderline=!this.config.isUnderline,this.updatePreview()}rotateBy(t){this.config.rotation=(this.config.rotation+t)%360,this.updatePreview()}onFileSelect(t){let i=t.target.files?.[0];i&&this.loadImageFile(i)}onDragOver(t){t.preventDefault(),t.stopPropagation()}onFileDrop(t){t.preventDefault(),t.stopPropagation();let e=t.dataTransfer?.files[0];e&&e.type.startsWith("image/")&&this.loadImageFile(e)}loadImageFile(t){this.config.imageUrl&&this.config.imageUrl.startsWith("blob:")&&URL.revokeObjectURL(this.config.imageUrl),this.config.imageFile=t,this.config.imageUrl=URL.createObjectURL(t),this.updatePreview()}onTextInputChange(t){this.config.text=t,this.updatePreview()}onConfigChange(){this.updatePreview()}updatePreview(){if(!this.canvasRef)return;let t=this.canvasRef.nativeElement,e=t.getContext("2d");e&&(t.width=300,t.height=424,e.fillStyle="#ffffff",e.fillRect(0,0,t.width,t.height),e.strokeStyle="#E54D42",e.lineWidth=2,e.strokeRect(2,2,t.width-4,t.height-4),this.config.contentType==="text"?this.drawTextWatermark(e,t):this.config.imageUrl&&this.drawImageWatermark(e,t))}drawTextWatermark(t,e){if(!this.config.text)return;if(this.config.tile.enabled&&this.config.tile.rows>0){this.drawTiledWatermark(t,e);return}let i=this.calculatePosition(e);this.drawSingleWatermark(t,i.x,i.y)}drawTiledWatermark(t,e){let i=this.config.tile.rows,n=this.config.tile.columns||1,o=30,d=e.width-o*2,h=e.height-o*2,_=d/Math.max(n,1),C=h/i;for(let x=0;x<i;x++)for(let v=0;v<n;v++){let w=o+v*_+_/2,E=o+x*C+C/2;this.drawSingleWatermark(t,w,E)}}drawSingleWatermark(t,e,i){t.save(),t.translate(e,i),t.rotate(this.config.rotation*Math.PI/180);let n=`${this.config.isItalic?"italic ":""}${this.config.isBold?"bold ":""}`,o=Math.max(this.config.fontSize/3,10);if(t.font=`${n}${o}px ${this.config.fontFamily}`,t.fillStyle=this.config.fontColor,t.globalAlpha=this.config.opacity,t.textAlign="center",t.textBaseline="middle",t.fillText(this.config.text,0,0),this.config.isUnderline){let d=t.measureText(this.config.text).width;t.beginPath(),t.moveTo(-d/2,o/2),t.lineTo(d/2,o/2),t.strokeStyle=this.config.fontColor,t.lineWidth=1,t.stroke()}t.restore()}drawImageWatermark(t,e){if(!this.config.imageUrl)return;let i=new Image;i.onload=()=>{let n=this.calculatePosition(e),o=i.width,d=i.height,h=this.config.usePageRatio?e.width*this.config.pageRatio/100:100;if(o>h||d>h){let _=Math.min(h/o,h/d);o*=_,d*=_}t.save(),t.translate(n.x,n.y),t.rotate(this.config.rotation*Math.PI/180),t.globalAlpha=this.config.opacity,t.drawImage(i,-o/2,-d/2,o,d),t.restore()},i.src=this.config.imageUrl}calculatePosition(t){let e=this.config.position.grid,i=50,n=(e-1)%3,o=Math.floor((e-1)/3),d=i+n*((t.width-2*i)/2),h=i+o*((t.height-2*i)/2),_=this.config.position.offsetX/100*t.width,C=this.config.position.offsetY*28.35;return{x:e===5?t.width/2+_-t.width/2:d,y:e===5?t.height/2+C:h+C}}goToFirstPage(){this.currentPreviewPage=1,this.updatePreview()}goToLastPage(){this.currentPreviewPage=this.totalPages,this.updatePreview()}prevPage(){this.currentPreviewPage>1&&(this.currentPreviewPage--,this.updatePreview())}nextPage(){this.currentPreviewPage<this.totalPages&&(this.currentPreviewPage++,this.updatePreview())}onPageChange(){this.currentPreviewPage=Math.max(1,Math.min(this.totalPages,this.currentPreviewPage)),this.updatePreview()}apply(){if(this.config.contentType==="text"&&!this.config.text.trim()){alert("\uC6CC\uD130\uB9C8\uD06C \uD14D\uC2A4\uD2B8\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.");return}if(this.config.contentType==="file"&&!this.config.imageUrl){alert("\uC6CC\uD130\uB9C8\uD06C \uC774\uBBF8\uC9C0\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694.");return}this.watermarkCreated.emit(this.config)}onCancel(){this.cancel.emit()}static \u0275fac=function(e){return new(e||s)(N(ot))};static \u0275cmp=F({type:s,selectors:[["app-shared-watermark-config-modal"]],viewQuery:function(e,i){if(e&1&&re(Yr,5),e&2){let n;ae(n=se())&&(i.canvasRef=n.first)}},inputs:{totalPages:"totalPages",pdfDocument:"pdfDocument"},outputs:{watermarkCreated:"watermarkCreated",cancel:"cancel"},decls:113,vars:35,consts:[["previewCanvas",""],["watermarkTextInput",""],["fileInput",""],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","20","height","20"],[1,"modal-body"],[1,"config-panel"],[1,"section"],[1,"section-title"],[1,"tab-container"],[1,"tab-btn",3,"click"],["class","text-input-container",4,"ngIf"],["class","file-input-container",4,"ngIf"],["class","font-settings",4,"ngIf"],[1,"page-ratio-setting"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"ratio-select",3,"ngModelChange","ngModel","disabled"],[3,"value"],[1,"position-container"],[1,"position-grid"],["class","grid-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"offset-inputs"],[1,"offset-row"],[1,"number-input"],["type","number","step","0.1",3,"ngModelChange","ngModel"],[1,"unit"],["type","number","step","1",3,"ngModelChange","ngModel"],[1,"checkbox-label","tile-header"],["class","tile-settings",4,"ngIf"],[1,"rotation-settings"],[1,"rotation-icon",3,"click"],["src","./images/icons/pc/btn-gnb-rotation-right.svg","alt","\uD68C\uC804","width","18","height","18"],[1,"rotation-presets"],[1,"radio-label"],["type","radio","name","rotation",3,"ngModelChange","value","ngModel"],[1,"rotation-custom"],["type","number","min","-180","max","180",1,"rotation-input",3,"ngModelChange","ngModel"],[1,"preview-panel"],[1,"preview-container"],[1,"preview-canvas"],[1,"page-navigation"],[1,"nav-btn",3,"click","disabled"],[1,"page-info"],["type","number","min","1",1,"page-input",3,"ngModelChange","ngModel","max"],[1,"page-separator"],[1,"total-pages"],[1,"modal-footer"],[1,"checkbox-label","template-checkbox"],[1,"footer-buttons"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"text-input-container"],["placeholder","\uC6CC\uD130\uB9C8\uD06C \uD14D\uC2A4\uD2B8","rows","2",3,"ngModelChange","keyup","compositionend","ngModel"],[1,"file-input-container"],[1,"file-drop-zone",3,"click","dragover","drop"],["class","file-preview",4,"ngIf"],["class","file-placeholder",4,"ngIf"],["type","file","accept","image/*","hidden","",3,"change"],[1,"file-preview"],["alt","\uC6CC\uD130\uB9C8\uD06C \uC774\uBBF8\uC9C0",3,"src"],[1,"file-placeholder"],["src","./images/icons/pc/btn-gnb-upload.svg","alt","\uC5C5\uB85C\uB4DC","width","32","height","32",2,"opacity","0.5"],[1,"font-settings"],[1,"font-select",3,"ngModelChange","ngModel"],[3,"label",4,"ngFor","ngForOf"],[1,"font-style-row"],["type","number","min","8","max","200",1,"font-size-input",3,"ngModelChange","ngModel"],["type","color",1,"color-picker",3,"ngModelChange","ngModel"],[1,"style-btn",3,"click"],[1,"style-btn","italic-btn",3,"click"],[1,"style-btn","underline-btn",3,"click"],[2,"text-decoration","underline"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[1,"grid-btn",3,"click"],[1,"tile-settings"],[1,"tile-row"],[1,"tile-input"],["src","./images/icons/pc/ico-menu.svg","alt","\uD589","width","16","height","16"],["type","number","min","1","max","10",3,"ngModelChange","ngModel"],["src","./images/icons/pc/ico-menu.svg","alt","\uC5F4","width","16","height","16"],["type","number","min","0","max","10",3,"ngModelChange","ngModel"]],template:function(e,i){if(e&1){let n=y();r(0,"div",3),f("click",function(){return g(n),u(i.onCancel())}),r(1,"div",4),f("click",function(d){return g(n),u(d.stopPropagation())}),r(2,"div",5)(3,"h3"),c(4,"\uC6CC\uD130\uB9C8\uD06C"),a(),r(5,"button",6),f("click",function(){return g(n),u(i.onCancel())}),b(6,"img",7),a()(),r(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11),c(11,"\uB0B4\uC6A9"),a(),r(12,"div",12)(13,"button",13),f("click",function(){return g(n),u(i.setContentType("text"))}),c(14," \uD14D\uC2A4\uD2B8 "),a(),r(15,"button",13),f("click",function(){return g(n),u(i.setContentType("file"))}),c(16," \uD30C\uC77C "),a()(),M(17,Xr,3,1,"div",14)(18,ea,6,2,"div",15)(19,ia,15,10,"div",16),r(20,"div",17)(21,"label",18)(22,"input",19),k("ngModelChange",function(d){return g(n),S(i.config.usePageRatio,d)||(i.config.usePageRatio=d),u(d)}),f("ngModelChange",function(){return g(n),u(i.onConfigChange())}),a(),r(23,"span"),c(24,"\uD398\uC774\uC9C0 \uBE44\uC728"),a()(),r(25,"select",20),k("ngModelChange",function(d){return g(n),S(i.config.pageRatio,d)||(i.config.pageRatio=d),u(d)}),f("ngModelChange",function(){return g(n),u(i.onConfigChange())}),r(26,"option",21),c(27,"25%"),a(),r(28,"option",21),c(29,"50%"),a(),r(30,"option",21),c(31,"75%"),a(),r(32,"option",21),c(33,"100%"),a()()()(),r(34,"div",10)(35,"div",11),c(36,"\uB0B4\uC6A9"),a(),r(37,"div",22)(38,"div",23),M(39,oa,1,2,"button",24),a(),r(40,"div",25)(41,"div",26)(42,"label"),c(43,"Y"),a(),r(44,"div",27)(45,"input",28),k("ngModelChange",function(d){return g(n),S(i.config.position.offsetY,d)||(i.config.position.offsetY=d),u(d)}),f("ngModelChange",function(){return g(n),u(i.onConfigChange())}),a(),r(46,"span",29),c(47,"(cm)"),a()()(),r(48,"div",26)(49,"label"),c(50,"X"),a(),r(51,"div",27)(52,"input",30),k("ngModelChange",function(d){return g(n),S(i.config.position.offsetX,d)||(i.config.position.offsetX=d),u(d)}),f("ngModelChange",function(){return g(n),u(i.onConfigChange())}),a(),r(53,"span",29),c(54,"%"),a()()()()()(),r(55,"div",10)(56,"label",31)(57,"input",19),k("ngModelChange",function(d){return g(n),S(i.config.tile.enabled,d)||(i.config.tile.enabled=d),u(d)}),f("ngModelChange",function(){return g(n),u(i.onConfigChange())}),a(),r(58,"span"),c(59,"\uD0C0\uC77C"),a()(),M(60,ra,8,2,"div",32),a(),r(61,"div",10)(62,"div",11),c(63,"\uC124\uC815"),a(),r(64,"div",33)(65,"button",34),f("click",function(){return g(n),u(i.rotateBy(-45))}),b(66,"img",35),a(),r(67,"div",36)(68,"label",37)(69,"input",38),k("ngModelChange",function(d){return g(n),S(i.config.rotation,d)||(i.config.rotation=d),u(d)}),f("ngModelChange",function(){return g(n),u(i.onConfigChange())}),a(),r(70,"span"),c(71,"-45\xB0"),a()(),r(72,"label",37)(73,"input",38),k("ngModelChange",function(d){return g(n),S(i.config.rotation,d)||(i.config.rotation=d),u(d)}),f("ngModelChange",function(){return g(n),u(i.onConfigChange())}),a(),r(74,"span"),c(75,"0\xB0"),a()(),r(76,"label",37)(77,"input",38),k("ngModelChange",function(d){return g(n),S(i.config.rotation,d)||(i.config.rotation=d),u(d)}),f("ngModelChange",function(){return g(n),u(i.onConfigChange())}),a(),r(78,"span"),c(79,"45\xB0"),a()()(),r(80,"div",39)(81,"input",40),k("ngModelChange",function(d){return g(n),S(i.config.rotation,d)||(i.config.rotation=d),u(d)}),f("ngModelChange",function(){return g(n),u(i.onConfigChange())}),a(),r(82,"span",29),c(83,"\xB0"),a()()()()(),r(84,"div",41)(85,"div",42),b(86,"canvas",43,0),a(),r(88,"div",44)(89,"button",45),f("click",function(){return g(n),u(i.goToFirstPage())}),c(90," \xAB "),a(),r(91,"button",45),f("click",function(){return g(n),u(i.prevPage())}),c(92," \u2039 "),a(),r(93,"span",46)(94,"input",47),k("ngModelChange",function(d){return g(n),S(i.currentPreviewPage,d)||(i.currentPreviewPage=d),u(d)}),f("ngModelChange",function(){return g(n),u(i.onPageChange())}),a(),r(95,"span",48),c(96,"/"),a(),r(97,"span",49),c(98),a()(),r(99,"button",45),f("click",function(){return g(n),u(i.nextPage())}),c(100," \u203A "),a(),r(101,"button",45),f("click",function(){return g(n),u(i.goToLastPage())}),c(102," \xBB "),a()()()(),r(103,"div",50)(104,"label",51)(105,"input",19),k("ngModelChange",function(d){return g(n),S(i.config.saveAsTemplate,d)||(i.config.saveAsTemplate=d),u(d)}),a(),r(106,"span"),c(107,"\uD15C\uD50C\uB9BF\uC5D0 \uCD94\uAC00"),a()(),r(108,"div",52)(109,"button",53),f("click",function(){return g(n),u(i.apply())}),c(110,"\uC801\uC6A9"),a(),r(111,"button",54),f("click",function(){return g(n),u(i.onCancel())}),c(112,"\uCDE8\uC18C"),a()()()()()}e&2&&(l(13),T("active",i.config.contentType==="text"),l(2),T("active",i.config.contentType==="file"),l(2),m("ngIf",i.config.contentType==="text"),l(),m("ngIf",i.config.contentType==="file"),l(),m("ngIf",i.config.contentType==="text"),l(3),O("ngModel",i.config.usePageRatio),l(3),O("ngModel",i.config.pageRatio),m("disabled",!i.config.usePageRatio),l(),m("value",25),l(2),m("value",50),l(2),m("value",75),l(2),m("value",100),l(7),m("ngForOf",Xe(34,Kr)),l(6),O("ngModel",i.config.position.offsetY),l(7),O("ngModel",i.config.position.offsetX),l(5),O("ngModel",i.config.tile.enabled),l(3),m("ngIf",i.config.tile.enabled),l(9),m("value",-45),O("ngModel",i.config.rotation),l(4),m("value",0),O("ngModel",i.config.rotation),l(4),m("value",45),O("ngModel",i.config.rotation),l(4),O("ngModel",i.config.rotation),l(8),m("disabled",i.currentPreviewPage<=1),l(2),m("disabled",i.currentPreviewPage<=1),l(3),O("ngModel",i.currentPreviewPage),m("max",i.totalPages),l(4),B(i.totalPages),l(),m("disabled",i.currentPreviewPage>=i.totalPages),l(2),m("disabled",i.currentPreviewPage>=i.totalPages),l(4),O("ngModel",i.config.saveAsTemplate))},dependencies:[ge,$,R,Se,me,fe,G,ze,Be,ue,Oe,Q,Ae,et,Y],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 24px #0003;width:90%;max-width:800px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #E0E0E0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#666;cursor:pointer;padding:4px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;color:#333}.modal-body[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden;min-height:500px}.config-panel[_ngcontent-%COMP%]{width:320px;min-width:320px;border-right:1px solid #E0E0E0;overflow-y:auto;padding:20px}.section[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:16px;border-bottom:1px solid #f0f0f0}.section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.section-title[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#333;margin-bottom:12px}.tab-container[_ngcontent-%COMP%]{display:flex;border:1px solid #E0E0E0;border-radius:4px;overflow:hidden;margin-bottom:12px}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:8px 16px;border:none;background:#fff;color:#666;font-size:13px;cursor:pointer;transition:all .2s;border-right:1px solid #E0E0E0}.tab-btn[_ngcontent-%COMP%]:last-child{border-right:none}.tab-btn.active[_ngcontent-%COMP%]{background:#f5f5f5;color:#333;font-weight:500}.tab-btn[_ngcontent-%COMP%]:hover:not(.active){background:#fafafa}.text-input-container[_ngcontent-%COMP%]{margin-bottom:12px}.text-input-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #E0E0E0;border-radius:4px;font-size:14px;resize:none;font-family:inherit}.text-input-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#999}.file-input-container[_ngcontent-%COMP%]{margin-bottom:12px}.file-drop-zone[_ngcontent-%COMP%]{border:2px dashed #E0E0E0;border-radius:8px;padding:24px;cursor:pointer;transition:all .2s;text-align:center}.file-drop-zone[_ngcontent-%COMP%]:hover{border-color:#999;background:#fafafa}.file-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100px;object-fit:contain}.file-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;color:#999;font-size:12px}.font-settings[_ngcontent-%COMP%]{margin-bottom:12px}.font-select[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #E0E0E0;border-radius:4px;font-size:13px;margin-bottom:8px;background:#fff}.font-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#999}.font-style-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.font-size-input[_ngcontent-%COMP%]{width:60px;padding:6px 8px;border:1px solid #E0E0E0;border-radius:4px;font-size:13px;text-align:center}.font-size-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#999}.color-picker[_ngcontent-%COMP%]{width:32px;height:32px;padding:2px;border:1px solid #E0E0E0;border-radius:4px;cursor:pointer;background:#fff}.color-picker[_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:0}.color-picker[_ngcontent-%COMP%]::-webkit-color-swatch{border:none;border-radius:2px}.style-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid #E0E0E0;background:#fff;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;transition:all .2s}.style-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.style-btn.active[_ngcontent-%COMP%]{background:#333;color:#fff;border-color:#333}.page-ratio-setting[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;color:#666;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;accent-color:#E54D42}.ratio-select[_ngcontent-%COMP%]{flex:1;padding:6px 10px;border:1px solid #E0E0E0;border-radius:4px;font-size:13px;background:#fff}.ratio-select[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#999}.ratio-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#999}.position-container[_ngcontent-%COMP%]{display:flex;gap:16px}.position-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:4px;width:80px}.grid-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:1px solid #E0E0E0;background:#fff;border-radius:2px;cursor:pointer;transition:all .2s}.grid-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.grid-btn.active[_ngcontent-%COMP%]{background:#e54d42;border-color:#e54d42}.offset-inputs[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px}.offset-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.offset-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:20px;font-size:13px;color:#666}.number-input[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1}.number-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:6px 8px;border:1px solid #E0E0E0;border-radius:4px;font-size:13px;text-align:right}.number-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#999}.number-input[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{margin-left:4px;font-size:12px;color:#999;min-width:32px}.tile-header[_ngcontent-%COMP%]{margin-bottom:8px;font-weight:500;color:#333}.tile-settings[_ngcontent-%COMP%]{margin-top:12px}.tile-row[_ngcontent-%COMP%]{display:flex;gap:16px}.tile-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.tile-input[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#666}.tile-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;padding:6px 8px;border:1px solid #E0E0E0;border-radius:4px;font-size:13px;text-align:center}.tile-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#999}.rotation-settings[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.rotation-icon[_ngcontent-%COMP%]{width:36px;height:36px;border:1px solid #E0E0E0;background:#fff;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.rotation-icon[_ngcontent-%COMP%]:hover{background:#f5f5f5}.rotation-presets[_ngcontent-%COMP%]{display:flex;gap:8px}.radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:13px;color:#666;cursor:pointer}.radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{accent-color:#E54D42}.rotation-custom[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:auto}.rotation-custom[_ngcontent-%COMP%]   .rotation-input[_ngcontent-%COMP%]{width:50px;padding:6px 8px;border:1px solid #E0E0E0;border-radius:4px;font-size:13px;text-align:right}.rotation-custom[_ngcontent-%COMP%]   .rotation-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#999}.rotation-custom[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{margin-left:2px;font-size:12px;color:#999}.preview-panel[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:20px;background:#fafafa}.preview-container[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;background:#fff;border:1px solid #E0E0E0;border-radius:4px;overflow:hidden;margin-bottom:16px}.preview-canvas[_ngcontent-%COMP%]{max-width:100%;max-height:100%;box-shadow:0 2px 8px #0000001a}.page-navigation[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:8px}.nav-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid #E0E0E0;background:#fff;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;color:#666;transition:all .2s}.nav-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5}.nav-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.page-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:14px;color:#333}.page-input[_ngcontent-%COMP%]{width:40px;padding:4px 8px;border:1px solid #E0E0E0;border-radius:4px;font-size:14px;text-align:center}.page-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#999}.page-separator[_ngcontent-%COMP%], .total-pages[_ngcontent-%COMP%]{color:#999}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-top:1px solid #E0E0E0}.template-checkbox[_ngcontent-%COMP%]{color:#666}.footer-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.btn[_ngcontent-%COMP%]{padding:10px 24px;border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#e54d42;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#df2c1f}.btn.btn-secondary[_ngcontent-%COMP%]{background-color:#fff;color:#333;border:1px solid #E0E0E0}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}"]})};var sa=()=>[1,2,3,4,5,6,7,8,9];function la(s,t){if(s&1&&(r(0,"option",30),c(1),a()),s&2){let e=t.$implicit;m("value",e.value),l(),B(e.label)}}function ca(s,t){if(s&1&&(r(0,"optgroup",62),M(1,la,2,2,"option",63),a()),s&2){let e=t.$implicit;m("label",e.label),l(),m("ngForOf",e.options)}}function da(s,t){if(s&1){let e=y();r(0,"button",64),f("click",function(){let n=g(e).$implicit,o=p();return u(o.setPositionGrid(n))}),a()}if(s&2){let e=t.$implicit,i=p();T("active",i.config.position.grid===e)}}var pa=[{value:"number",label:"1",format:s=>`${s}`},{value:"number-total",label:"1/n",format:(s,t)=>`${s}/${t}`},{value:"page-number",label:"Page 1",format:s=>`Page ${s}`},{value:"dash-number",label:"- 1 -",format:s=>`- ${s} -`}],bt=class s{totalPages=3;pdfDocument;currentPage=1;pageNumberCreated=new D;cancel=new D;config=this.getDefaultConfig();currentPreviewPage=1;styleOptions=pa;fontGroups=He;previewCanvas=null;previewCtx=null;ngOnInit(){this.currentPreviewPage=this.currentPage||1}ngAfterViewInit(){setTimeout(()=>this.updatePreview(),100)}ngOnDestroy(){}getDefaultConfig(){return{style:"number",startNumber:1,fontFamily:"NanumGothic",fontSize:30,fontColor:"#000000",isBold:!1,isItalic:!1,isUnderline:!1,position:{grid:8},margin:{top:1.27,bottom:1.27,left:1.27,right:1.27},pageRange:"all",customPages:"",saveAsTemplate:!1}}setPositionGrid(t){this.config.position.grid=t,this.updatePreview()}toggleBold(){this.config.isBold=!this.config.isBold,this.updatePreview()}toggleItalic(){this.config.isItalic=!this.config.isItalic,this.updatePreview()}toggleUnderline(){this.config.isUnderline=!this.config.isUnderline,this.updatePreview()}onConfigChange(){this.updatePreview()}getPageNumberText(t){let e=t+this.config.startNumber-1;switch(this.config.style){case"number":return`${e}`;case"number-total":return`${e}/${this.totalPages}`;case"page-number":return`Page ${e}`;case"dash-number":return`- ${e} -`;default:return`${e}`}}updatePreview(){return P(this,null,function*(){let t=document.getElementById("pageNumberPreviewCanvas");if(!t)return;let e=t.getContext("2d");if(!e)return;let i=t.parentElement?.clientWidth||350,n=t.parentElement?.clientHeight||480;t.width=i,t.height=n,e.fillStyle="#ffffff",e.fillRect(0,0,t.width,t.height),e.strokeStyle="#e0e0e0",e.lineWidth=1,e.strokeRect(0,0,t.width,t.height),this.drawPageNumber(e,t.width,t.height)})}drawPageNumber(t,e,i){let n=this.getPageNumberText(this.currentPreviewPage),o="";this.config.isItalic&&(o+="italic "),this.config.isBold&&(o+="bold ");let d=this.config.fontSize*.8;t.font=`${o}${d}px ${this.config.fontFamily}`,t.fillStyle=this.config.fontColor,t.textAlign="center",t.textBaseline="middle";let h=this.calculatePosition(e,i);if(t.fillText(n,h.x,h.y),this.config.isUnderline){let _=t.measureText(n),C=h.y+d*.3;t.beginPath(),t.moveTo(h.x-_.width/2,C),t.lineTo(h.x+_.width/2,C),t.strokeStyle=this.config.fontColor,t.lineWidth=1,t.stroke()}}calculatePosition(t,e){let i=this.config.position.grid,n=this.config.margin,o=28*.5,d=n.top*o,h=n.bottom*o,_=n.left*o,C=n.right*o,x=(i-1)%3,v=Math.floor((i-1)/3),w,E;return x===0?w=_+20:x===1?w=t/2:w=t-C-20,v===0?E=d+20:v===1?E=e/2:E=e-h-20,{x:w,y:E}}prevPage(){this.currentPreviewPage>1&&(this.currentPreviewPage--,this.updatePreview())}nextPage(){this.currentPreviewPage<this.totalPages&&(this.currentPreviewPage++,this.updatePreview())}firstPage(){this.currentPreviewPage=1,this.updatePreview()}lastPage(){this.currentPreviewPage=this.totalPages,this.updatePreview()}setPageRange(t){this.config.pageRange=t}onApply(){this.pageNumberCreated.emit(this.config)}onCancel(){this.cancel.emit()}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-page-number-config-modal"]],inputs:{totalPages:"totalPages",pdfDocument:"pdfDocument",currentPage:"currentPage"},outputs:{pageNumberCreated:"pageNumberCreated",cancel:"cancel"},decls:138,vars:42,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","20","height","20"],[1,"modal-body"],[1,"preview-panel"],[1,"preview-container"],["id","pageNumberPreviewCanvas"],[1,"page-navigation"],[1,"nav-btn",3,"click","disabled"],["src","./images/icons/pc/ico-before.svg","alt","\uCC98\uC74C","width","16","height","16"],["src","./images/icons/pc/btn-page-up.svg","alt","\uC774\uC804","width","16","height","16"],[1,"page-info"],[1,"total-pages"],["src","./images/icons/pc/btn-page-down.svg","alt","\uB2E4\uC74C","width","16","height","16"],["src","./images/icons/pc/ico-after.svg","alt","\uB9C8\uC9C0\uB9C9","width","16","height","16"],[1,"config-panel"],[1,"section"],[1,"section-title"],[1,"form-group"],[1,"form-select",3,"ngModelChange","ngModel"],["value","number"],["value","number-total"],["value","page-number"],["value","dash-number"],["type","number","min","1",1,"form-input",3,"ngModelChange","ngModel"],[3,"label",4,"ngFor","ngForOf"],[1,"font-style-row"],[1,"font-size-select",3,"ngModelChange","ngModel"],[3,"value"],["type","color",1,"color-picker",3,"ngModelChange","ngModel"],[1,"style-btn",3,"click"],[1,"style-btn","italic-btn",3,"click"],[1,"style-btn","underline-btn",3,"click"],[2,"text-decoration","underline"],[1,"position-container"],[1,"position-grid"],["class","grid-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"margin-inputs"],[1,"margin-row"],[1,"margin-input-group"],["src","./images/icons/pc/btn-page-up.svg","alt","\uC0C1\uB2E8","width","16","height","16"],["type","number","step","0.01","min","0",3,"ngModelChange","ngModel"],[1,"unit"],["src","./images/icons/pc/btn-page-up.svg","alt","\uC67C\uCABD","width","16","height","16",2,"transform","rotate(-90deg)"],["src","./images/icons/pc/btn-page-down.svg","alt","\uD558\uB2E8","width","16","height","16"],["src","./images/icons/pc/btn-page-up.svg","alt","\uC624\uB978\uCABD","width","16","height","16",2,"transform","rotate(90deg)"],[1,"page-range-options"],[1,"radio-label"],["type","radio","name","pageRange",3,"ngModelChange","value","ngModel"],[1,"radio-custom"],[1,"custom-range-row"],["type","text","placeholder","2 /3",1,"custom-pages-input",3,"ngModelChange","ngModel","disabled"],["title","\uD398\uC774\uC9C0 \uBC94\uC704 \uC785\uB825 \uC608: 1-3, 5, 7-10",1,"info-btn"],["src","./images/icons/pc/ico-info.svg","alt","\uC815\uBCF4","width","16","height","16"],[1,"modal-footer"],[1,"checkbox-label","template-checkbox"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"footer-buttons"],[1,"apply-btn",3,"click"],[1,"cancel-btn",3,"click"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[1,"grid-btn",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0),f("click",function(){return i.onCancel()}),r(1,"div",1),f("click",function(o){return o.stopPropagation()}),r(2,"div",2)(3,"h3"),c(4,"\uD398\uC774\uC9C0 \uBC88\uD638"),a(),r(5,"button",3),f("click",function(){return i.onCancel()}),b(6,"img",4),a()(),r(7,"div",5)(8,"div",6)(9,"div",7),b(10,"canvas",8),a(),r(11,"div",9)(12,"button",10),f("click",function(){return i.firstPage()}),b(13,"img",11),a(),r(14,"button",10),f("click",function(){return i.prevPage()}),b(15,"img",12),a(),r(16,"span",13),c(17),r(18,"span",14),c(19),a()(),r(20,"button",10),f("click",function(){return i.nextPage()}),b(21,"img",15),a(),r(22,"button",10),f("click",function(){return i.lastPage()}),b(23,"img",16),a()()(),r(24,"div",17)(25,"div",18)(26,"div",19),c(27,"\uB0B4\uC6A9"),a(),r(28,"div",20)(29,"label"),c(30,"\uD398\uC774\uC9C0 \uBC88\uD638 \uC2A4\uD0C0\uC77C"),a(),r(31,"select",21),k("ngModelChange",function(o){return S(i.config.style,o)||(i.config.style=o),o}),f("ngModelChange",function(){return i.onConfigChange()}),r(32,"option",22),c(33,"1"),a(),r(34,"option",23),c(35,"1/n"),a(),r(36,"option",24),c(37,"Page 1"),a(),r(38,"option",25),c(39,"- 1 -"),a()()(),r(40,"div",20)(41,"label"),c(42,"\uC2DC\uC791 \uD398\uC774\uC9C0 \uBC88\uD638"),a(),r(43,"input",26),k("ngModelChange",function(o){return S(i.config.startNumber,o)||(i.config.startNumber=o),o}),f("ngModelChange",function(){return i.onConfigChange()}),a()(),r(44,"div",20)(45,"select",21),k("ngModelChange",function(o){return S(i.config.fontFamily,o)||(i.config.fontFamily=o),o}),f("ngModelChange",function(){return i.onConfigChange()}),M(46,ca,2,2,"optgroup",27),a()(),r(47,"div",28)(48,"select",29),k("ngModelChange",function(o){return S(i.config.fontSize,o)||(i.config.fontSize=o),o}),f("ngModelChange",function(){return i.onConfigChange()}),r(49,"option",30),c(50,"12"),a(),r(51,"option",30),c(52,"14"),a(),r(53,"option",30),c(54,"16"),a(),r(55,"option",30),c(56,"18"),a(),r(57,"option",30),c(58,"20"),a(),r(59,"option",30),c(60,"24"),a(),r(61,"option",30),c(62,"28"),a(),r(63,"option",30),c(64,"30"),a(),r(65,"option",30),c(66,"36"),a(),r(67,"option",30),c(68,"48"),a(),r(69,"option",30),c(70,"72"),a()(),r(71,"input",31),k("ngModelChange",function(o){return S(i.config.fontColor,o)||(i.config.fontColor=o),o}),f("ngModelChange",function(){return i.onConfigChange()}),a(),r(72,"button",32),f("click",function(){return i.toggleBold()}),r(73,"strong"),c(74,"T"),a()(),r(75,"button",33),f("click",function(){return i.toggleItalic()}),r(76,"em"),c(77,"I"),a()(),r(78,"button",34),f("click",function(){return i.toggleUnderline()}),r(79,"span",35),c(80,"T"),a()()()(),r(81,"div",18)(82,"div",19),c(83,"\uD3EC\uC9C0\uC158"),a(),r(84,"div",36)(85,"div",37),M(86,da,1,2,"button",38),a(),r(87,"div",39)(88,"div",40)(89,"div",41),b(90,"img",42),r(91,"input",43),k("ngModelChange",function(o){return S(i.config.margin.top,o)||(i.config.margin.top=o),o}),f("ngModelChange",function(){return i.onConfigChange()}),a(),r(92,"span",44),c(93,"(cm)"),a()(),r(94,"div",41),b(95,"img",45),r(96,"input",43),k("ngModelChange",function(o){return S(i.config.margin.left,o)||(i.config.margin.left=o),o}),f("ngModelChange",function(){return i.onConfigChange()}),a(),r(97,"span",44),c(98,"(cm)"),a()()(),r(99,"div",40)(100,"div",41),b(101,"img",46),r(102,"input",43),k("ngModelChange",function(o){return S(i.config.margin.bottom,o)||(i.config.margin.bottom=o),o}),f("ngModelChange",function(){return i.onConfigChange()}),a(),r(103,"span",44),c(104,"(cm)"),a()(),r(105,"div",41),b(106,"img",47),r(107,"input",43),k("ngModelChange",function(o){return S(i.config.margin.right,o)||(i.config.margin.right=o),o}),f("ngModelChange",function(){return i.onConfigChange()}),a(),r(108,"span",44),c(109,"(cm)"),a()()()()()(),r(110,"div",18)(111,"div",19),c(112,"\uD398\uC774\uC9C0 \uBC94\uC704"),a(),r(113,"div",48)(114,"label",49)(115,"input",50),k("ngModelChange",function(o){return S(i.config.pageRange,o)||(i.config.pageRange=o),o}),f("ngModelChange",function(){return i.onConfigChange()}),a(),b(116,"span",51),r(117,"span"),c(118,"\uBAA8\uB4E0 \uD398\uC774\uC9C0"),a()(),r(119,"div",52)(120,"label",49)(121,"input",50),k("ngModelChange",function(o){return S(i.config.pageRange,o)||(i.config.pageRange=o),o}),f("ngModelChange",function(){return i.onConfigChange()}),a(),b(122,"span",51),r(123,"span"),c(124,"\uC0AC\uC6A9\uC790 \uC9C0\uC815"),a()(),r(125,"input",53),k("ngModelChange",function(o){return S(i.config.customPages,o)||(i.config.customPages=o),o}),f("ngModelChange",function(){return i.onConfigChange()}),a(),r(126,"button",54),b(127,"img",55),a()()()()()(),r(128,"div",56)(129,"label",57)(130,"input",58),k("ngModelChange",function(o){return S(i.config.saveAsTemplate,o)||(i.config.saveAsTemplate=o),o}),a(),r(131,"span"),c(132,"\uD15C\uD50C\uB9BF\uC5D0 \uCD94\uAC00"),a()(),r(133,"div",59)(134,"button",60),f("click",function(){return i.onApply()}),c(135,"\uC801\uC6A9"),a(),r(136,"button",61),f("click",function(){return i.onCancel()}),c(137,"\uCDE8\uC18C"),a()()()()()),e&2&&(l(12),m("disabled",i.currentPreviewPage===1),l(2),m("disabled",i.currentPreviewPage===1),l(3),B(i.currentPreviewPage),l(2),I("/",i.totalPages),l(),m("disabled",i.currentPreviewPage===i.totalPages),l(2),m("disabled",i.currentPreviewPage===i.totalPages),l(9),O("ngModel",i.config.style),l(12),O("ngModel",i.config.startNumber),l(2),O("ngModel",i.config.fontFamily),l(),m("ngForOf",i.fontGroups),l(2),O("ngModel",i.config.fontSize),l(),m("value",12),l(2),m("value",14),l(2),m("value",16),l(2),m("value",18),l(2),m("value",20),l(2),m("value",24),l(2),m("value",28),l(2),m("value",30),l(2),m("value",36),l(2),m("value",48),l(2),m("value",72),l(2),O("ngModel",i.config.fontColor),l(),T("active",i.config.isBold),l(3),T("active",i.config.isItalic),l(3),T("active",i.config.isUnderline),l(8),m("ngForOf",Xe(41,sa)),l(5),O("ngModel",i.config.margin.top),l(5),O("ngModel",i.config.margin.left),l(6),O("ngModel",i.config.margin.bottom),l(5),O("ngModel",i.config.margin.right),l(8),m("value","all"),O("ngModel",i.config.pageRange),l(6),m("value","custom"),O("ngModel",i.config.pageRange),l(4),O("ngModel",i.config.customPages),m("disabled",i.config.pageRange!=="custom"),l(5),O("ngModel",i.config.saveAsTemplate))},dependencies:[ge,$,Se,me,fe,G,ze,Be,ue,Oe,Q,Ae,Y],styles:['.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:760px;max-width:95vw;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 4px 20px #00000026}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;color:#666;border-radius:4px}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.modal-body[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.preview-panel[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:20px;background:#f8f8f8;border-right:1px solid #e0e0e0}.preview-panel[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;background:#e0e0e0;border-radius:4px;overflow:hidden;min-height:400px}.preview-panel[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-width:100%;max-height:100%;background:#fff;box-shadow:0 2px 8px #0000001a}.preview-panel[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;margin-top:16px}.preview-panel[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;border-radius:4px;padding:6px 10px;cursor:pointer;color:#666}.preview-panel[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f0f0f0;border-color:#ccc}.preview-panel[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.preview-panel[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333;min-width:60px;text-align:center}.preview-panel[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]   .total-pages[_ngcontent-%COMP%]{color:#999;font-weight:400}.config-panel[_ngcontent-%COMP%]{width:280px;padding:20px;overflow-y:auto}.config-panel[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{margin-bottom:24px}.config-panel[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.config-panel[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#333;margin-bottom:12px}.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-bottom:6px}.form-select[_ngcontent-%COMP%], .form-input[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:13px;color:#333;background:#fff}.form-select[_ngcontent-%COMP%]:focus, .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f15a24}.font-style-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.font-style-row[_ngcontent-%COMP%]   .font-size-select[_ngcontent-%COMP%]{width:70px;padding:8px;border:1px solid #ddd;border-radius:4px;font-size:13px}.font-style-row[_ngcontent-%COMP%]   .color-picker[_ngcontent-%COMP%]{width:36px;height:36px;border:1px solid #ddd;border-radius:4px;cursor:pointer;padding:2px}.font-style-row[_ngcontent-%COMP%]   .color-picker[_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:0}.font-style-row[_ngcontent-%COMP%]   .color-picker[_ngcontent-%COMP%]::-webkit-color-swatch{border:none;border-radius:2px}.font-style-row[_ngcontent-%COMP%]   .style-btn[_ngcontent-%COMP%]{width:36px;height:36px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:center}.font-style-row[_ngcontent-%COMP%]   .style-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.font-style-row[_ngcontent-%COMP%]   .style-btn.active[_ngcontent-%COMP%]{background:#333;color:#fff;border-color:#333}.font-style-row[_ngcontent-%COMP%]   .style-btn.italic-btn[_ngcontent-%COMP%]{font-style:italic}.position-container[_ngcontent-%COMP%]{display:flex;gap:16px}.position-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:4px;width:80px}.position-grid[_ngcontent-%COMP%]   .grid-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:1px solid #ddd;background:#fff;cursor:pointer;border-radius:2px}.position-grid[_ngcontent-%COMP%]   .grid-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.position-grid[_ngcontent-%COMP%]   .grid-btn.active[_ngcontent-%COMP%]{background:#f15a24;border-color:#f15a24}.margin-inputs[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px}.margin-inputs[_ngcontent-%COMP%]   .margin-row[_ngcontent-%COMP%]{display:flex;gap:8px}.margin-inputs[_ngcontent-%COMP%]   .margin-input-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;flex:1}.margin-inputs[_ngcontent-%COMP%]   .margin-input-group[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#999;flex-shrink:0}.margin-inputs[_ngcontent-%COMP%]   .margin-input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;padding:6px 8px;border:1px solid #ddd;border-radius:4px;font-size:12px;text-align:right}.margin-inputs[_ngcontent-%COMP%]   .margin-input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f15a24}.margin-inputs[_ngcontent-%COMP%]   .margin-input-group[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:11px;color:#999}.page-range-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.page-range-options[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:13px;color:#333}.page-range-options[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.page-range-options[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   .radio-custom[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #ddd;border-radius:50%;position:relative}.page-range-options[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   .radio-custom[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:8px;height:8px;border-radius:50%;background:#f15a24;opacity:0;transition:opacity .2s}.page-range-options[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio-custom[_ngcontent-%COMP%]{border-color:#f15a24}.page-range-options[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + .radio-custom[_ngcontent-%COMP%]:after{opacity:1}.page-range-options[_ngcontent-%COMP%]   .custom-range-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.page-range-options[_ngcontent-%COMP%]   .custom-range-row[_ngcontent-%COMP%]   .custom-pages-input[_ngcontent-%COMP%]{flex:1;padding:6px 10px;border:1px solid #ddd;border-radius:4px;font-size:12px}.page-range-options[_ngcontent-%COMP%]   .custom-range-row[_ngcontent-%COMP%]   .custom-pages-input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#999}.page-range-options[_ngcontent-%COMP%]   .custom-range-row[_ngcontent-%COMP%]   .custom-pages-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f15a24}.page-range-options[_ngcontent-%COMP%]   .custom-range-row[_ngcontent-%COMP%]   .info-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:#f15a24;padding:4px}.page-range-options[_ngcontent-%COMP%]   .custom-range-row[_ngcontent-%COMP%]   .info-btn[_ngcontent-%COMP%]:hover{color:#d94a1a}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-top:1px solid #e0e0e0}.modal-footer[_ngcontent-%COMP%]   .template-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:#666;cursor:pointer}.modal-footer[_ngcontent-%COMP%]   .template-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.modal-footer[_ngcontent-%COMP%]   .footer-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.modal-footer[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]{padding:10px 24px;background:#f15a24;color:#fff;border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer}.modal-footer[_ngcontent-%COMP%]   .apply-btn[_ngcontent-%COMP%]:hover{background:#d94a1a}.modal-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{padding:10px 24px;background:#fff;color:#333;border:1px solid #ddd;border-radius:4px;font-size:14px;cursor:pointer}.modal-footer[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:13px;color:#333}']})};var ua=["drawCanvas"];function ma(s,t){s&1&&(r(0,"div",23),b(1,"img",24),r(2,"p"),c(3,"\uC774\uBBF8\uC9C0\uB97C \uB4DC\uB798\uADF8\uD558\uAC70\uB098 \uD074\uB9AD\uD558\uC5EC \uC5C5\uB85C\uB4DC"),a(),r(4,"span"),c(5,"PNG, JPG, JPEG (\uCD5C\uB300 5MB)"),a()())}function fa(s,t){if(s&1){let e=y();r(0,"div",25),b(1,"img",26),r(2,"button",27),f("click",function(n){g(e);let o=p(2);return u(o.removeUploadedImage(n))}),b(3,"img",28),a()()}if(s&2){let e=p(2);l(),m("src",e.uploadedImage,Ce)}}function ha(s,t){if(s&1){let e=y();r(0,"div",18)(1,"div",19),f("dragover",function(n){g(e);let o=p();return u(o.onDragOver(n))})("drop",function(n){g(e);let o=p();return u(o.onDrop(n))})("click",function(){g(e);let n=p();return u(n.triggerFileInput())}),r(2,"input",20),f("change",function(n){g(e);let o=p();return u(o.onFileSelected(n))}),a(),M(3,ma,6,0,"div",21)(4,fa,4,1,"div",22),a()()}if(s&2){let e=p();l(3),m("ngIf",!e.uploadedImage),l(),m("ngIf",e.uploadedImage)}}function _a(s,t){s&1&&b(0,"img",49)}function Ca(s,t){if(s&1){let e=y();r(0,"button",47),f("click",function(){let n=g(e).$implicit,o=p(2);return u(o.selectColor(n.value))}),M(1,_a,1,0,"img",48),a()}if(s&2){let e=t.$implicit,i=p(2);pe("background-color",e.value),T("active",i.strokeColor===e.value&&!i.isEraser),l(),m("ngIf",i.strokeColor===e.value&&!i.isEraser)}}function ba(s,t){if(s&1){let e=y();r(0,"div",18),b(1,"canvas",29,0),r(3,"div",30)(4,"div",31)(5,"div",32),M(6,Ca,2,5,"button",33),a(),r(7,"button",34),f("click",function(){g(e);let n=p();return u(n.toggleEraser())}),b(8,"img",35),a(),r(9,"div",36),b(10,"img",37),r(11,"input",38),k("ngModelChange",function(n){g(e);let o=p();return S(o.strokeWidth,n)||(o.strokeWidth=n),u(n)}),a(),r(12,"span",39),c(13),a()()(),r(14,"div",40)(15,"button",41),f("click",function(){g(e);let n=p();return u(n.undo())}),b(16,"img",42),a(),r(17,"button",43),f("click",function(){g(e);let n=p();return u(n.redo())}),b(18,"img",44),a(),r(19,"button",45),f("click",function(){g(e);let n=p();return u(n.clearCanvas())}),b(20,"img",46),a()()()()}if(s&2){let e=p();l(6),m("ngForOf",e.colorOptions),l(),T("active",e.isEraser),l(4),O("ngModel",e.strokeWidth),l(2),I("",e.strokeWidth,"pt"),l(2),T("disabled",!e.canUndo()),m("disabled",!e.canUndo()),l(2),T("disabled",!e.canRedo()),m("disabled",!e.canRedo())}}function xa(s,t){if(s&1&&(r(0,"option",60),c(1),a()),s&2){let e=t.$implicit;m("value",e.value),l(),B(e.label)}}function Pa(s,t){if(s&1&&(r(0,"optgroup",58),M(1,xa,2,2,"option",59),a()),s&2){let e=t.$implicit;m("label",e.label),l(),m("ngForOf",e.options)}}function va(s,t){if(s&1){let e=y();r(0,"div",18)(1,"div",50)(2,"div",51),c(3),a()(),r(4,"div",52)(5,"input",53,1),k("ngModelChange",function(n){g(e);let o=p();return S(o.signatureText,n)||(o.signatureText=n),u(n)}),f("keyup",function(){g(e);let n=Te(6),o=p();return u(o.onTextInputChange(n.value))})("compositionend",function(){g(e);let n=Te(6),o=p();return u(o.onTextInputChange(n.value))}),a(),r(7,"div",54)(8,"select",55),k("ngModelChange",function(n){g(e);let o=p();return S(o.textFontFamily,n)||(o.textFontFamily=n),u(n)}),f("change",function(){g(e);let n=p();return u(n.onFontChange())}),M(9,Pa,2,2,"optgroup",56),a(),r(10,"input",57),k("ngModelChange",function(n){g(e);let o=p();return S(o.textFontColor,n)||(o.textFontColor=n),u(n)}),f("change",function(){g(e);let n=p();return u(n.onFontChange())}),a()()()()}if(s&2){let e=p();l(2),pe("font-family",e.textFontFamily)("font-size",e.textFontSize,"px")("color",e.textFontColor),T("placeholder",!e.signatureText),l(),I(" ",e.signatureText||"\uC11C\uBA85\uC744 \uC785\uB825\uD558\uC138\uC694"," "),l(2),O("ngModel",e.signatureText),l(3),O("ngModel",e.textFontFamily),l(),m("ngForOf",e.fontGroups),l(),O("ngModel",e.textFontColor)}}var xt=class s{editSignature;signatureCreated=new D;cancel=new D;drawCanvasRef;activeTab="draw";uploadedImage=null;uploadedFileName="";drawCtx=null;isDrawing=!1;currentPath=null;paths=[];strokeColor="#000000";strokeWidth=2;isEraser=!1;undoStack=[];redoStack=[];colorOptions=[{value:"#000000",label:"\uAC80\uC815"},{value:"#E54D42",label:"\uBE68\uAC15"},{value:"#2196F3",label:"\uD30C\uB791"}];signatureText="";textFontFamily="NanumPen";textFontSize=48;textFontColor="#000000";fontGroups=He;boundStartDrawing;boundDraw;boundStopDrawing;boundTouchStart;boundTouchMove;boundKeyDown;constructor(){this.boundStartDrawing=this.startDrawing.bind(this),this.boundDraw=this.draw.bind(this),this.boundStopDrawing=this.stopDrawing.bind(this),this.boundTouchStart=this.handleTouchStart.bind(this),this.boundTouchMove=this.handleTouchMove.bind(this),this.boundKeyDown=this.handleKeyDown.bind(this)}ngAfterViewInit(){document.addEventListener("keydown",this.boundKeyDown),setTimeout(()=>{this.activeTab==="draw"&&this.initDrawCanvas()},100)}ngOnDestroy(){this.removeCanvasListeners(),document.removeEventListener("keydown",this.boundKeyDown)}setActiveTab(t){this.activeTab=t,t==="draw"&&setTimeout(()=>this.initDrawCanvas(),100)}initDrawCanvas(){if(!this.drawCanvasRef)return;let t=this.drawCanvasRef.nativeElement;t.width=680,t.height=200,this.drawCtx=t.getContext("2d"),this.drawCtx&&(this.drawCtx.lineCap="round",this.drawCtx.lineJoin="round",this.clearCanvas()),this.removeCanvasListeners(),t.addEventListener("mousedown",this.boundStartDrawing),t.addEventListener("mousemove",this.boundDraw),t.addEventListener("mouseup",this.boundStopDrawing),t.addEventListener("mouseleave",this.boundStopDrawing),t.addEventListener("touchstart",this.boundTouchStart,{passive:!1}),t.addEventListener("touchmove",this.boundTouchMove,{passive:!1}),t.addEventListener("touchend",this.boundStopDrawing)}removeCanvasListeners(){if(!this.drawCanvasRef)return;let t=this.drawCanvasRef.nativeElement;t.removeEventListener("mousedown",this.boundStartDrawing),t.removeEventListener("mousemove",this.boundDraw),t.removeEventListener("mouseup",this.boundStopDrawing),t.removeEventListener("mouseleave",this.boundStopDrawing),t.removeEventListener("touchstart",this.boundTouchStart),t.removeEventListener("touchmove",this.boundTouchMove),t.removeEventListener("touchend",this.boundStopDrawing)}startDrawing(t){this.isDrawing=!0;let e=this.getCanvasPosition(t);this.currentPath={points:[e],color:this.isEraser?"#f5f5f5":this.strokeColor,width:this.isEraser?this.strokeWidth*5:this.strokeWidth}}draw(t){if(!this.isDrawing||!this.drawCtx||!this.currentPath)return;let e=this.getCanvasPosition(t);this.currentPath.points.push(e),this.drawCtx.strokeStyle=this.currentPath.color,this.drawCtx.lineWidth=this.currentPath.width,this.drawCtx.beginPath();let i=this.currentPath.points;if(i.length>=2){let n=i[i.length-2],o=i[i.length-1];this.drawCtx.moveTo(n.x,n.y),this.drawCtx.lineTo(o.x,o.y),this.drawCtx.stroke()}}stopDrawing(){this.isDrawing&&this.currentPath&&this.currentPath.points.length>1&&(this.undoStack.push([...this.paths]),this.redoStack=[],this.paths.push(this.currentPath)),this.currentPath=null,this.isDrawing=!1}handleKeyDown(t){if(this.activeTab!=="draw")return;let i=navigator.platform.toUpperCase().indexOf("MAC")>=0?t.metaKey:t.ctrlKey;i&&t.key.toLowerCase()==="z"?t.shiftKey?(t.preventDefault(),this.redo()):(t.preventDefault(),this.undo()):i&&t.key.toLowerCase()==="y"&&(t.preventDefault(),this.redo())}undo(){this.undoStack.length!==0&&(this.redoStack.push([...this.paths]),this.paths=this.undoStack.pop()||[],this.redrawCanvas())}redo(){this.redoStack.length!==0&&(this.undoStack.push([...this.paths]),this.paths=this.redoStack.pop()||[],this.redrawCanvas())}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}redrawCanvas(){if(!this.drawCtx||!this.drawCanvasRef)return;let t=this.drawCanvasRef.nativeElement;this.drawCtx.fillStyle="#f5f5f5",this.drawCtx.fillRect(0,0,t.width,t.height);for(let e of this.paths)if(e.points.length!==0){this.drawCtx.strokeStyle=e.color,this.drawCtx.lineWidth=e.width,this.drawCtx.beginPath(),this.drawCtx.moveTo(e.points[0].x,e.points[0].y);for(let i=1;i<e.points.length;i++)this.drawCtx.lineTo(e.points[i].x,e.points[i].y);this.drawCtx.stroke()}}handleTouchStart(t){if(t.preventDefault(),t.touches.length===1){let e=t.touches[0];this.isDrawing=!0;let i=this.getTouchPosition(e);this.currentPath={points:[i],color:this.isEraser?"#f5f5f5":this.strokeColor,width:this.isEraser?this.strokeWidth*5:this.strokeWidth}}}handleTouchMove(t){if(t.preventDefault(),!(!this.isDrawing||!this.drawCtx||!this.currentPath)&&t.touches.length===1){let e=t.touches[0],i=this.getTouchPosition(e);this.currentPath.points.push(i),this.drawCtx.strokeStyle=this.currentPath.color,this.drawCtx.lineWidth=this.currentPath.width,this.drawCtx.beginPath();let n=this.currentPath.points;if(n.length>=2){let o=n[n.length-2],d=n[n.length-1];this.drawCtx.moveTo(o.x,o.y),this.drawCtx.lineTo(d.x,d.y),this.drawCtx.stroke()}}}getCanvasPosition(t){let e=this.drawCanvasRef.nativeElement,i=e.getBoundingClientRect(),n=e.width/i.width,o=e.height/i.height;return{x:(t.clientX-i.left)*n,y:(t.clientY-i.top)*o}}getTouchPosition(t){let e=this.drawCanvasRef.nativeElement,i=e.getBoundingClientRect(),n=e.width/i.width,o=e.height/i.height;return{x:(t.clientX-i.left)*n,y:(t.clientY-i.top)*o}}selectColor(t){this.strokeColor=t,this.isEraser=!1}toggleEraser(){this.isEraser=!this.isEraser}clearCanvas(){if(!this.drawCtx||!this.drawCanvasRef)return;this.paths.length>0&&(this.undoStack.push([...this.paths]),this.redoStack=[]);let t=this.drawCanvasRef.nativeElement;this.drawCtx.fillStyle="#f5f5f5",this.drawCtx.fillRect(0,0,t.width,t.height),this.paths=[]}getDrawingDataUrl(){if(!this.drawCanvasRef)return"";let t=this.drawCanvasRef.nativeElement,e=document.createElement("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");if(i){i.lineCap="round",i.lineJoin="round";for(let n of this.paths){if(n.color==="#f5f5f5")continue;i.strokeStyle=n.color,i.lineWidth=n.width,i.beginPath();let o=n.points;if(o.length>0){i.moveTo(o[0].x,o[0].y);for(let d=1;d<o.length;d++)i.lineTo(o[d].x,o[d].y);i.stroke()}}}return e.toDataURL("image/png")}onFileSelected(t){let i=t.target.files?.[0];if(!i)return;if(!i.type.startsWith("image/")){alert("\uC774\uBBF8\uC9C0 \uD30C\uC77C\uB9CC \uC5C5\uB85C\uB4DC \uAC00\uB2A5\uD569\uB2C8\uB2E4.");return}if(i.size>5*1024*1024){alert("\uD30C\uC77C \uD06C\uAE30\uB294 5MB \uC774\uD558\uC5EC\uC57C \uD569\uB2C8\uB2E4.");return}this.uploadedFileName=i.name;let n=new FileReader;n.onload=o=>{let d=o.target?.result;this.processUploadedImage(d)},n.readAsDataURL(i)}processUploadedImage(t){let e=new Image;e.onload=()=>{let o=e.width,d=e.height;if(o>680||d>200){let C=Math.min(680/o,200/d);o*=C,d*=C}let h=document.createElement("canvas");h.width=o,h.height=d;let _=h.getContext("2d");_&&(_.drawImage(e,0,0,o,d),this.uploadedImage=h.toDataURL("image/png"))},e.src=t}onDragOver(t){t.preventDefault(),t.stopPropagation()}onDrop(t){t.preventDefault(),t.stopPropagation();let e=t.dataTransfer?.files[0];if(e){let i={target:{files:[e]}};this.onFileSelected(i)}}removeUploadedImage(t){t.stopPropagation(),this.uploadedImage=null,this.uploadedFileName=""}triggerFileInput(){let t=document.getElementById("signatureFileInput");t&&t.click()}onTextInputChange(t){this.signatureText=t}onTextChange(){}onFontChange(){}getTextDataUrl(){if(!this.signatureText.trim())return"";let t=document.createElement("canvas"),e=t.getContext("2d");if(!e)return"";e.font=`${this.textFontSize}px "${this.textFontFamily}"`;let n=e.measureText(this.signatureText).width,o=this.textFontSize*1.2;return t.width=n+40,t.height=o+20,e.font=`${this.textFontSize}px "${this.textFontFamily}"`,e.fillStyle=this.textFontColor,e.textBaseline="middle",e.fillText(this.signatureText,20,t.height/2),t.toDataURL("image/png")}isValid(){switch(this.activeTab){case"upload":return!!this.uploadedImage;case"draw":return this.paths.length>0;case"text":return!!this.signatureText.trim();default:return!1}}onApply(){if(!this.isValid())return;let t="",e=200,i=60;switch(this.activeTab){case"upload":t=this.uploadedImage||"";break;case"draw":t=this.getDrawingDataUrl();break;case"text":t=this.getTextDataUrl();break}let n=new Image;n.onload=()=>{let o={id:`sig_${Date.now()}`,type:this.activeTab,dataUrl:t,width:n.width,height:n.height,createdAt:Date.now(),originalData:this.getOriginalData()};this.signatureCreated.emit(o)},n.onerror=()=>{let o={id:`sig_${Date.now()}`,type:this.activeTab,dataUrl:t,width:e,height:i,createdAt:Date.now(),originalData:this.getOriginalData()};this.signatureCreated.emit(o)},n.src=t}getOriginalData(){switch(this.activeTab){case"upload":return{fileName:this.uploadedFileName,fileType:"image"};case"draw":return{paths:[...this.paths],strokeColor:this.strokeColor,strokeWidth:this.strokeWidth};case"text":return{text:this.signatureText,fontFamily:this.textFontFamily,fontColor:this.textFontColor};default:return{}}}onCancel(){this.cancel.emit()}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-signature-config-modal"]],viewQuery:function(e,i){if(e&1&&re(ua,5),e&2){let n;ae(n=se())&&(i.drawCanvasRef=n.first)}},inputs:{editSignature:"editSignature"},outputs:{signatureCreated:"signatureCreated",cancel:"cancel"},decls:29,vars:10,consts:[["drawCanvas",""],["signatureTextInput",""],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"close-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","14","height","14"],[1,"tab-container"],[1,"tab-btn",3,"click"],["src","./images/icons/pc/btn-gnb-upload.svg","alt","\uC5C5\uB85C\uB4DC","width","20","height","20",1,"tab-icon"],["src","./images/icons/pc/btn-gnb-edit.svg","alt","\uADF8\uB9AC\uAE30","width","20","height","20",1,"tab-icon"],["src","./images/icons/pc/btn-gnb-insert-txt.svg","alt","\uC785\uB825","width","20","height","20",1,"tab-icon"],[1,"content-container"],["class","tab-content",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-secondary",3,"click"],[1,"tab-content"],[1,"upload-area",3,"dragover","drop","click"],["id","signatureFileInput","type","file","accept","image/*",2,"display","none",3,"change"],["class","upload-placeholder",4,"ngIf"],["class","upload-preview",4,"ngIf"],[1,"upload-placeholder"],["src","./images/icons/pc/btn-gnb-upload.svg","alt","\uC5C5\uB85C\uB4DC","width","48","height","48",1,"upload-icon",2,"opacity","0.5"],[1,"upload-preview"],["alt","uploaded signature",3,"src"],[1,"remove-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uC0AD\uC81C","width","16","height","16"],[1,"draw-canvas"],[1,"draw-toolbar"],[1,"toolbar-left"],[1,"color-options"],["class","color-btn",3,"active","background-color","click",4,"ngFor","ngForOf"],["title","\uC9C0\uC6B0\uAC1C",1,"tool-btn",3,"click"],["src","./images/icons/pc/btn-gnb-delete.svg","alt","\uC9C0\uC6B0\uAC1C","width","20","height","20"],[1,"stroke-width-control"],["src","./images/icons/pc/btn-gnb-edit.svg","alt","\uAD75\uAE30","width","18","height","18",1,"stroke-icon"],["type","range","min","1","max","10",1,"stroke-slider",3,"ngModelChange","ngModel"],[1,"stroke-value"],[1,"toolbar-right"],["title","\uB4A4\uB85C\uAC00\uAE30 (Ctrl+Z)",1,"tool-btn","undo-btn",3,"click","disabled"],["src","./images/icons/pc/ico-before.svg","alt","\uB4A4\uB85C\uAC00\uAE30","width","20","height","20"],["title","\uC55E\uC73C\uB85C\uAC00\uAE30 (Ctrl+Shift+Z)",1,"tool-btn","redo-btn",3,"click","disabled"],["src","./images/icons/pc/ico-after.svg","alt","\uC55E\uC73C\uB85C\uAC00\uAE30","width","20","height","20"],["title","\uC804\uCCB4 \uC9C0\uC6B0\uAE30",1,"tool-btn","clear-btn",3,"click"],["src","./images/icons/pc/ico-all-delete.svg","alt","\uC804\uCCB4 \uC9C0\uC6B0\uAE30","width","20","height","20"],[1,"color-btn",3,"click"],["class","check-icon","src","./images/icons/pc/ico-check.svg","alt","\uC120\uD0DD","width","16","height","16",4,"ngIf"],["src","./images/icons/pc/ico-check.svg","alt","\uC120\uD0DD","width","16","height","16",1,"check-icon"],[1,"text-preview-area"],[1,"text-preview"],[1,"text-controls"],["type","text","placeholder","\uC11C\uBA85 \uD14D\uC2A4\uD2B8 \uC785\uB825","maxlength","30",1,"text-input",3,"ngModelChange","keyup","compositionend","ngModel"],[1,"text-options"],[1,"font-select",3,"ngModelChange","change","ngModel"],[3,"label",4,"ngFor","ngForOf"],["type","color",1,"color-input",3,"ngModelChange","change","ngModel"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,i){e&1&&(r(0,"div",2),f("click",function(){return i.onCancel()}),r(1,"div",3),f("click",function(o){return o.stopPropagation()}),r(2,"div",4)(3,"span",5),c(4,"\uC11C\uBA85 \uCD94\uAC00\uD558\uAE30"),a(),r(5,"button",6),f("click",function(){return i.onCancel()}),b(6,"img",7),a()(),r(7,"div",8)(8,"button",9),f("click",function(){return i.setActiveTab("upload")}),b(9,"img",10),r(10,"span"),c(11,"\uC5C5\uB85C\uB4DC"),a()(),r(12,"button",9),f("click",function(){return i.setActiveTab("draw")}),b(13,"img",11),r(14,"span"),c(15,"\uADF8\uB9AC\uAE30"),a()(),r(16,"button",9),f("click",function(){return i.setActiveTab("text")}),b(17,"img",12),r(18,"span"),c(19,"\uC785\uB825\uD558\uAE30"),a()()(),r(20,"div",13),M(21,ha,5,2,"div",14)(22,ba,21,11,"div",14)(23,va,11,13,"div",14),a(),r(24,"div",15)(25,"button",16),f("click",function(){return i.onApply()}),c(26,"\uC608"),a(),r(27,"button",17),f("click",function(){return i.onCancel()}),c(28,"\uCDE8\uC18C"),a()()()()),e&2&&(l(8),T("active",i.activeTab==="upload"),l(4),T("active",i.activeTab==="draw"),l(4),T("active",i.activeTab==="text"),l(5),m("ngIf",i.activeTab==="upload"),l(),m("ngIf",i.activeTab==="draw"),l(),m("ngIf",i.activeTab==="text"),l(2),m("disabled",!i.isValid()))},dependencies:[ge,$,R,Se,me,fe,G,je,ue,Q,$n,Y],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:780px;max-width:90vw;box-shadow:0 4px 20px #00000026;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0;flex-shrink:0}.modal-header[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{opacity:.7}.tab-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:40px;padding:20px;border-bottom:1px solid #e0e0e0;flex-shrink:0}.tab-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;background:none;border:none;cursor:pointer;padding:10px 20px;color:#666;transition:color .2s}.tab-btn[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{width:24px;height:24px;fill:currentColor}.tab-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}.tab-btn.active[_ngcontent-%COMP%]{color:#e54d42}.tab-btn[_ngcontent-%COMP%]:hover:not(.active){color:#333}.content-container[_ngcontent-%COMP%]{padding:20px;min-height:320px;flex:1;overflow:auto}.tab-content[_ngcontent-%COMP%]{height:100%}.draw-canvas[_ngcontent-%COMP%]{width:100%;height:200px;background:#f5f5f5;border-radius:4px;cursor:crosshair;touch-action:none}.draw-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:16px;padding:12px;background:#fafafa;border-radius:4px}.toolbar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.color-options[_ngcontent-%COMP%]{display:flex;gap:8px}.color-btn[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:4px;border:2px solid transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:border-color .2s}.color-btn.active[_ngcontent-%COMP%]{border-color:#333}.color-btn[_ngcontent-%COMP%]:hover:not(.active){border-color:#999}.color-btn[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{width:16px;height:16px}.tool-btn[_ngcontent-%COMP%]{width:36px;height:36px;border:none;background:none;cursor:pointer;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#666;transition:all .2s}.tool-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.tool-btn.active[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.tool-btn[_ngcontent-%COMP%]:hover:not(.active){background:#f0f0f0}.stroke-width-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.stroke-width-control[_ngcontent-%COMP%]   .stroke-icon[_ngcontent-%COMP%]{width:18px;height:18px}.stroke-width-control[_ngcontent-%COMP%]   .stroke-slider[_ngcontent-%COMP%]{width:100px;height:4px;accent-color:#E54D42;cursor:pointer}.stroke-width-control[_ngcontent-%COMP%]   .stroke-value[_ngcontent-%COMP%]{font-size:12px;color:#666;min-width:35px}.clear-btn[_ngcontent-%COMP%]{margin-left:8px}.toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.undo-btn.disabled[_ngcontent-%COMP%], .redo-btn.disabled[_ngcontent-%COMP%]{opacity:.4;cursor:not-allowed}.undo-btn.disabled[_ngcontent-%COMP%]:hover, .redo-btn.disabled[_ngcontent-%COMP%]:hover{background:none}.upload-area[_ngcontent-%COMP%]{width:100%;height:200px;border:2px dashed #ddd;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:border-color .2s,background-color .2s;background:#fafafa}.upload-area[_ngcontent-%COMP%]:hover{border-color:#e54d42;background:#fff5f5}.upload-placeholder[_ngcontent-%COMP%]{text-align:center;color:#999}.upload-placeholder[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{width:48px;height:48px;margin-bottom:12px}.upload-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:14px;color:#666}.upload-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#999}.upload-preview[_ngcontent-%COMP%]{position:relative;max-width:100%;max-height:180px}.upload-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:180px;border-radius:4px}.upload-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-10px;width:24px;height:24px;border-radius:50%;background:#e54d42;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 4px #0003;transition:background-color .2s}.upload-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:#d43c31}.upload-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.text-preview-area[_ngcontent-%COMP%]{width:100%;height:150px;background:#f5f5f5;border-radius:4px;display:flex;align-items:center;justify-content:center;overflow:hidden}.text-preview[_ngcontent-%COMP%]{max-width:100%;word-break:break-all;text-align:center;padding:20px}.text-preview.placeholder[_ngcontent-%COMP%]{color:#999}.text-controls[_ngcontent-%COMP%]{margin-top:16px;display:flex;flex-direction:column;gap:12px}.text-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .2s}.text-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#e54d42}.text-input[_ngcontent-%COMP%]::placeholder{color:#999}.text-options[_ngcontent-%COMP%]{display:flex;gap:12px}.text-options[_ngcontent-%COMP%]   .font-select[_ngcontent-%COMP%]{flex:1;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;background:#fff;cursor:pointer}.text-options[_ngcontent-%COMP%]   .font-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#e54d42}.text-options[_ngcontent-%COMP%]   .color-input[_ngcontent-%COMP%]{width:44px;height:40px;border:1px solid #ddd;border-radius:4px;cursor:pointer;padding:2px}.text-options[_ngcontent-%COMP%]   .color-input[_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:2px}.text-options[_ngcontent-%COMP%]   .color-input[_ngcontent-%COMP%]::-webkit-color-swatch{border:none;border-radius:2px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #e0e0e0;flex-shrink:0}.btn[_ngcontent-%COMP%]{padding:10px 28px;border-radius:4px;font-size:14px;cursor:pointer;transition:all .2s;font-weight:500}.btn.btn-primary[_ngcontent-%COMP%]{background:#e54d42;color:#fff;border:1px solid #E54D42}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#d43c31;border-color:#d43c31}.btn.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#666;border:1px solid #ddd}.btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#ccc}@media (max-width: 600px){.modal-container[_ngcontent-%COMP%]{width:95vw;max-height:95vh}.tab-container[_ngcontent-%COMP%]{gap:20px;padding:15px}.tab-btn[_ngcontent-%COMP%]{padding:8px 12px}.tab-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.content-container[_ngcontent-%COMP%]{padding:15px}.stroke-width-control[_ngcontent-%COMP%]   .stroke-slider[_ngcontent-%COMP%]{width:60px}}"]})};function Ma(s,t){s&1&&(r(0,"div",30)(1,"div",31),b(2,"img",32),r(3,"p"),c(4,"PDF \uD30C\uC77C\uC744 \uC5EC\uAE30\uC5D0 \uB4DC\uB86D\uD558\uC138\uC694"),a()()())}function ya(s,t){if(s&1&&(r(0,"span",42),c(1),a()),s&2){let e=p(2);l(),I(" ",e.sortDirection==="asc"?"\u25B2":"\u25BC"," ")}}function Oa(s,t){if(s&1&&(r(0,"span",42),c(1),a()),s&2){let e=p(2);l(),I(" ",e.sortDirection==="asc"?"\u25B2":"\u25BC"," ")}}function Sa(s,t){if(s&1&&(r(0,"span",42),c(1),a()),s&2){let e=p(2);l(),I(" ",e.sortDirection==="asc"?"\u25B2":"\u25BC"," ")}}function ka(s,t){if(s&1&&b(0,"img",53),s&2){let e=p().$implicit;m("src",e.thumbnail,Ce)}}function Ea(s,t){s&1&&(r(0,"span",54),b(1,"img",55),a())}function Da(s,t){s&1&&(r(0,"span",56),c(1,"\uC5F4\uB9BC"),a())}function Ta(s,t){if(s&1){let e=y();r(0,"tr")(1,"td")(2,"span",43)(3,"span",44),M(4,ka,1,1,"img",45)(5,Ea,2,0,"span",46),a(),r(6,"span",47),f("click",function(){let n=g(e).$implicit,o=p(2);return u(!n.isOpen&&o.onFileNameClick(n))}),c(7),M(8,Da,2,0,"span",48),a(),r(9,"button",49),f("click",function(n){let o=g(e).$implicit,d=p(2);return u(d.toggleFileFavorite(n,o))}),b(10,"img",50),a()()(),r(11,"td"),c(12),a(),r(13,"td"),c(14),a(),r(15,"td")(16,"button",51),f("click",function(){let n=g(e).$implicit,o=p(2);return u(o.deleteFile.emit(n))}),b(17,"img",52),a()()()}if(s&2){let e=t.$implicit;T("file-open",e.isOpen),l(4),m("ngIf",e.thumbnail),l(),m("ngIf",!e.thumbnail),l(),pe("cursor",e.isOpen?"default":"pointer")("color",e.isOpen?"#999":"var(--active-color, #FF6B35)"),l(),I(" ",e.name," "),l(),m("ngIf",e.isOpen),l(),m("title",e.isFavorite?"\uC990\uACA8\uCC3E\uAE30 \uD574\uC81C":"\uC990\uACA8\uCC3E\uAE30 \uCD94\uAC00"),l(),m("src",e.isFavorite?"./images/icons/pc/ico-bookmark-sel.svg":"./images/icons/pc/ico-bookmark.svg",Ce),l(2),B(e.lastModified),l(2),B(e.size)}}function Ba(s,t){if(s&1){let e=y();r(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th",35),f("click",function(){g(e);let n=p();return u(n.sortBy("name"))}),r(5,"span",36),c(6," \uC774\uB984 "),M(7,ya,2,1,"span",37),a()(),r(8,"th",38),f("click",function(){g(e);let n=p();return u(n.sortBy("lastModified"))}),r(9,"span",36),c(10," \uB9C8\uC9C0\uB9C9 \uC218\uC815\uC2DC\uAC04 "),M(11,Oa,2,1,"span",37),a()(),r(12,"th",39),f("click",function(){g(e);let n=p();return u(n.sortBy("size"))}),r(13,"span",36),c(14," \uD06C\uAE30 "),M(15,Sa,2,1,"span",37),a()(),b(16,"th",40),a()(),r(17,"tbody"),M(18,Ta,18,14,"tr",41),a()()()}if(s&2){let e=p();l(7),m("ngIf",e.sortField==="name"),l(4),m("ngIf",e.sortField==="lastModified"),l(4),m("ngIf",e.sortField==="size"),l(3),m("ngForOf",e.sortedFiles)}}function za(s,t){s&1&&(r(0,"div",57),b(1,"img",58),r(2,"p"),c(3,"\uCD5C\uADFC \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),a(),r(4,"span"),c(5,"PDF \uD30C\uC77C\uC744 \uC5F4\uBA74 \uC5EC\uAE30\uC5D0 \uD45C\uC2DC\uB429\uB2C8\uB2E4"),a()())}function Fa(s,t){if(s&1){let e=y();r(0,"button",76),f("click",function(){let n=g(e).$implicit,o=p(3);return u(o.selectRecentFromModal(n))}),r(1,"div",77),c(2),a(),r(3,"div",78),c(4),a()()}if(s&2){let e=t.$implicit;l(2),B(e.name),l(2),We("",e.lastModified," \xB7 ",e.size)}}function Aa(s,t){if(s&1&&(r(0,"div",74),M(1,Fa,5,3,"button",75),a()),s&2){let e=p(2);l(),m("ngForOf",e.sortedFiles)}}function Ia(s,t){s&1&&(r(0,"div",79),c(1,"\uCD5C\uADFC \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"),a())}function Va(s,t){if(s&1){let e=y();r(0,"div",59),f("click",function(){g(e);let n=p();return u(n.closeSelectModal())}),r(1,"div",60),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",61)(3,"div")(4,"p",62),c(5,"\uD30C\uC77C \uC120\uD0DD"),a(),r(6,"h3",63),c(7,"\uCD5C\uADFC \uD30C\uC77C \uC120\uD0DD \uB610\uB294 \uC0C8\uB85C \uC5F4\uAE30"),a()(),r(8,"button",64),f("click",function(){g(e);let n=p();return u(n.closeSelectModal())}),b(9,"img",65),a()(),r(10,"div",66)(11,"div",67)(12,"div",68)(13,"h4"),c(14,"\uCD5C\uADFC \uD30C\uC77C"),a(),r(15,"span",69),c(16,"\uD55C \uBC88 \uD074\uB9AD\uC73C\uB85C \uC5F4\uAE30"),a()(),M(17,Aa,2,1,"div",70)(18,Ia,2,0,"ng-template",null,2,vn),a(),r(20,"div",67)(21,"div",68)(22,"h4"),c(23,"\uC0C8 \uD30C\uC77C \uC5F4\uAE30"),a(),r(24,"span",69),c(25,"PDF \uC5C5\uB85C\uB4DC"),a()(),r(26,"div",71)(27,"p"),c(28,"PDF \uD30C\uC77C\uC744 \uC120\uD0DD\uD558\uAC70\uB098 \uB04C\uC5B4\uB2E4 \uB193\uC73C\uC138\uC694."),a(),r(29,"button",72),f("click",function(){g(e);let n=Te(32);return u(n.click())}),c(30,"\uD30C\uC77C \uC120\uD0DD"),a(),r(31,"input",73,3),f("change",function(n){g(e);let o=p();return u(o.onModalFileChange(n))}),a()()()()()()}if(s&2){let e=Te(19),i=p();l(17),m("ngIf",i.sortedFiles.length>0)("ngIfElse",e)}}var Qe=class s{constructor(t,e,i){this.notification=t;this.cdr=e;this.indexedDbService=i}SORT_FIELD_KEY="ez-reader-sort-field";SORT_DIRECTION_KEY="ez-reader-sort-direction";ngOnInit(){return P(this,null,function*(){yield this.loadSortSettings()})}loadSortSettings(){return P(this,null,function*(){try{let t=yield this.indexedDbService.getAppSetting(this.SORT_FIELD_KEY,"lastModified"),e=yield this.indexedDbService.getAppSetting(this.SORT_DIRECTION_KEY,"desc");this.sortField=t,this.sortDirection=e,this.cdr.detectChanges()}catch(t){console.error("\uC815\uB82C \uC124\uC815 \uBD88\uB7EC\uC624\uAE30 \uC2E4\uD328:",t)}})}saveSortSettings(){return P(this,null,function*(){try{yield this.indexedDbService.setAppSetting(this.SORT_FIELD_KEY,this.sortField),yield this.indexedDbService.setAppSetting(this.SORT_DIRECTION_KEY,this.sortDirection)}catch(t){console.error("\uC815\uB82C \uC124\uC815 \uC800\uC7A5 \uC2E4\uD328:",t)}})}ngOnChanges(t){t.searchQuery&&this.cdr.detectChanges(),t.files&&this.cdr.detectChanges()}files=[];searchQuery="";deleteFile=new D;openRecentFile=new D;openRecentFileWithAction=new D;openNewFile=new D;openNewFileWithAction=new D;favoriteToggle=new D;selectedRecentFile=null;showFileSelectModal=!1;pendingAction=null;isDragOver=!1;dragCounter=0;selectedFiles=new Set;isAllSelected=!1;sortField="lastModified";sortDirection="desc";showFavoritesOnly=!1;get sortedFiles(){let t=this.filterFiles(this.files);return this.showFavoritesOnly&&(t=t.filter(e=>e.isFavorite===!0)),t.sort((e,i)=>{let n=0;switch(this.sortField){case"name":n=e.name.localeCompare(i.name);break;case"lastModified":n=e.lastModified.localeCompare(i.lastModified);break;case"size":let o=parseFloat(e.size),d=parseFloat(i.size);n=o-d;break}return this.sortDirection==="asc"?n:-n})}filterFiles(t){if(!this.searchQuery||!this.searchQuery.trim())return t;let e=this.searchQuery.normalize("NFC").toLowerCase().trim().split(/\s+/).filter(n=>n.length>0);return t.filter(n=>{let o=n.name.normalize("NFC").toLowerCase(),d=n.lastModified.normalize("NFC").toLowerCase(),h=n.size.normalize("NFC").toLowerCase();return e.every(C=>{let x=o.includes(C),v=d.includes(C),w=h.includes(C);return x||v||w})})}sortBy(t){this.sortField===t?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortField=t,this.sortDirection=t==="lastModified"?"desc":"asc"),this.saveSortSettings()}toggleFavorites(){this.showFavoritesOnly=!this.showFavoritesOnly}toggleFileFavorite(t,e){t.stopPropagation(),e.isFavorite=!e.isFavorite,this.favoriteToggle.emit(e)}toggleSort(){this.sortField==="lastModified"?this.sortDirection=this.sortDirection==="desc"?"asc":"desc":(this.sortField="lastModified",this.sortDirection="desc"),this.saveSortSettings()}toggleSelectAll(){this.isAllSelected?(this.selectedFiles.clear(),this.isAllSelected=!1):(this.sortedFiles.forEach(t=>this.selectedFiles.add(t)),this.isAllSelected=!0)}toggleSelectFile(t){this.selectedFiles.has(t)?(this.selectedFiles.delete(t),this.isAllSelected=!1):(this.selectedFiles.add(t),this.selectedFiles.size===this.sortedFiles.length&&(this.isAllSelected=!0))}onSearchInput(t){let e=t.target;this.searchQuery=e.value}clearSearch(){this.searchQuery=""}openSelectModal(t){this.pendingAction=t||null,this.showFileSelectModal=!0}closeSelectModal(){this.pendingAction=null,this.showFileSelectModal=!1}selectRecentFromModal(t){this.openRecentFile.emit(t),this.openRecentFileWithAction.emit({file:t,action:this.pendingAction||void 0}),this.closeSelectModal()}onFileNameClick(t){this.openRecentFile.emit(t),this.openRecentFileWithAction.emit({file:t,action:this.pendingAction||void 0})}onRecentFileInputChange(t){let e=t.target;if(e.files&&e.files.length>0){let i=e.files[0];this.openNewFile.emit(i)}this.selectedRecentFile=null}onDragOver(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer?.types.includes("Files")&&(t.dataTransfer.dropEffect="copy")}onDragEnter(t){t.preventDefault(),t.stopPropagation(),this.dragCounter++,t.dataTransfer?.types.includes("Files")&&(this.isDragOver=!0)}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.dragCounter--,this.dragCounter<=0&&(this.isDragOver=!1,this.dragCounter=0)}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1,this.dragCounter=0;let e=t.dataTransfer?.files;if(e&&e.length>0){let i=e[0];i.type==="application/pdf"||i.name.toLowerCase().endsWith(".pdf")?this.openNewFile.emit(i):this.notification.show("PDF \uD30C\uC77C\uB9CC \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.")}}onFileInputChange(t){let e=t.target;if(e.files&&e.files.length>0){let i=e.files[0];this.openNewFile.emit(i),this.openNewFileWithAction.emit({file:i,action:this.pendingAction||void 0})}}onModalFileChange(t){let e=t.target;if(e.files&&e.files.length>0){let i=e.files[0];this.openNewFile.emit(i),this.openNewFileWithAction.emit({file:i,action:this.pendingAction||void 0}),this.closeSelectModal(),e.value=""}}static \u0275fac=function(e){return new(e||s)(N(Ge),N(Fe),N(nt))};static \u0275cmp=F({type:s,selectors:[["app-ez-recent-files"]],inputs:{files:"files",searchQuery:"searchQuery"},outputs:{deleteFile:"deleteFile",openRecentFile:"openRecentFile",openRecentFileWithAction:"openRecentFileWithAction",openNewFile:"openNewFile",openNewFileWithAction:"openNewFileWithAction",favoriteToggle:"favoriteToggle"},features:[ve],decls:42,vars:10,consts:[["fileInput",""],["noFiles",""],["noRecentModal",""],["modalFileInput",""],[1,"recent-files-panel",3,"dragover","dragenter","dragleave","drop"],[1,"left-panel"],["title","\uD30C\uC77C \uC5F4\uAE30",1,"open-file-btn",3,"click"],["src","./images/icons/pc/ico-file.svg","alt","\uD30C\uC77C","width","24","height","24"],["type","file","accept","application/pdf",2,"display","none",3,"change"],["title","\uC990\uACA8\uCC3E\uAE30",1,"favorites-btn",3,"click"],["alt","\uC990\uACA8\uCC3E\uAE30","width","24","height","24",3,"src"],[1,"main-content"],[1,"quick-tools-section"],[1,"section-header"],[1,"section-title"],[1,"tools-grid"],["title","\uD398\uC774\uC9C0 \uAD6C\uC131",1,"tool-card",3,"click"],[1,"tool-icon"],["src","./images/icons/ico-tool-main-configuration.svg","alt","\uD398\uC774\uC9C0 \uAD6C\uC131","width","32","height","32"],[1,"tool-label"],["title","PDF \uBD84\uD560",1,"tool-card",3,"click"],["src","./images/icons/ico-tool-main-cut.svg","alt","PDF \uBD84\uD560","width","32","height","32"],["title","PDF \uBCD1\uD569",1,"tool-card",3,"click"],["src","./images/icons/ico-tool-main-merge.svg","alt","PDF \uBCD1\uD569","width","32","height","32"],[1,"recent-files-section"],[1,"files-header"],[1,"files-title"],["class","drag-overlay",4,"ngIf"],["class","recent-table-wrap",4,"ngIf","ngIfElse"],["class","file-select-backdrop",3,"click",4,"ngIf"],[1,"drag-overlay"],[1,"drag-message"],["src","./images/icons/pc/ico-file.svg","alt","PDF","width","48","height","48"],[1,"recent-table-wrap"],[1,"recent-files-table"],[2,"width","55%","cursor","pointer",3,"click"],[1,"sortable-header"],["class","sort-icon",4,"ngIf"],[2,"width","25%","cursor","pointer",3,"click"],[2,"width","15%","cursor","pointer",3,"click"],[2,"width","5%"],[3,"file-open",4,"ngFor","ngForOf"],[1,"sort-icon"],[1,"file-name-cell"],[1,"file-thumbnail-wrapper"],["class","file-thumbnail","alt","PDF \uC378\uB124\uC77C",3,"src",4,"ngIf"],["class","pdf-svg",4,"ngIf"],[1,"file-name-text",3,"click"],["class","open-badge",4,"ngIf"],[1,"favorite-icon",3,"click","title"],["alt","\uC990\uACA8\uCC3E\uAE30","width","18","height","18",3,"src"],["title","\uC0AD\uC81C",1,"delete-btn",3,"click"],["src","./images/icons/pc/btn-gnb-delete.svg","alt","\uC0AD\uC81C","width","18","height","18"],["alt","PDF \uC378\uB124\uC77C",1,"file-thumbnail",3,"src"],[1,"pdf-svg"],["src","./images/icons/pc/ico-file.svg","alt","PDF","width","22","height","22"],[1,"open-badge"],[1,"no-files-message"],["src","./images/icons/pc/ico-file.svg","alt","\uD30C\uC77C","width","64","height","64"],[1,"file-select-backdrop",3,"click"],[1,"file-select-modal",3,"click"],[1,"file-select-header"],[1,"file-select-eyebrow"],[1,"file-select-title"],["title","\uB2EB\uAE30",1,"modal-close-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","18","height","18"],[1,"file-select-body"],[1,"modal-section"],[1,"modal-section-header"],[1,"section-hint"],["class","modal-recent-list",4,"ngIf","ngIfElse"],[1,"modal-upload"],[1,"modal-upload-btn",3,"click"],["type","file","accept","application/pdf","hidden","",3,"change"],[1,"modal-recent-list"],["class","modal-recent-item",3,"click",4,"ngFor","ngForOf"],[1,"modal-recent-item",3,"click"],[1,"recent-name"],[1,"recent-meta"],[1,"modal-empty"]],template:function(e,i){if(e&1){let n=y();r(0,"div",4),f("dragover",function(d){return g(n),u(i.onDragOver(d))})("dragenter",function(d){return g(n),u(i.onDragEnter(d))})("dragleave",function(d){return g(n),u(i.onDragLeave(d))})("drop",function(d){return g(n),u(i.onDrop(d))}),r(1,"div",5)(2,"button",6),f("click",function(){g(n);let d=Te(7);return u(d.click())}),b(3,"img",7),r(4,"span"),c(5,"\uD30C\uC77C \uC5F4\uAE30"),a()(),r(6,"input",8,0),f("change",function(d){return g(n),u(i.onFileInputChange(d))}),a(),r(8,"button",9),f("click",function(){return g(n),u(i.toggleFavorites())}),b(9,"img",10),r(10,"span"),c(11,"\uC990\uACA8\uCC3E\uAE30"),a()()(),r(12,"div",11)(13,"div",12)(14,"div",13)(15,"h2",14),c(16,"\uBE60\uB978 \uB3C4\uAD6C"),a()(),r(17,"div",15)(18,"div",16),f("click",function(){return g(n),u(i.openSelectModal("organizer"))}),r(19,"div",17),b(20,"img",18),a(),r(21,"span",19),c(22,"\uAD6C\uC131"),a()(),r(23,"div",20),f("click",function(){return g(n),u(i.openSelectModal("split"))}),r(24,"div",17),b(25,"img",21),a(),r(26,"span",19),c(27,"\uBD84\uD560"),a()(),r(28,"div",22),f("click",function(){return g(n),u(i.openSelectModal("merge"))}),r(29,"div",17),b(30,"img",23),a(),r(31,"span",19),c(32,"\uBCD1\uD569"),a()()()(),r(33,"div",24)(34,"div",25)(35,"h2",26),c(36),a()(),M(37,Ma,5,0,"div",27)(38,Ba,19,4,"div",28)(39,za,6,0,"ng-template",null,1,vn),a()()(),M(41,Va,33,2,"div",29)}if(e&2){let n=Te(40);T("drag-over",i.isDragOver),l(8),T("active",i.showFavoritesOnly),l(),m("src",i.showFavoritesOnly?"./images/icons/pc/ico-bookmark-sel.svg":"./images/icons/pc/ico-bookmark.svg",Ce),l(27),B(i.showFavoritesOnly?"\uC990\uACA8\uCC3E\uAE30":"\uCD5C\uADFC\uD30C\uC77C"),l(),m("ngIf",i.isDragOver),l(),m("ngIf",i.sortedFiles.length>0)("ngIfElse",n),l(3),m("ngIf",i.showFileSelectModal)}},dependencies:[ge,$,R,Se],styles:['@charset "UTF-8";.recent-files-panel[_ngcontent-%COMP%]{padding:0;background:#fff;border:1px solid #e1e5ea;height:100%;display:flex;flex-direction:row;border-radius:16px;overflow:hidden}.recent-files-panel.drag-over[_ngcontent-%COMP%]{border-color:#007acc;background:#007acc0d}.left-panel[_ngcontent-%COMP%]{width:200px;background:#fff;border-right:1px solid #e1e5ea;display:flex;flex-direction:column;align-items:center;padding:20px 16px;border-radius:0}.open-file-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:10px;padding:12px 20px;background:#fff;color:#333;border:1px solid #e1e5ea;border-radius:16px;cursor:pointer;font-size:14px;font-weight:600;transition:all .15s ease;width:100%;text-align:left}.open-file-btn[_ngcontent-%COMP%]:hover{background:#f6f8fb;border-color:#f44336}.open-file-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.favorites-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;gap:10px;padding:12px 20px;background:#fff;color:#333;border:1px solid #e1e5ea;border-radius:16px;cursor:pointer;font-size:14px;font-weight:600;transition:all .15s ease;width:100%;text-align:left;margin-top:12px}.favorites-btn[_ngcontent-%COMP%]:hover{background:#fffbf0;border-color:gold}.favorites-btn.active[_ngcontent-%COMP%]{background:#fffbf0;border-color:gold;color:#d4af37}.favorites-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;background:#fff;border:none;padding-bottom:8px}.content-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;background:#fff;border-bottom:1px solid #e1e5ea}.header-logo[_ngcontent-%COMP%]{display:flex;align-items:center}.header-logo-img[_ngcontent-%COMP%]{height:20px;width:auto;opacity:.9}.header-search[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;min-width:280px}.header-search[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#999;pointer-events:none}.header-search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:8px 36px 8px 40px;border:1px solid #dfe3e8;border-radius:8px;font-size:14px;transition:border-color .15s ease,background-color .15s ease;background:#f9fafb}.header-search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b6cf6;background:#fff}.header-search[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{position:absolute;right:8px;background:none;border:none;cursor:pointer;padding:4px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#a0a7b0;transition:background-color .15s ease,color .15s ease}.header-search[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]:hover{background:#f1f3f5;color:#d64545}.top-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 24px;background:#2c3e50;border-bottom:1px solid #34495e}.toolbar-left[_ngcontent-%COMP%]{display:flex;gap:8px}.tab-btn[_ngcontent-%COMP%]{padding:8px 16px;background:transparent;color:#bdc3c7;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:all .2s}.tab-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#ecf0f1}.tab-btn.active[_ngcontent-%COMP%]{background:#3498db;color:#fff;font-weight:600}.toolbar-right[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{padding:8px 20px;background:#3498db;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:600;transition:all .2s}.toolbar-right[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background:#2980b9}.quick-tools-section[_ngcontent-%COMP%]{padding:20px 24px;margin:0;background:#fff;border-bottom:1px solid #e1e5ea}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1e293b;margin:0;letter-spacing:-.5px}.quick-open-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#007acc;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:600;transition:all .2s}.quick-open-btn[_ngcontent-%COMP%]:hover{background:#005a9e}.tools-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px;max-width:900px}.tool-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:18px 14px;background:#fff;border:1px solid #e1e5ea;border-radius:8px;cursor:pointer;transition:border-color .15s ease,background-color .15s ease;gap:10px}.tool-card[_ngcontent-%COMP%]:hover{border-color:#3b6cf6;background:#f6f8fb}.tool-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.tool-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#334155;text-align:center;letter-spacing:-.2px}.recent-files-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;position:relative}.files-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:14px 24px;background:#fff}.files-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1e293b;margin:0;letter-spacing:-.5px}.recent-table-wrap[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:0 24px 16px;min-height:0}.recent-table-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.recent-table-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f8fafc;border-radius:10px}.recent-table-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c5ced9;border-radius:10px}.recent-table-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#aeb7c3}.recent-files-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:transparent}.recent-files-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#64748b;font-weight:600;font-size:13px;background:transparent;border-bottom:1px solid #e5e7eb;padding:12px 16px;text-align:left;position:sticky;top:0;z-index:10;background:#fff;-webkit-user-select:none;user-select:none;transition:background .15s ease}.recent-files-table[_ngcontent-%COMP%]   th[style*="cursor: pointer"][_ngcontent-%COMP%]:hover{background:#f5f7fb}.sortable-header[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px}.sort-icon[_ngcontent-%COMP%]{color:#007acc;font-size:10px;margin-left:4px}.recent-files-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#2b343f;font-size:14px;padding:12px 16px;border-bottom:1px solid #f1f3f5;vertical-align:middle;background:#fff}.recent-files-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .15s ease}.recent-files-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#f5f7fb}.file-name-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.favorite-icon[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;padding:4px;display:inline-flex;align-items:center;justify-content:center;transition:transform .15s ease;flex-shrink:0;margin-left:4px}.favorite-icon[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.favorite-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.file-thumbnail-wrapper[_ngcontent-%COMP%]{margin-right:10px;display:flex;align-items:center;flex-shrink:0}.file-thumbnail[_ngcontent-%COMP%]{width:32px;height:40px;object-fit:cover;border-radius:4px;border:1px solid #e5e7eb}.pdf-svg[_ngcontent-%COMP%]{margin-right:10px;display:flex;align-items:center;flex-shrink:0}.pdf-svg[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}.file-name-text[_ngcontent-%COMP%]{font-weight:500;color:#1e293b;cursor:pointer;transition:color .15s ease}.file-name-text[_ngcontent-%COMP%]:hover{color:var(--active-color-hover, #e55a2b)}.open-badge[_ngcontent-%COMP%]{display:inline-block;margin-left:8px;padding:3px 10px;background:#0f9b71;color:#fff;font-size:11px;border-radius:14px;font-weight:700;letter-spacing:.4px}.delete-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:8px;border-radius:12px;display:flex;align-items:center;justify-content:center;transition:background-color .15s ease,opacity .15s ease;opacity:.65}.delete-btn[_ngcontent-%COMP%]:hover{background:#f8d7da;opacity:1}.delete-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#ef4444;stroke-width:2.5}.no-files-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center;color:#94a3b8}.no-files-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:24px;opacity:.4}.no-files-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#475569;margin:0 0 8px;letter-spacing:-.5px}.no-files-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#999}.drag-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#315ad1db;display:flex;align-items:center;justify-content:center;z-index:1000;border-radius:16px}.drag-message[_ngcontent-%COMP%]{text-align:center;color:#fff}.drag-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px}.drag-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin:0;letter-spacing:-.5px}.file-select-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#11182766;display:flex;align-items:center;justify-content:center;z-index:2000}.file-select-modal[_ngcontent-%COMP%]{width:min(720px,92vw);background:#fff;border:1px solid #e1e5ea;border-radius:12px;box-shadow:0 10px 40px #0000001f;padding:20px 22px}.file-select-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.file-select-eyebrow[_ngcontent-%COMP%]{margin:0;font-size:12px;letter-spacing:.4px;text-transform:uppercase;color:#64748b}.file-select-title[_ngcontent-%COMP%]{margin:4px 0 0;font-size:20px;font-weight:700;color:#1e293b}.modal-close-btn[_ngcontent-%COMP%]{background:none;border:1px solid #e1e5ea;border-radius:8px;padding:6px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;transition:background-color .15s ease,border-color .15s ease}.modal-close-btn[_ngcontent-%COMP%]:hover{background:#f3f5f7;border-color:#d5d9df}.file-select-body[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.1fr .9fr;gap:16px}.modal-section[_ngcontent-%COMP%]{border:1px solid #e1e5ea;border-radius:8px;padding:14px 16px;background:#f9fafb}.modal-section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:10px}.modal-section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:15px;color:#111827}.section-hint[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.modal-recent-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;max-height:360px;overflow-y:auto}.modal-recent-item[_ngcontent-%COMP%]{width:100%;text-align:left;border:1px solid #e1e5ea;border-radius:6px;padding:10px 12px;background:#fff;cursor:pointer;transition:border-color .15s ease,background-color .15s ease}.modal-recent-item[_ngcontent-%COMP%]:hover{border-color:#3b6cf6;background:#f6f8fb}.recent-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1f2937}.recent-meta[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin-top:2px}.modal-empty[_ngcontent-%COMP%]{padding:18px;border:1px dashed #cbd5e1;border-radius:8px;color:#6b7280;text-align:center;background:#fff}.modal-upload[_ngcontent-%COMP%]{border:1px dashed #cbd5e1;border-radius:8px;padding:16px;text-align:center;background:#fff}.modal-upload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px;color:#374151;font-size:14px}.modal-upload-btn[_ngcontent-%COMP%]{padding:10px 16px;background:#3b6cf6;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:background-color .15s ease}.modal-upload-btn[_ngcontent-%COMP%]:hover{background:#315ad1}']})};var Pt=class s{static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-window-resize-indicator"]],decls:0,vars:0,template:function(e,i){},dependencies:[ge],styles:[".resize-indicator[_ngcontent-%COMP%]{position:fixed;bottom:8px;right:8px;pointer-events:none;z-index:999999;display:flex;flex-direction:row;align-items:center;gap:8px;padding:12px 16px;background:linear-gradient(135deg,#007acc,#0098ff);border-radius:8px;box-shadow:0 4px 16px #007acc66}.resize-grip[_ngcontent-%COMP%]{width:24px;height:24px;color:#fff;display:flex;align-items:center;justify-content:center}.resize-grip[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:1;filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.resize-label[_ngcontent-%COMP%]{font-size:13px;color:#fff;font-weight:700;letter-spacing:.5px;text-shadow:0 1px 2px rgba(0,0,0,.2)}"]})};var vt=class s{db=null;config={dbName:"EzReader_TabStorage_v1_2025",version:3,storeName:"pdf_tabs",maxTabs:50,maxFileSize:100};dbInitPromise=null;autoSaveTimeout=null;initRetryCount=0;MAX_INIT_RETRIES=2;constructor(){this.dbInitPromise=this.initDB()}initDB(){return P(this,null,function*(){return new Promise((t,e)=>{if(!window.indexedDB){console.error("\u274C IndexedDB not supported"),e(new Error("IndexedDB not supported"));return}let i=indexedDB.open(this.config.dbName,this.config.version);i.onerror=()=>{console.error("\u274C IndexedDB open error:",i.error),e(i.error)},i.onsuccess=()=>{if(this.db=i.result,!this.db.objectStoreNames.contains(this.config.storeName)){if(console.warn(`\u26A0\uFE0F Object store '${this.config.storeName}' not found. Available stores:`,Array.from(this.db.objectStoreNames)),this.initRetryCount>=this.MAX_INIT_RETRIES){console.error("\u274C Max retry attempts reached. Cannot initialize database."),this.db.close(),e(new Error("Failed to initialize database after multiple attempts"));return}this.initRetryCount++,this.db.close();let n=indexedDB.deleteDatabase(this.config.dbName);n.onsuccess=()=>{this.initDB().then(t).catch(e)},n.onerror=()=>{console.error("\u274C Failed to delete database:",n.error),e(n.error)};return}this.initRetryCount=0,t()},i.onupgradeneeded=n=>{let o=n.target.result;if(!o.objectStoreNames.contains(this.config.storeName)){let d=o.createObjectStore(this.config.storeName,{keyPath:"id"});d.createIndex("createdAt","createdAt",{unique:!1}),d.createIndex("active","active",{unique:!1}),d.createIndex("updatedAt","updatedAt",{unique:!1})}if(!o.objectStoreNames.contains("recent_files")){let d=o.createObjectStore("recent_files",{keyPath:"id"});d.createIndex("name","name",{unique:!1}),d.createIndex("date","date",{unique:!1}),d.createIndex("addedAt","addedAt",{unique:!1}),d.createIndex("lastAccessedAt","lastAccessedAt",{unique:!1})}}})})}ensureDB(){return P(this,null,function*(){if(this.dbInitPromise&&(yield this.dbInitPromise),!this.db)throw new Error("Database not initialized")})}createTransaction(t){if(!this.db)throw new Error("Database not initialized");if(!this.db.objectStoreNames.contains(this.config.storeName))throw console.error(`\u274C Object store '${this.config.storeName}' not found in database`),new Error(`Object store '${this.config.storeName}' not found. Please refresh the page to reinitialize the database.`);return this.db.transaction([this.config.storeName],t)}saveTabs(t,e){return P(this,null,function*(){return this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout),new Promise(i=>{this.autoSaveTimeout=setTimeout(()=>P(this,null,function*(){try{yield this.saveTabsImmediate(t,e),i()}catch(n){console.error("Error saving tabs:",n),i()}}),500)})})}saveTabsImmediate(t,e){return P(this,null,function*(){yield this.ensureDB();let i=this.createTransaction("readwrite"),n=i.objectStore(this.config.storeName);yield this.clearAllTabsSync(n);let o=t.map(d=>P(this,null,function*(){let h=e.get(d.id),_=null,C=0,x="";if(h){_=yield this.blobToArrayBuffer(h),C=h.size,x=h.type;let w=C/(1024*1024);if(w>this.config.maxFileSize){console.warn(`File too large: ${d.name} (${w.toFixed(2)}MB)`);return}}let v={id:d.id,name:d.name,active:d.active,createdAt:d.createdAt||Date.now(),updatedAt:Date.now(),pdfData:_,pdfSize:C,pdfType:x,pageCount:d.pageCount,lastViewedPage:d.lastViewedPage};n.put(v)}));return yield Promise.all(o),new Promise((d,h)=>{i.oncomplete=()=>{d()},i.onerror=()=>h(i.error)})})}loadTabs(){return P(this,null,function*(){try{yield this.ensureDB();let i=this.createTransaction("readonly").objectStore(this.config.storeName).getAll();return new Promise((n,o)=>{i.onsuccess=()=>{let d=i.result;d.sort((h,_)=>h.createdAt-_.createdAt),n({success:!0,tabs:d})},i.onerror=()=>{o(i.error)}})}catch(t){return console.error("\u274C Error loading tabs:",t),{success:!1,tabs:[],errors:[t instanceof Error?t.message:"Unknown error"]}}})}saveTab(t,e){return P(this,null,function*(){yield this.ensureDB();let i=null,n=0,o="";e&&(i=yield this.blobToArrayBuffer(e),n=e.size,o=e.type);let d={id:t.id,name:t.name,active:t.active,createdAt:t.createdAt||Date.now(),updatedAt:Date.now(),pdfData:i,pdfSize:n,pdfType:o,pageCount:t.pageCount,lastViewedPage:t.lastViewedPage},h=this.createTransaction("readwrite");return h.objectStore(this.config.storeName).put(d),new Promise((C,x)=>{h.oncomplete=()=>C(),h.onerror=()=>x(h.error)})})}deleteTab(t){return P(this,null,function*(){yield this.ensureDB();let e=this.createTransaction("readwrite");return e.objectStore(this.config.storeName).delete(t),new Promise((n,o)=>{e.oncomplete=()=>{n()},e.onerror=()=>o(e.error)})})}updateActiveTab(t){return P(this,null,function*(){yield this.ensureDB();let e=this.createTransaction("readwrite"),i=e.objectStore(this.config.storeName),n=yield this.getAllTabsSync(i);for(let o of n)o.active=o.id===t,o.updatedAt=Date.now(),i.put(o);return new Promise((o,d)=>{e.oncomplete=()=>o(),e.onerror=()=>d(e.error)})})}clearAllTabs(){return P(this,null,function*(){yield this.ensureDB();let t=this.createTransaction("readwrite");return t.objectStore(this.config.storeName).clear(),new Promise((i,n)=>{t.oncomplete=()=>{i()},t.onerror=()=>n(t.error)})})}getAllTabsSync(t){return P(this,null,function*(){return new Promise((e,i)=>{let n=t.getAll();n.onsuccess=()=>e(n.result),n.onerror=()=>i(n.error)})})}clearAllTabsSync(t){return P(this,null,function*(){return new Promise((e,i)=>{let n=t.clear();n.onsuccess=()=>e(),n.onerror=()=>i(n.error)})})}blobToArrayBuffer(t){return P(this,null,function*(){return new Promise((e,i)=>{let n=new FileReader;n.onload=()=>e(n.result),n.onerror=()=>i(n.error),n.readAsArrayBuffer(t)})})}arrayBufferToBlob(t,e){return new Blob([t],{type:e})}getTabCount(){return P(this,null,function*(){yield this.ensureDB();let i=this.createTransaction("readonly").objectStore(this.config.storeName).count();return new Promise((n,o)=>{i.onsuccess=()=>n(i.result),i.onerror=()=>o(i.error)})})}getStorageSize(){return P(this,null,function*(){let t=yield this.loadTabs();return t.success?t.tabs.reduce((i,n)=>i+n.pdfSize,0)/(1024*1024):0})}closeDB(){this.db&&(this.db.close(),this.db=null)}deleteDatabase(){return P(this,null,function*(){return this.closeDB(),new Promise((t,e)=>{let i=indexedDB.deleteDatabase(this.config.dbName);i.onsuccess=()=>{t()},i.onerror=()=>e(i.error)})})}static \u0275fac=function(e){return new(e||s)};static \u0275prov=de({token:s,factory:s.\u0275fac,providedIn:"root"})};var Na=["tabContainer"];function ja(s,t){if(s&1){let e=y();r(0,"div",11),f("click",function(){let n=g(e).$implicit,o=p();return u(o.selectTab(n.id))}),r(1,"span",12),c(2),a(),r(3,"button",13),f("click",function(n){let o=g(e).$implicit;return p().requestCloseTab(o.id),u(n.stopPropagation())}),c(4,"\xD7"),a()()}if(s&2){let e=t.$implicit;T("active",e.active)("has-unsaved",e.hasUnsavedChanges),m("title",e.name+(e.hasUnsavedChanges?" (\uC800\uC7A5\uB418\uC9C0 \uC54A\uC74C)":"")),l(2),We("",e.name,"",e.hasUnsavedChanges?" \u2022":"")}}function Ua(s,t){if(s&1){let e=y();r(0,"button",21),f("click",function(){g(e);let n=p(2);return u(n.clearSearch())}),b(1,"img",22),a()}}function Ha(s,t){if(s&1){let e=y();r(0,"div",14)(1,"div",15),b(2,"img",16),a(),r(3,"div",17),b(4,"img",18),r(5,"input",19),k("ngModelChange",function(n){g(e);let o=p();return S(o.searchQuery,n)||(o.searchQuery=n),u(n)}),f("input",function(n){g(e);let o=p();return u(o.onSearchInput(n))}),a(),M(6,Ua,2,0,"button",20),a()()}if(s&2){let e=p();l(5),O("ngModel",e.searchQuery),l(),m("ngIf",e.searchQuery)}}var tn=class s{constructor(t,e,i,n,o){this.tabStorage=t;this.cdr=e;this.router=i;this.route=n;this.authService=o}currentFileName="";currentPdfSrc=null;isRecentFilesView=!1;tabChanged=new D;tabsRestored=new D;searchQueryChange=new D;tabCloseRequest=new D;fileOpenRequest=new D;tabContainer;searchQuery="";tabs=[];pdfBlobs=new Map;isInitialized=!1;canScrollLeft=!1;canScrollRight=!1;ngOnInit(){return P(this,null,function*(){yield this.loadSavedTabs(),this.isInitialized=!0})}ngAfterViewInit(){setTimeout(()=>this.checkScrollButtons(),100)}ngOnDestroy(){this.isInitialized&&this.saveTabsToStorage()}ngOnChanges(t){t.currentFileName&&t.currentFileName.currentValue&&this.updateCurrentTabName(t.currentFileName.currentValue)}loadSavedTabs(){return P(this,null,function*(){try{let t=yield this.tabStorage.loadTabs();if(t.success&&t.tabs.length>0){this.tabs=t.tabs.map(i=>{let n={id:i.id,name:i.name,active:i.active,pdfSrc:null,view:i.view||"home",editorData:i.editorData,createdAt:i.createdAt,pageCount:i.pageCount,lastViewedPage:i.lastViewedPage};if(i.pdfData&&i.pdfType){let o=this.tabStorage.arrayBufferToBlob(i.pdfData,i.pdfType);this.pdfBlobs.set(i.id,o),n.pdfSrc=URL.createObjectURL(o)}return n});let e=this.tabs.find(i=>i.active);e&&this.tabChanged.emit({pdfSrc:e.pdfSrc,fileName:e.name,view:e.view,editorData:e.editorData}),this.tabsRestored.emit()}else t.success||console.warn("\u26A0\uFE0F Failed to load tabs from storage:",t.errors),this.tabs=[],this.tabChanged.emit({pdfSrc:null,fileName:"",view:"home"})}catch(t){console.error("\u274C Failed to load saved tabs:",t),this.tabs=[],this.tabChanged.emit({pdfSrc:null,fileName:"",view:"home"})}})}createDefaultTab(){this.tabs=[{id:Date.now(),name:"\uC0C8\uD30C\uC77C",active:!0,pdfSrc:null,view:"home",createdAt:Date.now()}],this.cdr.detectChanges(),this.tabChanged.emit({pdfSrc:null,fileName:"\uC0C8\uD30C\uC77C",view:"home"})}saveTabsToStorage(){return P(this,null,function*(){if(this.isInitialized)try{let t=this.tabs.filter(e=>this.pdfBlobs.has(e.id)).length;yield this.tabStorage.saveTabs(this.tabs,this.pdfBlobs)}catch(t){console.error("\u274C Failed to save tabs:",t)}})}updateCurrentTabName(t){let e=this.tabs.find(i=>i.active);e&&(e.name=t,this.saveTabsToStorage())}updateCurrentTabPdfSrc(t){let e=this.tabs.find(i=>i.active);e&&(e.pdfSrc=t,this.saveTabsToStorage())}requestCloseTab(t){let e=this.tabs.find(i=>i.id===t);e&&(e.hasUnsavedChanges?this.tabCloseRequest.emit({tabId:t,fileName:e.name,hasUnsavedChanges:!0}):this.closeTab(t))}closeTab(t){let e=this.tabs.find(n=>n.id===t),i=e?.active;if(e?.pdfSrc)try{URL.revokeObjectURL(e.pdfSrc)}catch(n){console.warn("Failed to revoke Blob URL:",n)}if(this.pdfBlobs.delete(t),this.tabs=this.tabs.filter(n=>n.id!==t),this.tabs.length===0)this.tabChanged.emit({pdfSrc:null,fileName:"",view:"home"});else if(i){let n=this.tabs[0];if(n.active=!0,this.pdfBlobs.has(n.id)){let o=this.pdfBlobs.get(n.id);n.pdfSrc&&URL.revokeObjectURL(n.pdfSrc),n.pdfSrc=URL.createObjectURL(o)}this.tabChanged.emit({pdfSrc:n.pdfSrc,fileName:n.name,view:n.view,editorData:n.editorData})}this.tabStorage.deleteTab(t),this.saveTabsToStorage()}setTabUnsavedChanges(t,e){let i=this.tabs.find(n=>n.id===t);i&&(i.hasUnsavedChanges=e)}setActiveTabUnsavedChanges(t){let e=this.tabs.find(i=>i.active);e&&(e.hasUnsavedChanges=t)}addTab(){this.tabs.forEach(e=>e.active=!1);let t={id:Date.now(),name:"\uC0C8\uD30C\uC77C",active:!0,pdfSrc:null,view:"home",createdAt:Date.now()};this.tabs.push(t),this.tabChanged.emit({pdfSrc:null,fileName:"\uC0C8\uD30C\uC77C",view:"home"}),this.saveTabsToStorage(),setTimeout(()=>{this.scrollToActiveTab(),this.checkScrollButtons()},100)}onAddTabClick(){this.fileOpenRequest.emit()}showSnackbar(t){let e=document.querySelector(".tab-snackbar");e&&e.remove();let i=document.createElement("div");i.className="tab-snackbar",i.textContent=t,document.body.appendChild(i),setTimeout(()=>i.classList.add("show"),10),setTimeout(()=>{i.classList.remove("show"),setTimeout(()=>i.remove(),300)},3e3)}selectTab(t){this.tabs.forEach(o=>{o.active=o.id===t});let e=this.tabs.find(o=>o.id===t);if(e&&this.pdfBlobs.has(t)){let o=this.pdfBlobs.get(t);e.pdfSrc&&URL.revokeObjectURL(e.pdfSrc),e.pdfSrc=URL.createObjectURL(o)}else e&&console.warn(`\u26A0\uFE0F pdfBlobs\uC5D0 tabId ${t}\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. pdfSrc:`,e.pdfSrc);let i;if(e?.editorData&&e.editorData.pages&&e.editorData.pages.length>0?i="editor":e?.pdfSrc?i="viewer":i="home",e?.route)this.router.navigate([e.route],{relativeTo:this.route.parent});else{let o=i==="viewer"?"/ez-reader/viewer":i==="editor"?"/ez-reader/editor":"/ez-reader/recent";this.router.navigate([o])}let n={pdfSrc:e?.pdfSrc??null,fileName:e?.name??"",view:i,editorData:e?.editorData,pageCount:e?.pageCount??0,lastViewedPage:1};this.tabChanged.emit(n),this.tabStorage.updateActiveTab(t),setTimeout(()=>this.scrollToActiveTab(),100)}setActiveTabPdf(t,e,i){return P(this,null,function*(){let n=this.tabs.find(o=>o.active);if(n){if(n.pdfSrc&&n.pdfSrc!==e)try{URL.revokeObjectURL(n.pdfSrc)}catch(o){console.warn("Failed to revoke old Blob URL:",o)}n.name=t,n.pdfSrc=e,e&&(n.view="viewer")}else{let o={id:Date.now(),name:t,active:!0,pdfSrc:e,view:"viewer",createdAt:Date.now()};this.tabs.push(o),n=o}i&&this.pdfBlobs.set(n.id,i),yield this.saveTabsToStorage(),this.tabChanged.emit({pdfSrc:n.pdfSrc,fileName:n.name,view:n.view,editorData:n.editorData}),setTimeout(()=>{this.scrollToActiveTab(),this.checkScrollButtons()},100)})}getActiveTabBlob(){let t=this.tabs.find(e=>e.active);return t&&this.pdfBlobs.get(t.id)||null}cleanupBlobUrls(){this.tabs.forEach(t=>{t.pdfSrc&&URL.revokeObjectURL(t.pdfSrc)})}clearAllSavedTabs(){return P(this,null,function*(){yield this.tabStorage.clearAllTabs(),this.cleanupBlobUrls(),this.tabs=[],this.pdfBlobs.clear(),this.createDefaultTab(),this.tabChanged.emit({pdfSrc:null,fileName:"\uC0C8\uD30C\uC77C",view:"home"})})}scrollLeft(){this.tabContainer&&this.tabContainer.nativeElement.scrollBy({left:-200,behavior:"smooth"})}scrollRight(){this.tabContainer&&this.tabContainer.nativeElement.scrollBy({left:200,behavior:"smooth"})}onScroll(){this.checkScrollButtons()}checkScrollButtons(){if(!this.tabContainer)return;let t=this.tabContainer.nativeElement,e=t.scrollLeft,i=t.scrollWidth,n=t.clientWidth;this.canScrollLeft=e>0,this.canScrollRight=e+n<i-1}scrollToActiveTab(){if(!this.tabContainer)return;let t=this.tabContainer.nativeElement,e=t.querySelector(".tab.active");if(e){let i=t.getBoundingClientRect(),n=e.getBoundingClientRect();n.left<i.left?t.scrollBy({left:n.left-i.left-20,behavior:"smooth"}):n.right>i.right&&t.scrollBy({left:n.right-i.right+20,behavior:"smooth"})}}updateActiveTabView(t,e){let i=this.tabs.find(n=>n.active);i&&(i.view=t,e!==void 0&&(i.editorData=e),this.saveTabsToStorage(),this.tabChanged.emit({pdfSrc:i.pdfSrc,fileName:i.name,view:i.view,editorData:i.editorData}))}updateActiveTabName(t){let e=this.tabs.find(i=>i.active);e&&(e.name=t,this.saveTabsToStorage())}updateActiveTabPageInfo(t,e){let i=this.tabs.find(n=>n.active);i&&(i.pageCount=t,e!==void 0&&(i.lastViewedPage=e),this.saveTabsToStorage())}findTabByName(t){return this.tabs.find(e=>e.name===t)}activateTab(t){this.tabs.find(i=>i.id===t)&&this.selectTab(t)}onHomeClick(){let t=this.tabs.find(e=>e.active);t&&(t.view="home",this.tabChanged.emit({pdfSrc:null,fileName:t.name,view:"home"})),this.router.navigate(["/ez/recent"])}onLogoutClick(){this.authService.logout(),this.router.navigate(["/ez/login"])}onSearchInput(t){let e=t.target;this.searchQuery=e.value,this.searchQueryChange.emit(this.searchQuery)}clearSearch(){this.searchQuery="",this.searchQueryChange.emit(this.searchQuery)}static \u0275fac=function(e){return new(e||s)(N(vt),N(Fe),N(Ie),N(tt),N(Ve))};static \u0275cmp=F({type:s,selectors:[["app-ez-tab-bar"]],viewQuery:function(e,i){if(e&1&&re(Na,5),e&2){let n;ae(n=se())&&(i.tabContainer=n.first)}},inputs:{currentFileName:"currentFileName",currentPdfSrc:"currentPdfSrc",isRecentFilesView:"isRecentFilesView"},outputs:{tabChanged:"tabChanged",tabsRestored:"tabsRestored",searchQueryChange:"searchQueryChange",tabCloseRequest:"tabCloseRequest",fileOpenRequest:"fileOpenRequest"},standalone:!1,features:[ve],decls:14,vars:6,consts:[["tabContainer",""],[1,"tab-bar-wrapper"],[1,"tab-bar"],["title","\uD648\uC73C\uB85C \uC774\uB3D9",1,"tab-home-btn",3,"click"],["src","./images/icons/pc/btn-home.svg","alt","\uD648","width","18","height","18"],["title","\uC67C\uCABD\uC73C\uB85C \uC2A4\uD06C\uB864",1,"tab-scroll-btn","tab-scroll-left",3,"click"],[1,"tab-container",3,"scroll"],["class","tab",3,"active","has-unsaved","title","click",4,"ngFor","ngForOf"],["title","\uD30C\uC77C \uC5F4\uAE30",1,"tab-add-btn",3,"click"],["title","\uC624\uB978\uCABD\uC73C\uB85C \uC2A4\uD06C\uB864",1,"tab-scroll-btn","tab-scroll-right",3,"click"],["class","tab-header",4,"ngIf"],[1,"tab",3,"click","title"],[1,"tab-name-ellipsis"],["title","\uB2EB\uAE30",1,"tab-close-btn",3,"click"],[1,"tab-header"],[1,"header-logo"],["src","./images/icons/pc/logo-ezreader@3x.png","alt","ezreader \uB85C\uACE0",1,"header-logo-img"],[1,"header-search"],["src","./images/icons/pc/ico-search.svg","alt","\uAC80\uC0C9","width","18","height","18",1,"search-icon"],["type","text","placeholder","\uAC80\uC0C9",1,"search-input",3,"ngModelChange","input","ngModel"],["class","clear-btn","title","\uAC80\uC0C9\uC5B4 \uC9C0\uC6B0\uAE30",3,"click",4,"ngIf"],["title","\uAC80\uC0C9\uC5B4 \uC9C0\uC6B0\uAE30",1,"clear-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","16","height","16"]],template:function(e,i){if(e&1){let n=y();r(0,"div",1)(1,"div",2)(2,"button",3),f("click",function(){return g(n),u(i.onHomeClick())}),b(3,"img",4),a(),r(4,"button",5),f("click",function(){return g(n),u(i.scrollLeft())}),c(5," \u2039 "),a(),r(6,"div",6,0),f("scroll",function(){return g(n),u(i.onScroll())}),M(8,ja,5,7,"div",7),r(9,"button",8),f("click",function(){return g(n),u(i.onAddTabClick())}),c(10,"+"),a()(),r(11,"button",9),f("click",function(){return g(n),u(i.scrollRight())}),c(12," \u203A "),a()(),M(13,Ha,7,2,"div",10),a()}e&2&&(l(4),T("visible",i.canScrollLeft),l(4),m("ngForOf",i.tabs),l(3),T("visible",i.canScrollRight),l(2),m("ngIf",i.isRecentFilesView))},dependencies:[$,R,G,Q,Y],styles:['@charset "UTF-8";[_nghost-%COMP%]{z-index:10;position:relative}.tab-bar-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-shrink:0}.tab-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f5f5f5;height:36px;padding:0 0 0 8px;gap:0;z-index:1100;position:relative;flex-shrink:0;margin:0;border-bottom:1px solid #e0e0e0;box-shadow:none}.tab-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 24px;background:#fff;border-bottom:1px solid #e1e5ea}.header-logo[_ngcontent-%COMP%]{display:flex;align-items:center}.header-logo-img[_ngcontent-%COMP%]{height:20px;width:auto;opacity:.9}.header-search[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;min-width:280px}.header-search[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#999;pointer-events:none}.header-search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:8px 36px 8px 40px;border:1px solid #dfe3e8;border-radius:8px;font-size:14px;transition:border-color .15s ease,background-color .15s ease;background:#f9fafb}.header-search[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b6cf6;background:#fff}.header-search[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{position:absolute;right:8px;background:none;border:none;cursor:pointer;padding:4px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#a0a7b0;transition:background-color .15s ease,color .15s ease}.header-search[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]:hover{background:#f1f3f5;color:#d64545}.tab-home-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:28px;background:transparent;border:none;border-right:1px solid #e0e0e0;cursor:pointer;color:#666;transition:all .15s ease;flex-shrink:0;margin-right:0}.tab-home-btn[_ngcontent-%COMP%]:hover{background:#e8e8e8;color:#333}.tab-home-btn[_ngcontent-%COMP%]:active{background:#ddd}.tab-ezreader[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-right:12px;padding-right:12px;border-right:1px solid rgba(0,0,0,.1);flex-shrink:0}.tab-ezreader-logo[_ngcontent-%COMP%]{height:18px;width:auto;display:block;opacity:.9}.tab-home-icon[_ngcontent-%COMP%]{margin-right:8px;display:flex;align-items:center}.tab-container[_ngcontent-%COMP%]{display:flex;flex:1;overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;gap:0;scrollbar-width:none;-ms-overflow-style:none}.tab-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.tab[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f5f5f5;border:none;border-right:1px solid #e0e0e0;margin-right:0;padding:0 8px 0 12px;font-size:13px;font-weight:400;color:#333;height:28px;position:relative;gap:8px;cursor:pointer;transition:all .15s ease;min-width:100px;max-width:180px;overflow:hidden;letter-spacing:0;box-shadow:none;flex-shrink:0}.tab[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:0;left:0;width:100%;height:2px;background:#ff6200;transform:scaleX(0);transition:transform .15s ease}.tab[_ngcontent-%COMP%]:hover:not(.active){background:#eaeaea;color:#333;transform:none;box-shadow:none}.tab-name-ellipsis[_ngcontent-%COMP%]{display:block;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:0}.tab.active[_ngcontent-%COMP%]{background:#fff;color:#333;font-weight:500;z-index:1;box-shadow:none}.tab.active[_ngcontent-%COMP%]:before{transform:scaleX(1)}.tab.has-unsaved[_ngcontent-%COMP%]   .tab-name-ellipsis[_ngcontent-%COMP%]{font-style:italic;color:#e65100}.tab.has-unsaved.active[_ngcontent-%COMP%]   .tab-name-ellipsis[_ngcontent-%COMP%]{color:#ff6200}.tab-close-btn[_ngcontent-%COMP%]{background:transparent;border:none;font-size:14px;font-weight:400;color:#999;cursor:pointer;margin-left:auto;padding:2px 4px;border-radius:3px;transition:all .15s ease;line-height:1;flex-shrink:0}.tab-close-btn[_ngcontent-%COMP%]:hover{background:#0000001a;color:#666;transform:none}.tab.active[_ngcontent-%COMP%]   .tab-close-btn[_ngcontent-%COMP%]{color:#666}.tab.active[_ngcontent-%COMP%]   .tab-close-btn[_ngcontent-%COMP%]:hover{background:#0000001a;color:#333}.tab-add-btn[_ngcontent-%COMP%]{background:transparent;color:#666;border:none;border-radius:0;font-size:16px;font-weight:400;width:28px;height:28px;margin-left:4px;cursor:pointer;transition:all .15s ease;display:flex;align-items:center;justify-content:center;box-shadow:none;border-right:none;flex-shrink:0;position:sticky;right:0}.tab-add-btn[_ngcontent-%COMP%]:hover{background:#e8e8e8;color:#333}.tab-add-btn.disabled[_ngcontent-%COMP%]{background:transparent;color:#ccc;cursor:not-allowed;opacity:.6}.tab-add-btn.disabled[_ngcontent-%COMP%]:hover{background:transparent;color:#ccc;transform:none}.tab-add-btn.disabled[_ngcontent-%COMP%]:active{transform:none}.tab-add-btn[_ngcontent-%COMP%]:hover:not(.disabled){background:#007acc;color:#fff;border-color:#00000014;transform:none;box-shadow:none}.tab-add-btn[_ngcontent-%COMP%]:active:not(.disabled){transform:scale(.98)}.tab-scroll-btn[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:32px;height:32px;background:#fff;border:none;border-right:1px solid rgba(0,0,0,.08);cursor:pointer;transition:all .2s ease;color:#5a5a5a;font-size:14px;flex-shrink:0}.tab-scroll-btn.visible[_ngcontent-%COMP%]{display:flex}.tab-scroll-btn[_ngcontent-%COMP%]:hover{background:#f5f7fa;color:#007acc}.tab-scroll-btn[_ngcontent-%COMP%]:active{background:#e8eaed}.tab-panel-wrapper[_ngcontent-%COMP%]{position:relative;flex-shrink:0}.tab-panel-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:32px;background:#fff;border:none;border-right:1px solid rgba(0,0,0,.08);cursor:pointer;transition:all .2s ease;color:#5a5a5a;font-size:16px}.tab-panel-btn[_ngcontent-%COMP%]:hover{background:#f5f7fa;color:#007acc}.tab-panel-btn[_ngcontent-%COMP%]:active{background:#e8eaed}.tab-panel[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;margin-top:4px;min-width:280px;max-width:400px;max-height:500px;background:#fff;border:1px solid rgba(0,0,0,.15);border-radius:8px;box-shadow:0 4px 20px #00000026;z-index:2000;overflow:hidden;display:flex;flex-direction:column}.tab-panel-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#f8f9fa;border-bottom:1px solid rgba(0,0,0,.08);font-weight:600;font-size:13px;color:#333}.tab-panel-close[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;color:#666;cursor:pointer;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s ease}.tab-panel-close[_ngcontent-%COMP%]:hover{background:#0000000d;color:#333}.tab-panel-list[_ngcontent-%COMP%]{overflow-y:auto;max-height:450px}.tab-panel-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.tab-panel-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f8f9fa}.tab-panel-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:3px}.tab-panel-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#999}.tab-panel-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:10px 16px;cursor:pointer;transition:all .15s ease;border-bottom:1px solid rgba(0,0,0,.05)}.tab-panel-item[_ngcontent-%COMP%]:hover{background:#f5f7fa}.tab-panel-item.active[_ngcontent-%COMP%]{background:#e8f4ff;color:#007acc;font-weight:600}.tab-panel-item.active[_ngcontent-%COMP%]   .tab-panel-item-name[_ngcontent-%COMP%]{color:#007acc}.tab-panel-item-name[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:13px;color:#5a5a5a;margin-right:12px}.tab-panel-item-close[_ngcontent-%COMP%]{background:#0000000a;border:none;font-size:16px;color:#999;cursor:pointer;padding:4px 8px;border-radius:4px;transition:all .2s ease;flex-shrink:0}.tab-panel-item-close[_ngcontent-%COMP%]:hover{background:#ff585826;color:#ff5858}.tab-panel-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:1999;background:transparent}.tab-snackbar[_ngcontent-%COMP%]{position:fixed;bottom:-100px;left:50%;transform:translate(-50%);background:#323232;color:#fff;padding:14px 24px;border-radius:4px;font-size:14px;font-weight:400;box-shadow:0 3px 10px #0000004d;z-index:10000;transition:bottom .3s cubic-bezier(.4,0,.2,1);white-space:nowrap}.tab-snackbar.show[_ngcontent-%COMP%]{bottom:30px}']})};var qa=["fileInput"];function Ga(s,t){s&1&&(r(0,"div",26),b(1,"div",27),a())}function Qa(s,t){if(s&1){let e=y();r(0,"button",28),f("click",function(){let n=g(e).$implicit,o=p();return u(o.onToolbarAction(n.action))}),b(1,"img",29),a()}if(s&2){let e=t.$implicit,i=p();T("disabled",i.isActionDisabled(e.action)),m("title",e.action==="save"?i.getSaveTooltip():e.tooltip)("disabled",i.isActionDisabled(e.action)),l(),m("src",e.icon,Ce)("alt",e.tooltip)}}function Ya(s,t){if(s&1&&b(0,"img",36),s&2){let e=p().$implicit,i=p(2);m("src",e.action==="favorite"&&i.isFavorite?"./images/icons/pc/ico-bookmark-sel.svg":"./images/icons/pc/ico-bookmark.svg",Ce)}}function Ka(s,t){if(s&1&&b(0,"img",37),s&2){let e=p().$implicit;m("src",e.icon,Ce)("alt",e.tooltip)}}function Xa(s,t){if(s&1){let e=y();r(0,"button",32),f("click",function(){let n=g(e).$implicit,o=p(2);return u(o.onToolbarAction(n.action))}),M(1,Ya,1,1,"img",33)(2,Ka,1,2,"img",34),r(3,"span",35),c(4),a()()}if(s&2){let e=t.$implicit,i=p(2);T("disabled",i.isActionDisabled(e.action))("active",e.action==="favorite"&&i.isFavorite),m("title",e.tooltip)("disabled",i.isActionDisabled(e.action)),l(),m("ngIf",e.icon==="star"),l(),m("ngIf",e.icon!=="star"&&e.icon!=="text"&&e.icon!=="shape"),l(2),B(e.tooltip)}}function Za(s,t){if(s&1){let e=y();r(0,"div",30),f("click",function(n){return g(e),u(n.stopPropagation())}),M(1,Xa,5,9,"button",31),a()}if(s&2){let e=p();l(),m("ngForOf",e.moreMenuActions)}}function Ja(s,t){if(s&1){let e=y();r(0,"li",38),f("click",function(){let n=g(e).$implicit,o=p();return u(o.onMenuItemClick(n))}),c(1),a()}if(s&2){let e=t.$implicit,i=p();T("active",e.active)("disabled",i.isMenuDisabled(e.name)),m("title",e.name+" \uBA54\uB274"),l(),I(" ",e.name," ")}}function es(s,t){if(s&1){let e=y();r(0,"div",39)(1,"button",40),f("click",function(){g(e);let n=p();return u(n.previousSearchResult())}),b(2,"img",41),a(),r(3,"span",42),c(4),a(),r(5,"button",43),f("click",function(){g(e);let n=p();return u(n.nextSearchResult())}),b(6,"img",44),a()()}if(s&2){let e=p();l(),m("disabled",e.totalSearchMatches===0),l(3),We("",e.currentSearchIndex+1," / ",e.totalSearchMatches),l(),m("disabled",e.totalSearchMatches===0)}}var nn=class s{constructor(t){this.snackbar=t}currentActiveMenu="\uD648";pdfSrc=null;onDocumentClick(t){this.isMoreMenuOpen=!1}isFavorite=!1;isSettingsOpen=!1;isSearching=!1;searchResultCount=null;searchResultCurrent=null;totalSearchMatches=0;currentSearchIndex=0;searchSubject=new Sn;searchChange=new D;searchNext=new D;searchPrevious=new D;fileSelected=new D;createTextEditor=new D;createSentenceOverlay=new D;downloadModifiedPdf=new D;downloadPdf=new D;printPdf=new D;emailPdf=new D;toggleFavorite=new D;menuChanged=new D;searchButtonClicked=new D;settingsClick=new D;addTextClicked=new D;addShapeClicked=new D;searchSubmit=new D;fileInput;searchQuery="";menuItems=[{name:"\uD648",active:!0},{name:"\uD3B8\uC9D1",active:!1},{name:"\uAD6C\uC131",active:!1},{name:"\uBCF4\uC548",active:!1}];toolbarActions=[{icon:"./images/icons/pc/ico-save.svg",tooltip:"\uC800\uC7A5",action:"save"},{icon:"./images/icons/pc/ico-print.svg",tooltip:"\uC778\uC1C4",action:"print"},{icon:"./images/icons/pc/ico-mail.svg",tooltip:"\uC774\uBA54\uC77C",action:"email"}];moreMenuActions=[{icon:"./images/icons/pc/btn-gnb-download.svg",tooltip:"PDF \uB2E4\uC6B4\uB85C\uB4DC",action:"download"},{icon:"star",tooltip:"\uC990\uACA8\uCC3E\uAE30",action:"favorite"}];isMoreMenuOpen=!1;getSaveTooltip(){return this.pdfSrc?"PDF \uC800\uC7A5":"\uC800\uC7A5"}onToolbarAction(t){this.isMoreMenuOpen=!1,t==="open"?this.openFileDialog():t==="save"?this.downloadModifiedPdf.emit():t==="download"?this.downloadPdf.emit():t==="print"?this.printPdf.emit():t==="email"?this.emailPdf.emit():t==="favorite"?this.toggleFavorite.emit():t==="addText"?this.addTextClicked.emit():t==="addShape"?this.addShapeClicked.emit():t==="undo"?this.snackbar.showInfo("\uC2E4\uD589\uCDE8\uC18C \uAE30\uB2A5 \uC900\uBE44 \uC911"):t==="redo"&&this.snackbar.showInfo("\uB2E4\uC2DC\uC2E4\uD589 \uAE30\uB2A5 \uC900\uBE44 \uC911")}toggleMoreMenu(){this.isMoreMenuOpen=!this.isMoreMenuOpen}closeMoreMenu(){this.isMoreMenuOpen=!1}openFileDialog(){this.fileInput.nativeElement.click()}onFileSelected(t){let e=t.target;if(e.files&&e.files.length>0){let i=e.files[0];i.type==="application/pdf"?this.fileSelected.emit(i):this.snackbar.showError("PDF \uD30C\uC77C\uB9CC \uC120\uD0DD\uD574\uC8FC\uC138\uC694.")}}onSearchChange(t){this.searchQuery=t,this.isSearching=!0,this.searchResultCount=null,this.searchChange.emit(t)}onMenuItemClick(t){if(["\uD3B8\uC9D1","\uAD6C\uC131","\uBCF4\uC548"].includes(t.name)&&!this.pdfSrc){this.menuChanged.emit(t.name);return}this.menuItems.forEach(i=>i.active=!1),t.active=!0,this.menuChanged.emit(t.name)}onSearchEnter(){this.isSearching=!0,this.searchResultCount=null,this.searchChange.emit(this.searchQuery)}onSearchButtonClick(){this.searchButtonClicked.emit()}onSearchSubmit(){this.searchQuery.trim()&&this.searchSubmit.emit({query:this.searchQuery,caseSensitive:!1,wholeWords:!1,highlightAll:!0})}onSearchInput(t){let i=t.target.value;this.searchQuery=i,this.searchSubject.next(i)}executeSearch(t){if(!t||t.trim().length===0){this.searchResultCount=null,this.searchResultCurrent=null,this.totalSearchMatches=0,this.currentSearchIndex=0,this.searchSubmit.emit({query:"",caseSensitive:!1,wholeWords:!1,highlightAll:!1});return}this.searchSubmit.emit({query:t.trim(),caseSensitive:!1,wholeWords:!1,highlightAll:!0})}nextSearchResult(){this.totalSearchMatches!==0&&this.searchNext.emit()}previousSearchResult(){this.totalSearchMatches!==0&&this.searchPrevious.emit()}updateSearchResults(t,e){console.log("[TopMenuBar] updateSearchResults \uD638\uCD9C:",{current:t,total:e}),this.currentSearchIndex=t,this.totalSearchMatches=e,this.searchResultCount=e,this.searchResultCurrent=t+1,console.log("[TopMenuBar] \uC5C5\uB370\uC774\uD2B8 \uC644\uB8CC:",{currentSearchIndex:this.currentSearchIndex,totalSearchMatches:this.totalSearchMatches})}setSearchResultCount(t){this.searchResultCount=t}ngOnInit(){this.searchSubject.pipe(En(400),Dn()).subscribe(t=>{this.executeSearch(t)}),document.addEventListener("search-finished",()=>{this.isSearching=!1}),document.addEventListener("search-result-count",t=>{this.searchResultCount=t.detail.count,this.isSearching=!1})}ngOnDestroy(){this.searchSubject.complete()}ngOnChanges(){this.updateMenuActiveState()}updateMenuActiveState(){this.menuItems.forEach(t=>{t.active=t.name===this.currentActiveMenu})}isMenuDisabled(t){return!!(["\uD3B8\uC9D1","\uAD6C\uC131","\uBCF4\uC548"].includes(t)&&!this.pdfSrc)}isActionDisabled(t){return!this.pdfSrc}onSettingsClick(){this.settingsClick.emit()}static \u0275fac=function(e){return new(e||s)(N(Ue))};static \u0275cmp=F({type:s,selectors:[["app-ez-top-menu-bar"]],viewQuery:function(e,i){if(e&1&&re(qa,5),e&2){let n;ae(n=se())&&(i.fileInput=n.first)}},hostBindings:function(e,i){e&1&&f("click",function(o){return i.onDocumentClick(o)},Tn)},inputs:{currentActiveMenu:"currentActiveMenu",pdfSrc:"pdfSrc",isFavorite:"isFavorite",isSettingsOpen:"isSettingsOpen"},outputs:{searchChange:"searchChange",searchNext:"searchNext",searchPrevious:"searchPrevious",fileSelected:"fileSelected",createTextEditor:"createTextEditor",createSentenceOverlay:"createSentenceOverlay",downloadModifiedPdf:"downloadModifiedPdf",downloadPdf:"downloadPdf",printPdf:"printPdf",emailPdf:"emailPdf",toggleFavorite:"toggleFavorite",menuChanged:"menuChanged",searchButtonClicked:"searchButtonClicked",settingsClick:"settingsClick",addTextClicked:"addTextClicked",addShapeClicked:"addShapeClicked",searchSubmit:"searchSubmit"},standalone:!1,features:[ve],decls:28,vars:17,consts:[["fileInput",""],["searchInput",""],["class","search-progress-bar",4,"ngIf"],[1,"top-menu-bar"],["type","file","accept",".pdf",2,"display","none",3,"change"],[1,"brand"],[1,"toolbar"],["title","\uD30C\uC77C \uC5F4\uAE30",1,"toolbar-menu-label","file-menu-btn",3,"click"],["class","toolbar-btn",3,"title","disabled","click",4,"ngFor","ngForOf"],[1,"more-menu-container"],["title","\uB354\uBCF4\uAE30",1,"toolbar-btn","more-menu-btn",3,"click"],["src","./images/icons/pc/ico-more.svg","alt","\uB354\uBCF4\uAE30","width","18","height","18"],["class","more-menu-dropdown",3,"click",4,"ngIf"],[1,"toolbar-divider"],["title","\uC2E4\uD589\uCDE8\uC18C",1,"toolbar-btn",3,"click","disabled"],["src","./images/icons/pc/ico-before.svg","alt","\uC2E4\uD589\uCDE8\uC18C","width","18","height","18"],["title","\uB2E4\uC2DC\uC2E4\uD589",1,"toolbar-btn",3,"click","disabled"],["src","./images/icons/pc/ico-after.svg","alt","\uB2E4\uC2DC\uC2E4\uD589","width","18","height","18"],[1,"menu-center"],[3,"active","disabled","title","click",4,"ngFor","ngForOf"],[1,"search-box"],[1,"search-input-container"],["type","text","placeholder","\uAC80\uC0C9\uC5B4\uB97C \uC785\uB825\uD558\uC138\uC694",1,"search-input",3,"ngModelChange","input","compositionend","ngModel","disabled"],["class","search-nav",4,"ngIf"],["title","PDF \uBDF0\uC5B4 \uC124\uC815",1,"settings-btn",3,"click"],["src","./images/icons/pc/ico-tool-setting.svg","alt","\uC124\uC815","width","20","height","20"],[1,"search-progress-bar"],[1,"search-progress"],[1,"toolbar-btn",3,"click","title","disabled"],[1,"toolbar-icon",3,"src","alt"],[1,"more-menu-dropdown",3,"click"],["class","more-menu-item",3,"title","disabled","active","click",4,"ngFor","ngForOf"],[1,"more-menu-item",3,"click","title","disabled"],["alt","\uC990\uACA8\uCC3E\uAE30","width","16","height","16","class","menu-icon",3,"src",4,"ngIf"],["class","menu-icon",3,"src","alt",4,"ngIf"],[1,"menu-label"],["alt","\uC990\uACA8\uCC3E\uAE30","width","16","height","16",1,"menu-icon",3,"src"],[1,"menu-icon",3,"src","alt"],[3,"click","title"],[1,"search-nav"],["title","\uC774\uC804 \uACB0\uACFC",1,"search-nav-btn",3,"click","disabled"],["src","./images/icons/pc/ico-before.svg","alt","\uC774\uC804","width","16","height","16"],[1,"search-count"],["title","\uB2E4\uC74C \uACB0\uACFC",1,"search-nav-btn",3,"click","disabled"],["src","./images/icons/pc/ico-after.svg","alt","\uB2E4\uC74C","width","16","height","16"]],template:function(e,i){if(e&1){let n=y();M(0,Ga,2,0,"div",2),r(1,"nav",3)(2,"input",4,0),f("change",function(d){return g(n),u(i.onFileSelected(d))}),a(),r(4,"div",5)(5,"div",6)(6,"span",7),f("click",function(){return g(n),u(i.openFileDialog())}),c(7,"\uD30C\uC77C"),a(),M(8,Qa,2,6,"button",8),r(9,"div",9)(10,"button",10),f("click",function(d){return g(n),i.toggleMoreMenu(),u(d.stopPropagation())}),b(11,"img",11),a(),M(12,Za,2,1,"div",12),a(),b(13,"div",13),r(14,"button",14),f("click",function(){return g(n),u(i.onToolbarAction("undo"))}),b(15,"img",15),a(),r(16,"button",16),f("click",function(){return g(n),u(i.onToolbarAction("redo"))}),b(17,"img",17),a()()(),r(18,"div",18)(19,"ul"),M(20,Ja,2,6,"li",19),a()(),r(21,"div",20)(22,"div",21)(23,"input",22,1),k("ngModelChange",function(d){return g(n),S(i.searchQuery,d)||(i.searchQuery=d),u(d)}),f("input",function(d){return g(n),u(i.onSearchInput(d))})("compositionend",function(d){return g(n),u(i.onSearchInput(d))}),a(),M(25,es,7,4,"div",23),a()(),r(26,"button",24),f("click",function(){return g(n),u(i.onSettingsClick())}),b(27,"img",25),a()()}e&2&&(m("ngIf",i.isSearching),l(8),m("ngForOf",i.toolbarActions),l(2),T("active",i.isMoreMenuOpen),l(2),m("ngIf",i.isMoreMenuOpen),l(2),T("disabled",!i.pdfSrc),m("disabled",!i.pdfSrc),l(2),T("disabled",!i.pdfSrc),m("disabled",!i.pdfSrc),l(4),m("ngForOf",i.menuItems),l(3),O("ngModel",i.searchQuery),m("disabled",!i.pdfSrc),l(2),m("ngIf",i.searchQuery.length>0),l(),T("active",i.isSettingsOpen))},dependencies:[$,R,G,Q,Y],styles:['.search-result-count-inline[_ngcontent-%COMP%]{font-size:15px;color:#222;background:#fffbe6;border:1px solid #ffe066;border-radius:4px;padding:2px 8px;font-weight:500;margin-left:4px;display:inline-block;vertical-align:middle}.search-result-count[_ngcontent-%COMP%]{position:absolute;top:5px;right:24px;font-size:15px;color:#222;background:#fffbe6;border:1px solid #ffe066;border-radius:4px;padding:2px 10px;z-index:1001;font-weight:500}.search-progress-bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:3px;background:transparent;z-index:1000}.search-progress[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(90deg,gold,#ffe066);animation:_ngcontent-%COMP%_search-progress-ani .7s linear infinite alternate;border-radius:2px}@keyframes _ngcontent-%COMP%_search-progress-ani{0%{opacity:.5;transform:scaleX(.2)}to{opacity:1;transform:scaleX(1)}}.top-menu-bar[_ngcontent-%COMP%]{background:#fff;color:#383838;padding:0 16px;display:flex;align-items:center;justify-content:space-between;font-size:14px;position:relative;z-index:1100;height:48px;flex-shrink:0;margin:0}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:700;font-size:20px;color:#121212;margin-right:32px;letter-spacing:1px;-webkit-user-select:none;user-select:none}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 0}.toolbar-menu-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#222;margin-right:12px;padding:4px 10px 4px 0;letter-spacing:-.5px}.toolbar-menu-label.file-menu-btn[_ngcontent-%COMP%]{cursor:pointer;padding:4px 8px;border-radius:4px;transition:background-color .2s ease}.toolbar-menu-label.file-menu-btn[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.toolbar-menu-label.file-menu-btn[_ngcontent-%COMP%]:active{background-color:#e0e0e0}.toolbar-btn[_ngcontent-%COMP%]{background:none;border:none;padding:4px;border-radius:6px;cursor:pointer;transition:background .15s;display:flex;align-items:center;justify-content:center}.toolbar-btn[_ngcontent-%COMP%]:hover, .toolbar-btn[_ngcontent-%COMP%]:focus{background:#f2f2f2}.toolbar-btn.disabled[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;pointer-events:none}.toolbar-btn.disabled[_ngcontent-%COMP%]   .toolbar-icon[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]:disabled   .toolbar-icon[_ngcontent-%COMP%]{opacity:.5}.menu-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}.menu-center[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;gap:4px;list-style:none;margin:0;padding:0}.menu-center[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer;transition:color .2s;color:#393939;font-size:14px;font-weight:500;padding:0 6px;height:40px;display:flex;align-items:center;border-radius:4px 4px 0 0}.menu-center[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:0;right:0;bottom:2px;height:2px;background:#e0e0e0;border-radius:1px}.menu-center[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover:after{background:#ff6200}.menu-center[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{background:#ff6200}.menu-center[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{color:#ff6200;font-weight:600}.menu-center[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]{color:#ccc;cursor:not-allowed;pointer-events:none}.menu-center[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]:after{display:none}.menu-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-left:auto;position:relative}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:auto}.search-box[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;border:1px solid #ddd;border-radius:6px;background:#fff;transition:border-color .2s;min-width:300px}.search-box[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]:focus-within{border-color:#4285f4;box-shadow:0 0 0 3px #4285f41a}.search-box[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:none;border-radius:6px;font-size:14px;outline:none;background:transparent;min-width:180px}.search-box[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.search-box[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#999}.search-box[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2px;padding-right:6px;flex-shrink:0}.search-box[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-nav[_ngcontent-%COMP%]   .search-count[_ngcontent-%COMP%]{font-size:12px;color:#666;white-space:nowrap;padding:0 6px;font-weight:500;min-width:50px;text-align:center}.search-box[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-nav[_ngcontent-%COMP%]   .search-nav-btn[_ngcontent-%COMP%]{width:26px;height:26px;background:none;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:background .2s;color:#666;padding:0}.search-box[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-nav[_ngcontent-%COMP%]   .search-nav-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0000000d;color:#333}.search-box[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-nav[_ngcontent-%COMP%]   .search-nav-btn[_ngcontent-%COMP%]:active:not(:disabled){background:#0000001a}.search-box[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-nav[_ngcontent-%COMP%]   .search-nav-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.search-box[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   .search-nav[_ngcontent-%COMP%]   .search-nav-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.search-box[_ngcontent-%COMP%]   .search-result-count[_ngcontent-%COMP%]{font-size:13px;color:#4285f4;font-weight:500;white-space:nowrap;padding:4px 8px;background-color:#e8f0fe;border-radius:4px}.search-box[_ngcontent-%COMP%]   .search-result-count.no-result[_ngcontent-%COMP%]{color:#d93025;background-color:#fce8e6}.search-icon[_ngcontent-%COMP%]{position:absolute;right:14px;top:50%;transform:translateY(-50%);pointer-events:none;display:flex;align-items:center}.toolbar-icon[_ngcontent-%COMP%]{width:15px;height:15px;object-fit:contain;display:block}.settings-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;margin-left:8px;cursor:pointer;border-radius:6px;transition:all .2s;display:flex;align-items:center;justify-content:center;color:#666;flex-shrink:0}.settings-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:transform .3s ease}.settings-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.settings-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:rotate(90deg)}.settings-btn.active[_ngcontent-%COMP%]{background:#007acc;color:#fff}.settings-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate 2s linear infinite}.settings-btn.active[_ngcontent-%COMP%]:hover{background:#005a9e}.toolbar-divider[_ngcontent-%COMP%]{width:1px;height:20px;background:#e0e0e0;margin:0 4px}.more-menu-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.more-menu-container[_ngcontent-%COMP%]   .more-menu-btn.active[_ngcontent-%COMP%]{background:#f0f0f0}.more-menu-container[_ngcontent-%COMP%]   .more-menu-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;margin-top:4px;background:#fff;border-radius:8px;box-shadow:0 4px 16px #00000026;border:1px solid #e0e0e0;min-width:160px;z-index:1200;overflow:hidden;animation:_ngcontent-%COMP%_dropdownFadeIn .15s ease}.more-menu-container[_ngcontent-%COMP%]   .more-menu-dropdown[_ngcontent-%COMP%]   .more-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:10px 14px;background:none;border:none;cursor:pointer;font-size:13px;color:#333;text-align:left;transition:background .15s}.more-menu-container[_ngcontent-%COMP%]   .more-menu-dropdown[_ngcontent-%COMP%]   .more-menu-item[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5}.more-menu-container[_ngcontent-%COMP%]   .more-menu-dropdown[_ngcontent-%COMP%]   .more-menu-item.active[_ngcontent-%COMP%], .more-menu-container[_ngcontent-%COMP%]   .more-menu-dropdown[_ngcontent-%COMP%]   .more-menu-item.active[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{color:#ff6200}.more-menu-container[_ngcontent-%COMP%]   .more-menu-dropdown[_ngcontent-%COMP%]   .more-menu-item.disabled[_ngcontent-%COMP%], .more-menu-container[_ngcontent-%COMP%]   .more-menu-dropdown[_ngcontent-%COMP%]   .more-menu-item[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.more-menu-container[_ngcontent-%COMP%]   .more-menu-dropdown[_ngcontent-%COMP%]   .more-menu-item[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{width:16px;height:16px;flex-shrink:0}.more-menu-container[_ngcontent-%COMP%]   .more-menu-dropdown[_ngcontent-%COMP%]   .more-menu-item[_ngcontent-%COMP%]   .menu-label[_ngcontent-%COMP%]{flex:1}@keyframes _ngcontent-%COMP%_dropdownFadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']})};function ns(s,t){s&1&&(te(0),b(1,"img",9),ne())}function is(s,t){s&1&&(te(0),b(1,"img",10),ne())}function os(s,t){s&1&&(te(0),b(1,"img",11),ne())}function rs(s,t){s&1&&(te(0),b(1,"img",12),ne())}function as(s,t){s&1&&(te(0),b(1,"img",13),ne())}function ss(s,t){s&1&&(te(0),b(1,"img",14),ne())}function ls(s,t){s&1&&(te(0),b(1,"img",15),ne())}function cs(s,t){if(s&1){let e=y();r(0,"button",8),f("click",function(){let n=g(e).$implicit,o=p(2);return u(o.onToolbarAction(n.action))}),M(1,ns,2,0,"ng-container",4)(2,is,2,0,"ng-container",4)(3,os,2,0,"ng-container",4)(4,rs,2,0,"ng-container",4)(5,as,2,0,"ng-container",4)(6,ss,2,0,"ng-container",4)(7,ls,2,0,"ng-container",4),a()}if(s&2){let e=t.$implicit,i=p(2);T("disabled",!i.pdfSrc)("active",e.action==="highlight"&&i.isHighlightActive||e.action==="pen-drawing"&&i.isPenActive||e.action==="add-text"&&i.isTextActive),m("title",e.tooltip)("disabled",!i.pdfSrc),l(),m("ngIf",e.action==="zoom-in"),l(),m("ngIf",e.action==="zoom-out"),l(),m("ngIf",e.action==="highlight"),l(),m("ngIf",e.action==="pen-drawing"),l(),m("ngIf",e.action==="add-favorite"),l(),m("ngIf",e.action==="add-text"),l(),m("ngIf",e.action==="add-shape")}}function ds(s,t){if(s&1&&(te(0),r(1,"div",6),M(2,cs,8,13,"button",7),a(),ne()),s&2){let e=p();l(2),m("ngForOf",e.getActionsByMenu("\uD648"))}}function ps(s,t){s&1&&(te(0),b(1,"img",14),ne())}function gs(s,t){s&1&&(te(0),b(1,"img",17),ne())}function us(s,t){s&1&&(te(0),b(1,"img",18),ne())}function ms(s,t){s&1&&(te(0),b(1,"img",19),ne())}function fs(s,t){s&1&&(te(0),b(1,"img",20),ne())}function hs(s,t){if(s&1){let e=y();r(0,"button",8),f("click",function(){let n=g(e).$implicit,o=p(2);return u(o.onToolbarAction(n.action))}),M(1,ps,2,0,"ng-container",4)(2,gs,2,0,"ng-container",4)(3,us,2,0,"ng-container",4)(4,ms,2,0,"ng-container",4)(5,fs,2,0,"ng-container",4),a()}if(s&2){let e=t.$implicit,i=p(2);T("disabled",!i.pdfSrc),m("title",e.tooltip)("disabled",!i.pdfSrc),l(),m("ngIf",e.action==="add-text"),l(),m("ngIf",e.action==="add-image"),l(),m("ngIf",e.action==="watermark"),l(),m("ngIf",e.action==="page-number"),l(),m("ngIf",e.action==="signature")}}function _s(s,t){if(s&1&&(te(0),r(1,"div",6),M(2,hs,6,9,"button",16),a(),ne()),s&2){let e=p();l(2),m("ngForOf",e.getActionsByMenu("\uD3B8\uC9D1"))}}function Cs(s,t){s&1&&(te(0),b(1,"img",21),ne())}function bs(s,t){s&1&&(te(0),b(1,"img",22),ne())}function xs(s,t){s&1&&(te(0),b(1,"img",23),ne())}function Ps(s,t){s&1&&(te(0),b(1,"img",24),ne())}function vs(s,t){s&1&&(te(0),b(1,"img",25),ne())}function ws(s,t){s&1&&(te(0),b(1,"img",26),ne())}function Ms(s,t){if(s&1){let e=y();r(0,"button",8),f("click",function(){let n=g(e).$implicit,o=p(2);return u(o.onToolbarAction(n.action))}),M(1,Cs,2,0,"ng-container",4)(2,bs,2,0,"ng-container",4)(3,xs,2,0,"ng-container",4)(4,Ps,2,0,"ng-container",4)(5,vs,2,0,"ng-container",4)(6,ws,2,0,"ng-container",4),a()}if(s&2){let e=t.$implicit,i=p(2);T("disabled",!i.pdfSrc)("active",e.action==="highlight"&&i.isHighlightActive),m("title",e.tooltip)("disabled",!i.pdfSrc),l(),m("ngIf",e.action==="rotate-left"),l(),m("ngIf",e.action==="rotate-right"),l(),m("ngIf",e.action==="delete-page"),l(),m("ngIf",e.action==="upload"),l(),m("ngIf",e.action==="download"),l(),m("ngIf",e.action==="merge-pdf")}}function ys(s,t){if(s&1&&(te(0),r(1,"div",6),M(2,Ms,7,12,"button",7),a(),ne()),s&2){let e=p();l(2),m("ngForOf",e.getActionsByMenu("\uAD6C\uC131"))}}function Os(s,t){s&1&&(te(0),b(1,"img",27),ne())}function Ss(s,t){s&1&&(te(0),b(1,"img",28),ne())}function ks(s,t){s&1&&(te(0),b(1,"img",29),ne())}function Es(s,t){if(s&1){let e=y();r(0,"button",8),f("click",function(){let n=g(e).$implicit,o=p(2);return u(o.onToolbarAction(n.action))}),M(1,Os,2,0,"ng-container",4)(2,Ss,2,0,"ng-container",4)(3,ks,2,0,"ng-container",4),a()}if(s&2){let e=t.$implicit,i=p(2);T("disabled",!i.pdfSrc),m("title",e.tooltip)("disabled",!i.pdfSrc),l(),m("ngIf",e.action==="encryption"),l(),m("ngIf",e.action==="digital-id-add"),l(),m("ngIf",e.action==="digital-id-manager")}}function Ds(s,t){if(s&1&&(te(0),r(1,"div",6),M(2,Es,4,7,"button",16),a(),ne()),s&2){let e=p();l(2),m("ngForOf",e.getActionsByMenu("\uBCF4\uC548"))}}var on=class s{constructor(t,e){this.authService=t;this.router=e}activeMenu="\uD648";pdfSrc=null;isRightPanelOpen=!1;isLeftPanelOpen=!1;isVerticalMenuOpen=!1;isHighlightActive=!1;isPenActive=!1;isTextActive=!1;showImageCoordinates=!1;isFavorite=!1;isSettingsOpen=!1;headerAction=new D;showSnackbar=new D;rightPanelToggle=new D;leftPanelToggle=new D;verticalMenuToggle=new D;imageCoordinatesToggle=new D;searchButtonClicked=new D;toolbarActions=[];menuToolbarActions={\uD648:[{tooltip:"\uD655\uB300",action:"zoom-in"},{tooltip:"\uCD95\uC18C",action:"zoom-out"},{tooltip:"\uD558\uC774\uB77C\uC774\uD2B8",action:"highlight"},{tooltip:"\uD39C \uADF8\uB9AC\uAE30",action:"pen-drawing"},{tooltip:"\uB3C4\uD615 \uCD94\uAC00",action:"add-shape"}],\uD3B8\uC9D1:[{tooltip:"\uD14D\uC2A4\uD2B8 \uCD94\uAC00",action:"add-text"},{tooltip:"\uC774\uBBF8\uC9C0 \uCD94\uAC00",action:"add-image"},{tooltip:"\uC6CC\uD130\uB9C8\uD06C",action:"watermark"},{tooltip:"\uD398\uC774\uC9C0\uBC88\uD638",action:"page-number"},{tooltip:"\uC11C\uBA85",action:"signature"}],\uAD6C\uC131:[{tooltip:"\uC67C\uCABD \uD68C\uC804",action:"rotate-left"},{tooltip:"\uC624\uB978\uCABD \uD68C\uC804",action:"rotate-right"},{tooltip:"\uC0AD\uC81C",action:"delete-page"},{tooltip:"\uC5C5\uB85C\uB4DC",action:"upload"},{tooltip:"\uB2E4\uC6B4\uB85C\uB4DC",action:"download"},{tooltip:"\uBCD1\uD569",action:"merge-pdf"}],\uBCF4\uC548:[{tooltip:"\uC554\uD638\uD654",action:"encryption"},{tooltip:"\uB514\uC9C0\uD138 ID \uCD94\uAC00",action:"digital-id-add"},{tooltip:"\uB514\uC9C0\uD138 ID \uAD00\uB9AC",action:"digital-id-manager"}]};ngOnChanges(t){t.activeMenu&&this.updateToolbarActions()}ngOnInit(){this.updateToolbarActions()}updateToolbarActions(){this.toolbarActions=this.menuToolbarActions[this.activeMenu]||this.menuToolbarActions.\uD648}getActionsByMenu(t){return this.menuToolbarActions[t]||[]}onToolbarAction(t){if(t==="pen-drawing"){this.headerAction.emit(t);return}let e="";for(let i in this.menuToolbarActions){let o=this.menuToolbarActions[i].find(d=>d.action===t);if(o){e=o.tooltip;break}}if(e&&this.showSnackbar.emit(`${e} \uBA54\uB274\uAC00 \uD074\uB9AD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),(t==="zoom-in"||t==="zoom-out")&&this.headerAction.emit(t),t==="highlight"&&this.headerAction.emit(t),t==="add-favorite"){this.headerAction.emit(t);return}if(t==="add-text"&&this.headerAction.emit(t),t==="add-shape"&&this.headerAction.emit(t),t==="add-image"&&this.headerAction.emit(t),t==="watermark"&&this.headerAction.emit(t),t==="page-number"&&this.headerAction.emit(t),t==="signature"&&this.headerAction.emit(t),t==="convert-ppt"||t==="convert-doc"||t==="convert-xls"||t==="convert-jpg"){this.headerAction.emit(t);return}if(t==="pdf-analysis"){this.headerAction.emit(t);return}if(t==="toggle-analysis-panel"){this.headerAction.emit(t);return}if(t==="rotate-left"||t==="rotate-right"){this.headerAction.emit(t);return}if(t==="delete-page"){this.headerAction.emit(t);return}if(t==="upload"){this.headerAction.emit(t);return}if(t==="download"){this.headerAction.emit(t);return}if(t==="merge-pdf"){this.headerAction.emit(t);return}if(t==="encryption"||t==="digital-id-add"||t==="digital-id-manager"){this.headerAction.emit(t);return}}onLeftPanelToggle(){this.leftPanelToggle.emit()}toggleRightPanel(){this.rightPanelToggle.emit()}toggleVerticalMenu(){this.verticalMenuToggle.emit()}toggleImageCoordinates(){this.imageCoordinatesToggle.emit()}onSearchButtonClick(){this.searchButtonClicked.emit()}onLogout(){return P(this,null,function*(){(yield it("\uB85C\uADF8\uC544\uC6C3 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))&&this.authService.logout()})}onSettingsClick(){this.headerAction.emit("pdf-settings")}onSettingsClose(){this.headerAction.emit("pdf-settings")}static \u0275fac=function(e){return new(e||s)(N(Ve),N(Ie))};static \u0275cmp=F({type:s,selectors:[["app-ez-header"]],inputs:{activeMenu:"activeMenu",pdfSrc:"pdfSrc",isRightPanelOpen:"isRightPanelOpen",isLeftPanelOpen:"isLeftPanelOpen",isVerticalMenuOpen:"isVerticalMenuOpen",isHighlightActive:"isHighlightActive",isPenActive:"isPenActive",isTextActive:"isTextActive",showImageCoordinates:"showImageCoordinates",isFavorite:"isFavorite",isSettingsOpen:"isSettingsOpen"},outputs:{headerAction:"headerAction",showSnackbar:"showSnackbar",rightPanelToggle:"rightPanelToggle",leftPanelToggle:"leftPanelToggle",verticalMenuToggle:"verticalMenuToggle",imageCoordinatesToggle:"imageCoordinatesToggle",searchButtonClicked:"searchButtonClicked"},standalone:!1,features:[ve],decls:9,vars:4,consts:[[1,"header"],[1,"header-left"],[1,"header-center"],[1,"nav-controls"],[4,"ngIf"],[1,"header-right"],[1,"toolbar-group"],["class","toolbar-btn",3,"title","disabled","active","click",4,"ngFor","ngForOf"],[1,"toolbar-btn",3,"click","title","disabled"],["src","./images/icons/pc/btn-gnb-zoom2.svg","alt","\uD655\uB300","width","18","height","18"],["src","./images/icons/pc/btn-gnb-zoom.svg","alt","\uCD95\uC18C","width","18","height","18"],["src","./images/icons/pc/btn-gnb-highlight.svg","alt","\uD558\uC774\uB77C\uC774\uD2B8","width","18","height","18"],["src","./images/icons/pc/btn-gnb-edit.svg","alt","\uD3B8 \uADF8\uB9AC\uAE30","width","18","height","18"],["src","./images/icons/pc/ico-bookmark.svg","alt","\uC990\uACA8\uCC3E\uAE30","width","18","height","18"],["src","./images/icons/pc/btn-gnb-insert-txt.svg","alt","\uD14D\uC2A4\uD2B8 \uCD94\uAC00","width","18","height","18"],["src","./images/icons/pc/btn-gnb-shapes.svg","alt","\uB3C4\uD615","width","18","height","18"],["class","toolbar-btn",3,"title","disabled","click",4,"ngFor","ngForOf"],["src","./images/icons/pc/btn-gnb-image.svg","alt","\uC774\uBBF8\uC9C0","width","18","height","18"],["src","./images/icons/pc/btn-gnb-watermark.svg","alt","\uC6CC\uD130\uB9C8\uD06C","width","18","height","18"],["src","./images/icons/pc/btn-gnb-pagenumber.svg","alt","\uD398\uC774\uC9C0\uBC88\uD638","width","18","height","18"],["src","./images/icons/pc/btn-gnb-sign.svg","alt","\uC11C\uBA85","width","18","height","18"],["src","./images/icons/pc/btn-gnb-rotation-left.svg","alt","\uC67C\uCABD \uD68C\uC804","width","18","height","18"],["src","./images/icons/pc/btn-gnb-rotation-right.svg","alt","\uC624\uB978\uCABD \uD68C\uC804","width","18","height","18"],["src","./images/icons/pc/btn-gnb-delete.svg","alt","\uC0AD\uC81C","width","18","height","18"],["src","./images/icons/pc/btn-gnb-upload.svg","alt","\uC5C5\uB85C\uB4DC","width","18","height","18"],["src","./images/icons/pc/btn-gnb-download.svg","alt","\uB2E4\uC6B4\uB85C\uB4DC","width","18","height","18"],["src","./images/icons/pc/btn-gnb-merge.svg","alt","\uBCD1\uD569","width","18","height","18"],["src","./images/icons/pc/btn-gnb-password.svg","alt","\uC554\uD638\uD654","width","18","height","18"],["src","./images/icons/pc/btn-gnb-password.svg","alt","\uB514\uC9C0\uD138 ID \uCD94\uAC00","width","18","height","18"],["src","./images/icons/pc/btn-gnb-setting.svg","alt","\uB514\uC9C0\uD138 ID \uAD00\uB9AC","width","18","height","18"]],template:function(e,i){e&1&&(r(0,"div",0),b(1,"div",1),r(2,"div",2)(3,"div",3),M(4,ds,3,1,"ng-container",4)(5,_s,3,1,"ng-container",4)(6,ys,3,1,"ng-container",4)(7,Ds,3,1,"ng-container",4),a()(),b(8,"div",5),a()),e&2&&(l(4),m("ngIf",i.activeMenu==="\uD648"),l(),m("ngIf",i.activeMenu==="\uD3B8\uC9D1"),l(),m("ngIf",i.activeMenu==="\uAD6C\uC131"),l(),m("ngIf",i.activeMenu==="\uBCF4\uC548"))},dependencies:[$,R],styles:[".header[_ngcontent-%COMP%]{background:var(--bg-primary);border-bottom:1px solid #e0e0e0;padding:8px 16px 8px 4px;display:flex;align-items:center;gap:16px;box-shadow:0 1px 3px #0000001a;height:44px;flex-shrink:0;margin:0}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;min-width:auto}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0;margin-left:auto}.panel-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;border-radius:6px;transition:all .2s;display:flex;align-items:center;justify-content:center;color:#666;flex-shrink:0}.panel-toggle-btn.active[_ngcontent-%COMP%]{background:#007acc;color:#fff}.panel-toggle-btn.active[_ngcontent-%COMP%]:hover{background:#005a9e}.panel-toggle-btn.disabled[_ngcontent-%COMP%], .panel-toggle-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.panel-toggle-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.left-panel-toggle[_ngcontent-%COMP%]{margin-left:0}.header-center[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;gap:16px;position:relative}.nav-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.toolbar-btn[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;border-radius:4px;font-size:16px;color:#333;transition:background .2s}.toolbar-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.toolbar-btn.active[_ngcontent-%COMP%]{background:#e0e0e0}.toolbar-btn.disabled[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;pointer-events:none}.toolbar-btn.disabled[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]:disabled   img[_ngcontent-%COMP%]{opacity:.5}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0;justify-content:flex-end;margin-left:auto}.panel-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;border-radius:4px;color:#666;transition:all .2s;display:flex;align-items:center;justify-content:center;margin-left:auto}.panel-toggle-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.panel-toggle-btn.active[_ngcontent-%COMP%]{background:#e3f2fd;color:#2196f3}.panel-toggle-btn.active[_ngcontent-%COMP%]:hover{background:#bbdefb}.panel-toggle-btn.disabled[_ngcontent-%COMP%], .panel-toggle-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;pointer-events:none}.right-panel-toggle[_ngcontent-%COMP%]{position:absolute;right:0;display:flex;align-items:center;gap:4px;padding:6px 12px;background:none;color:#666;border:none;border-radius:6px 0 0 6px;cursor:pointer;font-size:13px;font-weight:500;transition:all .2s ease}.right-panel-toggle[_ngcontent-%COMP%]:hover{background:#0000000d;color:#333}.right-panel-toggle.active[_ngcontent-%COMP%]{color:#48bb78}.right-panel-toggle.active[_ngcontent-%COMP%]:hover{background:#48bb781a}.right-panel-toggle[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{font-size:18px;font-weight:700;line-height:1}.right-panel-toggle[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.5px}.debug-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;margin-right:4px;cursor:pointer;border-radius:6px;transition:all .2s;display:flex;align-items:center;justify-content:center;color:#666;flex-shrink:0;font-size:18px}.debug-toggle-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{line-height:1}.debug-toggle-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.debug-toggle-btn.active[_ngcontent-%COMP%]{background:#1976d2}.debug-toggle-btn.active[_ngcontent-%COMP%]:hover{background:#1565c0}.debug-toggle-btn.disabled[_ngcontent-%COMP%], .debug-toggle-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.debug-toggle-btn.disabled[_ngcontent-%COMP%]:hover, .debug-toggle-btn[_ngcontent-%COMP%]:disabled:hover{background:none}.settings-btn[_ngcontent-%COMP%]{background:none;border:none;padding:8px;margin-left:4px;cursor:pointer;border-radius:6px;transition:all .2s;display:flex;align-items:center;justify-content:center;color:#666;flex-shrink:0}.settings-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:transform .3s ease}.settings-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.settings-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:rotate(90deg)}.settings-btn.active[_ngcontent-%COMP%]{background:#007acc;color:#fff}.settings-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate 2s linear infinite}.settings-btn.active[_ngcontent-%COMP%]:hover{background:#005a9e}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};function Bs(s,t){if(s&1){let e=y();r(0,"div",7),f("click",function(){let n=g(e).$implicit,o=p();return u(o.onOptionSelect(n.id))}),r(1,"div",8),c(2),a(),r(3,"div",9)(4,"h4"),c(5),a(),r(6,"p"),c(7),a(),r(8,"span",10),c(9),a()()()}if(s&2){let e=t.$implicit,i=p();T("selected",i.selectedOption===e.id),l(2),B(e.icon),l(3),B(e.title),l(2),B(e.description),l(2),I(".",e.extension)}}function zs(s,t){if(s&1){let e=y();r(0,"div",16)(1,"label"),c(2),a(),r(3,"input",31),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.conversionSettings.quality,n)||(o.conversionSettings.quality=n),u(n)}),a(),r(4,"div",32)(5,"span"),c(6,"\uB0AE\uC74C"),a(),r(7,"span"),c(8,"\uB192\uC74C"),a()()()}if(s&2){let e=p(2);l(2),I("\uD488\uC9C8 (",e.conversionSettings.quality,"%)"),l(),O("ngModel",e.conversionSettings.quality)}}function Fs(s,t){if(s&1){let e=y();r(0,"div",33)(1,"input",34),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.conversionSettings.startPage,n)||(o.conversionSettings.startPage=n),u(n)}),a(),r(2,"span"),c(3,"~"),a(),r(4,"input",34),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.conversionSettings.endPage,n)||(o.conversionSettings.endPage=n),u(n)}),a()()}if(s&2){let e=p(2);l(),O("ngModel",e.conversionSettings.startPage),l(3),O("ngModel",e.conversionSettings.endPage)}}function As(s,t){if(s&1){let e=y();r(0,"div",16)(1,"label"),c(2,"\uD574\uC0C1\uB3C4 (DPI)"),a(),r(3,"select",35),k("ngModelChange",function(n){g(e);let o=p(2);return S(o.conversionSettings.resolution,n)||(o.conversionSettings.resolution=n),u(n)}),r(4,"option",36),c(5,"72 DPI (\uC6F9\uC6A9)"),a(),r(6,"option",37),c(7,"150 DPI (\uC77C\uBC18)"),a(),r(8,"option",38),c(9,"300 DPI (\uACE0\uD654\uC9C8)"),a(),r(10,"option",39),c(11,"600 DPI (\uCD5C\uACE0\uD654\uC9C8)"),a()()()}if(s&2){let e=p(2);l(3),O("ngModel",e.conversionSettings.resolution)}}function Is(s,t){if(s&1){let e=y();r(0,"div",11),f("click",function(){g(e);let n=p();return u(n.onCloseModal())}),r(1,"div",12),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",13)(3,"h3"),c(4,"\uBCC0\uD658 \uC124\uC815"),a(),r(5,"button",14),f("click",function(){g(e);let n=p();return u(n.onCloseModal())}),c(6,"\u2715"),a()(),r(7,"div",15)(8,"div",16)(9,"label"),c(10,"\uD30C\uC77C\uBA85"),a(),r(11,"input",17),k("ngModelChange",function(n){g(e);let o=p();return S(o.conversionSettings.fileName,n)||(o.conversionSettings.fileName=n),u(n)}),a()(),r(12,"div",16)(13,"label"),c(14,"\uC800\uC7A5 \uC704\uCE58"),a(),r(15,"div",18)(16,"input",19),k("ngModelChange",function(n){g(e);let o=p();return S(o.conversionSettings.savePath,n)||(o.conversionSettings.savePath=n),u(n)}),a(),r(17,"button",20),f("click",function(){g(e);let n=p();return u(n.onBrowsePath())}),c(18,"\uCC3E\uC544\uBCF4\uAE30"),a()()(),M(19,zs,9,2,"div",21),r(20,"div",16)(21,"label"),c(22,"\uD398\uC774\uC9C0 \uBC94\uC704"),a(),r(23,"div",22)(24,"label",23)(25,"input",24),k("ngModelChange",function(n){g(e);let o=p();return S(o.conversionSettings.pageRange,n)||(o.conversionSettings.pageRange=n),u(n)}),a(),r(26,"span"),c(27,"\uBAA8\uB4E0 \uD398\uC774\uC9C0"),a()(),r(28,"label",23)(29,"input",25),k("ngModelChange",function(n){g(e);let o=p();return S(o.conversionSettings.pageRange,n)||(o.conversionSettings.pageRange=n),u(n)}),a(),r(30,"span"),c(31,"\uD604\uC7AC \uD398\uC774\uC9C0"),a()(),r(32,"label",23)(33,"input",26),k("ngModelChange",function(n){g(e);let o=p();return S(o.conversionSettings.pageRange,n)||(o.conversionSettings.pageRange=n),u(n)}),a(),r(34,"span"),c(35,"\uD398\uC774\uC9C0 \uBC94\uC704"),a()()(),M(36,Fs,5,2,"div",27),a(),M(37,As,12,1,"div",21),a(),r(38,"div",28)(39,"button",29),f("click",function(){g(e);let n=p();return u(n.onCloseModal())}),c(40,"\uCDE8\uC18C"),a(),r(41,"button",30),f("click",function(){g(e);let n=p();return u(n.onConfirmConversion())}),c(42,"\uBCC0\uD658 \uC2DC\uC791"),a()()()()}if(s&2){let e=p();l(11),O("ngModel",e.conversionSettings.fileName),l(5),O("ngModel",e.conversionSettings.savePath),l(3),m("ngIf",e.selectedOption==="jpg"),l(6),O("ngModel",e.conversionSettings.pageRange),l(4),O("ngModel",e.conversionSettings.pageRange),l(4),O("ngModel",e.conversionSettings.pageRange),l(3),m("ngIf",e.conversionSettings.pageRange==="range"),l(),m("ngIf",e.selectedOption==="jpg")}}var wt=class s{constructor(t){this.notification=t}conversionOptions=[{id:"ppt",title:"PowerPoint",description:"PDF\uB97C PPT \uD504\uB808\uC820\uD14C\uC774\uC158\uC73C\uB85C \uBCC0\uD658",icon:"\u{1F4CA}",extension:"pptx"},{id:"doc",title:"Word \uBB38\uC11C",description:"PDF\uB97C Word \uBB38\uC11C\uB85C \uBCC0\uD658",icon:"\u{1F4C4}",extension:"docx"},{id:"xls",title:"Excel \uC2A4\uD504\uB808\uB4DC\uC2DC\uD2B8",description:"PDF\uB97C Excel \uD30C\uC77C\uB85C \uBCC0\uD658",icon:"\u{1F4C8}",extension:"xlsx"},{id:"jpg",title:"\uC774\uBBF8\uC9C0",description:"PDF\uB97C JPG \uC774\uBBF8\uC9C0\uB85C \uBCC0\uD658",icon:"\u{1F5BC}\uFE0F",extension:"jpg"}];selectedOption=null;showModal=!1;conversionSettings={fileName:"250612_\uBBF8\uB2C8\uC560\uB2F5_\uCD5C\uC885",savePath:"C:\\Users\\Desktop\\\uC5F0\uAD6C\\PDF\\",quality:70,pageRange:"all",startPage:1,endPage:1,imageFormat:"jpg",resolution:150};onOptionSelect(t){this.selectedOption=t;let e=this.conversionOptions.find(i=>i.id===t);e&&(this.conversionSettings.fileName=`\uBCC0\uD658\uB41C_\uD30C\uC77C.${e.extension}`,this.showModal=!0)}onCloseModal(){this.showModal=!1}onConfirmConversion(){let t=this.conversionOptions.find(e=>e.id===this.selectedOption);t&&(this.notification.showLong(`${t.title}\uB85C \uBCC0\uD658\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4.`),this.showModal=!1)}onBrowsePath(){this.notification.show("\uD30C\uC77C \uD0D0\uC0C9\uAE30\uAC00 \uC5F4\uB9BD\uB2C8\uB2E4.")}static \u0275fac=function(e){return new(e||s)(N(Ge))};static \u0275cmp=F({type:s,selectors:[["app-file-conversion"]],standalone:!1,decls:10,vars:2,consts:[[1,"file-conversion-panel"],[1,"panel-content"],[1,"conversion-options"],[1,"description"],[1,"options-grid"],["class","option-card",3,"selected","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"option-card",3,"click"],[1,"option-icon"],[1,"option-content"],[1,"extension"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"setting-group"],["type","text",1,"setting-input",3,"ngModelChange","ngModel"],[1,"path-input-group"],["type","text","readonly","",1,"setting-input","path-input",3,"ngModelChange","ngModel"],[1,"browse-btn",3,"click"],["class","setting-group",4,"ngIf"],[1,"radio-group"],[1,"radio-option"],["type","radio","name","pageRange","value","all",3,"ngModelChange","ngModel"],["type","radio","name","pageRange","value","current",3,"ngModelChange","ngModel"],["type","radio","name","pageRange","value","range",3,"ngModelChange","ngModel"],["class","page-range-inputs",4,"ngIf"],[1,"modal-footer"],[1,"cancel-modal-btn",3,"click"],[1,"confirm-btn",3,"click"],["type","range","min","10","max","100",1,"quality-slider",3,"ngModelChange","ngModel"],[1,"quality-labels"],[1,"page-range-inputs"],["type","number","min","1",1,"page-input",3,"ngModelChange","ngModel"],[1,"setting-select",3,"ngModelChange","ngModel"],["value","72"],["value","150"],["value","300"],["value","600"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),c(4,"\uD30C\uC77C \uBCC0\uD658"),a(),r(5,"p",3),c(6,"PDF \uD30C\uC77C\uC744 \uB2E4\uC591\uD55C \uD615\uC2DD\uC73C\uB85C \uBCC0\uD658\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),a(),r(7,"div",4),M(8,Bs,10,6,"div",5),a()()(),M(9,Is,43,8,"div",6),a()),e&2&&(l(8),m("ngForOf",i.conversionOptions),l(),m("ngIf",i.showModal))},dependencies:[$,R,me,fe,G,ze,je,ue,Oe,Q,Ae,Y],styles:[".file-conversion-panel[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 120px);background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;display:flex;flex-direction:column;overflow:hidden}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{flex:1;padding:24px;overflow-y:auto}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333;margin-bottom:8px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#666;margin-bottom:32px;font-size:14px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px;margin-bottom:32px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]{border:2px solid #e5e5e5;border-radius:8px;padding:20px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:16px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]:hover{border-color:#ccc;box-shadow:0 2px 8px #0000001a}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card.selected[_ngcontent-%COMP%]{border-color:#f44;background-color:#fff5f5;box-shadow:0 2px 12px #f443}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{font-size:32px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:#f8f9fa;border-radius:8px;flex-shrink:0}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]{flex:1}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin-bottom:4px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;margin-bottom:8px;line-height:1.4}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   .extension[_ngcontent-%COMP%]{display:inline-block;background:#e9ecef;color:#495057;padding:2px 8px;border-radius:4px;font-size:12px;font-weight:500}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;padding-top:24px;border-top:1px solid #e5e5e5}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;border:none;transition:all .2s ease}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]   button.convert-btn[_ngcontent-%COMP%]{background:#f44;color:#fff}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]   button.convert-btn[_ngcontent-%COMP%]:hover{background:#e03e3e}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]   button.cancel-btn[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border:1px solid #dee2e6}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]   button.cancel-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 30px #0000004d;width:90%;max-width:500px;max-height:80vh;overflow:hidden;display:flex;flex-direction:column}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e5e5}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer;color:#666;padding:4px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#333}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{flex:1;padding:24px;overflow-y:auto}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]{margin-bottom:20px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#333;margin-bottom:8px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .setting-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .setting-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f44;box-shadow:0 0 0 2px #f443}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .path-input-group[_ngcontent-%COMP%]{display:flex;gap:8px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .path-input-group[_ngcontent-%COMP%]   .path-input[_ngcontent-%COMP%]{flex:1}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .path-input-group[_ngcontent-%COMP%]   .browse-btn[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #ddd;border-radius:6px;padding:10px 16px;font-size:14px;cursor:pointer;white-space:nowrap}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .path-input-group[_ngcontent-%COMP%]   .browse-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .quality-slider[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .quality-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;color:#666}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:14px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .page-range-inputs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .page-range-inputs[_ngcontent-%COMP%]   .page-input[_ngcontent-%COMP%]{width:80px;padding:8px;border:1px solid #ddd;border-radius:4px;text-align:center}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .page-range-inputs[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .setting-select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;background:#fff}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .setting-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#f44}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;padding:20px 24px;border-top:1px solid #e5e5e5}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;border:none}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button.cancel-modal-btn[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border:1px solid #dee2e6}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button.cancel-modal-btn[_ngcontent-%COMP%]:hover{background:#e9ecef}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button.confirm-btn[_ngcontent-%COMP%]{background:#f44;color:#fff}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button.confirm-btn[_ngcontent-%COMP%]:hover{background:#e03e3e}@media (max-width: 768px){.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:16px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]{padding:16px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .options-grid[_ngcontent-%COMP%]   .option-card[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{font-size:24px;width:40px;height:40px}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]{flex-direction:column}.file-conversion-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .conversion-options[_ngcontent-%COMP%]   .conversion-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{width:95%;margin:16px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:16px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .path-input-group[_ngcontent-%COMP%]{flex-direction:column}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .path-input-group[_ngcontent-%COMP%]   .browse-btn[_ngcontent-%COMP%]{width:100%}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-option[_ngcontent-%COMP%]{padding:8px 0}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{flex-direction:column;padding:16px}.file-conversion-panel[_ngcontent-%COMP%]   .modal-overlay[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};function Rs(s,t){if(s&1){let e=y();r(0,"div",22)(1,"label")(2,"input",23),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.options.ppt.includeThumbnails,n)||(o.options.ppt.includeThumbnails=n),u(n)}),a(),c(3," \uC378\uB124\uC77C \uD3EC\uD568 "),a(),r(4,"div",24)(5,"label"),c(6,"\uAE00\uAF34 \uD06C\uAE30:"),a(),r(7,"input",25),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.options.ppt.fontSize,n)||(o.options.ppt.fontSize=n),u(n)}),a()()()}if(s&2){let e=p(3);l(2),O("ngModel",e.options.ppt.includeThumbnails),l(5),O("ngModel",e.options.ppt.fontSize)}}function Ls(s,t){if(s&1){let e=y();r(0,"div",24)(1,"label"),c(2,"\uD488\uC9C8:"),a(),r(3,"input",31),k("ngModelChange",function(n){g(e);let o=p(4);return S(o.options.image.quality,n)||(o.options.image.quality=n),u(n)}),a(),r(4,"span"),c(5),Ze(6,"number"),a()()}if(s&2){let e=p(4);l(3),O("ngModel",e.options.image.quality),l(2),I("",Je(6,2,e.options.image.quality*100,"1.0-0"),"%")}}function Ws(s,t){if(s&1){let e=y();r(0,"div",22)(1,"div",24)(2,"label"),c(3,"\uC774\uBBF8\uC9C0 \uD615\uC2DD:"),a(),r(4,"select",26),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.options.image.format,n)||(o.options.image.format=n),u(n)}),r(5,"option",27),c(6,"PNG"),a(),r(7,"option",28),c(8,"JPEG"),a()()(),r(9,"div",24)(10,"label"),c(11,"\uD574\uC0C1\uB3C4 (\uBC30\uC728):"),a(),r(12,"input",29),k("ngModelChange",function(n){g(e);let o=p(3);return S(o.options.image.scale,n)||(o.options.image.scale=n),u(n)}),a()(),M(13,Ls,7,5,"div",30),a()}if(s&2){let e=p(3);l(4),O("ngModel",e.options.image.format),l(8),O("ngModel",e.options.image.scale),l(),m("ngIf",e.options.image.format==="jpeg")}}function Ns(s,t){if(s&1&&(r(0,"div",20)(1,"h3"),c(2,"\uBCC0\uD658 \uC635\uC158"),a(),M(3,Rs,8,2,"div",21)(4,Ws,14,3,"div",21),a()),s&2){let e=p(2);l(3),m("ngIf",e.selectedType==="ppt"),l(),m("ngIf",e.selectedType==="jpg")}}function js(s,t){if(s&1&&(r(0,"div",32)(1,"div",33),b(2,"div",34),a(),r(3,"p"),c(4),a()()),s&2){let e=p(2);l(4),B(e.progressMessage)}}function Us(s,t){if(s&1){let e=y();r(0,"div",1),f("click",function(){g(e);let n=p();return u(n.onClose())}),r(1,"div",2),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",3)(3,"h2"),c(4,"\u{1F4C4} \uD30C\uC77C \uBCC0\uD658"),a(),r(5,"button",4),f("click",function(){g(e);let n=p();return u(n.onClose())}),c(6,"\xD7"),a()(),r(7,"div",5)(8,"div",6)(9,"button",7),f("click",function(){g(e);let n=p();return u(n.selectedType="ppt")}),r(10,"div",8),b(11,"img",9),a(),r(12,"div",10),c(13,"PowerPoint"),a(),r(14,"div",11),c(15,"PDF\uB97C PPT\uB85C \uBCC0\uD658"),a()(),r(16,"button",7),f("click",function(){g(e);let n=p();return u(n.selectedType="doc")}),r(17,"div",8),b(18,"img",12),a(),r(19,"div",10),c(20,"Word"),a(),r(21,"div",11),c(22,"PDF\uB97C DOCX\uB85C \uBCC0\uD658"),a()(),r(23,"button",7),f("click",function(){g(e);let n=p();return u(n.selectedType="xls")}),r(24,"div",8),b(25,"img",13),a(),r(26,"div",10),c(27,"Excel"),a(),r(28,"div",11),c(29,"PDF\uB97C XLSX\uB85C \uBCC0\uD658"),a()(),r(30,"button",7),f("click",function(){g(e);let n=p();return u(n.selectedType="jpg")}),r(31,"div",8),b(32,"img",14),a(),r(33,"div",10),c(34,"\uC774\uBBF8\uC9C0"),a(),r(35,"div",11),c(36,"PDF\uB97C \uC774\uBBF8\uC9C0\uB85C \uBCC0\uD658"),a()()(),M(37,Ns,5,2,"div",15)(38,js,5,1,"div",16),a(),r(39,"div",17)(40,"button",18),f("click",function(){g(e);let n=p();return u(n.onClose())}),c(41," \uCDE8\uC18C "),a(),r(42,"button",19),f("click",function(){g(e);let n=p();return u(n.onConvert())}),c(43),a()()()()}if(s&2){let e=p();l(9),T("selected",e.selectedType==="ppt"),l(7),T("selected",e.selectedType==="doc"),l(7),T("selected",e.selectedType==="xls"),l(7),T("selected",e.selectedType==="jpg"),l(7),m("ngIf",e.selectedType),l(),m("ngIf",e.isConverting),l(2),m("disabled",e.isConverting),l(2),m("disabled",!e.selectedType||e.isConverting),l(),I(" ",e.isConverting?"\uBCC0\uD658 \uC911...":"\uBCC0\uD658 \uC2DC\uC791"," ")}}var rn=class s{constructor(t,e){this.pdfConverter=t;this.snackbar=e}isVisible=!1;pdfSrc=null;fileName="document";close=new D;pdfDocument=null;selectedType=null;isConverting=!1;progressMessage="";options={ppt:{includeThumbnails:!1,fontSize:24},image:{scale:2,format:"png",quality:.92}};onClose(){this.isConverting||(this.selectedType=null,this.close.emit())}onConvert(){return P(this,null,function*(){if(!(!this.selectedType||this.isConverting)){if(!this.pdfDocument&&this.pdfSrc)try{this.progressMessage="PDF \uD30C\uC77C \uB85C\uB4DC \uC911...",this.pdfDocument=yield this.pdfConverter.loadPdfDocument(this.pdfSrc)}catch(t){console.error("PDF \uB85C\uB4DC \uC2E4\uD328:",t),this.snackbar.showError("PDF \uD30C\uC77C\uC744 \uB85C\uB4DC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(!this.pdfDocument){this.snackbar.showError("PDF \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.isConverting=!0;try{switch(this.selectedType){case"ppt":this.progressMessage="PowerPoint \uD30C\uC77C\uB85C \uBCC0\uD658 \uC911...",yield this.pdfConverter.exportToPpt(this.pdfDocument,this.fileName,this.options.ppt),this.snackbar.showSuccess("\u2705 PowerPoint \uBCC0\uD658 \uC644\uB8CC!");break;case"doc":this.progressMessage="Word \uBB38\uC11C\uB85C \uBCC0\uD658 \uC911...",yield this.pdfConverter.exportToDocx(this.pdfDocument,this.fileName),this.snackbar.showSuccess("\u2705 Word \uBCC0\uD658 \uC644\uB8CC!");break;case"xls":this.progressMessage="Excel \uD30C\uC77C\uB85C \uBCC0\uD658 \uC911...",yield this.pdfConverter.exportToExcel(this.pdfDocument,this.fileName),this.snackbar.showSuccess("\u2705 Excel \uBCC0\uD658 \uC644\uB8CC!");break;case"jpg":this.progressMessage="\uC774\uBBF8\uC9C0\uB85C \uBCC0\uD658 \uC911...",yield this.pdfConverter.exportToImage(this.pdfDocument,this.fileName,this.options.image),this.snackbar.showSuccess("\u2705 \uC774\uBBF8\uC9C0 \uBCC0\uD658 \uC644\uB8CC!");break}setTimeout(()=>{this.onClose()},500)}catch(t){console.error("\u274C \uBCC0\uD658 \uC2E4\uD328:",t),this.snackbar.showError(`\uBCC0\uD658 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${t}`)}finally{this.isConverting=!1,this.progressMessage=""}}})}static \u0275fac=function(e){return new(e||s)(N(wi),N(Ue))};static \u0275cmp=F({type:s,selectors:[["app-ez-file-conversion-modal"]],inputs:{isVisible:"isVisible",pdfSrc:"pdfSrc",fileName:"fileName"},outputs:{close:"close"},standalone:!1,decls:1,vars:1,consts:[["class","conversion-modal-overlay",3,"click",4,"ngIf"],[1,"conversion-modal-overlay",3,"click"],[1,"conversion-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"conversion-type-grid"],[1,"conversion-type-card",3,"click"],[1,"card-icon"],["src","./images/icons/pc/btn-gnb-ppt.svg","alt","PPT","width","48","height","48"],[1,"card-title"],[1,"card-desc"],["src","./images/icons/pc/btn-gnb-doc.svg","alt","DOC","width","48","height","48"],["src","./images/icons/pc/btn-gnb-xls.svg","alt","XLS","width","48","height","48"],["src","./images/icons/pc/btn-gnb-jpg.svg","alt","JPG","width","48","height","48"],["class","conversion-options",4,"ngIf"],["class","conversion-progress",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-cancel",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[1,"conversion-options"],["class","option-group",4,"ngIf"],[1,"option-group"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"option-item"],["type","number","min","12","max","48",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","png"],["value","jpeg"],["type","number","min","1","max","4","step","0.5",3,"ngModelChange","ngModel"],["class","option-item",4,"ngIf"],["type","range","min","0.1","max","1","step","0.1",3,"ngModelChange","ngModel"],[1,"conversion-progress"],[1,"progress-spinner"],[1,"spinner"]],template:function(e,i){e&1&&M(0,Us,44,13,"div",0),e&2&&m("ngIf",i.isVisible)},dependencies:[R,me,fe,G,ze,je,Be,ue,Q,Ae,et,Y,Tt],styles:[".conversion-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out}.conversion-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:600px;max-height:80vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #0003;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.modal-header[_ngcontent-%COMP%]{padding:20px 24px;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#666;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;color:#333}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.conversion-type-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:24px}.conversion-type-card[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid transparent;border-radius:8px;padding:20px;cursor:pointer;transition:all .2s;text-align:center}.conversion-type-card[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#dee2e6}.conversion-type-card.selected[_ngcontent-%COMP%]{background:#e3f2fd;border-color:#2196f3}.conversion-type-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{margin-bottom:12px}.conversion-type-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}.conversion-type-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin-bottom:4px}.conversion-type-card[_ngcontent-%COMP%]   .card-desc[_ngcontent-%COMP%]{font-size:13px;color:#666}.conversion-options[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:16px}.conversion-options[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600;color:#333}.conversion-options[_ngcontent-%COMP%]   .option-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.conversion-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.conversion-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:100px;font-size:14px;color:#666}.conversion-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .conversion-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%], .conversion-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.conversion-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus, .conversion-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]:focus, .conversion-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3}.conversion-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{padding:0}.conversion-options[_ngcontent-%COMP%]   .option-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:50px;font-size:14px;color:#666}.conversion-options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666;cursor:pointer}.conversion-options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.conversion-progress[_ngcontent-%COMP%]{text-align:center;padding:32px 0}.conversion-progress[_ngcontent-%COMP%]   .progress-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.conversion-progress[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #f3f3f3;border-top:4px solid #2196f3;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto}.conversion-progress[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0;display:flex;justify-content:flex-end;gap:12px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-cancel[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.btn-cancel[_ngcontent-%COMP%]:hover:not(:disabled){background:#e0e0e0}.btn-primary[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#1976d2}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var an=class s{title="\uAC1C\uBC1C\uC911";description="\uC774 \uAE30\uB2A5\uC740 \uD604\uC7AC \uAC1C\uBC1C \uC911\uC785\uB2C8\uB2E4.";static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-ez-under-development"]],inputs:{title:"title",description:"description"},standalone:!1,decls:12,vars:2,consts:[[1,"under-development-panel"],[1,"panel-content"],[1,"development-message"],[1,"icon"],[1,"progress-info"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c(4,"\u{1F6A7}"),a(),r(5,"h3"),c(6),a(),r(7,"p"),c(8),a(),r(9,"div",4)(10,"p"),c(11,"\uBE60\uB978 \uC2DC\uC77C \uB0B4\uC5D0 \uC644\uC131\uB420 \uC608\uC815\uC785\uB2C8\uB2E4."),a()()()()()),e&2&&(l(6),B(i.title),l(2),B(i.description))},styles:[".under-development-panel[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 120px);background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;display:flex;flex-direction:column;overflow:hidden}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:40px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]{text-align:center;max-width:400px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:24px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#333;margin-bottom:16px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px;line-height:1.5;margin-bottom:24px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]{padding:16px 20px;background:#f8f9fa;border-radius:8px;border-left:4px solid #007bff}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#495057;font-size:14px}@media (max-width: 768px){.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]{padding:24px 16px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin-bottom:12px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-bottom:16px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]{padding:12px 16px}.under-development-panel[_ngcontent-%COMP%]   .panel-content[_ngcontent-%COMP%]   .development-message[_ngcontent-%COMP%]   .progress-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}"]})};var sn=class s{message="";isVisible=!1;duration=3e3;close=new D;ngOnInit(){this.isVisible&&this.duration>0&&setTimeout(()=>{this.onClose()},this.duration)}ngOnChanges(){this.isVisible&&this.duration>0&&setTimeout(()=>{this.onClose()},this.duration)}onClose(){this.close.emit()}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-ez-snackbar"]],inputs:{message:"message",isVisible:"isVisible",duration:"duration"},outputs:{close:"close"},standalone:!1,features:[ve],decls:8,vars:3,consts:[[1,"snackbar"],[1,"snackbar-content"],[1,"snackbar-icon"],["src","./images/icons/pc/img-alert.svg","alt","\uC54C\uB9BC","width","20","height","20"],[1,"snackbar-message"],[1,"snackbar-close",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","16","height","16"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"span",2),b(3,"img",3),a(),r(4,"span",4),c(5),a(),r(6,"button",5),f("click",function(){return i.onClose()}),b(7,"img",6),a()()()),e&2&&(T("visible",i.isVisible),l(5),B(i.message))},styles:[".snackbar[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:50%;transform:translate(-50%) translateY(100px);background:#333;color:#fff;border-radius:8px;box-shadow:0 4px 12px #0000004d;z-index:10000;opacity:0;transition:all .3s ease;max-width:500px;min-width:300px}.snackbar.visible[_ngcontent-%COMP%]{opacity:1;transform:translate(-50%) translateY(0)}.snackbar-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px}.snackbar-icon[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0}.snackbar-message[_ngcontent-%COMP%]{flex:1;font-size:14px;font-weight:500;line-height:1.4}.snackbar-close[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:4px;border-radius:4px;display:flex;align-items:center;transition:background .2s;flex-shrink:0}.snackbar-close[_ngcontent-%COMP%]:hover{background:#ffffff1a}"]})};var Gs=["tabBar"],Qs=["topMenuBar"],Ys=["globalFileInput"],Ks=(s,t)=>({zoom:s,currentPage:t,height:"100%",minZoom:.01,maxZoom:20,showToolbar:!0,showSidebarButton:!0,showFindButton:!0,showPagingButtons:!0,showZoomButtons:!0,showPresentationModeButton:!0,showOpenFileButton:!0,showPrintButton:!0,showDownloadButton:!0,showSecondaryToolbarButton:!0,showRotateButton:!0,showHandToolButton:!0,showSpreadButton:!0,showPropertiesButton:!0,showDrawEditor:!0,showStampEditor:!0,showHighlightEditor:!0,textLayer:!0}),Xs=s=>({"circle-preview":s});function Zs(s,t){if(s&1){let e=y();r(0,"app-ez-top-menu-bar",30,2),f("searchChange",function(n){g(e);let o=p();return u(o.onSearchChange(n))})("searchSubmit",function(n){g(e);let o=p();return u(o.onSearchModalSearch(n))})("searchNext",function(){g(e);let n=p();return u(n.onSearchNext())})("searchPrevious",function(){g(e);let n=p();return u(n.onSearchPrevious())})("fileSelected",function(n){g(e);let o=p();return u(o.onFileSelected(n))})("downloadModifiedPdf",function(){g(e);let n=p();return u(n.onDownloadModifiedPdf())})("downloadPdf",function(){g(e);let n=p();return u(n.onDownloadPdf())})("printPdf",function(){g(e);let n=p();return u(n.printPdf())})("emailPdf",function(){g(e);let n=p();return u(n.onEmailPdf())})("toggleFavorite",function(){g(e);let n=p();return u(n.toggleFavorite())})("menuChanged",function(n){g(e);let o=p();return u(o.onMenuChanged(n))})("settingsClick",function(){g(e);let n=p();return u(n.togglePdfSettings())})("addTextClicked",function(){g(e);let n=p();return u(n.addText())})("addShapeClicked",function(){g(e);let n=p();return u(n.addShape())}),a()}if(s&2){let e=p();m("currentActiveMenu",e.currentActiveMenu)("pdfSrc",e.pdfSrc)("isFavorite",e.currentDocumentIsFavorite)("isSettingsOpen",e.isSettingsOpen)}}function Js(s,t){if(s&1){let e=y();r(0,"app-ez-header",31),f("headerAction",function(n){g(e);let o=p();return u(o.onHeaderAction(n))})("showSnackbar",function(n){g(e);let o=p();return u(o.showSnackbar(n))})("rightPanelToggle",function(){g(e);let n=p();return u(n.toggleRightPanel())})("leftPanelToggle",function(){g(e);let n=p();return u(n.toggleLeftPanel())})("imageCoordinatesToggle",function(){g(e);let n=p();return u(n.toggleImageCoordinates())})("searchButtonClicked",function(){g(e);let n=p();return u(n.onSearchButtonClick())}),a()}if(s&2){let e=p();m("activeMenu",e.currentActiveMenu)("pdfSrc",e.pdfSrc)("isRightPanelOpen",e.showRightPanel)("isLeftPanelOpen",e.isLeftPanelVisible)("isHighlightActive",e.currentEditorTool==="highlight")("isPenActive",e.currentEditorTool==="pen")("isTextActive",e.currentEditorTool==="text")("showImageCoordinates",e.showImageCoordinates)("isFavorite",e.currentDocumentIsFavorite)("isSettingsOpen",e.isSettingsOpen)}}function el(s,t){s&1&&(r(0,"div",36)(1,"div",37),b(2,"img",38),r(3,"p"),c(4,"PDF \uD30C\uC77C\uC744 \uC5EC\uAE30\uC5D0 \uB4DC\uB86D\uD558\uC138\uC694"),a()()())}function tl(s,t){if(s&1){let e=y();r(0,"div",39)(1,"app-ez-recent-files",40),f("deleteFile",function(n){g(e);let o=p(2);return u(o.onDeleteRecentFile(n))})("openRecentFileWithAction",function(n){g(e);let o=p(2);return u(o.onOpenRecentFileWithAction(n))})("openNewFileWithAction",function(n){g(e);let o=p(2);return u(o.onFileSelectedWithAction(n))})("favoriteToggle",function(n){g(e);let o=p(2);return u(o.onFavoriteToggle(n))}),a()()}if(s&2){let e=p(2);l(),m("files",e.recentFiles)("searchQuery",e.recentFilesSearchQuery)}}function nl(s,t){if(s&1){let e=y();r(0,"div",32),f("dragover",function(n){g(e);let o=p();return u(o.onDragOver(n))})("dragenter",function(n){g(e);let o=p();return u(o.onDragEnter(n))})("dragleave",function(n){g(e);let o=p();return u(o.onDragLeave(n))})("drop",function(n){g(e);let o=p();return u(o.onDrop(n))}),M(1,el,5,0,"div",33),r(2,"div",34),M(3,tl,2,2,"div",35),a(),r(4,"input",5,3),f("change",function(n){g(e);let o=p();return u(o.onFileInputChange(n))}),a()()}if(s&2){let e=p();T("drag-over",e.isDragOver),l(),m("ngIf",e.isDragOver),l(2),m("ngIf",!e.pdfSrc)}}function il(s,t){if(s&1){let e=y();r(0,"shared-pdf-viewer",51),f("pdfLoaded",function(n){g(e);let o=p(2);return u(o.onPdfLoaded(n))})("pageChange",function(n){g(e);let o=p(2);return u(o.onPageChange(n))})("zoomChange",function(n){g(e);let o=p(2);return u(o.onZoomChange(n))})("pageRendered",function(n){g(e);let o=p(2);return u(o.onPageRendered(n))})("updateFindMatchesCount",function(n){g(e);let o=p(2);return u(o.onFindMatchesCountUpdate(n))}),a()}if(s&2){let e=p(2);m("pdfSrc",e.pdfSrc)("showFloatingZoom",!0)("config",In(4,Ks,e.zoomLevel,e.currentPage))("useHelperService",!1)}}function ol(s,t){s&1&&b(0,"img",68)}function rl(s,t){if(s&1){let e=y();r(0,"button",66),f("click",function(){let n=g(e).$implicit,o=p(3);return u(o.selectDrawingColor(n))}),M(1,ol,1,0,"img",67),a()}if(s&2){let e=t.$implicit,i=p(3);pe("background-color",e),T("selected",i.drawingColor===e&&!i.isEraserMode)("light-color",i.isLightColor(e)),m("title",e),l(),m("ngIf",i.drawingColor===e&&!i.isEraserMode)}}function al(s,t){if(s&1){let e=y();r(0,"div",52)(1,"div",53)(2,"span",54),c(3,"\uD39C \uADF8\uB9AC\uAE30"),a(),r(4,"button",55),f("click",function(){g(e);let n=p(2);return u(n.closeDrawingMode())}),b(5,"img",56),a()(),r(6,"div",57)(7,"label",58),c(8,"\uC0C9\uC0C1"),a(),r(9,"div",59),M(10,rl,2,8,"button",60),a()(),r(11,"div",57)(12,"label",58),c(13),a(),r(14,"div",61)(15,"input",62),f("input",function(n){g(e);let o=p(2);return u(o.onDrawingThicknessChange(n.target.value))}),a(),b(16,"span",63),a()(),r(17,"div",57)(18,"button",64),f("click",function(){g(e);let n=p(2);return u(n.toggleEraserMode())}),b(19,"img",65),r(20,"span"),c(21,"\uC9C0\uC6B0\uAC1C"),a()()()()}if(s&2){let e=p(2);l(10),m("ngForOf",e.presetColors),l(3),I("\uAD75\uAE30: ",e.drawingThickness,"px"),l(2),m("min",1)("max",20)("value",e.drawingThickness),l(),pe("width",e.drawingThickness,"px")("height",e.drawingThickness,"px")("background-color",e.drawingColor),l(2),T("active",e.isEraserMode)}}function sl(s,t){if(s&1){let e=y();r(0,"app-shared-page-reorder",69),f("close",function(){g(e);let n=p(2);return u(n.closePageReorderPanel())})("pageOrderChanged",function(n){g(e);let o=p(2);return u(o.onPageReorderComplete(n))})("deletePages",function(n){g(e);let o=p(2);return u(o.onDeletePages(n))})("confirmDelete",function(n){g(e);let o=p(2);return u(o.onConfirmDelete(n))})("pageSelected",function(n){g(e);let o=p(2);return u(o.onPageSelectedInReorder(n))}),a()}if(s&2){let e=p(2);m("isVisible",e.pageReorderVisible)("currentPageCount",e.totalPages)("pdfSrc",e.pdfSrc)}}function ll(s,t){s&1&&b(0,"app-file-conversion")}function cl(s,t){s&1&&b(0,"app-ez-under-development",70)}function dl(s,t){if(s&1){let e=y();r(0,"div",41)(1,"div",42)(2,"app-shared-pdf-left-panel",43),f("close",function(){g(e);let n=p();return u(n.toggleLeftPanel())})("thumbnailClick",function(n){g(e);let o=p();return u(o.onThumbnailClick(n))})("zoomIn",function(){g(e);let n=p();return u(n.onZoomInFromPanel())})("zoomOut",function(){g(e);let n=p();return u(n.onZoomOutFromPanel())})("panelExpanded",function(n){g(e);let o=p();return u(o.onLeftPanelExpanded(n))}),a()(),M(3,il,1,7,"shared-pdf-viewer",44),r(4,"div",45)(5,"app-shared-pdf-right-panel",46),f("zoomIn",function(){g(e);let n=p();return u(n.onZoomInFromPanel())})("zoomOut",function(){g(e);let n=p();return u(n.onZoomOutFromPanel())})("pageChange",function(n){g(e);let o=p();return u(o.onPageChangeFromPanel(n))})("menuSelect",function(n){g(e);let o=p();return u(o.onRightPanelMenuSelect(n))})("requestAiSummary",function(n){g(e);let o=p();return u(o.onRequestAiSummary(n))})("requestAiTranslate",function(n){g(e);let o=p();return u(o.onRequestAiTranslate(n))})("elementPropertyChange",function(n){g(e);let o=p();return u(o.onElementPropertyChange(n))})("deleteElement",function(n){g(e);let o=p();return u(o.onDeleteElementById(n))})("imageAction",function(n){g(e);let o=p();return u(o.onImageAction(n))}),a()(),M(6,al,22,13,"div",47)(7,sl,1,3,"app-shared-page-reorder",48)(8,ll,1,0,"app-file-conversion",49)(9,cl,1,0,"app-ez-under-development",50),a()}if(s&2){let e=p();l(2),m("isVisible",!0)("thumbnails",e.leftPanelThumbnails),l(),m("ngIf",!e.pageReorderVisible),l(2),m("isVisible",!0)("currentPage",e.currentPage)("totalPages",e.totalPages)("aiSummaryContent",e.aiSummaryContent)("aiTranslateContent",e.aiTranslateContent)("isAiLoading",e.isAiLoading)("selectedElement",e.selectedElement),l(),m("ngIf",e.showDrawingPanel&&e.isDrawingMode),l(),m("ngIf",e.pageReorderVisible),l(),m("ngIf",e.fileConversionVisible),l(),m("ngIf",e.securityVisible)}}function pl(s,t){if(s&1){let e=y();r(0,"div",81)(1,"button",82),f("click",function(n){return g(e),p(3).copyOrganizerPages(),u(n.stopPropagation())}),b(2,"img",83),a(),r(3,"button",84),f("click",function(n){return g(e),p(3).pasteOrganizerPages(),u(n.stopPropagation())}),b(4,"img",85),a(),r(5,"button",86),f("click",function(n){return g(e),p(3).deleteOrganizerPages(),u(n.stopPropagation())}),b(6,"img",87),a()()}}function gl(s,t){if(s&1){let e=y();r(0,"div",76),f("click",function(n){let o=g(e).$implicit,d=p(2);return u(d.onOrganizerPageClick(o.pageNumber,n))})("contextmenu",function(n){let o=g(e).$implicit,d=p(2);return u(d.onOrganizerContextMenu(o.pageNumber,n))}),M(1,pl,7,0,"div",77),r(2,"div",78),b(3,"img",79),a(),r(4,"span",80),c(5),a()()}if(s&2){let e=t.$implicit,i=p(2);T("selected",i.isOrganizerPageSelected(e.pageNumber)),l(),m("ngIf",i.isOrganizerPageSelected(e.pageNumber)),l(2),m("alt",Fn("Page ",e.pageNumber))("src",e.thumbnailUrl,Ce),l(2),B(e.pageNumber)}}function ul(s,t){s&1&&(r(0,"div",88)(1,"p"),c(2,"\uD398\uC774\uC9C0 \uC378\uB124\uC77C \uB85C\uB529 \uC911..."),a()())}function ml(s,t){if(s&1){let e=y();r(0,"div",89),f("click",function(n){return g(e),u(n.stopPropagation())}),r(1,"button",90),f("click",function(){g(e);let n=p(2);return u(n.copyOrganizerPages())}),b(2,"img",83),r(3,"span"),c(4,"\uBCF5\uC0AC"),a()(),r(5,"button",91),f("click",function(){g(e);let n=p(2);return u(n.pasteOrganizerPages())}),b(6,"img",85),r(7,"span"),c(8,"\uBD99\uC5EC\uB123\uAE30"),a()(),r(9,"button",92),f("click",function(){g(e);let n=p(2);return u(n.deleteOrganizerPages())}),b(10,"img",87),r(11,"span"),c(12,"\uC0AD\uC81C"),a()()()}if(s&2){let e=p(2);pe("left",e.organizerContextMenu.x,"px")("top",e.organizerContextMenu.y,"px"),l(5),m("disabled",!e.hasOrganizerCopiedPages)}}function fl(s,t){if(s&1){let e=y();r(0,"div",71),f("click",function(){g(e);let n=p();return u(n.onOrganizerBackgroundClick())}),r(1,"div",72),M(2,gl,6,7,"div",73)(3,ul,3,0,"div",74),a(),M(4,ml,13,5,"div",75),a()}if(s&2){let e=p();l(2),m("ngForOf",e.organizerThumbnails),l(),m("ngIf",e.organizerThumbnails.length===0),l(),m("ngIf",e.organizerContextMenu.visible)}}function hl(s,t){if(s&1){let e=y();r(0,"shared-pdf-analysis-dashboard",95),f("createCombinedDocEvent",function(){g(e);let n=p(2);return u(n.onCreateCombinedDocument())})("viewOriginalEvent",function(){g(e);let n=p(2);return u(n.onViewOriginalDocument())})("createImagePdfEvent",function(n){g(e);let o=p(2);return u(o.onCreateImagePdf(n))})("exportPdfEvent",function(){g(e);let n=p(2);return u(n.onExportPdfFromDashboard())})("exportOriginalPdfEvent",function(){g(e);let n=p(2);return u(n.onExportOriginalPdf())})("closeEvent",function(){g(e);let n=p(2);return u(n.onClosePdfAnalysisDashboard())})("click",function(n){return g(e),u(n.stopPropagation())}),a()}if(s&2){let e=p(2);m("analysisData",e.pdfAnalysisData)("vectorData",e.vectorData)("imageData",e.imageData)("analyzedPage",e.selectedAnalysisPage)("isCompact",!1)("isDraggable",!1)("hasGeneratedDocument",e.hasGeneratedDocument)}}function _l(s,t){if(s&1){let e=y();r(0,"div",93),f("click",function(){g(e);let n=p();return u(n.onClosePdfAnalysisDashboard())}),M(1,hl,1,7,"shared-pdf-analysis-dashboard",94),a()}if(s&2){let e=p();l(),m("ngIf",!e.pdfAnalysisInProgress&&e.pdfAnalysisData)}}function Cl(s,t){if(s&1){let e=y();r(0,"app-merge-modal",15),f("close",function(){g(e);let n=p();return u(n.onMergeModalClose())})("confirm",function(n){g(e);let o=p();return u(o.onMergeModalConfirm(n))}),a()}}function bl(s,t){if(s&1){let e=y();r(0,"app-text-editor-modal",96),f("save",function(n){g(e);let o=p();return u(o.onTextEditorApply(n))})("cancel",function(){g(e);let n=p();return u(n.onTextEditorCancel())}),a()}if(s&2){let e=p();m("data",e.textEditorData)("pageWidth",595)("pageHeight",842)}}function xl(s,t){if(s&1){let e=y();r(0,"app-ez-file-conversion-modal",97),f("close",function(){g(e);let n=p();return u(n.onFileConversionModalClose())}),a()}if(s&2){let e=p();m("isVisible",e.showFileConversionModal)("pdfSrc",e.pdfSrc)("fileName",e.currentFileName)}}function Pl(s,t){if(s&1){let e=y();r(0,"app-shared-shape-selection-modal",98),f("shapeSelected",function(n){g(e);let o=p();return u(o.onShapeSelect(n))})("cancel",function(){g(e);let n=p();return u(n.onCancelShapeModal())}),a()}}function vl(s,t){if(s&1){let e=y();r(0,"div",99),f("click",function(){g(e);let n=p();return u(n.onShapePropertiesCancel())}),r(1,"div",100),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",101)(3,"h3"),c(4,"\uB3C4\uD615 \uC18D\uC131 \uD3B8\uC9D1"),a(),r(5,"button",102),f("click",function(){g(e);let n=p();return u(n.onShapePropertiesCancel())}),c(6," \u2715 "),a()(),r(7,"div",103)(8,"div",104)(9,"label"),c(10,"\uCC44\uC6B0\uAE30 \uC0C9\uC0C1"),a(),r(11,"div",105)(12,"input",106),k("ngModelChange",function(n){g(e);let o=p();return S(o.shapePropertiesData.fillColor,n)||(o.shapePropertiesData.fillColor=n),u(n)}),a(),r(13,"span",107),c(14),a()()(),r(15,"div",104)(16,"label"),c(17,"\uD14C\uB450\uB9AC \uC0C9\uC0C1"),a(),r(18,"div",105)(19,"input",106),k("ngModelChange",function(n){g(e);let o=p();return S(o.shapePropertiesData.strokeColor,n)||(o.shapePropertiesData.strokeColor=n),u(n)}),a(),r(20,"span",107),c(21),a()()(),r(22,"div",104)(23,"label"),c(24,"\uD14C\uB450\uB9AC \uB450\uAED8"),a(),r(25,"div",108)(26,"input",109),k("ngModelChange",function(n){g(e);let o=p();return S(o.shapePropertiesData.strokeWidth,n)||(o.shapePropertiesData.strokeWidth=n),u(n)}),a(),r(27,"span",110),c(28),a()()(),r(29,"div",104)(30,"label"),c(31,"\uD22C\uBA85\uB3C4"),a(),r(32,"div",108)(33,"input",111),k("ngModelChange",function(n){g(e);let o=p();return S(o.shapePropertiesData.opacity,n)||(o.shapePropertiesData.opacity=n),u(n)}),a(),r(34,"span",110),c(35),a()()(),r(36,"div",112)(37,"label"),c(38,"\uD06C\uAE30"),a(),r(39,"div",113)(40,"div",114)(41,"span"),c(42,"\uB108\uBE44"),a(),r(43,"input",115),k("ngModelChange",function(n){g(e);let o=p();return S(o.shapePropertiesData.width,n)||(o.shapePropertiesData.width=n),u(n)}),a()(),r(44,"span",116),c(45,"\xD7"),a(),r(46,"div",114)(47,"span"),c(48,"\uB192\uC774"),a(),r(49,"input",115),k("ngModelChange",function(n){g(e);let o=p();return S(o.shapePropertiesData.height,n)||(o.shapePropertiesData.height=n),u(n)}),a()()()(),r(50,"div",117)(51,"label"),c(52,"\uBBF8\uB9AC\uBCF4\uAE30"),a(),b(53,"div",118),a()(),r(54,"div",119)(55,"button",120),f("click",function(){g(e);let n=p();return u(n.onShapePropertiesCancel())}),c(56,"\uCDE8\uC18C"),a(),r(57,"button",121),f("click",function(){g(e);let n=p();return u(n.onShapePropertiesApply())}),c(58,"\uC801\uC6A9"),a()()()()}if(s&2){let e=p();l(12),O("ngModel",e.shapePropertiesData.fillColor),l(2),B(e.shapePropertiesData.fillColor),l(5),O("ngModel",e.shapePropertiesData.strokeColor),l(2),B(e.shapePropertiesData.strokeColor),l(5),O("ngModel",e.shapePropertiesData.strokeWidth),l(2),I("",e.shapePropertiesData.strokeWidth,"px"),l(5),O("ngModel",e.shapePropertiesData.opacity),l(2),I("",(e.shapePropertiesData.opacity*100).toFixed(0),"%"),l(8),O("ngModel",e.shapePropertiesData.width),l(6),O("ngModel",e.shapePropertiesData.height),l(4),pe("background-color",e.shapePropertiesData.fillColor)("border",e.shapePropertiesData.strokeWidth+"px solid "+e.shapePropertiesData.strokeColor)("opacity",e.shapePropertiesData.opacity),m("ngClass",An(17,Xs,(e.editingShapeElement==null?null:e.editingShapeElement.shapeType)==="circle"))}}function wl(s,t){if(s&1){let e=y();r(0,"app-shared-signature-pad-modal",122),f("signatureCreated",function(n){g(e);let o=p();return u(o.onSignaturePadCreated(n))})("cancel",function(){g(e);let n=p();return u(n.onCancelSignaturePadModal())}),a()}}function Ml(s,t){if(s&1){let e=y();r(0,"app-shared-watermark-config-modal",123),f("watermarkCreated",function(n){g(e);let o=p();return u(o.onWatermarkCreated(n))})("cancel",function(){g(e);let n=p();return u(n.onCancelWatermarkModal())}),a()}}function yl(s,t){if(s&1){let e=y();r(0,"app-page-number-config-modal",124),f("pageNumberCreated",function(n){g(e);let o=p();return u(o.onPageNumberCreated(n))})("cancel",function(){g(e);let n=p();return u(n.onCancelPageNumberModal())}),a()}if(s&2){let e=p();m("totalPages",e.totalPages)("currentPage",e.currentPage)}}function Ol(s,t){if(s&1){let e=y();r(0,"div",132),f("click",function(){let n=g(e).$implicit,o=p(3);return u(o.selectSavedSignature(n))}),b(1,"img",133),r(2,"button",134),f("click",function(n){let o=g(e).$implicit,d=p(3);return u(d.deleteSavedSignature(o,n))}),c(3,"\xD7"),a()()}if(s&2){let e=t.$implicit;l(),m("src",e.thumbnailUrl,Ce)}}function Sl(s,t){if(s&1&&(r(0,"div",130),M(1,Ol,4,1,"div",131),a()),s&2){let e=p(2);l(),m("ngForOf",e.savedSignatures)}}function kl(s,t){if(s&1){let e=y();r(0,"div",125),f("click",function(){g(e);let n=p();return u(n.closeSignatureSelector())}),r(1,"div",126),f("click",function(n){return g(e),u(n.stopPropagation())}),M(2,Sl,2,1,"div",127),r(3,"button",128),f("click",function(){g(e);let n=p();return u(n.openSignatureModal())}),r(4,"span",129),c(5,"+"),a(),r(6,"span"),c(7,"\uB9CC\uB4E4\uAE30"),a()()()()}if(s&2){let e=p();l(2),m("ngIf",e.savedSignatures.length>0)}}function El(s,t){if(s&1){let e=y();r(0,"app-signature-config-modal",122),f("signatureCreated",function(n){g(e);let o=p();return u(o.onSignatureCreated(n))})("cancel",function(){g(e);let n=p();return u(n.onCancelSignatureModal())}),a()}}function Dl(s,t){if(s&1){let e=y();r(0,"app-vector-path-drawer",135),f("pathsChanged",function(n){g(e);let o=p();return u(o.onVectorPathsChanged(n))})("close",function(){g(e);let n=p();return u(n.onCloseVectorPathDrawer())}),a()}s&2&&m("width",595)("height",842)}function Tl(s,t){if(s&1){let e=y();r(0,"div",136),f("click",function(){g(e);let n=p();return u(n.closeConfirmModal())}),r(1,"div",137),f("click",function(n){return g(e),u(n.stopPropagation())}),r(2,"div",138)(3,"h3"),c(4),a()(),r(5,"div",139)(6,"p"),c(7),a()(),r(8,"div",140)(9,"button",141),f("click",function(){g(e);let n=p();return u(n.closeConfirmModal())}),c(10,"\uCDE8\uC18C"),a(),r(11,"button",142),f("click",function(){g(e);let n=p();return u(n.confirmModalAction())}),c(12,"\uD655\uC778"),a()()()()}if(s&2){let e=p();l(4),B(e.confirmModalTitle),l(3),B(e.confirmModalMessage)}}function Bl(s,t){s&1&&(r(0,"div",143)(1,"div",144),b(2,"div",145),r(3,"p"),c(4,"\uC800\uC7A5 \uC911..."),a()()())}var ln=class s{constructor(t,e,i,n,o,d,h,_){this.pdfPageDeleterService=t;this.fileManagerService=e;this.pdfSecurityService=i;this.cdr=n;this.renderer=o;this.router=d;this.route=h;this.authService=_}get isHighlightActive(){return this.currentEditorTool==="highlight"}authSubscription;pendingToolAction=null;onOpenRecentFile(t){return P(this,null,function*(){try{if(this.tabBarComponent){let d=this.tabBarComponent.findTabByName(t.name);if(d){this.tabBarComponent.activateTab(d.id),this.snackbar.showInfo(`'${t.name}' \uD0ED\uC73C\uB85C \uC774\uB3D9\uD588\uC2B5\uB2C8\uB2E4.`);return}}this.snackbar.showInfo(`'${t.name}' \uBB38\uC11C\uB97C \uBD88\uB7EC\uC624\uB294 \uC911...`);let e=yield this.indexedDbService.searchDocumentsByTitle(t.name);if(e.length===0){this.snackbar.showWarning("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let i=e[0],n=i.documentType||(i.pdfSrc?"viewer":"editor");n==="viewer"?yield this.loadDocumentAsViewer(i):yield this.loadDocumentAsEditor(i);let o=n==="viewer"?"PDF \uBDF0\uC5B4":"\uD3B8\uC9D1\uAE30";this.snackbar.showSuccess(`'${t.name}' \uBB38\uC11C\uAC00 ${o} \uBAA8\uB4DC\uB85C \uC5F4\uB838\uC2B5\uB2C8\uB2E4.`),this.currentDocumentName=t.name,yield this.updateFavoriteStatus()}catch(e){console.error("Error opening recent file:",e),this.snackbar.showError("\uBB38\uC11C\uB97C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}recentFiles=[];pdfAnalysisManager=X(ci);pdfElementManager=X(di);imageUploadService=X(pi);shapeCreatorService=X(gi);signatureService=X(ui);watermarkService=X(ot);vectorPathService=X(mi);docGenerator=X(At);pdfDocBuilder=X(fi);vectorElementConverter=X(It);pageBuilder=X(Vt);pdfImageExtractor=X(li);debugLogger=X(Bt);docStorage=X(qt);indexedDbService=X(nt);pdfPageManager=X(bi);snackbar=X(Ue);pdfThumbnailService=X(xi);pdfExportFullService=X(Gt);pdfViewerService=X(Gn);dialog=X(Xn);pdfjsLibService=X(Ft);pdfNotificationService=X(qn);geminiService=X(zt);pdfLibService=X(Qt);overlayManager;unsavedChangesService;overlayPdfEmbedService;get PDFViewerApplication(){return this.pdfNotificationService.onPDFJSInitSignal()}keydownHandler=t=>this.handleKeyboardShortcut(t);isSaving=!1;ngOnInit(){this.loadRecentFiles(),document.addEventListener("keydown",this.keydownHandler,!0)}ngAfterViewInit(){}ngOnDestroy(){document.removeEventListener("keydown",this.keydownHandler,!0),this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.authSubscription&&this.authSubscription.unsubscribe()}handleKeyboardShortcut(t){if((t.ctrlKey||t.metaKey)&&t.key==="s"){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.saveCurrentDocumentWithCtrlS();return}if((t.ctrlKey||t.metaKey)&&t.key==="f"){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();return}}saveCurrentDocumentWithCtrlS(){return P(this,null,function*(){if(this.pdfSrc&&!this.isSaving)try{this.isSaving=!0,this.cdr.detectChanges(),yield this.saveEditsWithoutDownload(),this.tabBarComponent?.setActiveTabUnsavedChanges(!1),this.overlayManager?.markClean(),this.snackbar.showSuccess("\uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("\uBB38\uC11C \uC800\uC7A5 \uC2E4\uD328:",t),this.snackbar.showError("\uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.isSaving=!1,this.cdr.detectChanges()}})}saveEditsWithoutDownload(){return P(this,null,function*(){try{console.log("\u{1F535} saveEditsWithoutDownload \uC2DC\uC791");let t=this.PDFViewerApplication,e;if(t?.pdfDocument){t.eventBus&&(t.eventBus.dispatch("switchannotationeditormode",{source:this,mode:0}),yield new Promise(C=>setTimeout(C,300)));let _=yield t.pdfDocument.saveDocument();e=new Uint8Array(_.buffer||_)}else{let _=yield this.getCurrentPdfBytes();if(!_)throw new Error("PDF \uB370\uC774\uD130\uB97C \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");e=_}let i=yield this.pdfLibService.loadExistingPdf(e);if(!i)throw new Error("PDF\uB97C \uB85C\uB4DC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let n=i.getPages();for(let _ of this.pdfPages){let C=_.pageNumber-1;if(C<0||C>=n.length)continue;let x=n[C],{width:v,height:w}=x.getSize();for(let E of _.elements||[])yield this.embedElementToPage(i,x,E,v,w,_.pageNumber)}let o=yield i.save(),d=new Blob([o],{type:"application/pdf"});document.querySelectorAll(".signature-element").forEach(_=>_.remove()),document.querySelectorAll(".overlay-container").forEach(_=>_.remove());for(let _ of this.pdfPages)_.elements=[];let h=URL.createObjectURL(d);this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=h,this.currentPdfBlob=d,yield this.saveDocumentToIndexedDB(this.currentFileName||"\uC0C8 \uBB38\uC11C"),this.cdr.detectChanges(),console.log("\u2705 \uC800\uC7A5 \uC644\uB8CC (\uB2E4\uC6B4\uB85C\uB4DC \uC5C6\uC74C)")}catch(t){throw console.error("saveEditsWithoutDownload \uC2E4\uD328:",t),t}})}tabBarComponent;topMenuBarComponent;globalFileInput;mergeModalComponent;lockModalComponent;passwordModalComponent;securitySettingsComponent;saveConfirmModalComponent;encryptionModalComponent;digitalIdManagerComponent;digitalIdWizardComponent;highlightPropertiesModalComponent;searchModalComponent;titleInputModalComponent;title="ezReader";pageReorderVisible=!1;fileConversionVisible=!1;securityVisible=!1;selectedPagesInReorder=[];pdfToolsPanelMenuId=null;pdfAnalysisDashboardVisible=!1;pdfAnalysisData=null;vectorData=null;imageData=null;pdfAnalysisInProgress=!1;pdfAnalysisProgress=0;pdfAnalysisStep="";pageSelectorVisible=!1;pageSelectorThumbnails=[];selectedAnalysisPage=1;pdfEditorVisible=!1;pdfEditorData=null;currentTabView="home";showRightPanel=!1;isRightPanelCollapsed=!1;selectedElement=null;isLeftPanelVisible=!1;leftPanelThumbnails=[];showImageCoordinates=!1;pdfPages=[];get hasGeneratedDocument(){return this.pdfPages&&this.pdfPages.length>0&&this.pdfPages.some(t=>t.elements&&t.elements.length>0)}showTextEditorModal=!1;textEditorData={text:"\uC0C8 \uD14D\uC2A4\uD2B8",fontSize:16,fontFamily:"Noto Sans KR",color:"#000000",x:100,y:100,width:200,height:30};showFileConversionModal=!1;showShapeModal=!1;showShapePropertiesModal=!1;editingShapeElement=null;shapePropertiesData={fillColor:"#4285f4",strokeColor:"#1967d2",strokeWidth:2,opacity:.8,width:200,height:100};showSignaturePadModal=!1;showWatermarkConfigModal=!1;showPageNumberConfigModal=!1;currentPageNumberConfig=null;showSignatureConfigModal=!1;savedSignatures=[];showSignatureSelector=!1;currentSignatureForPlacement=null;showVectorPathDrawer=!1;organizerThumbnails=[];organizerSelectedPages=[];organizerCopiedPages=[];organizerContextMenu={visible:!1,x:0,y:0,pageNumber:0};formFieldLabels={checkbox:"\uCCB4\uD06C\uBC15\uC2A4",radio:"\uB77C\uB514\uC624 \uBC84\uD2BC",dropdown:"\uB4DC\uB86D\uB2E4\uC6B4",date:"\uB0A0\uC9DC \uD544\uB4DC"};showMergeModal=!1;currentHighlightColor="#FFFF00";currentHighlightOpacity=.5;pendingDownload=!1;currentPage=1;totalPages=0;zoomLevel=100;pdfSrc=null;currentEditorTool=null;editorConfig={showHighlightEditor:!0,showDrawEditor:!1,showStampEditor:!1};isDrawingMode=!1;isEraserMode=!1;showDrawingPanel=!1;drawingThickness=5;drawingColor="#FFEB3B";presetColors=["#FFEB3B","#2196F3","#4CAF50","#F44336","#FF9800","#9C27B0","#00BCD4","#000000"];currentFileName="";currentPdfBlob=null;currentDocumentId=null;currentActiveMenu="\uD648";currentFile=null;currentDocumentName="";currentDocumentIsFavorite=!1;aiSummaryContent="";aiTranslateContent="";isAiLoading=!1;isSettingsOpen=!1;searchQuery="";currentSearchIndex=0;totalSearchMatches=0;pdfTextStreamData=null;pageSize="A4";extractedText="";documentMetadata=[];bookmarks=[];isDragOver=!1;dragCounter=0;pdfViewerScale=1;snackbarVisible=!1;snackbarMessage="";loadRecentFiles(){return P(this,null,function*(){try{let t=yield this.indexedDbService.getRecentDocuments(10),e=this.tabBarComponent?.tabs.map(i=>i.name)||[];this.recentFiles=t.map(i=>{let n=i.documentType||(i.pdfSrc?"viewer":"editor"),o=n==="viewer",d=o?"\u{1F4D6}":"\u{1F4DD}",h=o?"\uBDF0\uC5B4":"\uC0DD\uC131",_=i.pageCount||i.pages?.length||0,C="";if(i.fileSize){let v=i.fileSize/1048576;v>=1?C=`${v.toFixed(2)}MB`:C=`${(i.fileSize/1024).toFixed(0)}KB`}let x=_>0?C?`${_}\uC7A5 (${C})`:`${_}\uC7A5`:"0\uC7A5";return{id:i.id,name:i.title,lastModified:new Date(i.updatedAt).toLocaleDateString(),size:x,documentType:n,typeIcon:d,typeLabel:h,isOpen:e.includes(i.title),isFavorite:i.isFavorite||!1,thumbnail:i.thumbnail}}),this.generateMissingThumbnails(t)}catch(t){console.error("Error loading recent files:",t)}})}generateMissingThumbnails(t){return P(this,null,function*(){let e=t.filter(i=>!i.thumbnail&&i.pdfBase64&&(i.documentType==="viewer"||!i.documentType));if(e.length!==0)for(let i of e)try{let n=yield this.generateThumbnailFromBase64(i.pdfBase64);if(n){i.thumbnail=n,yield this.indexedDbService.updateDocument(i);let o=this.recentFiles.find(d=>d.id===i.id);o&&(o.thumbnail=n,this.cdr.detectChanges())}}catch(n){console.error(`Failed to generate thumbnail for ${i.title}:`,n)}})}generateThumbnailFromBase64(t){return P(this,null,function*(){try{let e=t.includes(",")?t.split(",")[1]:t,i=atob(e),n=new Uint8Array(i.length);for(let h=0;h<i.length;h++)n[h]=i.charCodeAt(h);let o=new Blob([n],{type:"application/pdf"}),d=URL.createObjectURL(o);try{let _=yield(yield this.pdfjsLibService.getDocument(d)).getPage(1),C=_.getViewport({scale:1}),x=60,v=Math.min(x/C.width,x/C.height),w=_.getViewport({scale:v}),E=document.createElement("canvas");E.width=w.width,E.height=w.height;let z=E.getContext("2d");return z?(yield _.render({canvas:E,canvasContext:z,viewport:w}).promise,E.toDataURL("image/jpeg",.7)):null}finally{URL.revokeObjectURL(d)}}catch(e){return console.error("Thumbnail generation failed:",e),null}})}formatFileSize(t){let e=typeof t=="string"?parseInt(t):t;return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}onFileSelectedWithAction(t){return P(this,null,function*(){this.pendingToolAction=t?.action||null,yield this.onFileSelected(t.file),this.currentTabView="viewer",this.consumePendingToolAction()})}onOpenRecentFileWithAction(t){return P(this,null,function*(){this.pendingToolAction=t?.action||null,yield this.onOpenRecentFile(t.file),this.currentTabView="viewer",this.consumePendingToolAction()})}openFileDialogFromTab(){this.globalFileInput?.nativeElement?this.globalFileInput.nativeElement.click():this.topMenuBarComponent&&this.topMenuBarComponent.openFileDialog()}onGlobalFileInputChange(t){let e=t.target;if(e.files&&e.files.length>0){let i=e.files[0];i.type==="application/pdf"?this.openFileInNewTab(i):this.snackbar.showError("PDF \uD30C\uC77C\uB9CC \uC120\uD0DD\uD574\uC8FC\uC138\uC694."),e.value=""}}openFileInNewTab(t){return P(this,null,function*(){this.tabBarComponent&&this.tabBarComponent.addTab(),yield this.onFileSelected(t)})}onFileSelected(t){return P(this,null,function*(){try{this.currentFile=t,this.currentFileName=t.name,this.currentPdfBlob=t,this.currentDocumentName=t.name,this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=URL.createObjectURL(t),this.currentPage=1,this.totalPages=0,this.leftPanelThumbnails=[],this.thumbnailsGenerated=!1,this.tabBarComponent&&(yield this.tabBarComponent.setActiveTabPdf(t.name,this.pdfSrc,t)),yield this.saveOpenedPdfAsDocument(t),yield this.loadRecentFiles(),yield this.updateFavoriteStatus(),this.showSnackbar(`${t.name} \uD30C\uC77C\uC744 \uC5F4\uC5C8\uC2B5\uB2C8\uB2E4.`),this.cdr.detectChanges()}catch(e){console.error("Error loading PDF:",e),this.showSnackbar("PDF \uD30C\uC77C\uC744 \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}onTabChanged(t){let e=this.pdfSrc,i=this.currentTabView,n=this.currentFileName;if(this.currentFileName=t.fileName,this.currentTabView=t.view,t.view==="editor"?(this.pdfEditorVisible=!0,this.pdfEditorData=t.editorData,t.editorData&&t.editorData.pages?(this.totalPages=t.editorData.pages.length,this.currentPage=t.lastViewedPage||1,this.leftPanelThumbnails=[],this.thumbnailsGenerated=!1,this.pdfPages=t.editorData.pages):t.pageCount&&(this.totalPages=t.pageCount,this.currentPage=t.lastViewedPage||1)):this.pdfEditorVisible=!1,e&&e!==t.pdfSrc)try{URL.revokeObjectURL(e)}catch(o){console.warn("Failed to revoke Blob URL:",o)}this.pdfSrc=t.pdfSrc,t.view==="editor"?this.currentActiveMenu="\uD3B8\uC9D1":n===t.fileName&&n!=="\uC0C8 \uD0ED"&&e&&t.pdfSrc||(this.isLeftPanelVisible=!1,this.showRightPanel=!1,this.isRightPanelCollapsed=!1,this.currentActiveMenu="\uD648",this.pageReorderVisible=!1,this.fileConversionVisible=!1,this.securityVisible=!1),t.view==="home"?(this.currentPage=1,this.totalPages=0,this.leftPanelThumbnails=[],this.thumbnailsGenerated=!1,this.pdfPages=[],this.loadRecentFiles()):t.view==="viewer"&&t.pdfSrc&&(e!==t.pdfSrc||i!=="viewer")&&(t.pageCount&&t.pageCount>0?(this.totalPages=t.pageCount,this.currentPage=t.lastViewedPage||1):(this.currentPage=1,this.totalPages=0),this.leftPanelThumbnails=[],this.thumbnailsGenerated=!1),this.cdr.detectChanges(),this.loadRecentFiles()}onSearchQueryChange(t){this.recentFilesSearchQuery=t}recentFilesSearchQuery="";onMenuAction(t){switch(t){case"translate":this.showRightPanel=!0,this.isRightPanelCollapsed=!1,this.pdfToolsPanelMenuId=this.pdfToolsPanelMenuId==="ai-translate"?null:"ai-translate";break;case"ai-features":this.showRightPanel=!0,this.isRightPanelCollapsed=!1,this.pdfToolsPanelMenuId=this.pdfToolsPanelMenuId==="ai-summary"?null:"ai-summary";break;default:console.warn("Unknown menu action:",t)}}onHeaderAction(t){switch(t){case"zoom-in":let e=Math.max(1,Math.round(this.zoomLevel*.1));this.zoomLevel=Math.min(2e3,this.zoomLevel+e);break;case"zoom-out":let i=Math.max(1,Math.round(this.zoomLevel*.1));this.zoomLevel=Math.max(1,this.zoomLevel-i);break;case"highlight":this.currentEditorTool==="highlight"?this.onToolbarAction("highlight"):this.openHighlightPropertiesModal();break;case"pen-drawing":this.onToolbarAction("pen");break;case"add-text":this.addText();break;case"add-shape":this.addShape();break;case"add-image":this.addImage();break;case"watermark":this.addWatermark();break;case"page-number":this.addPageNumber();break;case"signature":this.openSignatureSelector();break;case"pdf-analysis":this.openPdfAnalysisDashboard();break;case"toggle-analysis-panel":this.toggleAnalysisPanel();break;case"convert-ppt":case"convert-doc":case"convert-xls":case"convert-jpg":this.openFileConversionModal();break;case"rotate-left":this.onRotateAllPagesLeft();break;case"rotate-right":this.onRotateAllPagesRight();break;case"delete-page":this.deleteCurrentPage();break;case"upload":this.uploadCurrentPdf();break;case"download":this.exportCurrentPdf();break;case"merge-pdf":this.mergePdfFiles();break;case"encryption":this.openEncryptionModal();break;case"digital-id-add":this.openDigitalIdWizard();break;case"digital-id-manager":this.openDigitalIdManager();break;case"add-favorite":this.toggleFavorite();break;case"pdf-settings":this.isSettingsOpen=!this.isSettingsOpen;break;default:}}closeAllPanels(){this.pageReorderVisible=!1,this.fileConversionVisible=!1,this.securityVisible=!1,this.pdfAnalysisDashboardVisible=!1}openPdfAnalysisDashboard(t){return P(this,null,function*(){let e=t?.showDashboard!==!1,i=t?.reopenMenu;if(!this.pdfSrc||!this.currentFileName){this.showSnackbar("PDF \uD30C\uC77C\uC744 \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}if(this.pdfAnalysisInProgress){this.showSnackbar("PDF \uBD84\uC11D\uC774 \uC9C4\uD589 \uC911\uC785\uB2C8\uB2E4.");return}yield this.executePdfAnalysis({showDashboard:e,reopenMenu:i})})}executePdfAnalysis(t){return P(this,null,function*(){let e=t?.showDashboard!==!1,i=t?.reopenMenu;if(!this.pdfSrc||!this.currentFileName){this.showSnackbar("PDF \uD30C\uC77C\uC744 \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}try{this.closeAllPanels(),e&&(this.pdfAnalysisDashboardVisible=!0),this.pdfAnalysisInProgress=!0,this.pdfAnalysisProgress=0,this.pdfAnalysisStep="PDF \uBD84\uC11D \uC2DC\uC791...";let n=yield this.pdfAnalysisManager.analyzePdf(this.pdfSrc,this.currentFileName,(o,d)=>{this.pdfAnalysisProgress=o,this.pdfAnalysisStep=d},{targetPage:this.selectedAnalysisPage});this.pdfAnalysisData=n.summary,this.vectorData=n.vectorData,this.imageData=n.imageData,this.pdfTextStreamData=n.textStreamData,this.pdfAnalysisInProgress=!1,e&&setTimeout(()=>P(this,null,function*(){yield this.onCreateCombinedDocument()}),500),i&&setTimeout(()=>{this.pdfToolsPanelMenuId=i,this.showRightPanel=!0},500)}catch(n){console.error("\u274C [Ez-Reader] PDF \uBD84\uC11D \uC2E4\uD328:",n),this.showSnackbar("PDF \uBD84\uC11D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),this.pdfAnalysisInProgress=!1,e&&(this.pdfAnalysisDashboardVisible=!1)}})}onClosePdfAnalysisDashboard(){this.pdfAnalysisDashboardVisible=!1,this.pdfAnalysisData=null,this.vectorData=null,this.imageData=null,this.pdfTextStreamData=null}toggleAnalysisPanel(){if(!this.pdfAnalysisData){this.showSnackbar("\uBA3C\uC800 PDF \uBD84\uC11D\uC744 \uC2E4\uD589\uD574\uC8FC\uC138\uC694.");return}this.pdfAnalysisDashboardVisible=!this.pdfAnalysisDashboardVisible}onViewOriginalDocument(){if(!this.pdfSrc){this.showSnackbar("\uC6D0\uBCF8 PDF\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.currentTabView="viewer",this.pdfEditorVisible=!1,this.pdfAnalysisDashboardVisible=!1,this.tabBarComponent&&this.tabBarComponent.updateActiveTabView("viewer",null),this.showSnackbar("\uC6D0\uBCF8 PDF\uB97C \uD45C\uC2DC\uD569\uB2C8\uB2E4.")}onCreateCombinedDocument(){return P(this,null,function*(){if(!this.pdfAnalysisData){this.showSnackbar("\uBD84\uC11D \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(this.vectorData&&this.vectorData.pageDetails&&this.vectorData.pageDetails.length>0){let t=this.vectorData.pageDetails[0]}this.pdfTextStreamData,this.pdfAnalysisData;try{this.showSnackbar("\u{1F3A8} \uD63C\uD569 \uBB38\uC11C\uB97C \uC0DD\uC131\uD558\uB294 \uC911...");let t=this.totalPages,e=595,i=842;if(this.pdfAnalysisData&&this.pdfAnalysisData.pageWidth&&this.pdfAnalysisData.pageHeight)e=this.pdfAnalysisData.pageWidth,i=this.pdfAnalysisData.pageHeight;else if(this.pdfSrc)try{let d=yield this.docGenerator.getPdfPageSize(this.pdfSrc);d&&(e=d.width,i=d.height)}catch(d){console.warn("\u26A0\uFE0F [\uD63C\uD569\uBB38\uC11C] PDF \uD06C\uAE30 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9:",d)}let n=e>i?"\uAC00\uB85C":"\uC138\uB85C";this.pdfAnalysisData&&this.pdfAnalysisData.imageInfo&&(this.pdfAnalysisData.hasImages=!0,!this.pdfAnalysisData.imageInfo.totalImages&&this.pdfAnalysisData.imageInfo.images&&(this.pdfAnalysisData.imageInfo.totalImages=this.pdfAnalysisData.imageInfo.images.reduce((d,h)=>d+(h.images?.length||0),0)));let o=yield this.docGenerator.createCombinedDocument({debugLogger:this.debugLogger,pdfDocBuilder:this.pdfDocBuilder,vectorElementConverter:this.vectorElementConverter,pageBuilder:this.pageBuilder,loadedVectorData:this.vectorData,textStreamRawData:this.pdfTextStreamData,pdfAnalysisData:this.pdfAnalysisData,pdfPages:[],pageWidth:e,pageHeight:i,totalPages:0,currentPage:1,initializeNewDocument:this.initializeNewDocumentForCombined.bind(this),extractImagesFromPdf:this.extractImagesFromPdfForCombined.bind(this),addDebugLog:(d,h)=>{},groupTextItems:this.groupTextItemsForCombined.bind(this),closeAllModals:()=>{this.closeAllPanels()},cdr:this.cdr});o.success&&o.pdfPages?(this.pdfPages=o.pdfPages,this.totalPages=o.totalPages||0,this.currentPage=o.currentPage||1,this.currentTabView="viewer",this.pdfAnalysisDashboardVisible=!1,this.pdfEditorVisible=!0,this.tabBarComponent&&this.tabBarComponent.updateActiveTabView("viewer",null),this.showSnackbar(`\u2705 \uD63C\uD569 \uBB38\uC11C\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4! (${this.pdfPages.length}\uD398\uC774\uC9C0)`)):(console.error("\u274C [Ez-Reader] \uBB38\uC11C \uC0DD\uC131 \uC2E4\uD328"),this.showSnackbar("\uBB38\uC11C \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."))}catch(t){console.error("\u274C [Ez-Reader] \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC624\uB958:",t),this.showSnackbar("\uBB38\uC11C \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}onDocumentCreated(t){t.success?this.showSnackbar(`\uBB38\uC11C\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4! (${t.totalPages}\uCABD)`):this.showSnackbar("\uBB38\uC11C \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}onCreateImagePdf(t){return P(this,null,function*(){try{let e=URL.createObjectURL(t),i=this.totalPages;this.pdfPages=[],this.totalPages=0,this.currentPage=1,this.pdfEditorVisible=!0,this.pdfEditorData={pdfSrc:e,fileName:"\uC774\uBBF8\uC9C0_\uCD94\uCD9C.pdf",documentType:"viewer"},this.currentTabView="viewer",this.tabBarComponent&&this.tabBarComponent.updateActiveTabView("viewer",null),this.pdfAnalysisDashboardVisible=!1}catch(e){console.error("\u274C [Ez-Reader] \uC774\uBBF8\uC9C0 PDF \uC5F4\uAE30 \uC624\uB958:",e),this.showSnackbar("\uC774\uBBF8\uC9C0 PDF\uB97C \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}})}onClosePdfEditor(){this.pdfEditorVisible=!1,this.pdfEditorData=null,this.pdfSrc?this.currentTabView="viewer":this.currentTabView="home",this.showRightPanel=!1,this.isRightPanelCollapsed=!1,this.tabBarComponent&&this.tabBarComponent.updateActiveTabView(this.currentTabView,null)}onExportPdf(){this.showSnackbar("PDF \uB0B4\uBCF4\uB0B4\uAE30 \uAE30\uB2A5\uC740 \uC900\uBE44 \uC911\uC785\uB2C8\uB2E4.")}onExportPdfFromDashboard(){return P(this,null,function*(){if(this.pdfPages&&this.pdfPages.length>0)try{this.snackbar.showInfo("PDF\uB97C \uC0DD\uC131\uD558\uB294 \uC911...");let t=yield PDFLib.PDFDocument.create();for(let d of this.pdfPages){let h=d.width||595,_=d.height||842,C=t.addPage([h,_]);for(let x of d.elements)x.type==="text"&&C.drawText(x.text||"",{x:x.x,y:_-x.y-(x.height||12),size:x.fontSize||12,color:PDFLib.rgb(0,0,0)})}let e=yield t.save(),i=new Blob([e],{type:"application/pdf"}),n=URL.createObjectURL(i),o=document.createElement("a");o.href=n,o.download=`\uD3B8\uC9D1\uBB38\uC11C_${new Date().getTime()}.pdf`,o.click(),URL.revokeObjectURL(n),this.snackbar.showSuccess("PDF \uB0B4\uBCF4\uB0B4\uAE30\uAC00 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("\u274C PDF \uB0B4\uBCF4\uB0B4\uAE30 \uC2E4\uD328:",t),this.snackbar.showError("PDF \uB0B4\uBCF4\uB0B4\uAE30 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}else this.snackbar.showInfo('\uBA3C\uC800 "\uC0C8 PDF \uBB38\uC11C \uC0DD\uC131" \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC5EC \uD3B8\uC9D1 \uAC00\uB2A5\uD55C \uBB38\uC11C\uB97C \uB9CC\uB4E4\uC5B4\uC8FC\uC138\uC694.')})}onExportOriginalPdf(){if(!this.pdfSrc){this.snackbar.showWarning("\uC6D0\uBCF8 PDF\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{fetch(this.pdfSrc).then(t=>t.blob()).then(t=>{let e=URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=`\uC6D0\uBCF8PDF_${new Date().getTime()}.pdf`,i.click(),URL.revokeObjectURL(e),this.snackbar.showSuccess("\uC6D0\uBCF8 PDF \uB2E4\uC6B4\uB85C\uB4DC\uAC00 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}).catch(t=>{console.error("\u274C \uC6D0\uBCF8 PDF \uB2E4\uC6B4\uB85C\uB4DC \uC2E4\uD328:",t),this.snackbar.showError("\uC6D0\uBCF8 PDF \uB2E4\uC6B4\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")})}catch(t){console.error("\u274C \uC6D0\uBCF8 PDF \uB2E4\uC6B4\uB85C\uB4DC \uC2E4\uD328:",t),this.snackbar.showError("\uC6D0\uBCF8 PDF \uB2E4\uC6B4\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}}onSearchChange(t){this.searchQuery=t}onSearchButtonClick(){this.searchModalComponent?this.searchModalComponent.open():(console.warn("\u26A0\uFE0F SearchModalComponent\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.snackbar.showWarning("\uAC80\uC0C9 \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."))}onSearchModalSearch(t){try{this.pdfViewerService.find(t.query,{matchCase:t.caseSensitive,wholeWords:t.wholeWords,highlightAll:t.highlightAll,matchDiacritics:!1})}catch(e){console.error("\u274C \uAC80\uC0C9 \uC2E4\uD589 \uC2E4\uD328:",e)}}onSearchModalClose(){}onFindMatchesCountUpdate(t){console.log("\uAC80\uC0C9 \uACB0\uACFC \uC5C5\uB370\uC774\uD2B8:",t),this.totalSearchMatches=t.total||0,this.currentSearchIndex=t.current||0,this.topMenuBarComponent&&this.topMenuBarComponent.updateSearchResults(this.currentSearchIndex,this.totalSearchMatches),this.cdr.detectChanges()}onSearchNext(){this.totalSearchMatches!==0&&this.pdfViewerService.findNext()}onSearchPrevious(){this.totalSearchMatches!==0&&this.pdfViewerService.findPrevious()}onPdfLoaded(t){this.totalPages=t.pagesCount||0,this.tabBarComponent&&this.totalPages>0&&this.tabBarComponent.updateActiveTabPageInfo(this.totalPages,this.currentPage),this.currentFile&&this.totalPages>0&&this.updateDocumentPageCount(this.currentFile.name,this.totalPages,this.currentFile.size),this.generateThumbnails(),this.consumePendingToolAction(),this.setupAnnotationEditorListener(),this.cdr.detectChanges()}setupAnnotationEditorListener(){setTimeout(()=>{let t=this.PDFViewerApplication;if(t?.eventBus&&(t.eventBus.on("annotation-editor-event",e=>{console.log("\u{1F4DD} \uC5B4\uB178\uD14C\uC774\uC158 \uC5D0\uB514\uD130 \uC774\uBCA4\uD2B8:",e.type),e.type==="commit"&&this.markCurrentTabAsModified()}),t.pdfDocument?.annotationStorage)){let e=t.pdfDocument.annotationStorage.setValue.bind(t.pdfDocument.annotationStorage);t.pdfDocument.annotationStorage.setValue=(i,n)=>{e(i,n),console.log("\u{1F4DD} annotationStorage \uBCC0\uACBD:",i),this.markCurrentTabAsModified()}}},500)}consumePendingToolAction(){this.pendingToolAction&&(this.pendingToolAction==="ai-summary"?(this.showRightPanel=!0,this.isRightPanelCollapsed=!1,this.pdfToolsPanelMenuId="ai-summary",this.currentTabView="viewer"):this.pendingToolAction==="ai-translate"?(this.showRightPanel=!0,this.isRightPanelCollapsed=!1,this.pdfToolsPanelMenuId="ai-translate",this.currentTabView="viewer"):this.pendingToolAction==="conversion"?(this.currentTabView="viewer",this.currentActiveMenu="\uD30C\uC77C\uBCC0\uD658",this.router.navigateByUrl("/ez/conversion"),this.openFileConversionModal()):this.pendingToolAction==="merge"?(this.currentTabView="viewer",this.currentActiveMenu="\uAD6C\uC131",this.router.navigateByUrl("/ez/properties").then(()=>{this.pageReorderVisible=!0,this.showRightPanel=!1,this.mergePdfFiles()})):this.pendingToolAction==="organizer"?(this.currentTabView="organizer",this.currentActiveMenu="\uAD6C\uC131",this.pageReorderVisible=!0,this.showRightPanel=!1,this.isLeftPanelVisible=!1):this.pendingToolAction==="split"&&(this.currentTabView="organizer",this.currentActiveMenu="\uAD6C\uC131",this.pageReorderVisible=!0,this.showRightPanel=!1,this.isLeftPanelVisible=!1),this.pendingToolAction=null,this.cdr.detectChanges())}onPageChange(t){this.currentPage=t,this.leftPanelThumbnails.forEach(e=>{e.active=e.pageNumber===t}),this.tabBarComponent&&this.tabBarComponent.updateActiveTabPageInfo(this.totalPages,this.currentPage),this.cdr.detectChanges()}onPageRendered(t){let e=t.pageNumber;if(!e){console.warn("\u26A0\uFE0F pageNumber\uAC00 \uC5C6\uC74C");return}let i=e-1,n=this.pdfPages[i]?.elements||[];n.length!==0&&(console.log(`\u{1F4CC} \uD398\uC774\uC9C0 ${e}\uC5D0 ${n.length}\uAC1C \uC694\uC18C \uC788\uC74C, \uC624\uBC84\uB808\uC774 \uB80C\uB354\uB9C1 \uC2DC\uC791`),setTimeout(()=>{this.renderOverlayOnPage(e,n)},100))}renderOverlayOnPage(t,e){console.log(`\u{1F527} renderOverlayOnPage \uD638\uCD9C: \uD398\uC774\uC9C0 ${t}, \uC694\uC18C \uC218: ${e.length}`);let i=document.querySelector(`.page[data-page-number="${t}"]`);if(console.log("\u{1F527} \uD398\uC774\uC9C0 div \uCC3E\uAE30 \uACB0\uACFC:",i),!i){console.warn(`\u26A0\uFE0F \uD398\uC774\uC9C0 ${t}\uC758 div\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);let h=document.querySelectorAll(".page[data-page-number]");console.log("\u{1F527} \uC874\uC7AC\uD558\uB294 .page div\uB4E4:",Array.from(h).map(_=>_.getAttribute("data-page-number")));return}let n=i.querySelector(".custom-overlay-layer");n&&n.remove();let o=document.createElement("div");o.className="custom-overlay-layer",o.style.cssText=`
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 5;
    `;let d=this.zoomLevel/100;e.forEach(h=>{let _=this.createOverlayElement(h,d);_&&o.appendChild(_)}),i.appendChild(o),console.log(`\u2705 \uD398\uC774\uC9C0 ${t}\uC5D0 ${e.length}\uAC1C \uC624\uBC84\uB808\uC774 \uC694\uC18C \uB80C\uB354\uB9C1 \uC644\uB8CC`)}createOverlayElement(t,e){let i=document.createElement("div");i.className="overlay-element",i.dataset.elementId=t.id,this.selectedElement?.id===t.id&&i.classList.add("selected");let n=t.x*e,o=t.y*e,d=t.width*e,h=t.height*e;return i.style.cssText=`
      position: absolute;
      left: ${n}px;
      top: ${o}px;
      width: ${d}px;
      height: ${h}px;
      pointer-events: auto;
      cursor: move;
      transition: none;
    `,i.addEventListener("click",_=>{_.stopPropagation(),this.onElementClick(t),this.cdr.detectChanges()}),this.addDragFunctionality(i,t,e),t.type==="text"&&i.addEventListener("dblclick",_=>{_.stopPropagation(),this.startInlineEdit(i,t,e)}),t.type==="shape"&&i.addEventListener("dblclick",_=>{_.stopPropagation(),this.openShapePropertiesModal(t)}),t.type==="text"?i.innerHTML=this.createTextElementHTML(t,e):t.type==="shape"?i.innerHTML=this.createShapeElementHTML(t,d,h):t.type==="image"?i.innerHTML=this.createImageElementHTML(t,d,h):t.type==="watermark"&&(i.innerHTML=this.createWatermarkElementHTML(t,e),i.style.pointerEvents="none"),i}createWatermarkElementHTML(t,e){let i=(t.fontSize||30)*e,n=t.fontFamily||"\uAD74\uB9BC\uCCB4",o=t.fontWeight||"normal",d=t.fontStyle||"normal",h=t.color||"#000000",_=t.opacity!==void 0?t.opacity:.3;return`
      <div style="
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%) rotate(${t.rotation||0}deg);
        font-family: ${n};
        font-size: ${i}px;
        font-weight: ${o};
        font-style: ${d};
        color: ${h};
        opacity: ${_};
        white-space: nowrap;
        pointer-events: none;
        user-select: none;
      ">${t.text||""}</div>
    `}addDragFunctionality(t,e,i){let n=!1,o=0,d=0,h=0,_=0,C=w=>{t.classList.contains("editing")||(w.preventDefault(),w.stopPropagation(),n=!0,o=w.clientX,d=w.clientY,h=parseFloat(t.style.left)||0,_=parseFloat(t.style.top)||0,t.style.cursor="grabbing",t.style.zIndex="100",document.addEventListener("mousemove",x),document.addEventListener("mouseup",v))},x=w=>{if(!n)return;let E=w.clientX-o,z=w.clientY-d;t.style.left=`${h+E}px`,t.style.top=`${_+z}px`},v=w=>{if(!n)return;n=!1,t.style.cursor="move",t.style.zIndex="",document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",v);let E=parseFloat(t.style.left)/i,z=parseFloat(t.style.top)/i;this.updateElementPosition(e.id,E,z)};t.addEventListener("mousedown",C)}startInlineEdit(t,e,i){t.classList.add("editing"),t.style.cursor="text";let n=t.querySelector(".text-element");if(!n)return;n.contentEditable="true",n.style.outline="2px solid #007acc",n.style.background="white",n.focus();let o=document.createRange();o.selectNodeContents(n);let d=window.getSelection();d?.removeAllRanges(),d?.addRange(o);let h=()=>{n.contentEditable="false",n.style.outline="",n.style.background="rgba(255, 255, 255, 0.9)",t.classList.remove("editing"),t.style.cursor="move";let C=n.innerText||n.textContent||"";this.updateElementText(e.id,C),n.removeEventListener("blur",h),n.removeEventListener("keydown",_)},_=C=>{C.key==="Escape"?(n.innerText=e.text||"",h()):C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),h())};n.addEventListener("blur",h),n.addEventListener("keydown",_)}updateElementPosition(t,e,i){let n=this.currentPage-1;if(n<0||n>=this.pdfPages.length)return;let o=this.pdfPages[n].elements,d=o.findIndex(h=>h.id===t);d!==-1&&(o[d].x=e,o[d].y=i,console.log(`\u2705 \uC694\uC18C \uC704\uCE58 \uC5C5\uB370\uC774\uD2B8: (${e.toFixed(1)}, ${i.toFixed(1)})`),this.selectedElement?.id===t&&(this.selectedElement.x=e,this.selectedElement.y=i))}updateElementText(t,e){let i=this.currentPage-1;if(i<0||i>=this.pdfPages.length)return;let n=this.pdfPages[i].elements,o=n.findIndex(d=>d.id===t);o!==-1&&(n[o].text=e,console.log(`\u2705 \uD14D\uC2A4\uD2B8 \uC5C5\uB370\uC774\uD2B8: "${e}"`),this.selectedElement?.id===t&&(this.selectedElement.text=e),this.cdr.detectChanges())}openShapePropertiesModal(t){this.editingShapeElement=t,this.shapePropertiesData={fillColor:t.fillColor||"#4285f4",strokeColor:t.strokeColor||t.borderColor||"#1967d2",strokeWidth:t.strokeWidth||t.borderWidth||2,opacity:t.opacity!==void 0?t.opacity:.8,width:t.width||200,height:t.height||100},this.showShapePropertiesModal=!0,this.cdr.detectChanges(),console.log("\u270F\uFE0F \uB3C4\uD615 \uC18D\uC131 \uD3B8\uC9D1 \uBAA8\uB2EC \uC5F4\uB9BC:",t.id)}onShapePropertiesApply(){if(!this.editingShapeElement)return;let t=this.editingShapeElement.id,e=this.currentPage-1;if(e<0||e>=this.pdfPages.length)return;let i=this.pdfPages[e].elements,n=i.findIndex(o=>o.id===t);if(n!==-1){i[n].fillColor=this.shapePropertiesData.fillColor,i[n].strokeColor=this.shapePropertiesData.strokeColor,i[n].borderColor=this.shapePropertiesData.strokeColor,i[n].strokeWidth=this.shapePropertiesData.strokeWidth,i[n].borderWidth=this.shapePropertiesData.strokeWidth,i[n].opacity=this.shapePropertiesData.opacity,i[n].width=this.shapePropertiesData.width,i[n].height=this.shapePropertiesData.height,console.log("\u2705 \uB3C4\uD615 \uC18D\uC131 \uC5C5\uB370\uC774\uD2B8 \uC644\uB8CC:",this.shapePropertiesData),this.selectedElement?.id===t&&Object.assign(this.selectedElement,{fillColor:this.shapePropertiesData.fillColor,strokeColor:this.shapePropertiesData.strokeColor,borderColor:this.shapePropertiesData.strokeColor,strokeWidth:this.shapePropertiesData.strokeWidth,borderWidth:this.shapePropertiesData.strokeWidth,opacity:this.shapePropertiesData.opacity,width:this.shapePropertiesData.width,height:this.shapePropertiesData.height});let o=this.currentPage-1,d=this.pdfPages[o]?.elements||[];this.renderOverlayOnPage(this.currentPage,d)}this.showShapePropertiesModal=!1,this.editingShapeElement=null,this.cdr.detectChanges()}onShapePropertiesCancel(){this.showShapePropertiesModal=!1,this.editingShapeElement=null,this.cdr.detectChanges(),console.log("\u274C \uB3C4\uD615 \uC18D\uC131 \uD3B8\uC9D1 \uCDE8\uC18C")}createTextElementHTML(t,e){return`
      <div class="text-element" style="
        width: 100%;
        height: 100%;
        padding: 4px;
        white-space: pre-wrap;
        word-break: break-word;
        background: rgba(255, 255, 255, 0.9);
        border: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: 2px;
        font-size: ${(t.fontSize||14)*e}px;
        font-family: ${t.fontFamily||"sans-serif"};
        font-weight: ${t.fontWeight||"normal"};
        font-style: ${t.fontStyle||"normal"};
        color: ${t.color||"#000000"};
        text-align: ${t.textAlign||"left"};
        box-sizing: border-box;
        overflow: hidden;
      ">${t.text||""}</div>
    `}createShapeElementHTML(t,e,i){let n=t.strokeColor||t.borderColor||"#000000",o=t.strokeWidth||t.borderWidth||2,d=t.fillColor||"transparent",h="";switch(t.shapeType){case"rectangle":h=`
          <rect width="${e}" height="${i}"
                stroke="${n}" stroke-width="${o}"
                fill="${d}" />
        `;break;case"circle":let _=Math.min(e,i)/2;h=`
          <circle cx="${e/2}" cy="${i/2}" r="${_}"
                  stroke="${n}" stroke-width="${o}"
                  fill="${d}" />
        `;break;case"line":h=`
          <line x1="0" y1="0" x2="${e}" y2="${i}"
                stroke="${n}" stroke-width="${o}" />
        `;break;default:h=`
          <rect width="${e}" height="${i}"
                stroke="${n}" stroke-width="${o}"
                fill="${d}" />
        `}return`
      <svg class="shape-element" viewBox="0 0 ${e} ${i}" 
           style="width: 100%; height: 100%;">
        ${h}
      </svg>
    `}createImageElementHTML(t,e,i){return`
      <img src="${t.src}" 
           style="width: 100%; height: 100%; object-fit: contain;"
           alt="PDF \uC774\uBBF8\uC9C0 \uC694\uC18C" />
    `}refreshAllOverlays(){this.pdfPages.forEach((t,e)=>{t.elements&&t.elements.length>0&&this.renderOverlayOnPage(e+1,t.elements)})}onZoomChange(t){this.zoomLevel=t,setTimeout(()=>{this.refreshAllOverlays()},200)}onToolbarAction(t){switch(t){case"zoom-in":let e=Math.max(1,Math.round(this.zoomLevel*.1));this.zoomLevel=Math.min(this.zoomLevel+e,2e3),this.currentEditorTool="zoom-in",this.snackbar.showInfo(`\uD655\uB300: ${this.zoomLevel}%`),this.cdr.detectChanges();break;case"zoom-out":let i=Math.max(1,Math.round(this.zoomLevel*.1));this.zoomLevel=Math.max(this.zoomLevel-i,1),this.currentEditorTool="zoom-out",this.snackbar.showInfo(`\uCD95\uC18C: ${this.zoomLevel}%`),this.cdr.detectChanges();break;case"highlight":let n=this.currentEditorTool==="highlight";this.currentEditorTool=n?null:"highlight",n?(this.snackbar.showInfo("\uD558\uC774\uB77C\uC774\uD2B8 \uBAA8\uB4DC \uBE44\uD65C\uC131\uD654"),this.cdr.detectChanges(),setTimeout(()=>{this.deactivatePdfEditor()},100)):(this.snackbar.showInfo("\uD558\uC774\uB77C\uC774\uD2B8 \uBAA8\uB4DC \uD65C\uC131\uD654 - \uD14D\uC2A4\uD2B8\uB97C \uC120\uD0DD\uD558\uC138\uC694"),this.cdr.detectChanges(),setTimeout(()=>{this.activatePdfEditor("highlight")},200));break;case"shape":this.editorConfig.showStampEditor=!this.editorConfig.showStampEditor,this.currentEditorTool=this.editorConfig.showStampEditor?"shape":null,this.editorConfig.showStampEditor?(this.editorConfig.showHighlightEditor=!1,this.editorConfig.showDrawEditor=!1,this.snackbar.showInfo("\uB3C4\uD615 \uADF8\uB9AC\uAE30 \uBAA8\uB4DC \uD65C\uC131\uD654 - \uD074\uB9AD\uD558\uC5EC \uB3C4\uD615\uC744 \uCD94\uAC00\uD558\uC138\uC694"),setTimeout(()=>{this.activatePdfEditor("stamp")},100)):(this.snackbar.showInfo("\uB3C4\uD615 \uADF8\uB9AC\uAE30 \uBAA8\uB4DC \uBE44\uD65C\uC131\uD654"),this.deactivatePdfEditor());break;case"pen":this.isDrawingMode=!this.isDrawingMode,this.currentEditorTool=this.isDrawingMode?"pen":null,this.isDrawingMode?(this.showDrawingPanel=!0,this.isEraserMode=!1,this.snackbar.showInfo("\uD39C \uADF8\uB9AC\uAE30 \uBAA8\uB4DC \uD65C\uC131\uD654 - \uB4DC\uB798\uADF8\uD558\uC5EC \uADF8\uB9BC\uC744 \uADF8\uB9AC\uC138\uC694"),this.cdr.detectChanges(),this.activateDrawEditor()):this.closeDrawingMode();break;case"text":let o=this.currentEditorTool==="text";this.currentEditorTool=o?null:"text",o?(this.snackbar.showInfo("\uD14D\uC2A4\uD2B8 \uCD94\uAC00 \uBAA8\uB4DC \uBE44\uD65C\uC131\uD654"),this.cdr.detectChanges(),setTimeout(()=>{this.deactivatePdfEditor("freetext")},100)):(this.snackbar.showInfo("\uD14D\uC2A4\uD2B8 \uCD94\uAC00 \uBAA8\uB4DC \uD65C\uC131\uD654 - \uD074\uB9AD\uD558\uC5EC \uD14D\uC2A4\uD2B8\uB97C \uCD94\uAC00\uD558\uC138\uC694"),this.cdr.detectChanges(),setTimeout(()=>{this.activatePdfEditor("freetext")},200));break}this.cdr.detectChanges()}activatePdfEditor(t){try{let e=()=>{let n={highlight:["button#primaryEditorHighlight","button#editorHighlight",'button[title*="\uAC15\uC870"]','button[title*="Highlight"]','[data-l10n-id="pdfjs-editor-highlight-button"]'],ink:["button#primaryEditorInk","button#editorInk",'button[title*="\uADF8\uB9AC\uAE30"]','button[title*="Draw"]','[data-l10n-id="pdfjs-editor-ink-button"]'],stamp:["button#primaryEditorStamp","button#editorStamp",'button[title*="\uC2A4\uD0EC\uD504"]','button[title*="Stamp"]','[data-l10n-id="pdfjs-editor-stamp-button"]'],freetext:["button#primaryEditorFreeText","button#editorFreeText",'button[title*="\uD14D\uC2A4\uD2B8"]','button[title*="Text"]','[data-l10n-id="pdfjs-editor-freetext-button"]']}[t]||[];for(let h of n){let _=document.querySelector(h);if(_&&_.offsetParent!==null)return _.click(),!0}let o=Array.from(document.querySelectorAll("button")),d=o.filter(h=>{let _=(h.textContent||"").toLowerCase(),C=(h.title||"").toLowerCase(),x=(h.getAttribute("aria-label")||"").toLowerCase(),v=h.id;return v==="primaryEditorHighlight"||v==="editorHighlight"||v.includes("highlight")||_.includes("highlight")||C.includes("highlight")||C.includes("\uAC15\uC870")||x.includes("highlight")});for(let h of o){let _=(h.textContent||"").toLowerCase(),C=(h.title||"").toLowerCase(),x=(h.getAttribute("aria-label")||"").toLowerCase();if(_.includes("highlight")||C.includes("highlight")||x.includes("highlight"))return h.click(),!0}return!1};if(e()){this.snackbar.showInfo("\uD558\uC774\uB77C\uC774\uD2B8 \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD14D\uC2A4\uD2B8\uB97C \uC120\uD0DD\uD558\uC138\uC694.");return}setTimeout(()=>{if(e())this.snackbar.showInfo("\uD558\uC774\uB77C\uC774\uD2B8 \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD14D\uC2A4\uD2B8\uB97C \uC120\uD0DD\uD558\uC138\uC694.");else{console.warn("\u26A0\uFE0F PDF \uBDF0\uC5B4\uC758 \uD3B8\uC9D1 \uBC84\uD2BC\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let i=Array.from(document.querySelectorAll("button")).filter(n=>n.offsetParent!==null).map(n=>({id:n.id,class:n.className,title:n.title,text:n.textContent?.trim().substring(0,30),ariaLabel:n.getAttribute("aria-label")}));this.snackbar.showInfo("PDF \uBDF0\uC5B4 \uC0C1\uB2E8\uC758 \uD558\uC774\uB77C\uC774\uD2B8 \uBC84\uD2BC\uC744 \uC9C1\uC811 \uD074\uB9AD\uD558\uC138\uC694.")}},500)}catch(e){console.error("\u274C PDF \uD3B8\uC9D1 \uBAA8\uB4DC \uD65C\uC131\uD654 \uC2E4\uD328:",e),this.snackbar.showError("\uD3B8\uC9D1 \uBAA8\uB4DC \uD65C\uC131\uD654\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}deactivatePdfEditor(t="highlight"){try{let e=this.PDFViewerApplication;e&&(e.pdfViewer&&(e.pdfViewer.annotationEditorMode=0),e.eventBus&&e.eventBus.dispatch("switchannotationeditormode",{source:this,mode:0})),setTimeout(()=>{(()=>{let o={highlight:["button#primaryEditorHighlight","button#editorHighlight",'button[title*="\uAC15\uC870"]','button[title*="Highlight"]','[data-l10n-id="pdfjs-editor-highlight-button"]'],ink:["button#primaryEditorInk","button#editorInk",'button[title*="\uADF8\uB9AC\uAE30"]','button[title*="Draw"]','[data-l10n-id="pdfjs-editor-ink-button"]'],stamp:["button#primaryEditorStamp","button#editorStamp",'button[title*="\uC2A4\uD0EC\uD504"]','button[title*="Stamp"]','[data-l10n-id="pdfjs-editor-stamp-button"]'],freetext:["button#primaryEditorFreeText","button#editorFreeText",'button[title*="\uD14D\uC2A4\uD2B8"]','button[title*="Text"]','[data-l10n-id="pdfjs-editor-freetext-button"]']}[t]||[];for(let h of o){let _=document.querySelector(h);if(_&&_.offsetParent!==null)return _.click(),!0}let d=Array.from(document.querySelectorAll("button"));for(let h of d){let _=(h.textContent||"").toLowerCase(),C=(h.title||"").toLowerCase(),x=(h.getAttribute("aria-label")||"").toLowerCase(),v=h.id;if(v==="primaryEditorHighlight"||v==="editorHighlight"||_.includes("highlight")||C.includes("highlight")||C.includes("\uAC15\uC870")||x.includes("highlight"))return h.click(),!0}return!1})()},150)}catch(e){console.error("\u274C PDF \uD3B8\uC9D1 \uBAA8\uB4DC \uBE44\uD65C\uC131\uD654 \uC2E4\uD328:",e)}}updatePdfViewerInfo(t,e,i){this.pdfViewerScale=t}onPdfViewerScroll(t){}onSidebarClose(){}onThumbnailClick(t){this.currentPage=t.pageNumber,this.leftPanelThumbnails.forEach(e=>{e.active=e.pageNumber===t.pageNumber}),this.cdr.detectChanges()}onPropertiesClose(){}onAiTranslateClose(){this.pdfToolsPanelMenuId=null,this.closeRightPanel()}onTranslationComplete(t){this.showSnackbar("\uBC88\uC5ED\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}onAiFeaturesClose(){this.pdfToolsPanelMenuId=null,this.closeRightPanel()}onPdfContentClose(){}onBookmarkClick(t){this.currentPage=t.page||1}closePageReorderPanel(){this.pageReorderVisible=!1,this.selectedPagesInReorder=[],this.currentActiveMenu="\uD648"}onPageSelectedInReorder(t){this.selectedPagesInReorder=t}onPageReorderComplete(t){return P(this,null,function*(){this.showSnackbar("\uD398\uC774\uC9C0 \uC21C\uC11C\uAC00 \uBCC0\uACBD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")})}onDeletePages(t){return P(this,null,function*(){})}onConfirmDelete(t){return P(this,null,function*(){try{if(!this.pdfSrc){this.showSnackbar("PDF \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let e=t.pages.length,i=yield this.pdfPageDeleterService.deletePages(this.pdfSrc,t.pages);this.pdfSrc&&this.pdfSrc.startsWith("blob:")&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=i,this.totalPages-=e,this.cdr.detectChanges(),t.callback&&t.callback(),this.showSnackbar(`${e}\uAC1C \uD398\uC774\uC9C0 \uC0AD\uC81C \uC644\uB8CC (\uB0A8\uC740 \uD398\uC774\uC9C0: ${this.totalPages})`)}catch(e){console.error("Error deleting pages:",e),this.showSnackbar("\uD398\uC774\uC9C0 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}printPdf(){if(!this.pdfSrc){this.showSnackbar("\uC778\uC1C4\uD560 PDF\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.pdfPages&&this.pdfPages.length>0&&this.pdfPages.some(e=>e.elements&&e.elements.length>0)?this.printEditedPdf():window.print()}printEditedPdf(){return P(this,null,function*(){if(!this.pdfPages||this.pdfPages.length===0){this.showSnackbar("\uD3B8\uC9D1\uB41C \uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{let t=this.currentFileName||"document.pdf";this.snackbar.showInfo("\uC778\uC1C4\uC6A9 PDF\uB97C \uC0DD\uC131\uD558\uB294 \uC911...");let e=yield this.pdfExportFullService.generatePdfBytes(this.pdfPages,{fileName:t.replace(".pdf","_print"),showDebugModal:!1},this.cdr);if(!e){this.snackbar.showError("PDF \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.");return}let i=new Blob([e],{type:"application/pdf"}),n=URL.createObjectURL(i),o=document.createElement("iframe");o.style.display="none",o.src=n,document.body.appendChild(o),o.onload=()=>{setTimeout(()=>{try{let d=o.contentWindow;if(!d)throw new Error("iframe contentWindow\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let h=()=>{try{document.body.removeChild(o),URL.revokeObjectURL(n)}catch(C){console.error("\uB9AC\uC18C\uC2A4 \uC815\uB9AC \uC2E4\uD328:",C)}};d.addEventListener("afterprint",h);let _=setTimeout(h,3e5);d.print(),this.snackbar.showSuccess("\uC778\uC1C4 \uB2E4\uC774\uC5BC\uB85C\uADF8\uAC00 \uC5F4\uB838\uC2B5\uB2C8\uB2E4.")}catch(d){console.error("\uC778\uC1C4 \uC2E4\uD589 \uC2E4\uD328:",d),document.body.removeChild(o),URL.revokeObjectURL(n),this.snackbar.showWarning("\uC778\uC1C4\uB97C \uC2E4\uD589\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. PDF\uB97C \uB2E4\uC6B4\uB85C\uB4DC\uD569\uB2C8\uB2E4.");let h=new Blob([e],{type:"application/pdf"}),_=URL.createObjectURL(h),C=document.createElement("a");C.href=_,C.download=`${t.replace(".pdf","_print")}.pdf`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(_)}},500)},o.onerror=()=>{document.body.removeChild(o),URL.revokeObjectURL(n),this.snackbar.showError("PDF \uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}catch(t){console.error("Error printing edited PDF:",t),this.snackbar.showError("\uC778\uC1C4 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}onEmailPdf(){return P(this,null,function*(){if(!this.pdfSrc&&!this.currentFileName){this.snackbar.showWarning("\uC804\uC1A1\uD560 \uBB38\uC11C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let t=this.currentFileName||"document.pdf";try{if(navigator.share){let e=null;if(this.pdfSrc)e=yield(yield fetch(this.pdfSrc)).blob();else if(this.pdfPages&&this.pdfPages.length>0){this.snackbar.showInfo("\uBB38\uC11C\uB97C \uC900\uBE44\uD558\uB294 \uC911..."),this.snackbar.showWarning("\uD3B8\uC9D1 \uC911\uC778 \uBB38\uC11C\uB294 \uBA3C\uC800 \uC800\uC7A5\uD574\uC8FC\uC138\uC694.");return}if(!e){this.snackbar.showError("\uACF5\uC720\uD560 PDF \uD30C\uC77C\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let i=new File([e],t,{type:"application/pdf"});yield navigator.share({title:t,text:`${t} \uBB38\uC11C\uB97C \uACF5\uC720\uD569\uB2C8\uB2E4.`,files:[i]}),this.snackbar.showSuccess("\uBB38\uC11C\uAC00 \uACF5\uC720\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}else{console.warn("Web Share API \uBBF8\uC9C0\uC6D0 - mailto\uB85C \uD3F4\uBC31");let e=encodeURIComponent(`${t} \uACF5\uC720`),i=encodeURIComponent(`\uC548\uB155\uD558\uC138\uC694,

\uCCA8\uBD80\uB41C PDF \uBB38\uC11C\uB97C \uD655\uC778\uD574\uC8FC\uC138\uC694.

\uBB38\uC11C\uBA85: ${t}

* \uCC38\uACE0: \uBE0C\uB77C\uC6B0\uC800\uAC00 \uD30C\uC77C \uACF5\uC720\uB97C \uC9C0\uC6D0\uD558\uC9C0 \uC54A\uC544 PDF\uB294 \uC218\uB3D9\uC73C\uB85C \uCCA8\uBD80\uD574\uC8FC\uC138\uC694.

\uAC10\uC0AC\uD569\uB2C8\uB2E4.`),n=`mailto:?subject=${e}&body=${i}`;window.location.href=n,this.snackbar.showInfo("\uC774\uBA54\uC77C \uD074\uB77C\uC774\uC5B8\uD2B8\uAC00 \uC5F4\uB838\uC2B5\uB2C8\uB2E4. PDF\uB294 \uC218\uB3D9\uC73C\uB85C \uCCA8\uBD80\uD574\uC8FC\uC138\uC694.")}}catch(e){e.name==="AbortError"||(console.error("\uBB38\uC11C \uACF5\uC720 \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C \uACF5\uC720\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."))}})}onMenuChanged(t){if(this.currentActiveMenu==="\uD3B8\uC9D1"&&t!=="\uD3B8\uC9D1"&&this.pdfEditorVisible&&this.pdfSrc){this.dialog.open(ri,{data:{title:"\uD3B8\uC9D1 \uBAA8\uB4DC \uC885\uB8CC",message:"\uD3B8\uC9D1 \uBAA8\uB4DC\uB97C \uC885\uB8CC\uD558\uACE0 \uC6D0\uBCF8 PDF\uB85C \uB3CC\uC544\uAC00\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",confirmText:"\uD655\uC778",cancelText:"\uCDE8\uC18C",type:"warning"},width:"400px"}).afterClosed().subscribe(i=>{i&&this.proceedMenuChange(t)});return}this.proceedMenuChange(t)}proceedMenuChange(t){this.currentActiveMenu=t;let e={\uD648:"recent",\uBDF0\uC5B4:"viewer",\uAD6C\uC131:"properties",\uBCF4\uC548:"security"};e[t]&&this.router.navigate([e[t]],{relativeTo:this.route}),t==="\uAD6C\uC131"&&this.pdfSrc?(this.currentTabView="organizer",this.showRightPanel=!1,this.isLeftPanelVisible=!1,this.initOrganizerView()):t!=="\uAD6C\uC131"&&this.currentTabView==="organizer"&&(this.currentTabView="viewer")}onDragEnter(t){t.preventDefault(),t.stopPropagation(),this.dragCounter++,this.isDragOver=!0}onDragOver(t){t.preventDefault(),t.stopPropagation()}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.dragCounter--,this.dragCounter===0&&(this.isDragOver=!1)}onDrop(t){return P(this,null,function*(){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1,this.dragCounter=0;let e=t.dataTransfer?.files;if(e&&e.length>0){let i=e[0];i.type==="application/pdf"?yield this.onFileSelected(i):this.showSnackbar("PDF \uD30C\uC77C\uB9CC \uC5C5\uB85C\uB4DC\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.")}})}showSnackbar(t){this.snackbarMessage=t,this.snackbarVisible=!0,setTimeout(()=>{this.snackbarVisible=!1},3e3)}onCreateTextEditor(){}onCreateSentenceOverlay(){}onSaveOverlayedPdf(){}onDownloadModifiedPdf(){this.saveDocument()}onDownloadPdf(){return P(this,null,function*(){if(!this.pdfSrc){this.showSnackbar("\uB2E4\uC6B4\uB85C\uB4DC\uD560 PDF\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.pdfPages&&this.pdfPages.length>0&&this.pdfPages.some(e=>e.elements&&e.elements.length>0)?yield this.downloadEditedPdf():yield this.downloadOriginalPdf()})}downloadEditedPdf(){return P(this,null,function*(){let t=this.currentFileName||"document.pdf";try{yield this.pdfExportFullService.exportToPdf(this.pdfPages,{fileName:t.replace(".pdf",""),showDebugModal:!1},this.cdr),this.showSnackbar(`\uD3B8\uC9D1\uB41C PDF\uAC00 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4: ${t}`)}catch(e){console.error("\u274C \uD3B8\uC9D1\uBCF8 PDF \uB2E4\uC6B4\uB85C\uB4DC \uC2E4\uD328:",e),this.showSnackbar("PDF \uB2E4\uC6B4\uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}downloadOriginalPdf(){return P(this,null,function*(){if(!this.pdfSrc){this.showSnackbar("\uC6D0\uBCF8 PDF\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let t=this.currentFileName||"document.pdf";this.pdfPageManager.downloadPdf(this.pdfSrc,t),this.showSnackbar(`${t} \uB2E4\uC6B4\uB85C\uB4DC \uC2DC\uC791`)})}onGeometryDrawingClose(){}onShapeSelected(t){let e=t?.shapeType;if(!e){console.warn("\u26A0\uFE0F \uB3C4\uD615 \uD0C0\uC785\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.pdfPages.length===0&&this.totalPages>0&&(this.pdfPages=Array.from({length:this.totalPages},(i,n)=>({pageNumber:n+1,elements:[]})));try{let i=this.shapeCreatorService.createShape(e,{centerOnPage:!0,pageWidth:595,pageHeight:842}),n=this.currentPage-1;if(n>=0&&n<this.pdfPages.length){this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,n,i),this.selectedElement=i,console.log("\u2705 \uB3C4\uD615 \uC694\uC18C \uCD94\uAC00 \uC644\uB8CC:",e),console.log("\u{1F4C4} \uD604\uC7AC \uD398\uC774\uC9C0 \uC694\uC18C\uB4E4:",this.pdfPages[n].elements),this.renderOverlayOnPage(this.currentPage,this.pdfPages[n].elements),this.overlayManager?.addElement({id:i.id,type:"shape",pageNumber:this.currentPage,x:i.x,y:i.y,width:i.width,height:i.height,data:{shapeType:e,fill:i.fill||"#3B82F6",stroke:i.stroke||"#1E40AF",strokeWidth:i.strokeWidth||2}}),this.markCurrentTabAsModified(),this.cdr.detectChanges();let o=this.shapeCreatorService.getShapeTypeName(e);this.showSnackbar(`${o}\uC774(\uAC00) \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}else console.warn("\u26A0\uFE0F \uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uD398\uC774\uC9C0 \uC778\uB371\uC2A4:",n),this.showSnackbar("\uD398\uC774\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}catch(i){console.error("\u274C \uB3C4\uD615 \uC0DD\uC131 \uC2E4\uD328:",i),this.showSnackbar("\uB3C4\uD615 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}finally{this.showShapeModal=!1}}onTextEditorClose(){}onTextEditorsChanged(t){}onApplyTextsToDocument(t){}closeImageInserter(){}onImageInserted(t){}onWatermarkApplied(t){}onPenDrawingApplied(){}onStrokeCompleted(t){}onSentenceGroupsChanged(t){}onFileInputChange(t){let e=t.target;e.files&&e.files.length>0&&this.onFileSelected(e.files[0])}onDeleteRecentFile(t){return P(this,null,function*(){try{let e=this.tabBarComponent?.findTabByName(t.name),i=!!e,n=i?`

\u26A0\uFE0F \uC774 \uBB38\uC11C\uB294 \uD604\uC7AC \uD0ED\uC5D0\uC11C \uC5F4\uB824\uC788\uC2B5\uB2C8\uB2E4. \uC0AD\uC81C \uC2DC \uD0ED\uB3C4 \uD568\uAED8 \uB2EB\uD799\uB2C8\uB2E4.`:"";if(!(yield it(`'${t.name}' \uBB38\uC11C\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?${n}`)))return;let d=yield this.indexedDbService.searchDocumentsByTitle(t.name);if(d.length===0){console.warn("\uC0AD\uC81C\uD560 \uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C"),this.snackbar.showWarning("\uC0AD\uC81C\uD560 \uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let h=d[0];yield this.indexedDbService.deleteDocument(h.id),i&&e&&this.tabBarComponent.closeTab(e.id),yield this.loadRecentFiles(),this.snackbar.showSuccess(`'${t.name}' \uBB38\uC11C\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}catch(e){console.error("\u274C \uBB38\uC11C \uC0AD\uC81C \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}onFavoriteToggle(t){return P(this,null,function*(){try{if(!t.id){console.warn("\uD30C\uC77C ID\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let e=yield this.indexedDbService.getDocumentById(t.id);if(!e){console.warn("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.snackbar.showWarning("\uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}e.isFavorite=t.isFavorite,yield this.indexedDbService.saveDocument(e),yield this.loadRecentFiles();let i=t.isFavorite?"\uC990\uACA8\uCC3E\uAE30\uC5D0 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.":"\uC990\uACA8\uCC3E\uAE30\uC5D0\uC11C \uC81C\uAC70\uB418\uC5C8\uC2B5\uB2C8\uB2E4.";this.snackbar.showSuccess(i)}catch(e){console.error("\u274C \uC990\uACA8\uCC3E\uAE30 \uC5C5\uB370\uC774\uD2B8 \uC2E4\uD328:",e),this.snackbar.showError("\uC990\uACA8\uCC3E\uAE30 \uC5C5\uB370\uC774\uD2B8\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}onTranslationCompleted(t){t&&t.length>0&&this.onTranslationComplete(t[0])}onPdfRefresh(t){}closeSnackbar(){this.snackbarVisible=!1}confirmModalVisible=!1;confirmModalTitle="";confirmModalMessage="";confirmModalCallback;closeConfirmModal(){this.confirmModalVisible=!1,this.confirmModalCallback=void 0}confirmModalAction(){this.confirmModalCallback&&this.confirmModalCallback(),this.closeConfirmModal()}thumbnailsGenerated=!1;toggleLeftPanel(){this.isLeftPanelVisible=!this.isLeftPanelVisible}onLeftPanelExpanded(t){t&&!this.thumbnailsGenerated&&this.pdfSrc&&(this.generateThumbnails(),this.thumbnailsGenerated=!0)}onZoomInFromPanel(){let t=Math.max(1,Math.round(this.zoomLevel*.1));this.zoomLevel=Math.min(this.zoomLevel+t,2e3),this.cdr.detectChanges()}onZoomOutFromPanel(){let t=Math.max(1,Math.round(this.zoomLevel*.1));this.zoomLevel=Math.max(this.zoomLevel-t,1),this.cdr.detectChanges()}generateThumbnails(){return P(this,null,function*(){if(!this.pdfSrc){this.leftPanelThumbnails=[{id:1,title:"\uD398\uC774\uC9C0 1",pageNumber:1,active:!0,icon:"\u{1F4C4}"},{id:2,title:"\uD398\uC774\uC9C0 2",pageNumber:2,active:!1,icon:"\u{1F4C4}"},{id:3,title:"\uD398\uC774\uC9C0 3",pageNumber:3,active:!1,icon:"\u{1F4C4}"}];return}try{let t=this.totalPages||10;this.leftPanelThumbnails=Array.from({length:t},(i,n)=>({id:n+1,title:`\uD398\uC774\uC9C0 ${n+1}`,pageNumber:n+1,active:n+1===this.currentPage,icon:"",isLoading:!0}));let e=Array.from({length:t},(i,n)=>n+1);yield this.pdfThumbnailService.generateThumbnailsBatch(this.pdfSrc,e,{scale:.2,quality:.7,format:"image/webp"},(i,n)=>{let o=this.leftPanelThumbnails.findIndex(d=>d.pageNumber===i);o!==-1&&(this.leftPanelThumbnails[o].icon=n,this.leftPanelThumbnails[o].isLoading=!1,this.cdr.detectChanges())})}catch(t){console.error("\uC378\uB124\uC77C \uC0DD\uC131 \uC2E4\uD328:",t),this.leftPanelThumbnails.forEach(e=>e.isLoading=!1),this.snackbar.showError("\uC378\uB124\uC77C \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}toggleRightPanel(){this.showRightPanel=!this.showRightPanel,this.showRightPanel&&(this.isRightPanelCollapsed=!1)}togglePdfSettings(){let t={width:"800px",maxWidth:"90vw",panelClass:"pdf-settings-dialog",hasBackdrop:!0,disableClose:!1,autoFocus:!0,restoreFocus:!0};this.dialog.open(Lt,t)}closeRightPanel(){this.pdfToolsPanelMenuId==="ai-translate"||this.pdfToolsPanelMenuId==="ai-summary"||(this.pdfToolsPanelMenuId=null,this.isRightPanelCollapsed=!0,this.cdr.detectChanges())}expandRightPanel(){this.isRightPanelCollapsed=!1}toggleImageCoordinates(){this.showImageCoordinates=!this.showImageCoordinates}showPageSelectorModal(){return P(this,null,function*(){if(!this.pdfSrc){this.showSnackbar("PDF \uD30C\uC77C\uC744 \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}try{this.snackbar.showInfo("\uD398\uC774\uC9C0 \uC378\uB124\uC77C \uC0DD\uC131 \uC911...");let t=this.totalPages||10;try{this.pdfjsLibService.isLoaded&&(t=(yield this.pdfjsLibService.getDocument(this.pdfSrc)).numPages)}catch(i){console.warn("\u26A0\uFE0F \uC6D0\uBCF8 PDF \uD398\uC774\uC9C0 \uC218 \uD655\uC778 \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9:",i),this.pdfEditorVisible&&this.pdfEditorData?.originalTotalPages&&(t=this.pdfEditorData.originalTotalPages)}let e=Array.from({length:t},(i,n)=>n+1);this.pageSelectorThumbnails=e.map(i=>({pageNumber:i,thumbnail:"",selected:i===1,isLoading:!0})),this.pageSelectorVisible=!0,yield this.pdfThumbnailService.generateThumbnailsBatch(this.pdfSrc,e,{scale:.3,quality:.8,format:"image/webp"},(i,n)=>{let o=this.pageSelectorThumbnails.find(d=>d.pageNumber===i);o&&(o.thumbnail=n,o.isLoading=!1,this.cdr.detectChanges())})}catch(t){console.error("\uD398\uC774\uC9C0 \uC120\uD0DD \uBAA8\uB2EC \uD45C\uC2DC \uC2E4\uD328:",t),this.showSnackbar("\uD398\uC774\uC9C0 \uC120\uD0DD \uBAA8\uB2EC\uC744 \uC5F4 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.pageSelectorVisible=!1}})}onPageSelectorClose(){this.pageSelectorVisible=!1,this.pageSelectorThumbnails=[]}onPageSelectorConfirm(t){return P(this,null,function*(){this.selectedAnalysisPage=t,this.pageSelectorVisible=!1,this.currentPage=t,yield this.executePdfAnalysis({showDashboard:!0})})}onAddFormField(t){if(!this.pdfEditorVisible){this.showSnackbar("\uD3FC \uC694\uC18C\uB294 \uD3B8\uC9D1 \uBAA8\uB4DC\uC5D0\uC11C \uCD94\uAC00\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.");return}if(!this.pdfPages||this.pdfPages.length===0){this.showSnackbar("\uBA3C\uC800 \uD3B8\uC9D1\uD560 \uD398\uC774\uC9C0\uB97C \uBD88\uB7EC\uC640 \uC8FC\uC138\uC694.");return}if(t==="checkbox"){this.addCheckboxFormField();return}if(t==="radio"){this.addRadioFormField();return}if(t==="dropdown"){this.addDropdownFormField();return}if(t==="date"){this.addDateFormField();return}let e=this.formFieldLabels[t]||"\uD3FC \uC694\uC18C";this.showSnackbar(`${e} \uCD94\uAC00 \uAE30\uB2A5\uC744 \uC900\uBE44 \uC911\uC785\uB2C8\uB2E4.`),this.debugLogger.info("\uD3FC\uB3C4\uAD6C",`\uD3FC \uC694\uC18C \uCD94\uAC00 \uC694\uCCAD(\uBBF8\uAD6C\uD604): ${t}`)}addCheckboxFormField(){let t=Math.max(0,Math.min(this.currentPage-1,this.pdfPages.length-1)),e=this.pdfPages[t];if(!e){this.showSnackbar("\uD398\uC774\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let i=160,n=32,o=e.width||595,d=e.height||842,h=Math.max(32,(o-i)/2),_=Math.max(48,d*.3-n/2),x=`\uCCB4\uD06C\uBC15\uC2A4 ${e.elements.filter(w=>w.type==="form-checkbox").length+1}`,v=this.pdfElementManager.createFormCheckboxElement({x:h,y:_,width:i,height:n,size:20,label:x,checked:!1});this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,t,v),this.selectedElement=v,this.showSnackbar(`${x}\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),this.debugLogger.info("\uD3FC\uB3C4\uAD6C",`\uD3FC \uCCB4\uD06C\uBC15\uC2A4 \uCD94\uAC00 (\uD398\uC774\uC9C0 ${t+1})`),this.openElementPropertiesPanel()}addRadioFormField(){let t=Math.max(0,Math.min(this.currentPage-1,this.pdfPages.length-1)),e=this.pdfPages[t];if(!e){this.showSnackbar("\uD398\uC774\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let i=160,n=32,o=e.width||595,d=e.height||842,h=Math.max(32,(o-i)/2),_=Math.max(48,d*.3-n/2),C=e.elements.filter(E=>E.type==="form-radio").length+1,x=`\uB77C\uB514\uC624 \uC635\uC158 ${C}`,v=`radio-group-${t+1}`,w=this.pdfElementManager.createFormRadioElement({x:h,y:_,width:i,height:n,size:18,label:x,value:`option-${C}`,groupName:v,selected:!1});this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,t,w),this.selectedElement=w,this.showSnackbar(`${x}\uC774 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),this.debugLogger.info("\uD3FC\uB3C4\uAD6C",`\uD3FC \uB77C\uB514\uC624 \uBC84\uD2BC \uCD94\uAC00 (\uD398\uC774\uC9C0 ${t+1})`),this.openElementPropertiesPanel()}addDropdownFormField(){let t=Math.max(0,Math.min(this.currentPage-1,this.pdfPages.length-1)),e=this.pdfPages[t];if(!e){this.showSnackbar("\uD398\uC774\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let i=260,n=44,o=e.width||595,d=e.height||842,h=Math.max(32,(o-i)/2),_=Math.max(56,d*.4-n/2),x=`\uB4DC\uB86D\uB2E4\uC6B4 ${e.elements.filter(w=>w.type==="form-dropdown").length+1}`,v=this.pdfElementManager.createFormDropdownElement({x:h,y:_,width:i,height:n,label:x,options:["\uC635\uC158 1","\uC635\uC158 2","\uC635\uC158 3"],selectedOption:"\uC635\uC158 1"});this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,t,v),this.selectedElement=v,this.showSnackbar(`${x}\uC774 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),this.debugLogger.info("\uD3FC\uB3C4\uAD6C",`\uD3FC \uB4DC\uB86D\uB2E4\uC6B4 \uCD94\uAC00 (\uD398\uC774\uC9C0 ${t+1})`),this.openElementPropertiesPanel()}addDateFormField(){let t=Math.max(0,Math.min(this.currentPage-1,this.pdfPages.length-1)),e=this.pdfPages[t];if(!e){this.showSnackbar("\uD398\uC774\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let i=260,n=56,o=e.width||595,d=e.height||842,h=Math.max(32,(o-i)/2),_=Math.max(64,d*.45-n/2),x=`\uB0A0\uC9DC \uD544\uB4DC ${e.elements.filter(w=>w.type==="form-date").length+1}`,v=this.pdfElementManager.createFormDateElement({x:h,y:_,width:i,height:n,label:x,placeholder:"YYYY-MM-DD",dateFormat:"YYYY-MM-DD",defaultValue:""});this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,t,v),this.selectedElement=v,this.showSnackbar(`${x}\uC774 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),this.debugLogger.info("\uD3FC\uB3C4\uAD6C",`\uD3FC \uB0A0\uC9DC \uD544\uB4DC \uCD94\uAC00 (\uD398\uC774\uC9C0 ${t+1})`),this.openElementPropertiesPanel()}openElementPropertiesPanel(){this.showRightPanel=!0,this.isRightPanelCollapsed=!1,this.pdfToolsPanelMenuId="element-properties",this.cdr.detectChanges()}addText(){this.pdfPages.length===0&&this.totalPages>0&&(this.pdfPages=Array.from({length:this.totalPages},(n,o)=>({pageNumber:o+1,elements:[]})));let t={text:"\uC0C8 \uD14D\uC2A4\uD2B8",fontSize:16,fontFamily:"Noto Sans KR",fontWeight:"normal",fontStyle:"normal",color:"#000000",textAlign:"left",x:200,y:400,width:150,height:24},e=this.pdfElementManager.createTextElement(t),i=this.currentPage-1;i>=0&&i<this.pdfPages.length?(this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,i,e),this.selectedElement=e,this.renderOverlayOnPage(this.currentPage,this.pdfPages[i].elements),this.showRightPanel=!0,this.isRightPanelCollapsed=!1,this.pdfToolsPanelMenuId="settings",this.markCurrentTabAsModified(),this.overlayManager?.addElement({id:e.id,type:"text",pageNumber:this.currentPage,x:t.x,y:t.y,width:t.width,height:t.height,data:{text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,color:t.color,textAlign:t.textAlign}}),this.cdr.detectChanges(),this.showSnackbar("\uD14D\uC2A4\uD2B8\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD074\uB9AD\uD558\uC5EC \uD3B8\uC9D1\uD558\uC138\uC694.")):this.showSnackbar("PDF\uB97C \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.")}onTextEditorApply(t){console.log("\u{1F4DD} onTextEditorApply \uD638\uCD9C\uB428:",t),console.log("\u{1F4DD} \uD604\uC7AC \uC0C1\uD0DC:",{currentPage:this.currentPage,totalPages:this.totalPages,pdfPagesLength:this.pdfPages.length,zoomLevel:this.zoomLevel}),this.pdfPages.length===0&&this.totalPages>0&&(console.log("\u{1F4DD} pdfPages \uBC30\uC5F4 \uCD08\uAE30\uD654 \uC911..."),this.pdfPages=Array.from({length:this.totalPages},(n,o)=>({pageNumber:o+1,elements:[]})));let e=this.pdfElementManager.createTextElement(t);console.log("\u{1F4DD} \uC0DD\uC131\uB41C \uD14D\uC2A4\uD2B8 \uC694\uC18C:",e);let i=this.currentPage-1;i>=0&&i<this.pdfPages.length?(this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,i,e),this.selectedElement=e,console.log("\u2705 \uD14D\uC2A4\uD2B8 \uC694\uC18C \uCD94\uAC00 \uC644\uB8CC:",t.text),console.log("\u{1F4C4} \uD604\uC7AC \uD398\uC774\uC9C0 \uC694\uC18C\uB4E4:",this.pdfPages[i].elements),console.log("\u{1F4DD} renderOverlayOnPage \uD638\uCD9C \uC608\uC815..."),this.renderOverlayOnPage(this.currentPage,this.pdfPages[i].elements),this.cdr.detectChanges()):console.error("\u274C \uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uD398\uC774\uC9C0 \uC778\uB371\uC2A4:",i,"pdfPages.length:",this.pdfPages.length),this.showSnackbar("\uD14D\uC2A4\uD2B8\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.showTextEditorModal=!1}getCurrentPageElements(){let t=this.currentPage-1;return t>=0&&t<this.pdfPages.length?this.pdfPages[t]?.elements||[]:[]}onElementClick(t){this.selectedElement=t,console.log("\uC694\uC18C \uC120\uD0DD:",t)}getCircleRadius(t,e){return Math.min(t,e)/2}closeDrawingMode(){this.isDrawingMode=!1,this.showDrawingPanel=!1,this.isEraserMode=!1,this.currentEditorTool=null,this.deactivateDrawEditor(),this.snackbar.showInfo("\uD39C \uADF8\uB9AC\uAE30 \uBAA8\uB4DC \uBE44\uD65C\uC131\uD654"),this.cdr.detectChanges()}isLightColor(t){let e=t.replace("#",""),i=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);return(i*299+n*587+o*114)/1e3>180}selectDrawingColor(t){this.drawingColor=t,this.isEraserMode=!1,this.applyDrawingColorToPdfJs(t)}onDrawingThicknessChange(t){this.drawingThickness=t,this.applyDrawingThicknessToPdfJs(t)}toggleEraserMode(){this.isEraserMode=!this.isEraserMode,this.isEraserMode&&this.snackbar.showInfo("\uC9C0\uC6B0\uAC1C \uBAA8\uB4DC - \uADF8\uB9B0 \uC120\uC744 \uD074\uB9AD\uD558\uC5EC \uC0AD\uC81C\uD558\uC138\uC694")}addSignature(){this.showSignaturePadModal=!0}addWatermark(){this.showWatermarkConfigModal=!0}addVectorPath(){this.showVectorPathDrawer=!0,this.cdr.detectChanges()}onVectorPathsChanged(t){if(!t||t.length===0){console.warn("\u26A0\uFE0F \uC801\uC6A9\uD560 \uD328\uC2A4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}t.forEach((e,i)=>{try{let n=this.vectorPathService.createVectorPathElement({pathData:e.d,strokeColor:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,fillOpacity:e.fillOpacity,strokeOpacity:e.strokeOpacity},{pageWidth:595,pageHeight:842}),o=this.currentPage-1;o>=0&&o<this.pdfPages.length&&(this.pdfPages=this.pdfElementManager.addElementToPage(this.pdfPages,o,n),i===t.length-1&&(this.selectedElement=n))}catch(n){console.error(`\u274C \uBCA1\uD130 \uD328\uC2A4 ${i+1} \uC0DD\uC131 \uC2E4\uD328:`,n)}}),this.showSnackbar(`${t.length}\uAC1C\uC758 \uBCA1\uD130 \uD328\uC2A4\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),this.showVectorPathDrawer=!1}onShapeSelect(t){this.onShapeSelected({shapeType:t})}onCancelShapeModal(){this.showShapeModal=!1}onSignaturePadCreated(t){console.log("\uC11C\uBA85 \uC0DD\uC131:",t),this.showSignaturePadModal=!1}onCancelSignaturePadModal(){this.showSignaturePadModal=!1}onWatermarkCreated(t){return P(this,null,function*(){console.log("\uC6CC\uD130\uB9C8\uD06C \uC0DD\uC131:",t),this.showWatermarkConfigModal=!1,yield this.applyWatermark(t)})}applyWatermark(t){return P(this,null,function*(){console.log("\u{1F4CC} \uC6CC\uD130\uB9C8\uD06C \uC801\uC6A9 \uC2DC\uC791:",t),console.log("\u{1F4CC} totalPages:",this.totalPages),this.currentWatermarkConfig=t;for(let e=1;e<=this.totalPages;e++)yield this.renderWatermarkOverlayOnPage(e,t),this.overlayManager?.addElement({id:`watermark_${e}_${Date.now()}`,type:"watermark",pageNumber:e,x:50,y:50,width:0,height:0,data:{text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily||"Noto Sans KR",color:t.color||"#000000",opacity:t.opacity,rotation:t.rotation,position:t.position}});this.markCurrentTabAsModified(),this.showSnackbar("\uC6CC\uD130\uB9C8\uD06C\uAC00 \uC801\uC6A9\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")})}currentWatermarkConfig=null;hexToRgbArray(t){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]}renderWatermarkOverlayOnPage(t,e){return P(this,null,function*(){let i=document.querySelector(`.page[data-page-number="${t}"]`);if(!i){console.warn(`\u26A0\uFE0F \uD398\uC774\uC9C0 ${t}\uC758 div\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);return}let n=i.querySelector(".watermark-overlay-layer");n&&n.remove();let o=i.getBoundingClientRect(),d=595,h=842;try{let E=this.PDFViewerApplication;if(E?.pdfDocument){let A=(yield E.pdfDocument.getPage(t)).getViewport({scale:1});d=A.width,h=A.height,console.log(`\u{1F4D0} PDF \uD398\uC774\uC9C0 ${t} \uC6D0\uBCF8 \uD06C\uAE30: ${d} x ${h}`)}}catch{console.warn("\u26A0\uFE0F PDF \uD398\uC774\uC9C0 \uD06C\uAE30\uB97C \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uAE30\uBCF8\uAC12 \uC0AC\uC6A9.")}let _=o.width/d,C=o.height/h,x=Math.min(_,C),v=document.createElement("div");v.className="watermark-overlay-layer",v.style.cssText=`
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 4;
      overflow: hidden;
    `;let w=this.calculateWatermarkPositions(e,d,h);console.log(`\u{1F4CC} \uD398\uC774\uC9C0 ${t}\uC5D0 ${w.length}\uAC1C \uC6CC\uD130\uB9C8\uD06C \uC704\uCE58 (PDF \uC88C\uD45C):`,w);for(let E of w){let z={x:E.x*_,y:E.y*C},A=this.createWatermarkDiv(e,z,x);v.appendChild(A)}i.appendChild(v),console.log(`\u2705 \uD398\uC774\uC9C0 ${t}\uC5D0 \uC6CC\uD130\uB9C8\uD06C \uC624\uBC84\uB808\uC774 \uCD94\uAC00 \uC644\uB8CC`)})}createWatermarkDiv(t,e,i){let n=document.createElement("div");if(n.className="watermark-item",t.contentType==="text"){let o=t.fontSize*i,d=t.isBold?"bold":"normal",h=t.isItalic?"italic":"normal",_=t.isUnderline?"underline":"none";n.style.cssText=`
        position: absolute;
        left: ${e.x}px;
        top: ${e.y}px;
        transform: translate(-50%, -50%) rotate(${t.rotation}deg);
        font-family: ${t.fontFamily};
        font-size: ${o}px;
        font-weight: ${d};
        font-style: ${h};
        text-decoration: ${_};
        color: ${t.fontColor};
        opacity: ${t.opacity};
        white-space: nowrap;
        pointer-events: none;
        user-select: none;
      `,n.textContent=t.text}else if(t.imageUrl){let o=t.usePageRatio?t.pageRatio*i:100*i;n.style.cssText=`
        position: absolute;
        left: ${e.x}px;
        top: ${e.y}px;
        transform: translate(-50%, -50%) rotate(${t.rotation}deg);
        opacity: ${t.opacity};
        pointer-events: none;
      `;let d=document.createElement("img");d.src=t.imageUrl,d.style.cssText=`
        width: ${o}px;
        height: auto;
      `,n.appendChild(d)}return n}applyTextWatermark(t){for(let i=0;i<this.pdfPages.length;i++){let n=this.pdfPages[i],o=n.width||595,d=n.height||842,h=this.calculateWatermarkPositions(t,o,d);for(let _ of h){let C={id:`watermark-${i}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"watermark",x:_.x,y:_.y,width:t.fontSize*t.text.length*.6,height:t.fontSize,text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.isBold?"bold":"normal",fontStyle:t.isItalic?"italic":"normal",color:t.fontColor,opacity:t.opacity,rotation:t.rotation,textAlign:"center"};n.elements.push(C)}}let e=this.pdfPages[this.currentPage-1];e&&this.renderOverlayOnPage(this.currentPage,e.elements),this.markCurrentTabAsModified(),this.showSnackbar("\uC6CC\uD130\uB9C8\uD06C\uAC00 \uC801\uC6A9\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}applyImageWatermark(t){if(!t.imageUrl)return;for(let i=0;i<this.pdfPages.length;i++){let n=this.pdfPages[i],o=n.width||595,d=n.height||842,h=this.calculateWatermarkPositions(t,o,d);for(let _ of h){let C={id:`watermark-img-${i}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"image",x:_.x,y:_.y,width:100,height:100,src:t.imageUrl,opacity:t.opacity,rotation:t.rotation};n.elements.push(C)}}let e=this.pdfPages[this.currentPage-1];e&&this.renderOverlayOnPage(this.currentPage,e.elements),this.markCurrentTabAsModified(),this.showSnackbar("\uC774\uBBF8\uC9C0 \uC6CC\uD130\uB9C8\uD06C\uAC00 \uC801\uC6A9\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}calculateWatermarkPositions(t,e,i){let n=[];if(t.tile.enabled&&t.tile.rows>0){let o=t.tile.rows,d=t.tile.columns||1,h=50,_=(e-h*2)/Math.max(d,1),C=(i-h*2)/o;for(let x=0;x<o;x++)for(let v=0;v<d;v++)n.push({x:h+v*_+_/2,y:h+x*C+C/2})}else{let o=t.position.grid,d=50,h=(o-1)%3,_=Math.floor((o-1)/3),C=d+h*((e-2*d)/2),x=d+_*((i-2*d)/2);n.push({x:o===5?e/2:C,y:o===5?i/2:x})}return n}onCancelWatermarkModal(){this.showWatermarkConfigModal=!1}addPageNumber(){console.log("\u{1F4CC} addPageNumber \uD638\uCD9C\uB428, showPageNumberConfigModal:",this.showPageNumberConfigModal),this.showPageNumberConfigModal=!0,console.log("\u{1F4CC} showPageNumberConfigModal \uC124\uC815 \uC644\uB8CC:",this.showPageNumberConfigModal)}onPageNumberCreated(t){return P(this,null,function*(){console.log("\uD398\uC774\uC9C0 \uBC88\uD638 \uC0DD\uC131:",t),this.showPageNumberConfigModal=!1,yield this.applyPageNumber(t)})}applyPageNumber(t){return P(this,null,function*(){console.log("\u{1F4CC} \uD398\uC774\uC9C0 \uBC88\uD638 \uC801\uC6A9 \uC2DC\uC791:",t),this.currentPageNumberConfig=t;let e=this.getPageRangeList(t);for(let i of e){yield this.renderPageNumberOverlayOnPage(i,t);let n=t.position||"bottom-center";this.overlayManager?.addElement({id:`pagenumber_${i}_${Date.now()}`,type:"page-number",pageNumber:i,x:this.getPageNumberX(n),y:this.getPageNumberY(n),width:0,height:0,data:{format:t.format||"number",fontSize:t.fontSize,fontFamily:t.fontFamily,color:t.color||"#000000",position:n,startNumber:t.startNumber,prefix:t.prefix||"",suffix:t.suffix||""}})}this.markCurrentTabAsModified(),this.showSnackbar("\uD398\uC774\uC9C0 \uBC88\uD638\uAC00 \uC801\uC6A9\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")})}getPageNumberX(t){return t.includes("left")?10:t.includes("right")?90:50}getPageNumberY(t){return t.includes("top")?5:95}getPageRangeList(t){if(t.pageRange==="all")return Array.from({length:this.totalPages},(n,o)=>o+1);let e=[],i=t.customPages.split(",").map(n=>n.trim());for(let n of i)if(n.includes("-")){let[o,d]=n.split("-").map(h=>parseInt(h.trim(),10));for(let h=o;h<=d&&h<=this.totalPages;h++)h>0&&e.push(h)}else{let o=parseInt(n,10);o>0&&o<=this.totalPages&&e.push(o)}return[...new Set(e)].sort((n,o)=>n-o)}renderPageNumberOverlayOnPage(t,e){return P(this,null,function*(){let i=document.querySelector(`.page[data-page-number="${t}"]`);if(!i){console.warn(`\u26A0\uFE0F \uD398\uC774\uC9C0 ${t}\uC758 div\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.`);return}let n=i.querySelector(".page-number-overlay");n&&n.remove();let o=i.getBoundingClientRect(),d=595,h=842;try{let Z=this.PDFViewerApplication;if(Z?.pdfDocument){let W=(yield Z.pdfDocument.getPage(t)).getViewport({scale:1});d=W.width,h=W.height}}catch{console.warn("\u26A0\uFE0F PDF \uD398\uC774\uC9C0 \uD06C\uAE30\uB97C \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.")}let _=o.width/d,C=o.height/h,x=Math.min(_,C),v=t+e.startNumber-1,w="";switch(e.style){case"number":w=`${v}`;break;case"number-total":w=`${v}/${this.totalPages}`;break;case"page-number":w=`Page ${v}`;break;case"dash-number":w=`- ${v} -`;break}let E=this.calculatePageNumberPosition(e,d,h),z={x:E.x*_,y:E.y*C},A=document.createElement("div");A.className="page-number-overlay";let V="";e.isItalic&&(V+="italic "),e.isBold&&(V+="bold ");let ee=e.fontSize*x;A.style.cssText=`
      position: absolute;
      left: ${z.x}px;
      top: ${z.y}px;
      transform: translate(-50%, -50%);
      font-family: ${e.fontFamily};
      font-size: ${ee}px;
      font-weight: ${e.isBold?"bold":"normal"};
      font-style: ${e.isItalic?"italic":"normal"};
      text-decoration: ${e.isUnderline?"underline":"none"};
      color: ${e.fontColor};
      pointer-events: none;
      user-select: none;
      z-index: 5;
      white-space: nowrap;
    `,A.textContent=w,i.appendChild(A),console.log(`\u2705 \uD398\uC774\uC9C0 ${t}\uC5D0 \uD398\uC774\uC9C0 \uBC88\uD638 \uC624\uBC84\uB808\uC774 \uCD94\uAC00 \uC644\uB8CC`)})}calculatePageNumberPosition(t,e,i){let n=t.position.grid,o=t.margin,d=o.top*28.35,h=o.bottom*28.35,_=o.left*28.35,C=o.right*28.35,x=(n-1)%3,v=Math.floor((n-1)/3),w,E;return x===0?w=_:x===1?w=e/2:w=e-C,v===0?E=d:v===1?E=i/2:E=i-h,{x:w,y:E}}onCancelPageNumberModal(){this.showPageNumberConfigModal=!1}openSignatureSelector(){this.loadSavedSignatures(),this.showSignatureSelector=!0}loadSavedSignatures(){try{let t=localStorage.getItem("ez-reader-signatures");this.savedSignatures=t?JSON.parse(t):[]}catch{this.savedSignatures=[]}}selectSavedSignature(t){this.showSignatureSelector=!1,this.currentSignatureForPlacement=t,this.placeSignatureOnPage(t)}deleteSavedSignature(t,e){e.stopPropagation();let i=this.savedSignatures.findIndex(n=>n.id===t.id);i>-1&&(this.savedSignatures.splice(i,1),localStorage.setItem("ez-reader-signatures",JSON.stringify(this.savedSignatures)),this.showSnackbar("\uC11C\uBA85\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."))}openSignatureModal(){this.showSignatureSelector=!1,this.showSignatureConfigModal=!0}closeSignatureSelector(){this.showSignatureSelector=!1}onSignatureCreated(t){this.showSignatureConfigModal=!1,this.savedSignatures.push({id:t.id,thumbnailUrl:t.dataUrl,config:t}),localStorage.setItem("ez-reader-signatures",JSON.stringify(this.savedSignatures)),this.currentSignatureForPlacement=t,this.placeSignatureOnPage(t),this.showSnackbar("\uC11C\uBA85\uC774 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}onCancelSignatureModal(){this.showSignatureConfigModal=!1}placeSignatureOnPage(t){return P(this,null,function*(){if(!this.pdfSrc){this.showSnackbar("PDF \uD30C\uC77C\uC744 \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}let e=t.dataUrl||t.thumbnailUrl;if(!e){this.showSnackbar("\uC11C\uBA85 \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(!document.querySelector(`.page[data-page-number="${this.currentPage}"]`)&&!document.querySelector(`[data-page-number="${this.currentPage}"]`)){this.showSnackbar("\uD398\uC774\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}yield this.createSignatureOverlay(e,this.currentPage),this.showSnackbar("\uC11C\uBA85\uC774 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uB4DC\uB798\uADF8\uD558\uC5EC \uC704\uCE58\uB97C \uC870\uC815\uD558\uC138\uC694.")})}createSignatureOverlay(t,e){return P(this,null,function*(){let i=document.querySelector(`.page[data-page-number="${e}"]`);if(i||(i=document.querySelector(`[data-page-number="${e}"]`)),!i){console.error("\uD398\uC774\uC9C0 \uCEE8\uD14C\uC774\uB108\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C");return}let n=i.querySelector(".signature-overlay-container");n||(n=document.createElement("div"),n.className="signature-overlay-container",n.style.cssText=`
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 100;
      `,i.style.position="relative",i.appendChild(n));let o=document.createElement("div");o.className="signature-element",o.dataset.signatureId=`sig_${Date.now()}`,o.style.cssText=`
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      cursor: move;
      pointer-events: auto;
      border: 2px dashed transparent;
      padding: 4px;
      transition: border-color 0.2s;
    `;let d=document.createElement("img");d.src=t,d.style.cssText=`
      max-width: 200px;
      max-height: 100px;
      display: block;
      user-select: none;
      -webkit-user-drag: none;
    `,o.appendChild(d);let h=document.createElement("button");h.className="signature-delete-btn",h.innerHTML="\xD7",h.style.cssText=`
      position: absolute;
      top: -10px;
      right: -10px;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #E54D42;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 14px;
      line-height: 1;
      display: none;
    `,h.onclick=w=>{w.stopPropagation(),o.remove(),this.showSnackbar("\uC11C\uBA85\uC774 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")},o.appendChild(h),o.onmouseenter=()=>{o.style.borderColor="#E54D42",h.style.display="block"},o.onmouseleave=()=>{o.style.borderColor="transparent",h.style.display="none"},this.makeSignatureDraggable(o,n),n.appendChild(o);let _=o.dataset.signatureId||`sig_${Date.now()}`,x=this.PDFViewerApplication?.pdfDocument?.numPages||this.totalPages||1;if(console.log("\u{1F535} \uC11C\uBA85 \uCD94\uAC00 - pdfPages.length:",this.pdfPages.length,"pdfPageCount:",x),this.pdfPages.length===0||this.pdfPages.length<x){let w={};for(let E of this.pdfPages)E.elements&&E.elements.length>0&&(w[E.pageNumber]=E.elements);this.pdfPages=Array.from({length:x},(E,z)=>({pageNumber:z+1,elements:w[z+1]||[]})),console.log("\u{1F535} pdfPages \uCD08\uAE30\uD654\uB428:",this.pdfPages.length,"\uD398\uC774\uC9C0")}let v=e-1;if(v>=0&&v<this.pdfPages.length){let w={id:_,type:"image",x:50,y:50,width:200,height:100,src:t,opacity:1,rotation:0};this.pdfPages[v].elements.push(w),console.log(`\u2705 \uC11C\uBA85 \uC694\uC18C \uCD94\uAC00\uB428 (\uD398\uC774\uC9C0 ${e}):`,w)}this.overlayManager?.addElement({id:_,type:"signature",pageNumber:e,x:50,y:50,width:200,height:100,data:{imageDataUrl:t,name:"signature"}}),this.markCurrentTabAsModified()})}makeSignatureDraggable(t,e){let i=!1,n=0,o=0,d=0,h=0,_=()=>{let C=t.dataset.signatureId;if(!C)return;let x=e.getBoundingClientRect(),v=t.getBoundingClientRect(),w=v.left-x.left,E=v.top-x.top;for(let z of this.pdfPages){let A=z.elements.find(V=>V.id===C);if(A){A.x=w,A.y=E,console.log(`\u{1F4CD} \uC11C\uBA85 \uC704\uCE58 \uC5C5\uB370\uC774\uD2B8: ${C} \u2192 (${w}, ${E})`);break}}};t.onmousedown=C=>{if(C.target.classList.contains("signature-delete-btn"))return;i=!0,n=C.clientX,o=C.clientY;let x=t.getBoundingClientRect(),v=e.getBoundingClientRect();d=x.left-v.left,h=x.top-v.top,t.style.transform="none",t.style.left=d+"px",t.style.top=h+"px",C.preventDefault()},document.addEventListener("mousemove",C=>{if(!i)return;let x=C.clientX-n,v=C.clientY-o;t.style.left=d+x+"px",t.style.top=h+v+"px"}),document.addEventListener("mouseup",()=>{i&&_(),i=!1}),t.ontouchstart=C=>{if(C.touches.length!==1)return;i=!0,n=C.touches[0].clientX,o=C.touches[0].clientY;let x=t.getBoundingClientRect(),v=e.getBoundingClientRect();d=x.left-v.left,h=x.top-v.top,t.style.transform="none",t.style.left=d+"px",t.style.top=h+"px",C.preventDefault()},document.addEventListener("touchmove",C=>{if(!i||C.touches.length!==1)return;let x=C.touches[0].clientX-n,v=C.touches[0].clientY-o;t.style.left=d+x+"px",t.style.top=h+v+"px"},{passive:!1}),document.addEventListener("touchend",()=>{i&&_(),i=!1})}onCloseVectorPathDrawer(){this.showVectorPathDrawer=!1}addPage(){if(!this.pdfEditorVisible){this.showSnackbar("\uD398\uC774\uC9C0\uB294 \uD3B8\uC9D1 \uBAA8\uB4DC\uC5D0\uC11C \uCD94\uAC00\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4.");return}let t=this.pdfPages.length+1,e=this.pdfPages.length>0?this.pdfPages[0].width:595,i=this.pdfPages.length>0?this.pdfPages[0].height:842;this.pdfPages.push({pageNumber:t,elements:[],width:e,height:i}),this.totalPages=this.pdfPages.length,this.showSnackbar(`\uD398\uC774\uC9C0 ${t}\uC774(\uAC00) \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}onTextEditorCancel(){this.showTextEditorModal=!1}activatePdfAnnotationEditor(t){try{let e=window.PDFViewerApplication;if(!e){console.warn("\u26A0\uFE0F PDFViewerApplication\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let n={freetext:3,ink:15,highlight:9,stamp:13}[t];console.log(`\u{1F4DD} Annotation Editor \uBAA8\uB4DC \uD65C\uC131\uD654: ${t} (${n})`),e.eventBus&&e.eventBus.dispatch("switchannotationeditormode",{source:this,mode:n}),e.pdfViewer?.annotationEditorParams&&e.pdfViewer.annotationEditorParams.updateParams(n,{fontSize:16,fontColor:"#000000"})}catch(e){console.error("\u274C Annotation Editor \uD65C\uC131\uD654 \uC2E4\uD328:",e)}}addPdfAnnotation(t,e){try{let i=window.PDFViewerApplication;if(!i?.pdfViewer){console.warn("\u26A0\uFE0F PDF Viewer\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let o=i.pdfViewer._pages[this.currentPage-1];if(!o){console.warn("\u26A0\uFE0F \uD604\uC7AC \uD398\uC774\uC9C0 \uBDF0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(t==="freetext"){let d=this.hexToRgb(e.color),h={annotationType:3,rect:[e.x,e.y,e.x+e.width,e.y+e.height],contents:e.text,color:d?[d.r/255,d.g/255,d.b/255]:[0,0,0],fontSize:e.fontSize,fontName:e.fontFamily||"Helvetica"};console.log("\u{1F4DD} FreeText annotation \uCD94\uAC00:",h),o.annotationLayer&&o.annotationLayer.appendNewAnnotation(h)}}catch(i){console.error("\u274C Annotation \uCD94\uAC00 \uC2E4\uD328:",i)}}openFileConversionModal(){if(!this.pdfSrc||!this.currentFileName){this.showSnackbar("PDF \uD30C\uC77C\uC744 \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}this.showFileConversionModal=!0}onFileConversionModalClose(){this.showFileConversionModal=!1}rotateCurrentPageLeft(){return P(this,null,function*(){yield this.onRotateAllPagesLeft()})}rotateCurrentPageRight(){return P(this,null,function*(){yield this.onRotateAllPagesRight()})}uploadCurrentPdf(){return P(this,null,function*(){if(!this.pdfSrc){this.showSnackbar("PDF \uD30C\uC77C\uC744 \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}try{let t=this.currentFileName||`\uBB38\uC11C_${new Date().toLocaleDateString()}`,i=(yield this.indexedDbService.getAllDocuments()).find(n=>n.title===t);setTimeout(()=>{this.saveConfirmModalComponent?.open(t,i)},0)}catch(t){console.error("\uBB38\uC11C \uC800\uC7A5 \uC900\uBE44 \uC2E4\uD328:",t),this.showSnackbar("\uBB38\uC11C \uC800\uC7A5 \uC900\uBE44\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}onSaveConfirmModalClose(){this.showSnackbar("\uC5C5\uB85C\uB4DC\uAC00 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}onSaveConfirmModalConfirm(t){return P(this,null,function*(){try{this.showSnackbar("\uBB38\uC11C\uB97C \uC5C5\uB85C\uB4DC\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4...");let i=yield(yield fetch(this.pdfSrc)).blob(),n=new FileReader,o=yield new Promise((x,v)=>{n.onloadend=()=>x(n.result),n.onerror=v,n.readAsDataURL(i)}),h=(yield this.indexedDbService.getAllDocuments()).find(x=>x.title===t.title),_={id:h?.id||Date.now().toString(),title:t.title,pages:this.pdfPages.map((x,v)=>({type:"pdf-page",content:`\uD398\uC774\uC9C0 ${v+1}`,order:v})),elementCount:this.pdfPages.length,createdAt:h?.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString(),version:"1.0",pdfSrc:this.pdfSrc,pdfBase64:o,fileName:this.currentFileName||void 0,documentType:"viewer"};yield this.indexedDbService.saveDocument(_);let C=t.overwrite?"\uC5C5\uB370\uC774\uD2B8":"\uC800\uC7A5";this.showSnackbar(`${t.title} \uBB38\uC11C\uAC00 \uC131\uACF5\uC801\uC73C\uB85C ${C}\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),this.currentFileName=t.title}catch(e){console.error("PDF \uC5C5\uB85C\uB4DC \uC2E4\uD328:",e),this.showSnackbar("PDF \uC5C5\uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}exportCurrentPdf(){return P(this,null,function*(){yield this.onDownloadPdf()})}embedSignaturesToPdfAndGetBlob(){return P(this,null,function*(){try{let t=yield this.getCurrentPdfBytes();if(!t)return null;let e=yield this.pdfLibService.loadExistingPdf(t);if(!e)return null;let i=e.getPages();for(let o of this.pdfPages){let d=o.pageNumber-1;if(d<0||d>=i.length)continue;let h=i[d],{width:_,height:C}=h.getSize();for(let x of o.elements||[])if(x.type==="image"&&x.src)try{let v=x.src,w,E;if(v.startsWith("data:image/png")){let Z=v.split(",")[1];w=Uint8Array.from(atob(Z),L=>L.charCodeAt(0)),E=yield e.embedPng(w)}else if(v.startsWith("data:image/jpeg")||v.startsWith("data:image/jpg")){let Z=v.split(",")[1];w=Uint8Array.from(atob(Z),L=>L.charCodeAt(0)),E=yield e.embedJpg(w)}else{let Z=v.split(",")[1]||v;w=Uint8Array.from(atob(Z),L=>L.charCodeAt(0)),E=yield e.embedPng(w)}let z=x.width||200,A=x.height||100,V=x.x,ee=C-x.y-A;V===50&&x.y===50&&(V=(_-z)/2,ee=(C-A)/2),h.drawImage(E,{x:V,y:ee,width:z,height:A})}catch(v){console.error("\uC11C\uBA85 \uC774\uBBF8\uC9C0 \uC784\uBCA0\uB529 \uC2E4\uD328:",v)}}let n=yield e.save();return new Blob([n],{type:"application/pdf"})}catch(t){return console.error("embedSignaturesToPdfAndGetBlob \uC2E4\uD328:",t),null}})}downloadBlob(t,e){let i=URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=e,n.click(),URL.revokeObjectURL(i)}mergePdfFiles(){return P(this,null,function*(){if(!this.pdfSrc){this.showSnackbar("\uBA3C\uC800 PDF\uB97C \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}this.showMergeModal=!0,setTimeout(()=>{this.mergeModalComponent?.open()},0)})}onMergeModalClose(){this.showMergeModal=!1}onMergeModalConfirm(t){return P(this,null,function*(){t.type==="local"?yield this.mergeWithLocalFiles():t.type==="saved"&&t.selectedDocs&&(yield this.mergeWithSelectedDocuments(t.selectedDocs))})}mergeWithLocalFiles(){return P(this,null,function*(){let t=document.createElement("input");t.type="file",t.accept="application/pdf",t.multiple=!0,t.onchange=e=>P(this,null,function*(){let i=e.target.files;if(i.length!==0)try{this.showSnackbar(`${i.length}\uAC1C\uC758 PDF \uD30C\uC77C\uC744 \uBCD1\uD569\uD558\uB294 \uC911...`);let n=[this.pdfSrc];for(let d of i){let h=URL.createObjectURL(d);n.push(h)}let o=yield this.pdfPageManager.mergePdfs(n);this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),n.slice(1).forEach(d=>URL.revokeObjectURL(d)),this.pdfSrc=o,this.totalPages=yield this.pdfPageManager.getPageCount(o),this.isLeftPanelVisible&&this.generateThumbnails(),this.showSnackbar("PDF \uBCD1\uD569\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(n){console.error("PDF \uBCD1\uD569 \uC2E4\uD328:",n),this.showSnackbar("PDF \uBCD1\uD569\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}}),t.click()})}mergeWithSelectedDocuments(t){return P(this,null,function*(){try{this.showSnackbar(`${t.length}\uAC1C\uC758 \uBB38\uC11C\uB97C \uBCD1\uD569\uD558\uB294 \uC911...`);let e=[this.pdfSrc];for(let n of t)if(n.pdfBase64){let o=this.base64ToBlob(n.pdfBase64),d=URL.createObjectURL(o);e.push(d)}let i=yield this.pdfPageManager.mergePdfs(e);this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),e.slice(1).forEach(n=>URL.revokeObjectURL(n)),this.pdfSrc=i,this.totalPages=yield this.pdfPageManager.getPageCount(i),this.isLeftPanelVisible&&this.generateThumbnails(),this.showSnackbar("PDF \uBCD1\uD569\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(e){console.error("PDF \uBCD1\uD569 \uC2E4\uD328:",e),this.showSnackbar("PDF \uBCD1\uD569\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}mergeWithSavedDocuments(){return P(this,null,function*(){try{let e=(yield this.indexedDbService.getAllDocuments()).filter(_=>_.pdfBase64);if(e.length===0){this.showSnackbar("\uBCD1\uD569\uD560 PDF \uBB38\uC11C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let i=e.map((_,C)=>`${C+1}. ${_.title}`).join(`
`),n=prompt(`\uBCD1\uD569\uD560 \uBB38\uC11C \uBC88\uD638\uB97C \uC27C\uD45C\uB85C \uAD6C\uBD84\uD558\uC5EC \uC785\uB825\uD558\uC138\uC694 (\uC608: 1,3,5):

${i}`);if(!n){this.showSnackbar("\uBCD1\uD569\uC774 \uCDE8\uC18C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.");return}let o=n.split(",").map(_=>parseInt(_.trim())-1).filter(_=>_>=0&&_<e.length);if(o.length===0){this.showSnackbar("\uC720\uD6A8\uD55C \uBB38\uC11C\uAC00 \uC120\uD0DD\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");return}this.showSnackbar(`${o.length}\uAC1C\uC758 \uBB38\uC11C\uB97C \uBCD1\uD569\uD558\uB294 \uC911...`);let d=[this.pdfSrc];for(let _ of o){let C=e[_];if(C.pdfBase64){let x=this.base64ToBlob(C.pdfBase64),v=URL.createObjectURL(x);d.push(v)}}let h=yield this.pdfPageManager.mergePdfs(d);this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),d.slice(1).forEach(_=>URL.revokeObjectURL(_)),this.pdfSrc=h,this.totalPages=yield this.pdfPageManager.getPageCount(h),this.isLeftPanelVisible&&this.generateThumbnails(),this.showSnackbar("PDF \uBCD1\uD569\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("PDF \uBCD1\uD569 \uC2E4\uD328:",t),this.showSnackbar("PDF \uBCD1\uD569\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}base64ToBlob(t){let e=t.split(",")[1]||t,i=atob(e),n=new Array(i.length);for(let d=0;d<i.length;d++)n[d]=i.charCodeAt(d);let o=new Uint8Array(n);return new Blob([o],{type:"application/pdf"})}openLockModal(){if(!this.pdfSrc){this.snackbar.showWarning("\uBA3C\uC800 PDF\uB97C \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}setTimeout(()=>{this.lockModalComponent?.open()},0)}onLockModalClose(){}onLockModalConfirm(t){return P(this,null,function*(){if(this.pdfSrc)try{this.snackbar.showInfo("\uAD8C\uD55C \uC124\uC815\uC744 \uC801\uC6A9\uD558\uB294 \uC911...");let e=yield this.pdfSecurityService.applyPermissionsAsMetadata(this.pdfSrc,t);this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=e;let i=this.pdfSecurityService.getPermissionDescription(t);this.snackbar.showSuccess(`\uAD8C\uD55C \uC124\uC815\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. (${i})`)}catch(e){console.error("\uAD8C\uD55C \uC124\uC815 \uC2E4\uD328:",e),this.snackbar.showError("\uAD8C\uD55C \uC124\uC815\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}openPasswordModal(){if(!this.pdfSrc){this.snackbar.showWarning("\uBA3C\uC800 PDF\uB97C \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}setTimeout(()=>{this.passwordModalComponent?.open()},0)}onPasswordModalClose(){}onPasswordModalConfirm(t){return P(this,null,function*(){if(this.pdfSrc)try{this.snackbar.showInfo("\uBE44\uBC00\uBC88\uD638 \uC124\uC815 \uC911..."),this.snackbar.showWarning("\uBE44\uBC00\uBC88\uD638 \uC554\uD638\uD654\uB294 \uC11C\uBC84 API\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4. \uD604\uC7AC\uB294 \uBA54\uD0C0\uB370\uC774\uD130\uB85C\uB9CC \uC800\uC7A5\uB429\uB2C8\uB2E4.")}catch(e){console.error("\uBE44\uBC00\uBC88\uD638 \uC124\uC815 \uC2E4\uD328:",e),this.snackbar.showError("\uBE44\uBC00\uBC88\uD638 \uC124\uC815\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}openSecuritySettings(){if(!this.pdfSrc){this.snackbar.showWarning("\uBA3C\uC800 PDF\uB97C \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}setTimeout(()=>{this.securitySettingsComponent?.open()},0)}openEncryptionModal(){if(!this.pdfSrc){this.snackbar.showWarning("\uBA3C\uC800 PDF\uB97C \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}setTimeout(()=>{this.encryptionModalComponent?.open()},0)}onEncryptionModalClose(){}onEncryptionApply(t){return P(this,null,function*(){if(this.pdfSrc)try{this.snackbar.showInfo("\uC554\uD638\uD654 \uC124\uC815\uC744 \uC801\uC6A9\uD558\uB294 \uC911..."),this.snackbar.showSuccess("\uC554\uD638\uD654 \uC124\uC815\uC774 \uC801\uC6A9\uB418\uC5C8\uC2B5\uB2C8\uB2E4. (\uC8FC\uC758: \uC2E4\uC81C \uC554\uD638\uD654\uB294 \uC11C\uBC84 API \uD544\uC694)")}catch(e){console.error("\uC554\uD638\uD654 \uC124\uC815 \uC2E4\uD328:",e),this.snackbar.showError("\uC554\uD638\uD654 \uC124\uC815\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}openDigitalIdManager(){setTimeout(()=>{this.digitalIdManagerComponent?.open()},0)}openDigitalIdWizard(){setTimeout(()=>{this.digitalIdWizardComponent?.open()},0)}onDigitalIdManagerClose(){}onDigitalIdWizardClose(){}onDigitalIdWizardComplete(t){t&&this.snackbar.showSuccess(`\uB514\uC9C0\uD138 ID "${t.name}"\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}onDigitalIdApply(t){t&&this.snackbar.showInfo(`\uB514\uC9C0\uD138 ID "${t.name}"\uAC00 \uC120\uD0DD\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}toggleFavorite(){return P(this,null,function*(){if(!this.currentDocumentName){this.snackbar.showWarning("\uC5F4\uB9B0 \uBB38\uC11C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{this.currentDocumentIsFavorite=!this.currentDocumentIsFavorite;let t=yield this.indexedDbService.getDocumentByTitle(this.currentDocumentName);if(t){t.isFavorite=this.currentDocumentIsFavorite,yield this.indexedDbService.updateDocument(t),yield this.loadRecentFiles();let e=this.currentDocumentIsFavorite?`"${this.currentDocumentName}"\uC744(\uB97C) \uC990\uACA8\uCC3E\uAE30\uC5D0 \uCD94\uAC00\uD588\uC2B5\uB2C8\uB2E4.`:`"${this.currentDocumentName}"\uC744(\uB97C) \uC990\uACA8\uCC3E\uAE30\uC5D0\uC11C \uC81C\uAC70\uD588\uC2B5\uB2C8\uB2E4.`;this.showSnackbar(e)}}catch(t){console.error("\uC990\uACA8\uCC3E\uAE30 \uD1A0\uAE00 \uC2E4\uD328:",t),this.snackbar.showError("\uC990\uACA8\uCC3E\uAE30 \uC124\uC815\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),this.currentDocumentIsFavorite=!this.currentDocumentIsFavorite}})}updateFavoriteStatus(){return P(this,null,function*(){if(!this.currentDocumentName){this.currentDocumentIsFavorite=!1;return}try{let t=yield this.indexedDbService.getDocumentByTitle(this.currentDocumentName);this.currentDocumentIsFavorite=t?.isFavorite||!1}catch(t){console.error("\uC990\uACA8\uCC3E\uAE30 \uC0C1\uD0DC \uC5C5\uB370\uC774\uD2B8 \uC2E4\uD328:",t),this.currentDocumentIsFavorite=!1}})}onSecuritySettingsClose(){}onSecuritySettingsConfirm(t){return P(this,null,function*(){if(this.pdfSrc)try{this.snackbar.showInfo("\uBCF4\uC548 \uC124\uC815\uC744 \uC801\uC6A9\uD558\uB294 \uC911...");let e=this.pdfSecurityService.validateSecurityConfig(t);if(!e.isValid){this.snackbar.showError(`\uC124\uC815 \uC624\uB958: ${e.errors.join(", ")}`);return}let i=yield this.pdfSecurityService.applyPermissionsAsMetadata(this.pdfSrc,t.permissions);this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=i;let n="\uBCF4\uC548 \uC124\uC815\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.";t.passwords&&(t.passwords.userPassword||t.passwords.ownerPassword)?(n+=" (\uC8FC\uC758: \uC2E4\uC81C \uC554\uD638\uD654\uB294 \uC11C\uBC84 API \uD544\uC694)",this.snackbar.showWarning(n)):this.snackbar.showSuccess(n)}catch(e){console.error("\uBCF4\uC548 \uC124\uC815 \uC2E4\uD328:",e),this.snackbar.showError("\uBCF4\uC548 \uC124\uC815\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}openHighlightPropertiesModal(){if(!this.pdfSrc){this.snackbar.showWarning("\uBA3C\uC800 PDF\uB97C \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}setTimeout(()=>{this.highlightPropertiesModalComponent?this.highlightPropertiesModalComponent.open():console.error("\u274C [openHighlightPropertiesModal] \uBAA8\uB2EC \uCEF4\uD3EC\uB10C\uD2B8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4")},0)}onHighlightPropertiesModalClose(){}onHighlightPropertiesModalConfirm(t){this.currentHighlightColor=t.color,this.currentHighlightOpacity=t.opacity,this.applyHighlightPropertiesToPdfJs(t.color,t.opacity),this.onToolbarAction("highlight"),this.snackbar.showSuccess(`\uD558\uC774\uB77C\uC774\uD2B8 \uC124\uC815 \uC644\uB8CC (\uC0C9\uC0C1: ${t.color}, \uD22C\uBA85\uB3C4: ${Math.round(t.opacity*100)}%)`)}applyHighlightPropertiesToPdfJs(t,e){try{setTimeout(()=>{let i=document.querySelectorAll("#editorHighlightParamsToolbar button.colorPicker"),n=document.querySelector("ngx-extended-pdf-viewer");if(n){let d=this.hexToRgb(t);d&&(n.style.setProperty("--highlight-bg-color",`rgba(${d.r}, ${d.g}, ${d.b}, ${e})`),n.style.setProperty("--highlight-selected-bg-color",`rgba(${d.r}, ${d.g}, ${d.b}, ${Math.min(e+.2,1)})`))}let o=document.querySelector('#editorHighlightParamsToolbar input[type="color"]');o&&(o.value=t,o.dispatchEvent(new Event("input",{bubbles:!0})),o.dispatchEvent(new Event("change",{bubbles:!0})))},300)}catch(i){console.error("\u274C \uD558\uC774\uB77C\uC774\uD2B8 \uC18D\uC131 \uC801\uC6A9 \uC2E4\uD328:",i)}}hexToRgb(t){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}onRotateAllPagesLeft(){return P(this,null,function*(){if(!this.pdfSrc){this.showSnackbar("PDF \uD30C\uC77C\uC744 \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}try{this.showSnackbar("\uC804\uCCB4 \uD398\uC774\uC9C0 \uD68C\uC804 \uC911...");let t=yield this.pdfPageManager.rotateAllPages(this.pdfSrc,-90);if(this.pdfSrc.startsWith("blob:")&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=t,this.tabBarComponent&&this.currentFileName){let i=yield(yield fetch(t)).blob();yield this.tabBarComponent.setActiveTabPdf(this.currentFileName,t,i)}this.showSnackbar("\uC804\uCCB4 \uD398\uC774\uC9C0 \uC67C\uCABD \uD68C\uC804 \uC644\uB8CC")}catch(t){console.error("\uC804\uCCB4 \uD398\uC774\uC9C0 \uD68C\uC804 \uC2E4\uD328:",t),this.showSnackbar("\uC804\uCCB4 \uD398\uC774\uC9C0 \uD68C\uC804\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}onRotateAllPagesRight(){return P(this,null,function*(){if(!this.pdfSrc){this.showSnackbar("PDF \uD30C\uC77C\uC744 \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}try{this.showSnackbar("\uC804\uCCB4 \uD398\uC774\uC9C0 \uD68C\uC804 \uC911...");let t=yield this.pdfPageManager.rotateAllPages(this.pdfSrc,90);if(this.pdfSrc.startsWith("blob:")&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=t,this.tabBarComponent&&this.currentFileName){let i=yield(yield fetch(t)).blob();yield this.tabBarComponent.setActiveTabPdf(this.currentFileName,t,i)}this.showSnackbar("\uC804\uCCB4 \uD398\uC774\uC9C0 \uC624\uB978\uCABD \uD68C\uC804 \uC644\uB8CC")}catch(t){console.error("\uC804\uCCB4 \uD398\uC774\uC9C0 \uD68C\uC804 \uC2E4\uD328:",t),this.showSnackbar("\uC804\uCCB4 \uD398\uC774\uC9C0 \uD68C\uC804\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}addImage(){return P(this,null,function*(){try{if(!this.pdfSrc){this.showSnackbar("PDF\uB97C \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}let t=this.PDFViewerApplication;if(!t?.eventBus){this.showSnackbar("PDF \uBDF0\uC5B4\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}t.eventBus.dispatch("switchannotationeditormode",{source:this,mode:13}),setTimeout(()=>{let e=document.querySelector('#editorStampAddImage, button[data-l10n-id="pdfjs-editor-stamp-add-image-button"], .stampEditor button, #secondaryEditorStampAddImage');e?(e.click(),console.log("\u2705 PDF.js \uC774\uBBF8\uC9C0 \uCD94\uAC00 \uBC84\uD2BC \uD074\uB9AD\uB428")):this.triggerStampImageUpload(),this.markCurrentTabAsModified()},300)}catch(t){console.error("\u274C \uC774\uBBF8\uC9C0 \uCD94\uAC00 \uC2E4\uD328:",t),this.showSnackbar("\uC774\uBBF8\uC9C0 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}triggerStampImageUpload(){let t=this.PDFViewerApplication;if(!t?.eventBus)return;let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=i=>P(this,null,function*(){let n=i.target.files?.[0];if(n)try{let o=URL.createObjectURL(n);t.eventBus.dispatch("fileinputchange",{source:this,value:n});let d=t.pdfViewer;if(d?.annotationEditorUIManager){let h=d.annotationEditorUIManager,_=new Image;_.src=o,yield new Promise(x=>{_.onload=x});let C=yield createImageBitmap(_);t.eventBus.dispatch("stampimage",{source:this,bitmapFile:{bitmap:C,url:o}})}this.showSnackbar("\uC774\uBBF8\uC9C0\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC704\uCE58\uB97C \uD074\uB9AD\uD558\uC5EC \uBC30\uCE58\uD558\uC138\uC694.")}catch(o){console.error("\uC774\uBBF8\uC9C0 \uCC98\uB9AC \uC2E4\uD328:",o),this.showSnackbar("\uC774\uBBF8\uC9C0 \uCC98\uB9AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}}),e.click()}addShape(){this.showShapeModal=!0}initializeNewDocumentForCombined(){this.pdfPages=[],this.currentPage=1,this.totalPages=0}deleteCurrentPage(){return P(this,null,function*(){if(!this.pdfSrc){this.showSnackbar("PDF \uD30C\uC77C\uC744 \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}if(!this.pageReorderVisible){this.showSnackbar("\uD398\uC774\uC9C0 \uC7AC\uBC30\uC5F4 \uBAA8\uB4DC\uC5D0\uC11C \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD55C \uD6C4 \uC0AD\uC81C\uD574\uC8FC\uC138\uC694.");return}if(this.selectedPagesInReorder.length===0){this.showSnackbar("\uC0AD\uC81C\uD560 \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694.");return}if(this.totalPages-this.selectedPagesInReorder.length<1){this.showSnackbar("\uCD5C\uC18C 1\uAC1C\uC758 \uD398\uC774\uC9C0\uB294 \uB0A8\uC544\uC788\uC5B4\uC57C \uD569\uB2C8\uB2E4.");return}try{let t=this.selectedPagesInReorder.length,e=this.selectedPagesInReorder.sort((o,d)=>o-d).join(", ");if(!(yield it(`\uD398\uC774\uC9C0 ${e}\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? (\uCD1D ${t}\uAC1C)`)))return;this.showSnackbar(`${t}\uAC1C \uD398\uC774\uC9C0 \uC0AD\uC81C \uC911...`);let n=yield this.pdfPageManager.deletePages(this.pdfSrc,this.selectedPagesInReorder);if(this.pdfSrc.startsWith("blob:")&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=n,this.totalPages-=t,this.selectedPagesInReorder=[],this.cdr.detectChanges(),this.tabBarComponent&&this.currentFileName){let d=yield(yield fetch(n)).blob();yield this.tabBarComponent.setActiveTabPdf(this.currentFileName,n,d)}this.showSnackbar(`${t}\uAC1C \uD398\uC774\uC9C0 \uC0AD\uC81C \uC644\uB8CC (\uB0A8\uC740 \uD398\uC774\uC9C0: ${this.totalPages})`)}catch(t){console.error("\uD398\uC774\uC9C0 \uC0AD\uC81C \uC2E4\uD328:",t),this.showSnackbar("\uD398\uC774\uC9C0 \uC0AD\uC81C\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}zoomIn(){let t=Math.max(1,Math.round(this.zoomLevel*.1));this.zoomLevel=Math.min(this.zoomLevel+t,2e3),this.showSnackbar(`\uD655\uB300: ${this.zoomLevel}%`)}zoomOut(){let t=Math.max(1,Math.round(this.zoomLevel*.1));this.zoomLevel=Math.max(this.zoomLevel-t,1),this.showSnackbar(`\uCD95\uC18C: ${this.zoomLevel}%`)}rotateCurrentPage(){this.showSnackbar("\uD398\uC774\uC9C0 \uD68C\uC804 \uAE30\uB2A5\uC740 \uC544\uC9C1 \uAD6C\uD604\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")}onElementPropertyChange(t){let{elementId:e,property:i,value:n}=t;if(e){for(let o of this.pdfPages)if(o.elements){let d=o.elements.find(h=>h.id===e);if(d){if(i.includes(".")){let[h,_]=i.split(".");d[h]||(d[h]={}),d[h][_]=n}else d[i]=n;break}}this.cdr.detectChanges(),this.pdfEditorVisible&&this.tabBarComponent&&(this.pdfEditorData={pages:this.pdfPages,currentPage:this.currentPage,totalPages:this.pdfPages.length,targetPage:this.pdfEditorData?.targetPage},this.tabBarComponent.updateActiveTabView("editor",this.pdfEditorData))}}onDeleteElementById(t){if(t){for(let e of this.pdfPages)if(e.elements){let i=e.elements.findIndex(n=>n.id===t);if(i!==-1){e.elements.splice(i,1),this.selectedElement=null,this.showSnackbar("\uC694\uC18C\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.cdr.detectChanges();break}}}}onImageAction(t){let{elementId:e,action:i}=t,n=null,o=-1;for(let _=0;_<this.pdfPages.length;_++){let C=this.pdfPages[_];if(C.elements&&(n=C.elements.find(x=>x.id===e),n)){o=_;break}}if(!n||n.type!=="image"){console.warn("\uC774\uBBF8\uC9C0 \uC694\uC18C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4:",e);return}let d=595,h=842;switch(i){case"rotate-left":n.rotation=((n.rotation||0)-90+360)%360;let _=n.width;n.width=n.height,n.height=_,this.showSnackbar("\uC774\uBBF8\uC9C0\uB97C \uC67C\uCABD\uC73C\uB85C \uD68C\uC804\uD588\uC2B5\uB2C8\uB2E4.");break;case"rotate-right":n.rotation=((n.rotation||0)+90)%360;let C=n.width;n.width=n.height,n.height=C,this.showSnackbar("\uC774\uBBF8\uC9C0\uB97C \uC624\uB978\uCABD\uC73C\uB85C \uD68C\uC804\uD588\uC2B5\uB2C8\uB2E4.");break;case"flip-horizontal":n.scaleX=(n.scaleX||1)*-1,this.showSnackbar("\uC774\uBBF8\uC9C0\uB97C \uC218\uD3C9\uC73C\uB85C \uB4A4\uC9D1\uC5C8\uC2B5\uB2C8\uB2E4.");break;case"flip-vertical":n.scaleY=(n.scaleY||1)*-1,this.showSnackbar("\uC774\uBBF8\uC9C0\uB97C \uC218\uC9C1\uC73C\uB85C \uB4A4\uC9D1\uC5C8\uC2B5\uB2C8\uB2E4.");break;case"center-page":n.x=(d-n.width)/2,n.y=(h-n.height)/2,this.showSnackbar("\uC774\uBBF8\uC9C0\uB97C \uD398\uC774\uC9C0 \uC911\uC559\uC5D0 \uBC30\uCE58\uD588\uC2B5\uB2C8\uB2E4.");break;case"align-left":n.x=20,this.showSnackbar("\uC774\uBBF8\uC9C0\uB97C \uC67C\uCABD\uC73C\uB85C \uC815\uB82C\uD588\uC2B5\uB2C8\uB2E4.");break;case"align-center-h":n.x=(d-n.width)/2,this.showSnackbar("\uC774\uBBF8\uC9C0\uB97C \uC218\uD3C9 \uC911\uC559\uC73C\uB85C \uC815\uB82C\uD588\uC2B5\uB2C8\uB2E4.");break;case"align-right":n.x=d-n.width-20,this.showSnackbar("\uC774\uBBF8\uC9C0\uB97C \uC624\uB978\uCABD\uC73C\uB85C \uC815\uB82C\uD588\uC2B5\uB2C8\uB2E4.");break;case"align-top":n.y=20,this.showSnackbar("\uC774\uBBF8\uC9C0\uB97C \uC0C1\uB2E8\uC73C\uB85C \uC815\uB82C\uD588\uC2B5\uB2C8\uB2E4.");break;case"align-center-v":n.y=(h-n.height)/2,this.showSnackbar("\uC774\uBBF8\uC9C0\uB97C \uC218\uC9C1 \uC911\uC559\uC73C\uB85C \uC815\uB82C\uD588\uC2B5\uB2C8\uB2E4.");break;case"align-bottom":n.y=h-n.height-20,this.showSnackbar("\uC774\uBBF8\uC9C0\uB97C \uD558\uB2E8\uC73C\uB85C \uC815\uB82C\uD588\uC2B5\uB2C8\uB2E4.");break;case"crop":this.showSnackbar("\uC790\uB974\uAE30 \uAE30\uB2A5\uC740 \uC900\uBE44 \uC911\uC785\uB2C8\uB2E4.");break;case"replace":this.replaceImageElement(n,o);break;default:console.warn("\uC54C \uC218 \uC5C6\uB294 \uC774\uBBF8\uC9C0 \uB3D9\uC791:",i)}this.selectedElement?.id===e&&(this.selectedElement=ce({},n)),this.cdr.detectChanges()}replaceImageElement(t,e){return P(this,null,function*(){try{let i=yield this.imageUploadService.uploadAndCreateImageElement({maxWidth:t.width,maxHeight:t.height,centerOnPage:!1,pageWidth:595,pageHeight:842});i&&(t.src=i.src,this.selectedElement?.id===t.id&&(this.selectedElement=ce({},t)),this.showSnackbar("\uC774\uBBF8\uC9C0\uAC00 \uAD50\uCCB4\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.cdr.detectChanges())}catch(i){console.error("\uC774\uBBF8\uC9C0 \uAD50\uCCB4 \uC2E4\uD328:",i),this.showSnackbar("\uC774\uBBF8\uC9C0 \uAD50\uCCB4\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}onDeselectElement(){this.selectedElement=null}onElementSelected(t){this.selectedElement=t,this.showRightPanel&&this.cdr.detectChanges()}onElementUpdate(t){this.pdfEditorVisible&&this.tabBarComponent&&(this.pdfEditorData={pages:this.pdfPages,currentPage:this.currentPage,totalPages:this.pdfPages.length,targetPage:this.pdfEditorData?.targetPage},this.tabBarComponent.updateActiveTabView("editor",this.pdfEditorData))}onDeleteElement(){this.selectedElement&&(this.selectedElement=null,this.showSnackbar("\uC694\uC18C\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4."))}onPageSelect(t){this.currentPage=t}onSidebarAction(t){if(t.type==="menu-click"&&t.menuId==="request-thumbnails"){this.generateThumbnailsForAI(t.source);return}if(t.type==="menu-click"&&t.menuId==="pdf-analysis"){this.startPdfAnalysis(t.source,t.data?.targetPage);return}if(t.type==="menu-click"){if(t.menuId)this.pdfToolsPanelMenuId=t.menuId;else if(t.menuId===""){this.pdfToolsPanelMenuId=null;return}this.isRightPanelCollapsed&&(this.expandRightPanel(),this.cdr.detectChanges()),this.showRightPanel||(this.showRightPanel=!0,this.isRightPanelCollapsed=!1,this.cdr.detectChanges())}t.type==="menu-click"&&t.menuId==="pdf-analysis"&&(t.data?.targetPage&&(this.selectedAnalysisPage=t.data.targetPage),t.source==="ai-translate"?this.openPdfAnalysisDashboard({showDashboard:!1,reopenMenu:"ai-translate"}):t.source==="ai-summary"?this.openPdfAnalysisDashboard({showDashboard:!1,reopenMenu:"ai-summary"}):this.openPdfAnalysisDashboard())}keepOnlyFirstPage(){this.showSnackbar("\uCCAB \uD398\uC774\uC9C0\uB9CC \uB0A8\uAE30\uAE30 \uAE30\uB2A5\uC740 \uC544\uC9C1 \uAD6C\uD604\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.")}generateThumbnailsForAI(t){return P(this,null,function*(){if(!this.pdfSrc){this.showSnackbar("PDF \uD30C\uC77C\uC744 \uBA3C\uC800 \uC5F4\uC5B4\uC8FC\uC138\uC694.");return}try{this.showSnackbar("\uC378\uB124\uC77C\uC744 \uC0DD\uC131\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4...");let e=Math.min(this.totalPages,10),i=Array.from({length:e},(o,d)=>d+1);this.leftPanelThumbnails=i.map(o=>({id:o,title:`\uD398\uC774\uC9C0 ${o}`,pageNumber:o,active:o===this.currentPage,icon:"",isLoading:!0})),this.cdr.detectChanges();let n=this.pdfThumbnailService.generateThumbnailsBatch(this.pdfSrc,i,{scale:.3,quality:.8,format:"image/jpeg"},(o,d)=>{let h=this.leftPanelThumbnails.findIndex(_=>_.pageNumber===o);h!==-1&&(this.leftPanelThumbnails[h].icon=d,this.leftPanelThumbnails[h].isLoading=!1,this.leftPanelThumbnails=[...this.leftPanelThumbnails],this.cdr.detectChanges())});setTimeout(()=>{this.leftPanelThumbnails.forEach(o=>{o.isLoading=!1}),this.leftPanelThumbnails=[...this.leftPanelThumbnails],this.cdr.detectChanges()},1e3),yield n,this.leftPanelThumbnails.forEach(o=>{o.isLoading=!1,o.icon||console.warn("\u26A0\uFE0F \uC378\uB124\uC77C \uC774\uBBF8\uC9C0\uAC00 \uC5C6\uB294 \uD398\uC774\uC9C0:",o.pageNumber)}),this.leftPanelThumbnails=[...this.leftPanelThumbnails],this.showSnackbar("\uC378\uB124\uC77C \uC0DD\uC131\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694."),this.cdr.detectChanges()}catch(e){console.error("\u274C \uC378\uB124\uC77C \uC0DD\uC131 \uC2E4\uD328:",e),this.showSnackbar("\uC378\uB124\uC77C \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),this.leftPanelThumbnails.forEach(i=>{i.isLoading=!1}),this.cdr.detectChanges()}})}startPdfAnalysis(t,e){return P(this,null,function*(){if(!this.pdfTextStreamData){if(!this.pdfSrc){this.showSnackbar("PDF\uB97C \uBA3C\uC800 \uB85C\uB4DC\uD574\uC8FC\uC138\uC694.");return}try{this.selectedAnalysisPage=e,yield this.executePdfAnalysis({showDashboard:!1})}catch(i){console.error("\u274C PDF \uBD84\uC11D \uC2E4\uD328:",i),this.showSnackbar("PDF \uBD84\uC11D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.");return}}try{this.showSnackbar(`${e}\uD398\uC774\uC9C0 \uBD84\uC11D\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),this.cdr.detectChanges()}catch(i){console.error("\u274C PDF \uBD84\uC11D \uC2E4\uD328:",i),this.showSnackbar("PDF \uBD84\uC11D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}extractImagesFromPdfForCombined(){return P(this,null,function*(){let t=new Map;if(this.pdfAnalysisData?.imageInfo?.images&&this.pdfAnalysisData.imageInfo.images.length>0)try{let e=this.pdfImageExtractor.extractFromAnalysisData(this.pdfAnalysisData,{preferOriginal:!0});for(let i of e.images){let o=(this.pdfAnalysisData?.pageHeight||841.89)-i.y-i.height,d={id:`image-from-analysis-${Date.now()}-${Math.random()}`,type:"image",x:i.x,y:o,width:i.width,height:i.height,src:i.src,transform:i.transform,pageNumber:i.pageNumber,zIndex:-1},h=t.get(i.pageNumber)||[];h.push(d),t.set(i.pageNumber,h)}return t}catch(e){console.error("\u274C [Ez-Reader] PdfImageExtractorService \uC2E4\uD328:",e)}if(this.imageData?.images&&this.imageData.images.length>0){console.warn("\u26A0\uFE0F [Ez-Reader] Fallback: this.imageData \uC0AC\uC6A9 (\uC88C\uD45C\uAC00 \uC815\uD655\uD558\uC9C0 \uC54A\uC744 \uC218 \uC788\uC74C)");try{for(let i of this.imageData.images){let n=i.pageNumber,o=i.images||[];for(let d=0;d<o.length;d++){let h=o[d],_=yield this.convertImageToDataUrl(h);(!_||_.includes("placeholder"))&&console.warn("      \u26A0\uFE0F \uC774\uBBF8\uC9C0 \uBCC0\uD658 \uC2E4\uD328 - placeholder \uC0AC\uC6A9");let C={id:`image-combined-${n}-${Date.now()}-${Math.random()}`,type:"image",x:0,y:0,width:h.width?h.width/4:595,height:h.height?h.height/4:842,src:_,zIndex:-1},x=t.get(n)||[];x.push(C),t.set(n,x)}}let e=Array.from(t.values()).reduce((i,n)=>i+n.length,0);return t}catch(e){console.error("\u274C [Ez-Reader] this.imageData \uC774\uBBF8\uC9C0 \uCD94\uCD9C \uC2E4\uD328:",e)}}return t.size===0&&console.warn("\u26A0\uFE0F [Ez-Reader] \uCD94\uCD9C\uB41C \uC774\uBBF8\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),t})}convertImageToDataUrl(t){return P(this,null,function*(){if(t.dataUrl&&typeof t.dataUrl=="string"&&t.dataUrl.startsWith("data:"))return t.dataUrl;if(t.thumbnail&&typeof t.thumbnail=="string"&&t.thumbnail.startsWith("data:"))return t.thumbnail;if(t.image)try{let e=t.image;if(e.data&&e.width&&e.height){let i=document.createElement("canvas");i.width=e.width,i.height=e.height;let n=i.getContext("2d");if(n){let o;if(e.kind===1&&e.data.length===e.width*e.height*3){let h=new Uint8ClampedArray(e.width*e.height*4);for(let _=0,C=0;_<e.data.length;_+=3,C+=4)h[C]=e.data[_],h[C+1]=e.data[_+1],h[C+2]=e.data[_+2],h[C+3]=255;o=new ImageData(h,e.width,e.height)}else o=new ImageData(new Uint8ClampedArray(e.data),e.width,e.height);return n.putImageData(o,0,0),i.toDataURL("image/png")}}if(e.bitmap&&e.bitmap instanceof ImageBitmap){let i=document.createElement("canvas");i.width=e.bitmap.width,i.height=e.bitmap.height;let n=i.getContext("2d");if(n)return n.drawImage(e.bitmap,0,0),i.toDataURL("image/png")}}catch(e){console.error("\u274C Canvas \uBCC0\uD658 \uC2E4\uD328:",e)}return console.warn("\u26A0\uFE0F \uC774\uBBF8\uC9C0 \uBCC0\uD658 \uC2E4\uD328 - placeholder \uC0AC\uC6A9"),"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RkZCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjEyIiBmaWxsPSIjOTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2U8L3RleHQ+PC9zdmc+"})}groupTextItemsForCombined(t){if(!t||t.length===0)return[];let e=[],i=[...t].sort((d,h)=>{let _=h.position.y-d.position.y;return Math.abs(_)>5?_:d.position.x-h.position.x}),n=[],o=i[0]?.position?.y||0;for(let d of i)Math.abs(d.position.y-o)>5?(n.length>0&&e.push(n),n=[d],o=d.position.y):n.push(d);return n.length>0&&e.push(n),e.flat()}saveDocument(){return P(this,null,function*(){try{let t=this.pdfEditorVisible?"editor":"viewer",e=this.currentFileName||`\uBB38\uC11C_${new Date().toLocaleDateString()}`;if(!this.titleInputModalComponent){console.error("TitleInputModalComponent\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.snackbar.showError("\uBB38\uC11C \uC800\uC7A5 \uAE30\uB2A5\uC744 \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.pendingDownload=!1,this.titleInputModalComponent.open(e,"save",this.pdfEditorVisible)}catch(t){console.error("\uBB38\uC11C \uC800\uC7A5 \uC2E4\uD328:",t),this.snackbar.showError("\uBB38\uC11C \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}onTitleConfirmed(t){return P(this,null,function*(){console.log("\u{1F7E2} onTitleConfirmed \uD638\uCD9C\uB428, title:",t,"pendingDownload:",this.pendingDownload);try{this.pendingDownload?(console.log("\u{1F7E2} \uB2E4\uC6B4\uB85C\uB4DC \uBAA8\uB4DC"),yield this.downloadPdfFile(t),this.pendingDownload=!1):(console.log("\u{1F7E2} \uC800\uC7A5 \uBAA8\uB4DC - saveAllEditsToEmbeddedPdf \uD638\uCD9C \uC608\uC815"),this.currentFileName=t,yield this.saveAllEditsToEmbeddedPdf(),console.log("\u{1F7E2} saveAllEditsToEmbeddedPdf \uC644\uB8CC"))}catch(e){console.error("\uC791\uC5C5 \uC2E4\uD328:",e),this.snackbar.showError("\uC791\uC5C5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}downloadPdfFile(t){return P(this,null,function*(){try{if(!this.pdfSrc){this.snackbar.showWarning("\uB2E4\uC6B4\uB85C\uB4DC\uD560 PDF\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.snackbar.showInfo("PDF\uB97C \uB2E4\uC6B4\uB85C\uB4DC\uD558\uB294 \uC911...");let i=yield(yield fetch(this.pdfSrc)).blob(),n=URL.createObjectURL(i),o=document.createElement("a");o.href=n;let d=t.endsWith(".pdf")?t:`${t}.pdf`;o.download=d,o.click(),URL.revokeObjectURL(n),this.snackbar.showSuccess(`'${d}' \uB2E4\uC6B4\uB85C\uB4DC\uAC00 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}catch(e){console.error("\u274C PDF \uB2E4\uC6B4\uB85C\uB4DC \uC2E4\uD328:",e),this.snackbar.showError("PDF \uB2E4\uC6B4\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}saveDocumentToIndexedDB(t){return P(this,null,function*(){try{let e=this.pdfEditorVisible?"editor":"viewer";this.snackbar.showInfo("\uBB38\uC11C\uB97C \uC800\uC7A5\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4...");let i=e==="editor"?this.getTotalElementCount():this.pdfPages.length,n=this.pdfPages.length||this.totalPages||0,o="",d="",h=0;if(this.pdfSrc&&this.pdfSrc.startsWith("blob:"))try{let E=yield(yield fetch(this.pdfSrc)).blob();h=E.size;let z=new FileReader;o=yield new Promise((A,V)=>{z.onloadend=()=>A(z.result),z.onerror=V,z.readAsDataURL(E)})}catch(w){console.warn("Blob URL\uC744 Base64\uB85C \uBCC0\uD658 \uC2E4\uD328:",w)}let _={id:this.generateDocumentId(),title:t,pages:this.pdfPages,elementCount:i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),version:"1.0",pdfSrc:this.pdfSrc||void 0,pdfBase64:o||void 0,fileName:this.currentFileName||void 0,documentType:e,pageCount:n,fileSize:h||void 0},x=(yield this.indexedDbService.getAllDocuments()).find(w=>w.title===t);x&&(_.id=x.id,_.createdAt=x.createdAt),yield this.indexedDbService.saveDocument(_),this.currentFileName=t,e==="editor"&&(this.pdfEditorData={pages:this.pdfPages,currentPage:this.currentPage,totalPages:this.pdfPages.length,targetPage:this.pdfEditorData?.targetPage}),this.tabBarComponent&&(this.tabBarComponent.updateActiveTabName(t),e==="editor"&&this.tabBarComponent.updateActiveTabView("editor",this.pdfEditorData)),yield this.loadRecentFiles();let v=e==="viewer"?"PDF \uBDF0\uC5B4":"\uD3B8\uC9D1\uAE30";this.snackbar.showSuccess(`'${t}' \uBB38\uC11C\uAC00 ${v} \uBAA8\uB4DC\uB85C \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}catch(e){console.error("\uBB38\uC11C \uC800\uC7A5 \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C \uC800\uC7A5\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}onTitleInputModalClose(){}generateDocumentId(){return"doc_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}getTotalElementCount(){return this.pdfPages.reduce((t,e)=>t+(e.elements?.length||0),0)}saveOpenedPdfAsDocument(t){return P(this,null,function*(){try{let e=yield this.fileToBase64(t),i=0;try{i=this.pdfPages.length||this.totalPages||1}catch(h){console.warn("\uD398\uC774\uC9C0 \uC218 \uCD94\uCD9C \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9:",h),i=1}let n={id:this.generateDocumentId(),title:t.name,pages:[],elementCount:i,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),version:"1.0",pdfSrc:this.pdfSrc||void 0,pdfBase64:e,originalPdfBase64:e,fileName:t.name,documentType:"viewer",pageCount:i,fileSize:t.size},d=(yield this.indexedDbService.getAllDocuments()).find(h=>h.fileName===t.name&&h.documentType==="viewer");d&&(n.id=d.id,n.createdAt=d.createdAt),yield this.indexedDbService.saveDocument(n)}catch(e){console.error("PDF \uBB38\uC11C \uC800\uC7A5 \uC2E4\uD328:",e)}})}fileToBase64(t){return P(this,null,function*(){return new Promise((e,i)=>{let n=new FileReader;n.onloadend=()=>e(n.result),n.onerror=i,n.readAsDataURL(t)})})}updateDocumentPageCount(t,e,i){return P(this,null,function*(){try{let o=(yield this.indexedDbService.getAllDocuments()).find(d=>(d.fileName===t||d.title===t)&&d.documentType==="viewer");o&&(o.pageCount=e,o.fileSize=i,o.updatedAt=new Date().toISOString(),yield this.indexedDbService.saveDocument(o),yield this.loadRecentFiles())}catch(n){console.error("\uBB38\uC11C \uD398\uC774\uC9C0 \uC218 \uC5C5\uB370\uC774\uD2B8 \uC2E4\uD328:",n)}})}loadDocumentAsViewer(t){return P(this,null,function*(){let e="",i;if(t.pdfBase64)try{let n=t.pdfBase64.split(",")[1]||t.pdfBase64,o=atob(n),d=new Uint8Array(o.length);for(let h=0;h<o.length;h++)d[h]=o.charCodeAt(h);i=new Blob([d],{type:"application/pdf"}),e=URL.createObjectURL(i)}catch(n){if(console.error("\u274C Base64 \uB370\uC774\uD130 \uBCC0\uD658 \uC2E4\uD328:",n),t.pdfSrc)e=t.pdfSrc;else{this.snackbar.showError("PDF \uB370\uC774\uD130\uB97C \uBD88\uB7EC\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}}else if(t.pdfSrc)e=t.pdfSrc;else{console.error("\u274C PDF \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.snackbar.showError("PDF \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.currentTabView="viewer",this.currentFileName=t.fileName||t.title,this.pdfPages=t.pages||[],this.currentPage=1,this.totalPages=0,this.leftPanelThumbnails=[],this.thumbnailsGenerated=!1,setTimeout(()=>{this.pdfSrc=e,this.cdr.detectChanges()},100),this.tabBarComponent&&(this.tabBarComponent.updateActiveTabName(this.currentFileName),this.tabBarComponent.updateActiveTabView("viewer",null),i&&(yield this.tabBarComponent.setActiveTabPdf(this.currentFileName,e,i)))})}loadDocumentAsEditor(t){return P(this,null,function*(){let e;if(t.pdfBase64)try{let i=t.pdfBase64.split(",")[1]||t.pdfBase64,n=atob(i),o=new Uint8Array(n.length);for(let d=0;d<n.length;d++)o[d]=n.charCodeAt(d);e=new Blob([o],{type:"application/pdf"})}catch(i){console.error("\u274C \uD3B8\uC9D1 PDF Base64 \uBCC0\uD658 \uC2E4\uD328:",i)}if(this.currentFileName=t.title,this.pdfPages=t.pages||[],this.currentPage=1,this.totalPages=this.pdfPages.length,this.leftPanelThumbnails=[],this.thumbnailsGenerated=!1,this.currentTabView="viewer",this.pdfEditorVisible=!0,this.pdfEditorData=null,this.tabBarComponent&&e){let i=URL.createObjectURL(e);this.tabBarComponent.updateActiveTabName(this.currentFileName),yield this.tabBarComponent.setActiveTabPdf(this.currentFileName,i,e),this.pdfSrc=i,this.tabBarComponent.updateActiveTabView("editor",this.pdfEditorData)}else this.pdfSrc=null,this.tabBarComponent&&(this.tabBarComponent.updateActiveTabName(this.currentFileName),this.tabBarComponent.updateActiveTabView("editor",this.pdfEditorData));this.cdr.detectChanges()})}activateDrawEditor(){setTimeout(()=>{let t=this.PDFViewerApplication;t?.eventBus?(t.eventBus.dispatch("switchannotationeditormode",{source:this,mode:15}),setTimeout(()=>{this.applyDrawingColorToPdfJs(this.drawingColor),this.applyDrawingThicknessToPdfJs(this.drawingThickness),this.applyDrawingOpacityToPdfJs(100)},50)):this.activatePdfEditor("ink")},100)}deactivateDrawEditor(){let t=this.PDFViewerApplication;t?.eventBus&&t.eventBus.dispatch("switchannotationeditormode",{source:this,mode:0})}applyDrawingColorToPdfJs(t){let e=this.PDFViewerApplication;e?.eventBus&&e.eventBus.dispatch("switchannotationeditorparams",{source:this,type:21,value:t})}applyDrawingThicknessToPdfJs(t){let e=this.PDFViewerApplication;e?.eventBus&&e.eventBus.dispatch("switchannotationeditorparams",{source:this,type:22,value:t})}applyDrawingOpacityToPdfJs(t){let e=this.PDFViewerApplication;e?.eventBus&&e.eventBus.dispatch("switchannotationeditorparams",{source:this,type:23,value:t})}onPageChangeFromPanel(t){if(t>=1&&t<=this.totalPages){this.currentPage=t;let e=this.PDFViewerApplication;e?.pdfViewer&&(e.pdfViewer.currentPageNumber=t)}}onRightPanelMenuSelect(t){console.log("\uC6B0\uCE21 \uD328\uB110 \uBA54\uB274 \uC120\uD0DD:",t)}extractPageText(t){return P(this,null,function*(){let e=this.PDFViewerApplication;if(!e?.pdfDocument)return console.warn("PDF \uBB38\uC11C\uAC00 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4."),"";try{let o=(yield(yield e.pdfDocument.getPage(t)).getTextContent()).items.map(d=>d.str).join(" ").replace(/\s+/g," ").trim();return console.log(`\u{1F4C4} \uD398\uC774\uC9C0 ${t} \uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uC644\uB8CC: ${o.length}\uC790`),o}catch(i){return console.error(`\uD398\uC774\uC9C0 ${t} \uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uC2E4\uD328:`,i),""}})}extractAllPagesText(){return P(this,null,function*(){let t=this.PDFViewerApplication;if(!t?.pdfDocument)return"";let e=[],i=t.pdfDocument.numPages;for(let n=1;n<=i;n++){let o=yield this.extractPageText(n);o&&e.push(`[\uD398\uC774\uC9C0 ${n}]
${o}`)}return e.join(`

`)})}generateSummaryPrompt(t,e="general",i="medium"){let n="\uB2F9\uC2E0\uC740 \uC804\uBB38 \uBB38\uC11C \uC694\uC57D \uC804\uBB38\uAC00\uC785\uB2C8\uB2E4. \uB2E4\uC74C \uBB38\uC11C\uB97C \uBD84\uC11D\uD558\uC5EC ";switch(e){case"bullet":n+=`\uD575\uC2EC \uD3EC\uC778\uD2B8\uB97C \uBC88\uD638 \uBAA9\uB85D\uC73C\uB85C \uC815\uB9AC\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
- \uAC01 \uD56D\uBAA9\uC740 \uD558\uB098\uC758 \uD575\uC2EC \uC544\uC774\uB514\uC5B4
- \uC911\uC694\uB3C4 \uC21C\uC73C\uB85C \uBC30\uC5F4
- \uAD6C\uCCB4\uC801\uC774\uACE0 \uBA85\uD655\uD55C \uD45C\uD604 \uC0AC\uC6A9`;break;case"qa":n+=`Q&A \uD615\uC2DD\uC73C\uB85C \uC815\uB9AC\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
- \uBB38\uC11C\uC758 \uC8FC\uC694 \uC8FC\uC81C\uB97C \uC9C8\uBB38\uC73C\uB85C
- \uD575\uC2EC \uB0B4\uC6A9\uC744 \uB2F5\uBCC0\uC73C\uB85C
- 3-5\uAC1C\uC758 \uC911\uC694\uD55C Q&A \uC30D`;break;case"structure":n+=`\uAD6C\uC870\uC801\uC73C\uB85C \uBD84\uC11D\uD558\uC5EC \uC139\uC158\uBCC4\uB85C \uC815\uB9AC\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
- \uBB38\uC11C\uC758 \uC804\uCCB4 \uAD6C\uC870 \uD30C\uC545
- \uAC01 \uC139\uC158\uC758 \uC8FC\uC694 \uB0B4\uC6A9
- \uC139\uC158 \uAC04 \uC5F0\uACB0\uC131 \uD45C\uD604`;break;default:n+=`\uD575\uC2EC \uB0B4\uC6A9\uC744 \uBA85\uD655\uD558\uAC8C \uC694\uC57D\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
- \uC8FC\uC694 \uC544\uC774\uB514\uC5B4\uC640 \uACB0\uB860\uC744 \uD3EC\uD568
- \uC911\uC694\uD55C \uC138\uBD80\uC0AC\uD56D \uC720\uC9C0
- \uB17C\uB9AC\uC801 \uD750\uB984 \uBCF4\uC874`}switch(i){case"short":n+=`

\uAE38\uC774: \uD575\uC2EC\uB9CC \uAC04\uACB0\uD558\uAC8C 1-2\uBB38\uB2E8 (100-150\uC790)`;break;case"long":n+=`

\uAE38\uC774: \uC0C1\uC138\uD558\uAC8C 5-6\uBB38\uB2E8 (400-500\uC790)`;break;default:n+=`

\uAE38\uC774: \uC801\uC808\uD55C \uC0C1\uC138\uB3C4\uB85C 3-4\uBB38\uB2E8 (200-300\uC790)`}return n+=`

\uCD9C\uB825 \uC5B8\uC5B4: \uD55C\uAD6D\uC5B4
\uCD9C\uB825 \uD615\uC2DD: \uC694\uC57D \uB0B4\uC6A9\uB9CC \uC791\uC131 (\uC124\uBA85\uC774\uB098 \uBA54\uD0C0\uC815\uBCF4 \uC81C\uC678)

\uBB38\uC11C \uB0B4\uC6A9:
---
`+t+`
---`,n}onRequestAiSummary(t){return P(this,null,function*(){if(!this.pdfSrc){this.showSnackbar("PDF \uD30C\uC77C\uC774 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");return}let e=t?.pageRange||"current",i=t?.summaryType||"general",n=t?.summaryLength||"medium";this.isAiLoading=!0,this.aiSummaryContent="";try{let o;if(e==="all"?(this.aiSummaryContent="\uC804\uCCB4 \uBB38\uC11C \uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uC911...",o=yield this.extractAllPagesText()):(this.aiSummaryContent=`\uD398\uC774\uC9C0 ${this.currentPage} \uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uC911...`,o=yield this.extractPageText(this.currentPage)),!o||o.length<10){this.aiSummaryContent=`\u26A0\uFE0F \uCD94\uCD9C\uB41C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uAC70\uB098 \uB108\uBB34 \uC9E7\uC2B5\uB2C8\uB2E4.

\uC774 PDF\uB294 \uC774\uBBF8\uC9C0 \uAE30\uBC18\uC774\uAC70\uB098 \uD14D\uC2A4\uD2B8\uB97C \uD3EC\uD568\uD558\uC9C0 \uC54A\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4.`,this.isAiLoading=!1;return}console.log(`\u{1F4DD} \uCD94\uCD9C\uB41C \uD14D\uC2A4\uD2B8 \uAE38\uC774: ${o.length}\uC790`),this.aiSummaryContent="AI\uAC00 \uC694\uC57D \uC0DD\uC131 \uC911...";let d=this.generateSummaryPrompt(o,i,n);this.geminiService.translateText(d,"korean").subscribe({next:h=>{if(h.success){let _=e==="all"?`\u{1F4C4} \uC804\uCCB4 \uBB38\uC11C (${this.totalPages}\uD398\uC774\uC9C0)`:`\u{1F4C4} \uD604\uC7AC \uD398\uC774\uC9C0: ${this.currentPage}/${this.totalPages}`;this.aiSummaryContent=`${_}

${h.translatedText}`,this.snackbar.showSuccess("AI \uC694\uC57D\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}else this.aiSummaryContent=`\u274C \uC694\uC57D \uC2E4\uD328

${h.error||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}`;this.isAiLoading=!1},error:h=>{console.error("AI \uC694\uC57D \uC624\uB958:",h);let _=h?.error||h?.message||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958";this.aiSummaryContent=`\u274C \uC694\uC57D \uC911 \uC624\uB958 \uBC1C\uC0DD

${_}

\u{1F4A1} Tip: \uB0B4\uC815\uBCF4\uC5D0\uC11C Google \uC778\uC99D \uB610\uB294 API \uD0A4\uB97C \uC124\uC815\uD558\uC138\uC694.`,this.isAiLoading=!1}})}catch(o){console.error("AI \uC694\uC57D \uC624\uB958:",o),this.aiSummaryContent=`\u274C \uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uC2E4\uD328

${o?.message||"\uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}`,this.isAiLoading=!1}})}onRequestAiTranslate(t){return P(this,null,function*(){if(!this.pdfSrc){this.showSnackbar("PDF \uD30C\uC77C\uC774 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");return}let e=t?.pageRange||"current",i=t?.targetLanguage||"english";this.isAiLoading=!0,this.aiTranslateContent="";try{let n;if(e==="all"?(this.aiTranslateContent="\uC804\uCCB4 \uBB38\uC11C \uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uC911...",n=yield this.extractAllPagesText()):(this.aiTranslateContent=`\uD398\uC774\uC9C0 ${this.currentPage} \uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uC911...`,n=yield this.extractPageText(this.currentPage)),!n||n.length<10){this.aiTranslateContent=`\u26A0\uFE0F \uCD94\uCD9C\uB41C \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uAC70\uB098 \uB108\uBB34 \uC9E7\uC2B5\uB2C8\uB2E4.

\uC774 PDF\uB294 \uC774\uBBF8\uC9C0 \uAE30\uBC18\uC774\uAC70\uB098 \uD14D\uC2A4\uD2B8\uB97C \uD3EC\uD568\uD558\uC9C0 \uC54A\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4.`,this.isAiLoading=!1;return}console.log(`\u{1F4DD} \uBC88\uC5ED\uD560 \uD14D\uC2A4\uD2B8 \uAE38\uC774: ${n.length}\uC790`),this.aiTranslateContent="AI\uAC00 \uBC88\uC5ED \uC911...",this.geminiService.translateText(n,i).subscribe({next:o=>{if(o.success){let d=e==="all"?`\u{1F310} \uC804\uCCB4 \uBB38\uC11C \uBC88\uC5ED (${this.totalPages}\uD398\uC774\uC9C0)`:`\u{1F310} \uD398\uC774\uC9C0 ${this.currentPage}/${this.totalPages} \uBC88\uC5ED`,h=this.getLanguageLabel(i);this.aiTranslateContent=`${d}
\u{1F4CD} ${h}

${o.translatedText}`,this.snackbar.showSuccess("AI \uBC88\uC5ED\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}else this.aiTranslateContent=`\u274C \uBC88\uC5ED \uC2E4\uD328

${o.error||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}`;this.isAiLoading=!1},error:o=>{console.error("AI \uBC88\uC5ED \uC624\uB958:",o);let d=o?.error||o?.message||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958";this.aiTranslateContent=`\u274C \uBC88\uC5ED \uC911 \uC624\uB958 \uBC1C\uC0DD

${d}

\u{1F4A1} Tip: \uB0B4\uC815\uBCF4\uC5D0\uC11C Google \uC778\uC99D \uB610\uB294 API \uD0A4\uB97C \uC124\uC815\uD558\uC138\uC694.`,this.isAiLoading=!1}})}catch(n){console.error("AI \uBC88\uC5ED \uC624\uB958:",n),this.aiTranslateContent=`\u274C \uD14D\uC2A4\uD2B8 \uCD94\uCD9C \uC2E4\uD328

${n?.message||"\uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}`,this.isAiLoading=!1}})}getLanguageLabel(t){return{english:"\uC601\uC5B4 (English)",korean:"\uD55C\uAD6D\uC5B4 (Korean)",japanese:"\uC77C\uBCF8\uC5B4 (Japanese)",chinese:"\uC911\uAD6D\uC5B4 (Chinese)",spanish:"\uC2A4\uD398\uC778\uC5B4 (Spanish)",french:"\uD504\uB791\uC2A4\uC5B4 (French)",german:"\uB3C5\uC77C\uC5B4 (German)"}[t]||t}onTabCloseRequest(t){return P(this,null,function*(){if(console.log(`\u{1F4D1} \uD0ED \uB2EB\uAE30 \uC694\uCCAD: ${t.fileName}, hasUnsavedChanges: ${t.hasUnsavedChanges}`),t.hasUnsavedChanges){let i=yield this.dialog.open(Kt,{width:"400px",disableClose:!0,panelClass:"rounded-dialog",data:{message:"\uB2EB\uAE30 \uC804\uC5D0 \uC800\uC7A5\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",fileName:t.fileName}}).afterClosed().toPromise();i==="save"?(yield this.saveCurrentDocumentAndCloseTab(t.tabId),this.closeAllModalsAndPanels()):i==="discard"&&(this.tabBarComponent?.closeTab(t.tabId),this.tabBarComponent?.setTabUnsavedChanges(t.tabId,!1),this.closeAllModalsAndPanels())}else this.tabBarComponent?.closeTab(t.tabId),this.closeAllModalsAndPanels()})}closeAllModalsAndPanels(){this.showRightPanel=!1,this.isLeftPanelVisible=!1,this.pageReorderVisible=!1,this.fileConversionVisible=!1,this.securityVisible=!1,this.pdfAnalysisDashboardVisible=!1,this.pdfEditorVisible=!1,this.showTextEditorModal=!1,this.showFileConversionModal=!1,this.showShapeModal=!1,this.showShapePropertiesModal=!1,this.showSignaturePadModal=!1,this.showWatermarkConfigModal=!1,this.showPageNumberConfigModal=!1,this.showSignatureConfigModal=!1,this.showSignatureSelector=!1,this.showMergeModal=!1,this.pageSelectorVisible=!1,this.confirmModalVisible=!1,this.showDrawingPanel=!1,this.isDrawingMode=!1,this.isEraserMode=!1,this.currentEditorTool=null,this.searchModalComponent&&this.searchModalComponent.hide(),console.log("\u2705 \uBAA8\uB4E0 \uBAA8\uB2EC/\uD328\uB110 \uB2EB\uD798")}saveCurrentDocumentAndCloseTab(t){return P(this,null,function*(){try{this.snackbar.showInfo("\uBB38\uC11C\uB97C \uC800\uC7A5\uD558\uB294 \uC911..."),yield this.saveAllEditsToEmbeddedPdf(),this.tabBarComponent?.setTabUnsavedChanges(t,!1),this.tabBarComponent?.closeTab(t),this.overlayManager?.markClean();for(let e of this.pdfPages)e.elements=[];this.snackbar.showSuccess("\uBB38\uC11C\uAC00 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(e){console.error("\uBB38\uC11C \uC800\uC7A5 \uC2E4\uD328:",e),this.snackbar.showError("\uBB38\uC11C \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}saveAllEditsToEmbeddedPdf(){return P(this,null,function*(){try{console.log("\u{1F535} saveAllEditsToEmbeddedPdf \uC2DC\uC791"),console.log("\u{1F535} pdfPages:",JSON.stringify(this.pdfPages.map(w=>({pageNumber:w.pageNumber,elementsCount:w.elements?.length||0,elements:w.elements?.map(E=>({id:E.id,type:E.type,hasSrc:!!E.src}))}))));let t=this.PDFViewerApplication,e;if(t?.pdfDocument){console.log("\u{1F535} PDF.js pdfDocument \uC788\uC74C"),t.eventBus&&(t.eventBus.dispatch("switchannotationeditormode",{source:this,mode:0}),yield new Promise(E=>setTimeout(E,300)));let w=yield t.pdfDocument.saveDocument();e=new Uint8Array(w.buffer||w),console.log("\u{1F535} PDF.js\uC5D0\uC11C PDF \uCD94\uCD9C, \uD06C\uAE30:",e.length)}else{console.log("\u{1F535} PDF.js pdfDocument \uC5C6\uC74C, \uC6D0\uBCF8\uC5D0\uC11C \uAC00\uC838\uC624\uAE30");let w=yield this.getCurrentPdfBytes();if(!w)throw new Error("PDF \uB370\uC774\uD130\uB97C \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");e=w}let i=yield this.pdfLibService.loadExistingPdf(e);if(!i)throw new Error("PDF\uB97C \uB85C\uB4DC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");console.log("\u{1F535} pdf-lib \uB85C\uB4DC \uC131\uACF5");let n=i.getPages();console.log("\u{1F535} PDF \uD398\uC774\uC9C0 \uC218:",n.length);let o=0;for(let w of this.pdfPages){let E=w.pageNumber-1;if(E<0||E>=n.length){console.log("\u{1F534} \uD398\uC774\uC9C0 \uC778\uB371\uC2A4 \uBC94\uC704 \uBC97\uC5B4\uB0A8:",E);continue}let z=n[E],{width:A,height:V}=z.getSize();console.log(`\u{1F535} \uD398\uC774\uC9C0 ${w.pageNumber}: ${A}x${V}, \uC694\uC18C ${w.elements?.length||0}\uAC1C`);for(let ee of w.elements||[])console.log(`\u{1F535} \uC694\uC18C \uC784\uBCA0\uB529 \uC2DC\uB3C4: ${ee.type}, id=${ee.id}, src=${ee.src?"\uC788\uC74C":"\uC5C6\uC74C"}`),yield this.embedElementToPage(i,z,ee,A,V,w.pageNumber),o++}console.log("\u{1F535} \uCD1D \uC784\uBCA0\uB529 \uC694\uC18C:",o);let d=yield i.save(),h=new Blob([d],{type:"application/pdf"});console.log("\u2705 PDF \uC784\uBCA0\uB529 \uC644\uB8CC, \uD06C\uAE30:",d.length,"bytes"),console.log("\u2705 pdfPages \uC694\uC18C \uC218:",this.pdfPages.reduce((w,E)=>w+(E.elements?.length||0),0));let _=document.querySelectorAll(".signature-element");_.forEach(w=>w.remove()),document.querySelectorAll(".signature-overlay-container").forEach(w=>{w.children.length===0&&w.remove()}),document.querySelectorAll(".overlay-container").forEach(w=>w.remove()),console.log("\u2705 DOM \uC11C\uBA85 \uC624\uBC84\uB808\uC774 \uC81C\uAC70\uB428:",_.length,"\uAC1C");for(let w of this.pdfPages)w.elements=[];console.log("\u2705 pdfPages \uC694\uC18C \uCD08\uAE30\uD654\uB428");let v=URL.createObjectURL(h);this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=v,this.currentPdfBlob=h,yield this.saveDocumentToIndexedDB(this.currentFileName||"\uC0C8 \uBB38\uC11C"),yield this.reloadPdfViewer(h),console.log("\u2705 \uBAA8\uB4E0 \uD3B8\uC9D1 \uB0B4\uC6A9\uC774 PDF\uC5D0 \uC784\uBCA0\uB529\uB418\uC5B4 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.snackbar.showSuccess("\uC11C\uBA85\uC774 PDF\uC5D0 \uC784\uBCA0\uB529\uB418\uC5B4 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){throw console.error("saveAllEditsToEmbeddedPdf \uC2E4\uD328:",t),t}})}reloadPdfViewer(t){return P(this,null,function*(){try{let e=yield t.arrayBuffer(),i=new Uint8Array(e),n=URL.createObjectURL(t);this.pdfSrc&&this.pdfSrc!==n&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc="",this.cdr.detectChanges(),yield new Promise(o=>setTimeout(o,100)),this.pdfSrc=n,this.currentPdfBlob=t,this.cdr.detectChanges(),console.log("\u2705 PDF \uBDF0\uC5B4\uAC00 \uC0C8 PDF\uB85C \uB2E4\uC2DC \uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(e){console.error("PDF \uBDF0\uC5B4 \uB9AC\uB85C\uB4DC \uC2E4\uD328:",e)}})}embedElementToPage(t,e,i,n,o,d){return P(this,null,function*(){try{if(i.type==="image"&&i.src){let h=i.src,_,C;if(h.startsWith("data:image/png")){let oe=h.split(",")[1];_=Uint8Array.from(atob(oe),Me=>Me.charCodeAt(0)),C=yield t.embedPng(_)}else if(h.startsWith("data:image/jpeg")||h.startsWith("data:image/jpg")){let oe=h.split(",")[1];_=Uint8Array.from(atob(oe),Me=>Me.charCodeAt(0)),C=yield t.embedJpg(_)}else{let oe=h.split(",")[1]||h;_=Uint8Array.from(atob(oe),Me=>Me.charCodeAt(0)),C=yield t.embedPng(_)}let x=C.width,v=C.height,w=x/v;console.log(`\u{1F5BC}\uFE0F \uC6D0\uBCF8 \uC774\uBBF8\uC9C0 \uD06C\uAE30: ${x}x${v}, \uBE44\uC728: ${w.toFixed(3)}`);let E=i.width||200,z=E/w,A=document.querySelector(`.page[data-page-number="${d}"]`),V=1,ee=1;if(A){let oe=A.clientWidth,Me=A.clientHeight;V=n/oe,ee=o/Me,console.log(`\u{1F527} \uC2A4\uCF00\uC77C \uACC4\uC0B0: \uB80C\uB354\uB9C1 ${oe}x${Me}, PDF ${n}x${o}, \uC2A4\uCF00\uC77C ${V.toFixed(3)}x${ee.toFixed(3)}`)}let Z=V,L=E*Z,W=z*Z;console.log(`\u{1F4D0} PDF \uC774\uBBF8\uC9C0 \uD06C\uAE30: ${L.toFixed(1)}x${W.toFixed(1)} (\uBE44\uC728 \uC720\uC9C0)`);let K=i.x*V,he=i.y*ee,xe=o-he-W;if(i.x===50&&i.y===50){K=(n-L)/2;let oe=(o-W)/2;e.drawImage(C,{x:K,y:oe,width:L,height:W}),console.log(`\u2705 \uC774\uBBF8\uC9C0/\uC11C\uBA85 \uC784\uBCA0\uB529 (\uC911\uC559): (${K.toFixed(1)}, ${oe.toFixed(1)}), \uD06C\uAE30: ${L.toFixed(1)}x${W.toFixed(1)}`)}else e.drawImage(C,{x:K,y:xe,width:L,height:W}),console.log(`\u2705 \uC774\uBBF8\uC9C0/\uC11C\uBA85 \uC784\uBCA0\uB529: (${K.toFixed(1)}, ${xe.toFixed(1)}), \uD06C\uAE30: ${L.toFixed(1)}x${W.toFixed(1)}`)}else if(i.type==="shape"){let h=i.x,_=o-i.y-i.height,C=this.hexToRgbNormalized(i.fillColor||"#3B82F6"),x=this.hexToRgbNormalized(i.strokeColor||"#1E40AF");i.shapeType==="circle"?e.drawEllipse({x:h+i.width/2,y:_+i.height/2,xScale:i.width/2,yScale:i.height/2,color:this.pdfLibService.rgb(C[0],C[1],C[2]),borderColor:this.pdfLibService.rgb(x[0],x[1],x[2]),borderWidth:i.strokeWidth||2}):e.drawRectangle({x:h,y:_,width:i.width,height:i.height,color:this.pdfLibService.rgb(C[0],C[1],C[2]),borderColor:this.pdfLibService.rgb(x[0],x[1],x[2]),borderWidth:i.strokeWidth||2}),console.log(`\u2705 \uB3C4\uD615 \uC784\uBCA0\uB529: ${i.shapeType} at (${h}, ${_})`)}else if(i.type==="text"&&i.text){let h=yield this.pdfLibService.embedFontForText(t,i.text),_=this.hexToRgbNormalized(i.color||"#000000"),C=i.x,x=o-i.y-(i.fontSize||16);e.drawText(i.text,{x:C,y:x,size:i.fontSize||16,font:h,color:this.pdfLibService.rgb(_[0],_[1],_[2])}),console.log(`\u2705 \uD14D\uC2A4\uD2B8 \uC784\uBCA0\uB529: "${i.text}" at (${C}, ${x})`)}}catch(h){console.error(`\uC694\uC18C \uC784\uBCA0\uB529 \uC2E4\uD328 (${i.type}):`,h)}})}hexToRgbNormalized(t){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]:[0,0,0]}getCurrentPdfBytes(){return P(this,null,function*(){try{let t=this.PDFViewerApplication;if(t?.pdfDocument){let e=yield t.pdfDocument.getData();return new Uint8Array(e)}if(this.currentPdfBlob){let e=yield this.currentPdfBlob.arrayBuffer();return new Uint8Array(e)}return null}catch(t){return console.error("PDF \uBC14\uC774\uD2B8 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328:",t),null}})}saveEmbeddedPdfToIndexedDB(t){return P(this,null,function*(){let e=this.currentFileName||"\uC0C8 \uBB38\uC11C";if(this.currentDocumentId){let i=yield this.indexedDbService.getDocumentById(String(this.currentDocumentId));i&&(yield this.indexedDbService.updateDocument(Ne(ce({},i),{updatedAt:new Date().toISOString()})))}else yield this.saveDocumentToIndexedDB(e)})}checkForPdfAnnotations(){return P(this,null,function*(){try{if(this.pdfPages.some(i=>i.elements?.some(n=>n.type==="image"&&n.src)))return console.log("\u{1F4DD} \uC11C\uBA85/\uC774\uBBF8\uC9C0 \uC694\uC18C \uC788\uC74C"),!0;if(this.overlayManager&&this.overlayManager.hasUnsavedChanges&&this.overlayManager.hasUnsavedChanges())return console.log("\u{1F4DD} \uC624\uBC84\uB808\uC774 \uB9E4\uB2C8\uC800\uC5D0 \uC800\uC7A5\uB418\uC9C0 \uC54A\uC740 \uBCC0\uACBD\uC0AC\uD56D \uC788\uC74C"),!0;let e=this.PDFViewerApplication;if(e?.pdfDocument){let i=e.pdfDocument.annotationStorage;if(i){let n=i.size>0;return console.log(`\u{1F4DD} \uC5B4\uB178\uD14C\uC774\uC158 \uD655\uC778: ${n?"\uC788\uC74C":"\uC5C6\uC74C"} (${i.size}\uAC1C)`),this.currentWatermarkConfig?(console.log("\u{1F4DD} \uC6CC\uD130\uB9C8\uD06C \uC124\uC815 \uC788\uC74C"),!0):this.currentPageNumberConfig?(console.log("\u{1F4DD} \uD398\uC774\uC9C0 \uBC88\uD638 \uC124\uC815 \uC788\uC74C"),!0):n}}return this.currentWatermarkConfig?(console.log("\u{1F4DD} \uC6CC\uD130\uB9C8\uD06C \uC124\uC815 \uC788\uC74C"),!0):this.currentPageNumberConfig?(console.log("\u{1F4DD} \uD398\uC774\uC9C0 \uBC88\uD638 \uC124\uC815 \uC788\uC74C"),!0):!1}catch(t){return console.error("\uC5B4\uB178\uD14C\uC774\uC158 \uD655\uC778 \uC624\uB958:",t),!1}})}saveAnnotatedPdf(){return P(this,null,function*(){try{let t=this.PDFViewerApplication;if(!t?.pdfDocument)throw new Error("PDF \uBB38\uC11C\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");if(this.snackbar.showInfo("\uBB38\uC11C\uB97C \uC800\uC7A5\uD558\uB294 \uC911..."),this.currentWatermarkConfig){yield this.saveWithWatermark();return}if(this.currentPageNumberConfig){yield this.saveWithPageNumber();return}t.eventBus&&(t.eventBus.dispatch("switchannotationeditormode",{source:this,mode:0}),yield new Promise(o=>setTimeout(o,300)));let e=yield t.pdfDocument.saveDocument(),i=new Blob([e.buffer],{type:"application/pdf"}),n=URL.createObjectURL(i);this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=n,this.tabBarComponent&&this.currentFileName&&(yield this.tabBarComponent.setActiveTabPdf(this.currentFileName,this.pdfSrc,i)),yield this.saveDocumentToIndexedDB(this.currentFileName),console.log("\u2705 \uC5B4\uB178\uD14C\uC774\uC158 \uD3EC\uD568 PDF \uC800\uC7A5 \uC644\uB8CC")}catch(t){throw console.error("PDF \uC800\uC7A5 \uC624\uB958:",t),t}})}saveWithWatermark(){return P(this,null,function*(){try{let t=this.PDFViewerApplication;if(!t?.pdfDocument||!this.currentWatermarkConfig)throw new Error("PDF \uBB38\uC11C \uB610\uB294 \uC6CC\uD130\uB9C8\uD06C \uC124\uC815\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let e=this.currentWatermarkConfig,n=yield t.pdfDocument.getData(),o=yield this.pdfLibService.loadExistingPdf(n),d=null;e.contentType==="text"&&(d=yield this.pdfLibService.embedFontForText(o,e.text));let h=this.pdfLibService.hexToRgb(e.fontColor),_=this.pdfLibService.rgb(h.r,h.g,h.b),C=o.getPages();for(let E=0;E<C.length;E++){let z=C[E],{width:A,height:V}=z.getSize(),ee=this.calculateWatermarkPositions(e,A,V);for(let Z of ee)if(e.contentType==="text"&&d){let L=e.fontSize,W=d.widthOfTextAtSize(e.text,L),K=d.heightAtSize(L),he=V-Z.y,xe=-e.rotation;z.drawText(e.text,{x:Z.x-W/2,y:he-K/2,size:L,font:d,color:_,opacity:e.opacity,rotate:this.pdfLibService.degrees(xe)})}}let x=yield o.save(),v=new Blob([x],{type:"application/pdf"}),w=URL.createObjectURL(v);this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=w,this.tabBarComponent&&this.currentFileName&&(yield this.tabBarComponent.setActiveTabPdf(this.currentFileName,this.pdfSrc,v)),yield this.saveDocumentToIndexedDB(this.currentFileName),this.currentWatermarkConfig=null,console.log("\u2705 \uC6CC\uD130\uB9C8\uD06C \uD3EC\uD568 PDF \uC800\uC7A5 \uC644\uB8CC (\uD55C\uAE00 \uC9C0\uC6D0)")}catch(t){throw console.error("\uC6CC\uD130\uB9C8\uD06C PDF \uC800\uC7A5 \uC624\uB958:",t),t}})}saveWithPageNumber(){return P(this,null,function*(){try{let t=this.PDFViewerApplication;if(!t?.pdfDocument||!this.currentPageNumberConfig)throw new Error("PDF \uBB38\uC11C \uB610\uB294 \uD398\uC774\uC9C0 \uBC88\uD638 \uC124\uC815\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let e=this.currentPageNumberConfig,n=yield t.pdfDocument.getData(),o=yield this.pdfLibService.loadExistingPdf(n),d=this.getPageRangeList(e),h=e.style==="page-number"?"Page 1":"1",_=yield this.pdfLibService.embedFontForText(o,h),C=this.pdfLibService.hexToRgb(e.fontColor),x=this.pdfLibService.rgb(C.r,C.g,C.b),v=o.getPages();for(let A=0;A<v.length;A++){let V=A+1;if(!d.includes(V))continue;let ee=v[A],{width:Z,height:L}=ee.getSize(),W=V+e.startNumber-1,K="";switch(e.style){case"number":K=`${W}`;break;case"number-total":K=`${W}/${this.totalPages}`;break;case"page-number":K=`Page ${W}`;break;case"dash-number":K=`- ${W} -`;break}let he=this.calculatePageNumberPosition(e,Z,L),xe=e.fontSize,oe=_.widthOfTextAtSize(K,xe),Me=_.heightAtSize(xe),Ye=L-he.y;ee.drawText(K,{x:he.x-oe/2,y:Ye-Me/2,size:xe,font:_,color:x})}let w=yield o.save(),E=new Blob([w],{type:"application/pdf"}),z=URL.createObjectURL(E);this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=z,this.tabBarComponent&&this.currentFileName&&(yield this.tabBarComponent.setActiveTabPdf(this.currentFileName,this.pdfSrc,E)),yield this.saveDocumentToIndexedDB(this.currentFileName),this.currentPageNumberConfig=null,console.log("\u2705 \uD398\uC774\uC9C0 \uBC88\uD638 \uD3EC\uD568 PDF \uC800\uC7A5 \uC644\uB8CC")}catch(t){throw console.error("\uD398\uC774\uC9C0 \uBC88\uD638 PDF \uC800\uC7A5 \uC624\uB958:",t),t}})}markCurrentTabAsModified(){this.tabBarComponent&&(this.tabBarComponent.setActiveTabUnsavedChanges(!0),console.log("\u{1F4DD} \uD604\uC7AC \uD0ED\uC744 \uC218\uC815\uB428\uC73C\uB85C \uD45C\uC2DC"))}clearCurrentTabModified(){this.tabBarComponent&&(this.tabBarComponent.setActiveTabUnsavedChanges(!1),console.log("\u2705 \uD604\uC7AC \uD0ED\uC758 \uC218\uC815 \uD50C\uB798\uADF8 \uCD08\uAE30\uD654"))}initOrganizerView(){return P(this,null,function*(){if(this.pdfSrc)try{if(this.organizerThumbnails.length===this.totalPages)return;this.organizerThumbnails=[];let t=this.pdfSrc;for(let e=1;e<=this.totalPages;e++){let i=yield this.pdfThumbnailService.generateThumbnail(t,e,{scale:.3});this.organizerThumbnails.push({pageNumber:e,thumbnailUrl:i})}this.organizerSelectedPages=[],this.organizerCopiedPages=[],this.hideOrganizerContextMenu(),console.log("\u2705 Organizer \uC378\uB124\uC77C \uC0DD\uC131 \uC644\uB8CC:",this.organizerThumbnails.length)}catch(t){console.error("Organizer \uC378\uB124\uC77C \uC0DD\uC131 \uC624\uB958:",t)}})}onOrganizerPageClick(t,e){if(e.stopPropagation(),this.hideOrganizerContextMenu(),e.ctrlKey||e.metaKey){let i=this.organizerSelectedPages.indexOf(t);i>-1?this.organizerSelectedPages.splice(i,1):this.organizerSelectedPages.push(t)}else if(e.shiftKey&&this.organizerSelectedPages.length>0){let i=this.organizerSelectedPages[this.organizerSelectedPages.length-1],n=Math.min(i,t),o=Math.max(i,t);this.organizerSelectedPages=[];for(let d=n;d<=o;d++)this.organizerSelectedPages.push(d)}else this.organizerSelectedPages=[t]}isOrganizerPageSelected(t){return this.organizerSelectedPages.includes(t)}get hasOrganizerSelectedPages(){return this.organizerSelectedPages.length>0}get hasOrganizerCopiedPages(){return this.organizerCopiedPages.length>0}onOrganizerContextMenu(t,e){e.preventDefault(),e.stopPropagation(),this.organizerSelectedPages.includes(t)||(this.organizerSelectedPages=[t]),this.organizerContextMenu={visible:!0,x:e.clientX,y:e.clientY,pageNumber:t}}hideOrganizerContextMenu(){this.organizerContextMenu.visible=!1}onOrganizerBackgroundClick(){this.organizerSelectedPages=[],this.hideOrganizerContextMenu()}copyOrganizerPages(){this.organizerSelectedPages.length!==0&&(this.organizerCopiedPages=[...this.organizerSelectedPages].sort((t,e)=>t-e),this.hideOrganizerContextMenu(),this.snackbar.showSuccess(`${this.organizerCopiedPages.length}\uD398\uC774\uC9C0\uAC00 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`))}pasteOrganizerPages(){return P(this,null,function*(){if(this.organizerCopiedPages.length===0){this.snackbar.showWarning("\uBCF5\uC0AC\uB41C \uD398\uC774\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{let t=this.pdfSrc;if(!t)return;yield this.pdfLibService.loadPdfLib();let i=yield(yield fetch(t)).arrayBuffer(),n=yield PDFLib.PDFDocument.load(i),o=yield n.copyPages(n,this.organizerCopiedPages.map(_=>_-1));for(let _ of o)n.addPage(_);let d=yield n.save(),h=new Blob([d],{type:"application/pdf"});this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=URL.createObjectURL(h),this.totalPages=n.getPageCount(),this.tabBarComponent&&this.currentFileName&&(yield this.tabBarComponent.setActiveTabPdf(this.currentFileName,this.pdfSrc,h)),yield this.initOrganizerView(),this.hideOrganizerContextMenu(),this.snackbar.showSuccess(`${this.organizerCopiedPages.length}\uD398\uC774\uC9C0\uAC00 \uBD99\uC5EC\uB123\uAE30 \uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}catch(t){console.error("\uD398\uC774\uC9C0 \uBD99\uC5EC\uB123\uAE30 \uC624\uB958:",t),this.snackbar.showError("\uD398\uC774\uC9C0 \uBD99\uC5EC\uB123\uAE30 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}deleteOrganizerPages(){return P(this,null,function*(){if(this.organizerSelectedPages.length===0)return;if(this.organizerSelectedPages.length>=this.totalPages){this.snackbar.showWarning("\uCD5C\uC18C 1\uD398\uC774\uC9C0\uB294 \uB0A8\uACA8\uC57C \uD569\uB2C8\uB2E4.");return}if(yield it(`\uC120\uD0DD\uD55C ${this.organizerSelectedPages.length}\uD398\uC774\uC9C0\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`))try{let e=this.pdfSrc;if(!e)return;yield this.pdfLibService.loadPdfLib();let n=yield(yield fetch(e)).arrayBuffer(),o=yield PDFLib.PDFDocument.load(n),d=[...this.organizerSelectedPages].sort((C,x)=>x-C);for(let C of d)o.removePage(C-1);let h=yield o.save(),_=new Blob([h],{type:"application/pdf"});this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=URL.createObjectURL(_),this.totalPages=o.getPageCount(),this.tabBarComponent&&this.currentFileName&&(yield this.tabBarComponent.setActiveTabPdf(this.currentFileName,this.pdfSrc,_)),this.organizerThumbnails=[],yield this.initOrganizerView(),this.organizerSelectedPages=[],this.hideOrganizerContextMenu(),this.snackbar.showSuccess(`${d.length}\uD398\uC774\uC9C0\uAC00 \uC0AD\uC81C\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}catch(e){console.error("\uD398\uC774\uC9C0 \uC0AD\uC81C \uC624\uB958:",e),this.snackbar.showError("\uD398\uC774\uC9C0 \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}rotateOrganizerPages(){return P(this,null,function*(){if(this.organizerSelectedPages.length!==0)try{let t=this.pdfSrc;if(!t)return;yield this.pdfLibService.loadPdfLib();let i=yield(yield fetch(t)).arrayBuffer(),n=yield PDFLib.PDFDocument.load(i);for(let h of this.organizerSelectedPages){let _=n.getPage(h-1),C=_.getRotation().angle;_.setRotation({type:0,angle:(C+90)%360})}let o=yield n.save(),d=new Blob([o],{type:"application/pdf"});this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=URL.createObjectURL(d),this.tabBarComponent&&this.currentFileName&&(yield this.tabBarComponent.setActiveTabPdf(this.currentFileName,this.pdfSrc,d)),this.organizerThumbnails=[],yield this.initOrganizerView(),this.hideOrganizerContextMenu(),this.snackbar.showSuccess(`${this.organizerSelectedPages.length}\uD398\uC774\uC9C0\uAC00 \uD68C\uC804\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}catch(t){console.error("\uD398\uC774\uC9C0 \uD68C\uC804 \uC624\uB958:",t),this.snackbar.showError("\uD398\uC774\uC9C0 \uD68C\uC804 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}addEmptyOrganizerPage(){return P(this,null,function*(){try{let t=this.pdfSrc;if(!t)return;yield this.pdfLibService.loadPdfLib();let i=yield(yield fetch(t)).arrayBuffer(),n=yield PDFLib.PDFDocument.load(i),o=this.organizerSelectedPages.length>0?Math.max(...this.organizerSelectedPages):this.totalPages,d=n.insertPage(o,[595.28,841.89]),h=yield n.save(),_=new Blob([h],{type:"application/pdf"});this.pdfSrc&&URL.revokeObjectURL(this.pdfSrc),this.pdfSrc=URL.createObjectURL(_),this.totalPages=n.getPageCount(),this.tabBarComponent&&this.currentFileName&&(yield this.tabBarComponent.setActiveTabPdf(this.currentFileName,this.pdfSrc,_)),this.organizerThumbnails=[],yield this.initOrganizerView(),this.snackbar.showSuccess("\uBE48 \uD398\uC774\uC9C0\uAC00 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("\uD398\uC774\uC9C0 \uCD94\uAC00 \uC624\uB958:",t),this.snackbar.showError("\uD398\uC774\uC9C0 \uCD94\uAC00 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}downloadFromOrganizer(){return P(this,null,function*(){if(this.pdfSrc)try{let e=yield(yield fetch(this.pdfSrc)).blob(),i=document.createElement("a");i.href=URL.createObjectURL(e),i.download=this.currentFileName||"document.pdf",i.click(),URL.revokeObjectURL(i.href),this.snackbar.showSuccess("PDF\uAC00 \uB2E4\uC6B4\uB85C\uB4DC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("\uB2E4\uC6B4\uB85C\uB4DC \uC624\uB958:",t),this.snackbar.showError("\uB2E4\uC6B4\uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}closeOrganizerView(){this.currentTabView="viewer",this.organizerSelectedPages=[],this.hideOrganizerContextMenu()}static \u0275fac=function(e){return new(e||s)(N(ft),N(_t),N(Wt),N(Fe),N(Bn),N(Ie),N(tt),N(Ve))};static \u0275cmp=F({type:s,selectors:[["ez-reader-main"]],viewQuery:function(e,i){if(e&1&&(re(Gs,5),re(Qs,5),re(Ys,5),re(rt,5),re(st,5),re(lt,5),re(ct,5),re(dt,5),re(pt,5),re(gt,5),re($e,5),re(ut,5),re(qe,5),re(mt,5)),e&2){let n;ae(n=se())&&(i.tabBarComponent=n.first),ae(n=se())&&(i.topMenuBarComponent=n.first),ae(n=se())&&(i.globalFileInput=n.first),ae(n=se())&&(i.mergeModalComponent=n.first),ae(n=se())&&(i.lockModalComponent=n.first),ae(n=se())&&(i.passwordModalComponent=n.first),ae(n=se())&&(i.securitySettingsComponent=n.first),ae(n=se())&&(i.saveConfirmModalComponent=n.first),ae(n=se())&&(i.encryptionModalComponent=n.first),ae(n=se())&&(i.digitalIdManagerComponent=n.first),ae(n=se())&&(i.digitalIdWizardComponent=n.first),ae(n=se())&&(i.highlightPropertiesModalComponent=n.first),ae(n=se())&&(i.searchModalComponent=n.first),ae(n=se())&&(i.titleInputModalComponent=n.first)}},hostVars:2,hostBindings:function(e,i){e&2&&T("highlight-active",i.isHighlightActive)},standalone:!1,decls:36,vars:24,consts:[["tabBar",""],["globalFileInput",""],["topMenuBar",""],["fileInput",""],[3,"tabChanged","searchQueryChange","tabCloseRequest","fileOpenRequest","currentFileName","isRecentFilesView"],["type","file","accept","application/pdf",2,"display","none",3,"change"],[3,"currentActiveMenu","pdfSrc","isFavorite","isSettingsOpen","searchChange","searchSubmit","searchNext","searchPrevious","fileSelected","downloadModifiedPdf","downloadPdf","printPdf","emailPdf","toggleFavorite","menuChanged","settingsClick","addTextClicked","addShapeClicked",4,"ngIf"],[3,"activeMenu","pdfSrc","isRightPanelOpen","isLeftPanelOpen","isHighlightActive","isPenActive","isTextActive","showImageCoordinates","isFavorite","isSettingsOpen","headerAction","showSnackbar","rightPanelToggle","leftPanelToggle","imageCoordinatesToggle","searchButtonClicked",4,"ngIf"],[1,"main-container"],["class","home-container",3,"drag-over","dragover","dragenter","dragleave","drop",4,"ngIf"],["class","viewer-container","style","position: relative;",4,"ngIf"],["class","organizer-container",3,"click",4,"ngIf"],["class","pdf-analysis-dashboard-overlay",3,"click",4,"ngIf"],[3,"close","message","isVisible","duration"],[3,"close","confirm",4,"ngIf"],[3,"close","confirm"],[3,"close","apply"],[3,"close","complete"],[3,"data","pageWidth","pageHeight","save","cancel",4,"ngIf"],[3,"search","close"],[3,"isVisible","pdfSrc","fileName","close",4,"ngIf"],[3,"shapeSelected","cancel",4,"ngIf"],["class","shape-properties-modal-overlay",3,"click",4,"ngIf"],[3,"signatureCreated","cancel",4,"ngIf"],[3,"watermarkCreated","cancel",4,"ngIf"],[3,"totalPages","currentPage","pageNumberCreated","cancel",4,"ngIf"],["class","signature-selector-overlay",3,"click",4,"ngIf"],[3,"width","height","pathsChanged","close",4,"ngIf"],["class","confirm-modal-overlay",3,"click",4,"ngIf"],["class","saving-overlay",4,"ngIf"],[3,"searchChange","searchSubmit","searchNext","searchPrevious","fileSelected","downloadModifiedPdf","downloadPdf","printPdf","emailPdf","toggleFavorite","menuChanged","settingsClick","addTextClicked","addShapeClicked","currentActiveMenu","pdfSrc","isFavorite","isSettingsOpen"],[3,"headerAction","showSnackbar","rightPanelToggle","leftPanelToggle","imageCoordinatesToggle","searchButtonClicked","activeMenu","pdfSrc","isRightPanelOpen","isLeftPanelOpen","isHighlightActive","isPenActive","isTextActive","showImageCoordinates","isFavorite","isSettingsOpen"],[1,"home-container",3,"dragover","dragenter","dragleave","drop"],["class","drag-overlay",4,"ngIf"],[1,"main-content-area"],["class","recent-files-wrap",4,"ngIf"],[1,"drag-overlay"],[1,"drag-message"],["src","./images/icons/pc/ico-file.svg","alt","PDF","width","64","height","64"],[1,"recent-files-wrap"],[3,"deleteFile","openRecentFileWithAction","openNewFileWithAction","favoriteToggle","files","searchQuery"],[1,"viewer-container",2,"position","relative"],[1,"left-sidebar-container"],[3,"close","thumbnailClick","zoomIn","zoomOut","panelExpanded","isVisible","thumbnails"],[3,"pdfSrc","showFloatingZoom","config","useHelperService","pdfLoaded","pageChange","zoomChange","pageRendered","updateFindMatchesCount",4,"ngIf"],[1,"right-sidebar-container"],[3,"zoomIn","zoomOut","pageChange","menuSelect","requestAiSummary","requestAiTranslate","elementPropertyChange","deleteElement","imageAction","isVisible","currentPage","totalPages","aiSummaryContent","aiTranslateContent","isAiLoading","selectedElement"],["class","drawing-panel",4,"ngIf"],[3,"isVisible","currentPageCount","pdfSrc","close","pageOrderChanged","deletePages","confirmDelete","pageSelected",4,"ngIf"],[4,"ngIf"],["title","\uBCF4\uC548","description","PDF \uBCF4\uC548 \uAE30\uB2A5\uC744 \uAC1C\uBC1C \uC911\uC785\uB2C8\uB2E4.",4,"ngIf"],[3,"pdfLoaded","pageChange","zoomChange","pageRendered","updateFindMatchesCount","pdfSrc","showFloatingZoom","config","useHelperService"],[1,"drawing-panel"],[1,"drawing-panel-header"],[1,"panel-title"],["title","\uB2EB\uAE30",1,"panel-close-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","16","height","16"],[1,"drawing-section"],[1,"section-label"],[1,"color-palette"],["class","color-btn",3,"selected","light-color","background-color","title","click",4,"ngFor","ngForOf"],[1,"thickness-control"],["type","range",1,"thickness-slider",3,"input","min","max","value"],[1,"thickness-preview"],[1,"eraser-btn",3,"click"],["src","./images/icons/pc/btn-gnb-delete.svg","alt","\uC9C0\uC6B0\uAC1C","width","18","height","18"],[1,"color-btn",3,"click","title"],["src","./images/icons/pc/ico-check.svg","alt","\uC120\uD0DD","width","14","height","14",4,"ngIf"],["src","./images/icons/pc/ico-check.svg","alt","\uC120\uD0DD","width","14","height","14"],[3,"close","pageOrderChanged","deletePages","confirmDelete","pageSelected","isVisible","currentPageCount","pdfSrc"],["title","\uBCF4\uC548","description","PDF \uBCF4\uC548 \uAE30\uB2A5\uC744 \uAC1C\uBC1C \uC911\uC785\uB2C8\uB2E4."],[1,"organizer-container",3,"click"],[1,"organizer-page-grid"],["class","organizer-page-item",3,"selected","click","contextmenu",4,"ngFor","ngForOf"],["class","loading-placeholder",4,"ngIf"],["class","organizer-context-menu",3,"left","top","click",4,"ngIf"],[1,"organizer-page-item",3,"click","contextmenu"],["class","page-item-actions",4,"ngIf"],[1,"page-thumbnail-wrapper"],[1,"page-thumbnail-img",3,"src","alt"],[1,"page-number-label"],[1,"page-item-actions"],["title","\uBCF5\uC0AC",1,"action-btn",3,"click"],["src","./images/icons/pc/btn-gnb-download.svg","alt","\uBCF5\uC0AC","width","16","height","16"],["title","\uBD99\uC5EC\uB123\uAE30",1,"action-btn",3,"click"],["src","./images/icons/pc/btn-gnb-upload.svg","alt","\uBD99\uC5EC\uB123\uAE30","width","16","height","16"],["title","\uC0AD\uC81C",1,"action-btn","delete",3,"click"],["src","./images/icons/pc/btn-gnb-delete.svg","alt","\uC0AD\uC81C","width","16","height","16"],[1,"loading-placeholder"],[1,"organizer-context-menu",3,"click"],[1,"context-menu-item",3,"click"],[1,"context-menu-item",3,"click","disabled"],[1,"context-menu-item","delete",3,"click"],[1,"pdf-analysis-dashboard-overlay",3,"click"],[3,"analysisData","vectorData","imageData","analyzedPage","isCompact","isDraggable","hasGeneratedDocument","createCombinedDocEvent","viewOriginalEvent","createImagePdfEvent","exportPdfEvent","exportOriginalPdfEvent","closeEvent","click",4,"ngIf"],[3,"createCombinedDocEvent","viewOriginalEvent","createImagePdfEvent","exportPdfEvent","exportOriginalPdfEvent","closeEvent","click","analysisData","vectorData","imageData","analyzedPage","isCompact","isDraggable","hasGeneratedDocument"],[3,"save","cancel","data","pageWidth","pageHeight"],[3,"close","isVisible","pdfSrc","fileName"],[3,"shapeSelected","cancel"],[1,"shape-properties-modal-overlay",3,"click"],[1,"shape-properties-modal",3,"click"],[1,"shape-properties-header"],[1,"close-btn",3,"click"],[1,"shape-properties-body"],[1,"property-row"],[1,"color-picker-wrapper"],["type","color",3,"ngModelChange","ngModel"],[1,"color-value"],[1,"slider-wrapper"],["type","range","min","0","max","10","step","1",3,"ngModelChange","ngModel"],[1,"slider-value"],["type","range","min","0","max","1","step","0.1",3,"ngModelChange","ngModel"],[1,"property-row","size-row"],[1,"size-inputs"],[1,"size-input"],["type","number","min","10","max","1000",3,"ngModelChange","ngModel"],[1,"size-separator"],[1,"property-row","preview-row"],[1,"shape-preview",3,"ngClass"],[1,"shape-properties-footer"],[1,"cancel-btn",3,"click"],[1,"apply-btn",3,"click"],[3,"signatureCreated","cancel"],[3,"watermarkCreated","cancel"],[3,"pageNumberCreated","cancel","totalPages","currentPage"],[1,"signature-selector-overlay",3,"click"],[1,"signature-selector-popup",3,"click"],["class","saved-signatures",4,"ngIf"],[1,"create-signature-btn",3,"click"],[1,"plus-icon"],[1,"saved-signatures"],["class","signature-item",3,"click",4,"ngFor","ngForOf"],[1,"signature-item",3,"click"],["alt","\uC11C\uBA85",3,"src"],[1,"delete-signature-btn",3,"click"],[3,"pathsChanged","close","width","height"],[1,"confirm-modal-overlay",3,"click"],[1,"confirm-modal-content",3,"click"],[1,"confirm-modal-header"],[1,"confirm-modal-body"],[1,"confirm-modal-footer"],[1,"confirm-modal-btn","cancel",3,"click"],[1,"confirm-modal-btn","confirm",3,"click"],[1,"saving-overlay"],[1,"saving-content"],[1,"saving-spinner"]],template:function(e,i){if(e&1){let n=y();r(0,"app-ez-tab-bar",4,0),f("tabChanged",function(d){return g(n),u(i.onTabChanged(d))})("searchQueryChange",function(d){return g(n),u(i.onSearchQueryChange(d))})("tabCloseRequest",function(d){return g(n),u(i.onTabCloseRequest(d))})("fileOpenRequest",function(){return g(n),u(i.openFileDialogFromTab())}),a(),r(2,"input",5,1),f("change",function(d){return g(n),u(i.onGlobalFileInputChange(d))}),a(),M(4,Zs,2,4,"app-ez-top-menu-bar",6)(5,Js,1,10,"app-ez-header",7),r(6,"div",8),M(7,nl,6,4,"div",9)(8,dl,10,14,"div",10)(9,fl,5,3,"div",11)(10,_l,2,1,"div",12),a(),r(11,"app-ez-snackbar",13),f("close",function(){return g(n),u(i.closeSnackbar())}),a(),M(12,Cl,1,0,"app-merge-modal",14),r(13,"app-pdf-lock-modal",15),f("close",function(){return g(n),u(i.onLockModalClose())})("confirm",function(d){return g(n),u(i.onLockModalConfirm(d))}),a(),r(14,"app-pdf-password-modal",15),f("close",function(){return g(n),u(i.onPasswordModalClose())})("confirm",function(d){return g(n),u(i.onPasswordModalConfirm(d))}),a(),r(15,"app-pdf-security-settings",15),f("close",function(){return g(n),u(i.onSecuritySettingsClose())})("confirm",function(d){return g(n),u(i.onSecuritySettingsConfirm(d))}),a(),r(16,"app-security-encryption-modal",15),f("close",function(){return g(n),u(i.onEncryptionModalClose())})("confirm",function(d){return g(n),u(i.onEncryptionApply(d))}),a(),r(17,"app-digital-id-manager-modal",16),f("close",function(){return g(n),u(i.onDigitalIdManagerClose())})("apply",function(d){return g(n),u(i.onDigitalIdApply(d))}),a(),r(18,"app-digital-id-wizard-modal",17),f("close",function(){return g(n),u(i.onDigitalIdWizardClose())})("complete",function(d){return g(n),u(i.onDigitalIdWizardComplete(d))}),a(),r(19,"app-save-confirm-modal",15),f("close",function(){return g(n),u(i.onSaveConfirmModalClose())})("confirm",function(d){return g(n),u(i.onSaveConfirmModalConfirm(d))}),a(),M(20,bl,1,3,"app-text-editor-modal",18),r(21,"app-highlight-properties-modal",15),f("close",function(){return g(n),u(i.onHighlightPropertiesModalClose())})("confirm",function(d){return g(n),u(i.onHighlightPropertiesModalConfirm(d))}),a(),r(22,"app-search-modal",19),f("search",function(d){return g(n),u(i.onSearchModalSearch(d))})("close",function(){return g(n),u(i.onSearchModalClose())}),a(),M(23,xl,1,3,"app-ez-file-conversion-modal",20)(24,Pl,1,0,"app-shared-shape-selection-modal",21)(25,vl,59,19,"div",22)(26,wl,1,0,"app-shared-signature-pad-modal",23)(27,Ml,1,0,"app-shared-watermark-config-modal",24)(28,yl,1,2,"app-page-number-config-modal",25)(29,kl,8,1,"div",26)(30,El,1,0,"app-signature-config-modal",23)(31,Dl,1,2,"app-vector-path-drawer",27),r(32,"app-title-input-modal",15),f("close",function(){return g(n),u(i.onTitleInputModalClose())})("confirm",function(d){return g(n),u(i.onTitleConfirmed(d))}),a(),M(33,Tl,13,2,"div",28)(34,Bl,5,0,"div",29),b(35,"app-window-resize-indicator")}e&2&&(m("currentFileName",i.currentFileName)("isRecentFilesView",i.currentTabView==="home"),l(4),m("ngIf",i.currentTabView!=="home"),l(),m("ngIf",i.currentTabView!=="home"),l(2),m("ngIf",i.currentTabView==="home"),l(),m("ngIf",i.currentTabView==="viewer"),l(),m("ngIf",i.currentTabView==="organizer"),l(),m("ngIf",i.pdfAnalysisDashboardVisible),l(),m("message",i.snackbarMessage)("isVisible",i.snackbarVisible)("duration",4e3),l(),m("ngIf",i.showMergeModal),l(8),m("ngIf",i.showTextEditorModal),l(3),m("ngIf",i.showFileConversionModal),l(),m("ngIf",i.showShapeModal),l(),m("ngIf",i.showShapePropertiesModal),l(),m("ngIf",i.showSignaturePadModal),l(),m("ngIf",i.showWatermarkConfigModal),l(),m("ngIf",i.showPageNumberConfigModal),l(),m("ngIf",i.showSignatureSelector),l(),m("ngIf",i.showSignatureConfigModal),l(),m("ngIf",i.showVectorPathDrawer),l(2),m("ngIf",i.confirmModalVisible),l(),m("ngIf",i.isSaving))},dependencies:[Vn,$,R,G,ze,je,Q,Ae,et,Y,Zt,Jt,Nt,vi,en,st,lt,ct,dt,pt,$e,gt,jt,Ut,Ct,bt,xt,Ht,$t,Qe,qe,Pt,tn,nn,on,wt,rn,an,sn,rt,ut,mt],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow:hidden;margin:0;padding:0}app-tab-bar[_ngcontent-%COMP%]{height:38px;flex-shrink:0}app-top-menu-bar[_ngcontent-%COMP%]{height:48px;flex-shrink:0}app-header[_ngcontent-%COMP%]{height:44px;flex-shrink:0}.main-container[_ngcontent-%COMP%]{display:flex;flex:1;height:calc(100vh - 130px);position:relative;overflow:hidden;min-height:0}app-page-reorder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.sidebar[_ngcontent-%COMP%], .properties-panel[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(.4,1.4,.6,1),opacity .25s cubic-bezier(.4,1.4,.6,1)}.sidebar[_ngcontent-%COMP%]{transform:translate(0);opacity:1}.sidebar.closed[_ngcontent-%COMP%]{transform:translate(-100%);opacity:0;pointer-events:none}.properties-panel[_ngcontent-%COMP%]{transform:translate(0);opacity:1}.properties-panel.closed[_ngcontent-%COMP%]{transform:translate(100%);opacity:0;pointer-events:none}.text-editors-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1000}.text-editors-overlay[_ngcontent-%COMP%]   app-text-editor[_ngcontent-%COMP%]{pointer-events:auto;position:absolute}.file-select-guide.drag-over[_ngcontent-%COMP%]{border:3px dashed #007acc;background:#007acc0d;position:relative}.drag-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#007acc1a;display:flex;align-items:center;justify-content:center;border-radius:12px;z-index:1000;pointer-events:none}.drag-message[_ngcontent-%COMP%]{text-align:center;color:#007acc;pointer-events:none}.drag-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;display:block;margin-left:auto;margin-right:auto}.drag-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:0}.confirm-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000}.confirm-modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 20px #0000004d;min-width:300px;max-width:500px;margin:20px}.confirm-modal-header[_ngcontent-%COMP%]{padding:20px 20px 10px}.confirm-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.confirm-modal-body[_ngcontent-%COMP%]{padding:10px 20px}.confirm-modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;line-height:1.5;color:#666}.confirm-modal-footer[_ngcontent-%COMP%]{padding:15px 20px 20px;display:flex;justify-content:flex-end;gap:10px}.confirm-modal-btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.confirm-modal-btn.cancel[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.confirm-modal-btn.cancel[_ngcontent-%COMP%]:hover{background:#5a6268}.confirm-modal-btn.confirm[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.confirm-modal-btn.confirm[_ngcontent-%COMP%]:hover{background:#c82333}.viewer-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:row;overflow:hidden}.viewer-container[_ngcontent-%COMP%]   shared-pdf-viewer[_ngcontent-%COMP%]{flex:1;min-width:0;height:100%;overflow:hidden}.right-sidebar-container[_ngcontent-%COMP%]{flex-shrink:0;height:100%;z-index:100}  .custom-overlay-layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:5}  .custom-overlay-layer .overlay-element{position:absolute;pointer-events:auto;cursor:move;-webkit-user-select:none;user-select:none}  .custom-overlay-layer .overlay-element:hover{outline:2px dashed #007acc;outline-offset:2px}  .custom-overlay-layer .overlay-element.selected{outline:2px solid #007acc;outline-offset:2px;box-shadow:0 0 8px #007acc4d}  .custom-overlay-layer .overlay-element.editing{cursor:text;outline:none!important}  .custom-overlay-layer .overlay-element.editing .text-element{cursor:text;-webkit-user-select:text;user-select:text}  .custom-overlay-layer .overlay-element .resize-handle{position:absolute;width:8px;height:8px;background:#007acc;border:1px solid white;border-radius:2px}  .custom-overlay-layer .overlay-element .resize-handle.nw{top:-4px;left:-4px;cursor:nw-resize}  .custom-overlay-layer .overlay-element .resize-handle.ne{top:-4px;right:-4px;cursor:ne-resize}  .custom-overlay-layer .overlay-element .resize-handle.sw{bottom:-4px;left:-4px;cursor:sw-resize}  .custom-overlay-layer .overlay-element .resize-handle.se{bottom:-4px;right:-4px;cursor:se-resize}  .custom-overlay-layer .text-element{width:100%;height:100%;padding:4px;white-space:pre-wrap;word-break:break-word;background:#ffffffe6;border:1px solid rgba(0,0,0,.1);border-radius:2px;box-sizing:border-box;min-height:20px}  .custom-overlay-layer .text-element:focus{outline:none}  .custom-overlay-layer .shape-element{width:100%;height:100%}.pdf-analysis-dashboard-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:9999;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}.pdf-analysis-dashboard-overlay[_ngcontent-%COMP%]     shared-pdf-analysis-dashboard{min-width:600px;max-width:90vw}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.analysis-progress[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:40px;box-shadow:0 8px 32px #0003;max-width:500px;width:90%}.analysis-progress[_ngcontent-%COMP%]   .progress-card[_ngcontent-%COMP%]{text-align:center}.analysis-progress[_ngcontent-%COMP%]   .progress-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 24px;font-size:20px;color:#333}.analysis-progress[_ngcontent-%COMP%]   .progress-card[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;margin-bottom:12px}.analysis-progress[_ngcontent-%COMP%]   .progress-card[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#007acc,#0056b3);transition:width .3s ease}.analysis-progress[_ngcontent-%COMP%]   .progress-card[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#007acc;margin:8px 0}.analysis-progress[_ngcontent-%COMP%]   .progress-card[_ngcontent-%COMP%]   .progress-step[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0}.left-sidebar-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:240px;z-index:1000;transition:transform .3s ease;pointer-events:none}.left-sidebar-container[_ngcontent-%COMP%]   app-shared-pdf-left-panel[_ngcontent-%COMP%]{pointer-events:auto}.pdf-editor-toolbar[_ngcontent-%COMP%]{position:absolute;top:16px;left:50%;transform:translate(-50%);z-index:999}.pdf-editor-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]{display:flex;gap:8px;background:#fff;padding:8px 12px;border-radius:12px;box-shadow:0 4px 12px #00000026}.pdf-editor-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:none;background:transparent;cursor:pointer;border-radius:8px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.pdf-editor-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;transform:scale(1.05)}.pdf-editor-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   .toolbar-btn.active[_ngcontent-%COMP%]{background:#e3f2fd;box-shadow:0 0 0 2px #2196f3}.pdf-editor-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   .toolbar-btn.active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(0) saturate(100%) invert(43%) sepia(96%) saturate(1487%) hue-rotate(187deg) brightness(95%) contrast(101%)}.pdf-editor-toolbar[_ngcontent-%COMP%]   .toolbar-group[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;height:18px;pointer-events:none}.right-sidebar-container[_ngcontent-%COMP%]{position:absolute;top:0;right:0;height:100%;width:350px;z-index:1000;transition:transform .3s ease;pointer-events:none}.right-sidebar-container[_ngcontent-%COMP%]   shared-pdf-tools-panel[_ngcontent-%COMP%]{pointer-events:auto}.right-sidebar-container.collapsed[_ngcontent-%COMP%]{transform:translate(calc(100% - 48px))}  ngx-extended-pdf-viewer #toolbarContainer,   ngx-extended-pdf-viewer .toolbar,   ngx-extended-pdf-viewer #mainContainer>#toolbarViewer{height:0!important;min-height:0!important;overflow:hidden!important}  ngx-extended-pdf-viewer #findbar,   ngx-extended-pdf-viewer .findbar{height:auto!important;overflow:visible!important;position:fixed!important;top:180px!important;left:50%!important;transform:translate(-50%)!important;z-index:9999!important;box-shadow:0 4px 12px #00000026!important;border-radius:8px!important;background:#fff!important;padding:12px 16px!important;min-width:600px!important;cursor:move!important}  ngx-extended-pdf-viewer #findbar:before,   ngx-extended-pdf-viewer .findbar:before{content:"\\22ee\\22ee"!important;position:absolute!important;left:8px!important;top:50%!important;transform:translateY(-50%)!important;color:#9ca3af!important;font-size:16px!important;letter-spacing:2px!important;cursor:move!important}  ngx-extended-pdf-viewer #findbar #findbarInputContainer{margin-left:20px!important}  ngx-extended-pdf-viewer #findbar .toolbarField{border-radius:4px!important;border:1px solid #e5e7eb!important;padding:6px 10px!important}  ngx-extended-pdf-viewer #findbar .toolbarField:focus{border-color:#3b82f6!important;outline:none!important;box-shadow:0 0 0 2px #3b82f61a!important}  ngx-extended-pdf-viewer #findbar .toolbarButton{border-radius:4px!important;padding:6px 12px!important;transition:background-color .2s!important}  ngx-extended-pdf-viewer #findbar .toolbarButton:hover{background-color:#f3f4f6!important}  ngx-extended-pdf-viewer #findbar .toolbarLabel{font-size:13px!important;color:#374151!important}  ngx-extended-pdf-viewer #viewerContainer{top:0!important;height:100%!important}  ngx-extended-pdf-viewer #editorHighlightParamsToolbar,   ngx-extended-pdf-viewer .editorParamsToolbar,   ngx-extended-pdf-viewer #highlightParamsToolbarContainer{display:none!important}  ngx-extended-pdf-viewer #editorUndoBar,   ngx-extended-pdf-viewer .editorUndoBar{display:none!important}.highlight-active[_nghost-%COMP%]     ngx-extended-pdf-viewer .textLayer ::selection{background:transparent!important}.highlight-active[_nghost-%COMP%]     ngx-extended-pdf-viewer .textLayer ::-moz-selection{background:transparent!important}.highlight-active[_nghost-%COMP%]     ngx-extended-pdf-viewer .annotationEditorLayer .highlightEditor>div{background-color:var(--highlight-bg-color, rgba(255, 255, 0, .4))!important}.highlight-active[_nghost-%COMP%]     ngx-extended-pdf-viewer .annotationEditorLayer .highlightEditor.selectedEditor>div{background-color:var(--highlight-selected-bg-color, rgba(255, 255, 0, .3))!important}  ngx-extended-pdf-viewer .textLayer span.highlight{background-color:#ff06!important}  ngx-extended-pdf-viewer .textLayer span.highlight.selected,   ngx-extended-pdf-viewer .textLayer span.highlight.selected.appended{background-color:#0064004d!important;opacity:1!important}.merge-progress-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.merge-progress-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:32px;box-shadow:0 8px 32px #0000004d;min-width:400px;max-width:500px}.merge-progress-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 24px;font-size:20px;font-weight:600;color:#333;text-align:center}.merge-progress-card[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.merge-progress-card[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]{width:100%;height:8px;background:#e9ecef;border-radius:4px;overflow:hidden;position:relative}.merge-progress-card[_ngcontent-%COMP%]   .progress-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#007bff,#0056b3);border-radius:4px;transition:width .3s ease;position:relative}.merge-progress-card[_ngcontent-%COMP%]   .progress-bar-fill[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.3) 50%,transparent 100%);animation:_ngcontent-%COMP%_shimmer 1.5s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.merge-progress-card[_ngcontent-%COMP%]   .progress-percent[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:600;color:#007bff;margin:0}.merge-progress-card[_ngcontent-%COMP%]   .progress-step-text[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#6c757d;margin:0;min-height:20px}.drawing-panel[_ngcontent-%COMP%]{position:fixed;right:16px;top:180px;width:200px;background:#fff;border-radius:12px;box-shadow:0 4px 20px #00000026;padding:16px;z-index:1000}.drawing-panel[_ngcontent-%COMP%]   .drawing-panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid #eee}.drawing-panel[_ngcontent-%COMP%]   .drawing-panel-header[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333}.drawing-panel[_ngcontent-%COMP%]   .drawing-panel-header[_ngcontent-%COMP%]   .panel-close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;border-radius:4px;color:#666;display:flex;align-items:center;justify-content:center}.drawing-panel[_ngcontent-%COMP%]   .drawing-panel-header[_ngcontent-%COMP%]   .panel-close-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.drawing-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]{margin-bottom:16px}.drawing-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.drawing-panel[_ngcontent-%COMP%]   .drawing-section[_ngcontent-%COMP%]   .section-label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:500;color:#666;margin-bottom:8px}.drawing-panel[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}.drawing-panel[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-btn[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;border:2px solid transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.drawing-panel[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.drawing-panel[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-btn.selected[_ngcontent-%COMP%]{border-color:#333;box-shadow:0 0 0 2px #fff,0 0 0 4px #333}.drawing-panel[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-btn.light-color[_ngcontent-%COMP%]{border-color:#ddd}.drawing-panel[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-btn.light-color[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#333}.drawing-panel[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#fff}.drawing-panel[_ngcontent-%COMP%]   .thickness-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.drawing-panel[_ngcontent-%COMP%]   .thickness-control[_ngcontent-%COMP%]   .thickness-slider[_ngcontent-%COMP%]{flex:1;height:6px;-webkit-appearance:none;appearance:none;background:#e0e0e0;border-radius:3px;outline:none}.drawing-panel[_ngcontent-%COMP%]   .thickness-control[_ngcontent-%COMP%]   .thickness-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:#007bff;cursor:pointer;transition:transform .2s}.drawing-panel[_ngcontent-%COMP%]   .thickness-control[_ngcontent-%COMP%]   .thickness-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2)}.drawing-panel[_ngcontent-%COMP%]   .thickness-control[_ngcontent-%COMP%]   .thickness-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:#007bff;cursor:pointer;border:none}.drawing-panel[_ngcontent-%COMP%]   .thickness-control[_ngcontent-%COMP%]   .thickness-preview[_ngcontent-%COMP%]{border-radius:50%;flex-shrink:0}.drawing-panel[_ngcontent-%COMP%]   .eraser-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%;padding:10px 16px;background:#f5f5f5;border:1px solid #ddd;border-radius:8px;cursor:pointer;font-size:13px;color:#333;transition:all .2s ease}.drawing-panel[_ngcontent-%COMP%]   .eraser-btn[_ngcontent-%COMP%]:hover{background:#e8e8e8}.drawing-panel[_ngcontent-%COMP%]   .eraser-btn.active[_ngcontent-%COMP%]{background:#007bff;border-color:#007bff;color:#fff}.drawing-panel[_ngcontent-%COMP%]   .eraser-btn.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#fff}.shape-properties-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:10000;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_modalFadeIn .2s ease}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0}to{opacity:1}}.shape-properties-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 32px #0003;width:380px;max-height:90vh;overflow:hidden;animation:_ngcontent-%COMP%_modalSlideIn .3s ease}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0;background:#f8f9fa}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;border-radius:4px;color:#666;display:flex;align-items:center;justify-content:center}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0;color:#333}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]{padding:20px;max-height:calc(90vh - 140px);overflow-y:auto}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]{margin-bottom:20px}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:#555;margin-bottom:8px}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:48px;height:36px;border:1px solid #ddd;border-radius:6px;cursor:pointer;padding:2px}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:2px}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]::-webkit-color-swatch{border-radius:4px;border:none}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   .color-value[_ngcontent-%COMP%]{font-size:13px;color:#666;font-family:monospace;text-transform:uppercase}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{flex:1;height:6px;appearance:none;background:#e0e0e0;border-radius:3px;outline:none}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:18px;height:18px;background:#007acc;border-radius:50%;cursor:pointer;box-shadow:0 2px 6px #0003;transition:transform .15s ease}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.1)}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .slider-wrapper[_ngcontent-%COMP%]   .slider-value[_ngcontent-%COMP%]{min-width:50px;text-align:right;font-size:13px;color:#333;font-weight:500}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row.size-row[_ngcontent-%COMP%]   .size-inputs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row.size-row[_ngcontent-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .size-input[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row.size-row[_ngcontent-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .size-input[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;color:#888}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row.size-row[_ngcontent-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .size-input[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;padding:8px 10px;border:1px solid #ddd;border-radius:6px;font-size:14px;text-align:center}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row.size-row[_ngcontent-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .size-input[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:#007acc;box-shadow:0 0 0 3px #007acc1a}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row.size-row[_ngcontent-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .size-input[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row.size-row[_ngcontent-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .size-input[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row.size-row[_ngcontent-%COMP%]   .size-inputs[_ngcontent-%COMP%]   .size-separator[_ngcontent-%COMP%]{font-size:18px;color:#999;padding-top:16px}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row.preview-row[_ngcontent-%COMP%]   .shape-preview[_ngcontent-%COMP%]{width:100%;height:80px;border-radius:4px;transition:all .2s ease}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-body[_ngcontent-%COMP%]   .property-row.preview-row[_ngcontent-%COMP%]   .shape-preview.circle-preview[_ngcontent-%COMP%]{border-radius:50%;width:80px;height:80px;margin:0 auto}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:16px 20px;border-top:1px solid #e0e0e0;background:#f8f9fa}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-footer[_ngcontent-%COMP%]   button.cancel-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;color:#666}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-footer[_ngcontent-%COMP%]   button.cancel-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#ccc}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-footer[_ngcontent-%COMP%]   button.apply-btn[_ngcontent-%COMP%]{background:#007acc;border:1px solid #007acc;color:#fff}.shape-properties-modal[_ngcontent-%COMP%]   .shape-properties-footer[_ngcontent-%COMP%]   button.apply-btn[_ngcontent-%COMP%]:hover{background:#0062a3;border-color:#0062a3}.signature-selector-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:transparent;z-index:9999}.signature-selector-popup[_ngcontent-%COMP%]{position:absolute;top:130px;right:200px;background:#fff;border-radius:8px;box-shadow:0 4px 20px #00000026;padding:12px;min-width:180px;max-width:300px}.saved-signatures[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:8px;max-height:200px;overflow-y:auto}.signature-item[_ngcontent-%COMP%]{position:relative;padding:8px;border:1px solid #e0e0e0;border-radius:4px;cursor:pointer;transition:all .2s;background:#fafafa}.signature-item[_ngcontent-%COMP%]:hover{border-color:#e54d42;background:#fff5f5}.signature-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:60px;display:block;margin:0 auto}.signature-item[_ngcontent-%COMP%]   .delete-signature-btn[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;width:18px;height:18px;border-radius:50%;background:#e54d42;color:#fff;border:none;cursor:pointer;font-size:12px;line-height:1;display:none}.signature-item[_ngcontent-%COMP%]   .delete-signature-btn[_ngcontent-%COMP%]:hover{background:#d43c31}.signature-item[_ngcontent-%COMP%]:hover   .delete-signature-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.create-signature-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%;padding:10px 16px;background:#fff;border:1px solid #e0e0e0;border-radius:4px;cursor:pointer;font-size:14px;color:#333;transition:all .2s}.create-signature-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#ccc}.create-signature-btn[_ngcontent-%COMP%]   .plus-icon[_ngcontent-%COMP%]{font-size:18px;font-weight:300;color:#666}.organizer-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background:#f5f5f5;height:100%;overflow:hidden}.organizer-page-grid[_ngcontent-%COMP%]{flex:1;display:flex;flex-wrap:wrap;gap:24px;padding:32px;overflow-y:auto;justify-content:center;align-content:flex-start}.organizer-page-item[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;cursor:pointer;transition:all .2s}.organizer-page-item.selected[_ngcontent-%COMP%]   .page-thumbnail-wrapper[_ngcontent-%COMP%]{border-color:#e54d42;box-shadow:0 0 0 3px #e54d4233}.organizer-page-item[_ngcontent-%COMP%]:hover:not(.selected)   .page-thumbnail-wrapper[_ngcontent-%COMP%]{border-color:#999;box-shadow:0 4px 12px #00000026}.page-item-actions[_ngcontent-%COMP%]{position:absolute;top:-8px;left:50%;transform:translate(-50%);display:flex;gap:4px;background:#fff;padding:4px 8px;border-radius:6px;box-shadow:0 2px 8px #00000026;z-index:10}.page-item-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border:none;border-radius:4px;background:transparent;color:#666;cursor:pointer;transition:all .2s}.page-item-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;color:#333}.page-item-actions[_ngcontent-%COMP%]   .action-btn.delete[_ngcontent-%COMP%]:hover{background:#ffebee;color:#e54d42}.page-item-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.page-thumbnail-wrapper[_ngcontent-%COMP%]{width:140px;height:180px;background:#fff;border:2px solid #ddd;border-radius:4px;overflow:hidden;display:flex;align-items:center;justify-content:center;transition:all .2s;box-shadow:0 2px 8px #0000001a}.page-thumbnail-wrapper[_ngcontent-%COMP%]   .page-thumbnail-img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.page-number-label[_ngcontent-%COMP%]{margin-top:8px;font-size:14px;color:#666;font-weight:500}.loading-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:200px;color:#999}.loading-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.organizer-context-menu[_ngcontent-%COMP%]{position:fixed;background:#fff;border-radius:8px;box-shadow:0 4px 16px #00000026;padding:8px 0;min-width:150px;z-index:1000}.organizer-context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:10px 16px;border:none;background:transparent;cursor:pointer;font-size:14px;color:#333;text-align:left;transition:background .2s}.organizer-context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]:hover:not(:disabled){background:#f5f5f5}.organizer-context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.organizer-context-menu[_ngcontent-%COMP%]   .context-menu-item.delete[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffebee;color:#e54d42}.organizer-context-menu[_ngcontent-%COMP%]   .context-menu-item.delete[_ngcontent-%COMP%]:hover:not(:disabled)   svg[_ngcontent-%COMP%]{stroke:#e54d42}.organizer-context-menu[_ngcontent-%COMP%]   .context-menu-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;flex-shrink:0}','.home-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;background:#f8f8f8;min-height:100%;padding:40px 20px;position:relative}.main-content-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;width:100%;max-width:1200px;height:calc(100vh - 200px);min-height:500px}.file-upload-area[_ngcontent-%COMP%]{flex:0 0 auto;width:100%}.upload-zone[_ngcontent-%COMP%]{border:2px dashed #007acc;border-radius:12px;padding:30px 20px;text-align:center;background:#fff;transition:all .3s ease;cursor:pointer;position:relative;overflow:hidden;height:200px;display:flex;flex-direction:column;justify-content:center;align-items:center}.upload-zone[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;border:2px solid transparent;border-radius:12px;background:linear-gradient(45deg,#007acc,#28a745,#007acc) border-box;animation:_ngcontent-%COMP%_borderGlow 3s ease-in-out infinite;opacity:0;z-index:-1}@keyframes _ngcontent-%COMP%_borderGlow{0%,to{opacity:0}50%{opacity:.6}}.upload-zone[_ngcontent-%COMP%]:hover{border-color:#005a9e;background:#f8f9fa;transform:translateY(-2px);box-shadow:0 8px 25px #007acc26}.upload-zone[_ngcontent-%COMP%]:hover:before{opacity:.8}.upload-zone[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:15px;opacity:.7}.upload-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;color:#333;margin:0 0 15px;font-weight:500;line-height:1.3}.upload-hint[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:10px 0 0}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:15px;flex-wrap:wrap;justify-content:center}.file-open-btn[_ngcontent-%COMP%], .new-doc-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;background:#fff;border:1.5px solid #e0e0e0;border-radius:8px;font-size:16px;color:#222;font-weight:500;padding:10px 20px;cursor:pointer;box-shadow:0 2px 8px #00000008;transition:background .15s,border .15s,transform .15s}.file-open-btn[_ngcontent-%COMP%]:hover, .new-doc-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#d0d0d0;transform:translateY(-1px)}.new-doc-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0fff4,#e8f8f0);border-color:#28a745}.new-doc-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e8f8f0,#d4f1e0);border-color:#1e7e34}.file-icon[_ngcontent-%COMP%]{display:flex;align-items:center}.recent-files-wrap[_ngcontent-%COMP%]{flex:1;width:100%;overflow:visible;min-height:300px}.home-container.drag-over[_ngcontent-%COMP%]   .upload-zone[_ngcontent-%COMP%]{border-color:#28a745;background:#e8f5e9;transform:scale(1.02)}.drag-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#007acce6;display:flex;align-items:center;justify-content:center;z-index:1000;border-radius:12px}.drag-message[_ngcontent-%COMP%]{text-align:center;color:#fff}.drag-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-bottom:16px;display:block;margin-left:auto;margin-right:auto}.drag-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0}@media (max-width: 1024px){.main-content-area[_ngcontent-%COMP%]{gap:15px}.upload-zone[_ngcontent-%COMP%]{height:180px;padding:25px 15px}}@media (max-width: 768px){.home-container[_ngcontent-%COMP%]{padding:20px 15px}.main-content-area[_ngcontent-%COMP%]{gap:15px}.upload-zone[_ngcontent-%COMP%]{padding:20px 15px;height:160px}.upload-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.file-open-btn[_ngcontent-%COMP%]{font-size:14px;padding:8px 16px}.recent-files-wrap[_ngcontent-%COMP%]{min-height:250px}}',".saving-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000}.saving-content[_ngcontent-%COMP%]{background:#fff;padding:32px 48px;border-radius:12px;display:flex;flex-direction:column;align-items:center;gap:16px;box-shadow:0 8px 32px #0003}.saving-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333;font-weight:500}.saving-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e0e0e0;border-top:4px solid #2196F3;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};function zl(s,t){if(s&1&&(r(0,"option",27),c(1),a()),s&2){let e=t.$implicit;m("value",e.value),l(),I(" ",e.label," ")}}function Fl(s,t){s&1&&(H(),b(0,"rect",39))}function Al(s,t){s&1&&(H(),b(0,"rect",40))}function Il(s,t){s&1&&(H(),b(0,"rect",41))}function Vl(s,t){s&1&&(H(),b(0,"rect",42))}function Rl(s,t){s&1&&(H(),b(0,"rect",43))}function Ll(s,t){s&1&&(H(),b(0,"rect",44))}function Wl(s,t){s&1&&(H(),b(0,"rect",39))}function Nl(s,t){s&1&&(H(),b(0,"rect",45))}function jl(s,t){s&1&&(H(),b(0,"rect",46))}function Ul(s,t){s&1&&(H(),b(0,"rect",39))}function Hl(s,t){s&1&&(H(),b(0,"rect",43))}function $l(s,t){s&1&&(H(),b(0,"rect",47))}function ql(s,t){if(s&1){let e=y();r(0,"button",28),f("click",function(){let n=g(e).$implicit,o=p();return u(o.onAlignmentChange(n.value))}),H(),r(1,"svg",29),M(2,Fl,1,0,"rect",30)(3,Al,1,0,"rect",31)(4,Il,1,0,"rect",32)(5,Vl,1,0,"rect",33)(6,Rl,1,0,"rect",34)(7,Ll,1,0,"rect",35)(8,Wl,1,0,"rect",30)(9,Nl,1,0,"rect",36)(10,jl,1,0,"rect",37)(11,Ul,1,0,"rect",30)(12,Hl,1,0,"rect",34)(13,$l,1,0,"rect",38),a()()}if(s&2){let e=t.$implicit,i=p();T("active",i.fontProperties.align===e.value),m("title",e.tooltip),l(2),m("ngIf",e.value==="left"),l(),m("ngIf",e.value==="left"),l(),m("ngIf",e.value==="left"),l(),m("ngIf",e.value==="center"),l(),m("ngIf",e.value==="center"),l(),m("ngIf",e.value==="center"),l(),m("ngIf",e.value==="right"),l(),m("ngIf",e.value==="right"),l(),m("ngIf",e.value==="right"),l(),m("ngIf",e.value==="justify"),l(),m("ngIf",e.value==="justify"),l(),m("ngIf",e.value==="justify")}}function Gl(s,t){s&1&&(H(),b(0,"path",52))}function Ql(s,t){s&1&&(H(),b(0,"path",53))}function Yl(s,t){s&1&&(H(),r(0,"g"),b(1,"path",54)(2,"path",55)(3,"line",56),a())}function Kl(s,t){s&1&&(H(),r(0,"g"),b(1,"path",57)(2,"path",58)(3,"line",59),a())}function Xl(s,t){s&1&&(H(),r(0,"g"),b(1,"rect",60)(2,"path",61),a())}function Zl(s,t){s&1&&(H(),r(0,"g"),b(1,"rect",60)(2,"circle",62)(3,"path",63),a())}function Jl(s,t){if(s&1){let e=y();r(0,"button",28),f("click",function(){let n=g(e).$implicit,o=p();return u(o.onAction(n.name))}),H(),r(1,"svg",48),M(2,Gl,1,0,"path",49)(3,Ql,1,0,"path",50)(4,Yl,4,0,"g",51)(5,Kl,4,0,"g",51)(6,Xl,3,0,"g",51)(7,Zl,4,0,"g",51),a()()}if(s&2){let e=t.$implicit;m("title",e.tooltip),l(2),m("ngIf",e.name==="undo"),l(),m("ngIf",e.name==="redo"),l(),m("ngIf",e.name==="flip-horizontal"),l(),m("ngIf",e.name==="flip-vertical"),l(),m("ngIf",e.name==="crop"),l(),m("ngIf",e.name==="convert-image")}}var cn=class s{isVisible=!1;close=new D;fontProperties={type:"text",size:30,color:"#000000",bold:!0,italic:!1,underline:!1,strikethrough:!1,align:"left"};spacingProperties={letterSpacing:0,lineHeight:10,paragraphSpacing:0};fontTypes=[{value:"text",label:"\uD14D\uC2A4\uD2B8"},{value:"heading",label:"\uC81C\uBAA9"},{value:"caption",label:"\uCEA1\uC158"}];alignments=[{value:"left",icon:"align-left",tooltip:"\uC67C\uCABD \uC815\uB82C"},{value:"center",icon:"align-center",tooltip:"\uAC00\uC6B4\uB370 \uC815\uB82C"},{value:"right",icon:"align-right",tooltip:"\uC624\uB978\uCABD \uC815\uB82C"},{value:"justify",icon:"align-justify",tooltip:"\uC591\uCABD \uC815\uB82C"}];actions=[{name:"undo",tooltip:"\uB418\uB3CC\uB9AC\uAE30"},{name:"redo",tooltip:"\uB2E4\uC2DC\uD558\uAE30"},{name:"flip-horizontal",tooltip:"\uC88C\uC6B0\uBC18\uC804"},{name:"flip-vertical",tooltip:"\uC0C1\uD558\uBC18\uC804"},{name:"crop",tooltip:"\uC790\uB974\uAE30"},{name:"convert-image",tooltip:"\uC774\uBBF8\uC9C0 \uBCC0\uD658"}];onClose(){this.close.emit()}onFontStyleToggle(t){this.fontProperties[t]=!this.fontProperties[t]}onAlignmentChange(t){this.fontProperties.align=t}onAction(t){}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-ez-properties-panel"]],inputs:{isVisible:"isVisible"},outputs:{close:"close"},standalone:!1,decls:48,vars:21,consts:[[1,"properties-panel"],[1,"sidebar-header"],["title","\uB2EB\uAE30",1,"close-panel-btn",3,"click"],[1,"panel-section"],[1,"panel-title"],[1,"property-type"],[1,"property-value"],[1,"divider"],[1,"panel-title","collapsible"],[1,"font-controls"],[1,"property-input","font-type",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","number",1,"property-input","font-size",3,"ngModelChange","ngModel"],["type","color",1,"color-input",3,"ngModelChange","ngModel"],[1,"style-buttons"],["title","\uAD75\uAC8C",1,"property-btn",3,"click"],["title","\uAE30\uC6B8\uC784",1,"property-btn",3,"click"],["title","\uBC11\uC904",1,"property-btn",3,"click"],["title","\uCDE8\uC18C\uC120",1,"property-btn",3,"click"],[1,"alignment-buttons"],["class","property-btn",3,"active","title","click",4,"ngFor","ngForOf"],[1,"spacing-controls"],["type","number","placeholder","\uC790\uAC04",1,"property-input",3,"ngModelChange","ngModel"],["type","number","placeholder","\uC904\uAC04\uACA9",1,"property-input",3,"ngModelChange","ngModel"],["type","number","placeholder","\uB2E8\uB77D\uAC04\uACA9",1,"property-input",3,"ngModelChange","ngModel"],[1,"action-buttons"],["class","property-btn",3,"title","click",4,"ngFor","ngForOf"],[3,"value"],[1,"property-btn",3,"click","title"],["width","22","height","22","viewBox","0 0 22 22"],["x","4","y","6","width","14","height","2","fill","#444",4,"ngIf"],["x","4","y","10","width","10","height","2","fill","#444",4,"ngIf"],["x","4","y","14","width","8","height","2","fill","#444",4,"ngIf"],["x","6","y","6","width","10","height","2","fill","#444",4,"ngIf"],["x","4","y","10","width","14","height","2","fill","#444",4,"ngIf"],["x","6","y","14","width","10","height","2","fill","#444",4,"ngIf"],["x","8","y","10","width","10","height","2","fill","#444",4,"ngIf"],["x","10","y","14","width","8","height","2","fill","#444",4,"ngIf"],["x","4","y","14","width","14","height","2","fill","#444",4,"ngIf"],["x","4","y","6","width","14","height","2","fill","#444"],["x","4","y","10","width","10","height","2","fill","#444"],["x","4","y","14","width","8","height","2","fill","#444"],["x","6","y","6","width","10","height","2","fill","#444"],["x","4","y","10","width","14","height","2","fill","#444"],["x","6","y","14","width","10","height","2","fill","#444"],["x","8","y","10","width","10","height","2","fill","#444"],["x","10","y","14","width","8","height","2","fill","#444"],["x","4","y","14","width","14","height","2","fill","#444"],["width","22","height","22","viewBox","0 0 22 22","fill","none"],["d","M7 11V7H3M5 9a7 7 0 1 1 2 7","stroke","#444","stroke-width","1.5","fill","none",4,"ngIf"],["d","M15 11V7h4M17 9a7 7 0 1 0-2 7","stroke","#444","stroke-width","1.5","fill","none",4,"ngIf"],[4,"ngIf"],["d","M7 11V7H3M5 9a7 7 0 1 1 2 7","stroke","#444","stroke-width","1.5","fill","none"],["d","M15 11V7h4M17 9a7 7 0 1 0-2 7","stroke","#444","stroke-width","1.5","fill","none"],["d","M7 6v10M7 6l-2 2M7 6l2 2","stroke","#444","stroke-width","1.5","fill","none"],["d","M15 6v10M15 16l2-2M15 16l-2-2","stroke","#444","stroke-width","1.5","fill","none"],["x1","11","y1","5","x2","11","y2","17","stroke","#444","stroke-width","1"],["d","M6 15h10M6 15l2 2M6 15l2-2","stroke","#444","stroke-width","1.5","fill","none"],["d","M16 7H6M16 7l-2-2M16 7l-2 2","stroke","#444","stroke-width","1.5","fill","none"],["x1","5","y1","11","x2","17","y2","11","stroke","#444","stroke-width","1"],["x","5","y","5","width","12","height","12","stroke","#444","stroke-width","1.5","fill","none"],["d","M5 5l12 12","stroke","#444","stroke-width","1"],["cx","9","cy","9","r","2","stroke","#444","stroke-width","1"],["d","M17 17l-4-6-4 5","stroke","#444","stroke-width","1"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return i.onClose()}),c(3," \xD7 "),a()(),r(4,"div",3)(5,"div",4),c(6,"\uC18D\uC131"),a(),r(7,"div",5),c(8,"\uC885\uB958"),a(),r(9,"div",6),c(10,"\uD14D\uC2A4\uD2B8"),a(),b(11,"hr",7),a(),r(12,"div",3)(13,"div",8),c(14,"\u25BC \uD3F0\uD2B8"),a(),r(15,"div",9)(16,"select",10),k("ngModelChange",function(o){return S(i.fontProperties.type,o)||(i.fontProperties.type=o),o}),M(17,zl,2,2,"option",11),a(),r(18,"input",12),k("ngModelChange",function(o){return S(i.fontProperties.size,o)||(i.fontProperties.size=o),o}),a(),r(19,"input",13),k("ngModelChange",function(o){return S(i.fontProperties.color,o)||(i.fontProperties.color=o),o}),a()(),r(20,"div",14)(21,"button",15),f("click",function(){return i.onFontStyleToggle("bold")}),r(22,"strong"),c(23,"T"),a()(),r(24,"button",16),f("click",function(){return i.onFontStyleToggle("italic")}),r(25,"em"),c(26,"T"),a()(),r(27,"button",17),f("click",function(){return i.onFontStyleToggle("underline")}),r(28,"u"),c(29,"T"),a()(),r(30,"button",18),f("click",function(){return i.onFontStyleToggle("strikethrough")}),r(31,"s"),c(32,"T"),a()()(),r(33,"div",19),M(34,ql,14,15,"button",20),a()(),r(35,"div",3)(36,"div",8),c(37,"\u25BC \uAC04\uACA9"),a(),r(38,"div",21)(39,"input",22),k("ngModelChange",function(o){return S(i.spacingProperties.letterSpacing,o)||(i.spacingProperties.letterSpacing=o),o}),a(),r(40,"input",23),k("ngModelChange",function(o){return S(i.spacingProperties.lineHeight,o)||(i.spacingProperties.lineHeight=o),o}),a()(),r(41,"div",21)(42,"input",24),k("ngModelChange",function(o){return S(i.spacingProperties.paragraphSpacing,o)||(i.spacingProperties.paragraphSpacing=o),o}),a()()(),r(43,"div",3)(44,"div",8),c(45,"\u25BC \uB3D9\uC791"),a(),r(46,"div",25),M(47,Jl,8,7,"button",26),a()()()),e&2&&(pe("display",i.isVisible?"":"none"),T("closed",!i.isVisible),l(16),O("ngModel",i.fontProperties.type),l(),m("ngForOf",i.fontTypes),l(),O("ngModel",i.fontProperties.size),l(),O("ngModel",i.fontProperties.color),l(2),T("active",i.fontProperties.bold),l(3),T("active",i.fontProperties.italic),l(3),T("active",i.fontProperties.underline),l(3),T("active",i.fontProperties.strikethrough),l(4),m("ngForOf",i.alignments),l(5),O("ngModel",i.spacingProperties.letterSpacing),l(),O("ngModel",i.spacingProperties.lineHeight),l(2),O("ngModel",i.spacingProperties.paragraphSpacing),l(5),m("ngForOf",i.actions))},dependencies:[$,R,me,fe,G,ze,ue,Q,Y],styles:['@charset "UTF-8";.properties-panel[_ngcontent-%COMP%]{position:fixed;top:130px;right:0;bottom:0;width:300px;background:#fff;border-left:1px solid #e0e0e0;box-shadow:-2px 0 8px #0000001a;padding:16px;overflow-y:auto;z-index:1000;transition:transform .25s cubic-bezier(.4,1.4,.6,1),opacity .25s cubic-bezier(.4,1.4,.6,1);transform:translate(0);opacity:1}.properties-panel.closed[_ngcontent-%COMP%]{transform:translate(100%);opacity:0;pointer-events:none}.sidebar-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:8px 8px 8px 0}.close-panel-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:14px;cursor:pointer;width:24px;height:24px;line-height:1;display:flex;align-items:center;justify-content:center;color:#888;border-radius:4px;transition:background .15s}.close-panel-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.panel-section[_ngcontent-%COMP%]{margin-bottom:16px}.panel-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:8px;color:#333}.panel-title.collapsible[_ngcontent-%COMP%]{cursor:pointer;font-size:13px;color:#444;font-weight:600;margin-bottom:8px}.property-type[_ngcontent-%COMP%]{font-size:13px;color:#444;margin-bottom:8px}.property-value[_ngcontent-%COMP%]{font-size:13px;color:#888;margin-bottom:12px}.divider[_ngcontent-%COMP%]{border:none;border-top:1px solid #eee;margin:8px 0}.font-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.property-input[_ngcontent-%COMP%]{width:100%;padding:6px 8px;border:1px solid #ccc;border-radius:4px;font-size:12px}.font-type[_ngcontent-%COMP%]{width:100px}.font-size[_ngcontent-%COMP%]{width:50px}.color-input[_ngcontent-%COMP%]{width:28px;height:28px;border:none;border-radius:4px;cursor:pointer}.style-buttons[_ngcontent-%COMP%], .alignment-buttons[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px;flex-wrap:wrap}.property-btn[_ngcontent-%COMP%]{flex:1;padding:6px;border:1px solid #ccc;background:#f8f8f8;border-radius:4px;cursor:pointer;font-size:12px;transition:all .2s;display:flex;align-items:center;justify-content:center;min-width:30px;height:30px}.property-btn.active[_ngcontent-%COMP%]{background:#007acc;color:#fff;border-color:#007acc}.property-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0}.property-btn.active[_ngcontent-%COMP%]:hover{background:#0056b3}.spacing-controls[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px}.spacing-controls[_ngcontent-%COMP%]   .property-input[_ngcontent-%COMP%]{width:50px}.action-buttons[_ngcontent-%COMP%]   .property-btn[_ngcontent-%COMP%]{flex:0 0 auto;width:40px}']})};function ec(s,t){if(s&1){let e=y();r(0,"div",18)(1,"div",8)(2,"label"),c(3,"\uC0AC\uC6A9\uC790 \uC554\uD638 (\uBB38\uC11C \uC5F4\uAE30)"),a(),r(4,"input",19),k("ngModelChange",function(n){g(e);let o=p();return S(o.securitySettings.userPassword,n)||(o.securitySettings.userPassword=n),u(n)}),a()(),r(5,"div",8)(6,"label"),c(7,"\uC18C\uC720\uC790 \uC554\uD638 (\uAD8C\uD55C \uBCC0\uACBD)"),a(),r(8,"input",20),k("ngModelChange",function(n){g(e);let o=p();return S(o.securitySettings.ownerPassword,n)||(o.securitySettings.ownerPassword=n),u(n)}),a()()()}if(s&2){let e=p();l(4),O("ngModel",e.securitySettings.userPassword),l(4),O("ngModel",e.securitySettings.ownerPassword)}}function tc(s,t){if(s&1&&(r(0,"option",21),c(1),a()),s&2){let e=t.$implicit;m("value",e.value),l(),I(" ",e.label," ")}}var dn=class s{securitySettings={passwordProtection:!1,userPassword:"",ownerPassword:"",allowPrinting:!0,allowCopying:!0,allowEditing:!0,allowAnnotations:!0,encryptionLevel:"128-bit"};encryptionLevels=[{value:"40-bit",label:"40-bit (\uB0AE\uC74C)"},{value:"128-bit",label:"128-bit (\uC911\uAC04)"},{value:"256-bit",label:"256-bit (\uB192\uC74C)"}];onTogglePasswordProtection(){this.securitySettings.passwordProtection=!this.securitySettings.passwordProtection,this.securitySettings.passwordProtection||(this.securitySettings.userPassword="",this.securitySettings.ownerPassword="")}onApplySecurity(){}onResetSecurity(){this.securitySettings={passwordProtection:!1,userPassword:"",ownerPassword:"",allowPrinting:!0,allowCopying:!0,allowEditing:!0,allowAnnotations:!0,encryptionLevel:"128-bit"}}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-ez-security-panel"]],standalone:!1,decls:51,vars:8,consts:[[1,"security-panel"],[1,"security-header"],[1,"security-section"],[1,"section-title"],[1,"toggle-switch"],["type","checkbox",3,"change","checked"],[1,"slider"],["class","password-fields",4,"ngIf"],[1,"form-group"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"permissions-list"],[1,"permission-item"],[1,"checkbox-label"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"security-actions"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"],[1,"password-fields"],["type","password","placeholder","\uBB38\uC11C\uB97C \uC5F4 \uB54C \uD544\uC694\uD55C \uC554\uD638",3,"ngModelChange","ngModel"],["type","password","placeholder","\uBCF4\uC548 \uC124\uC815\uC744 \uBCC0\uACBD\uD560 \uB54C \uD544\uC694\uD55C \uC554\uD638",3,"ngModelChange","ngModel"],[3,"value"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),c(3,"\u{1F512} \uBCF4\uC548 \uC124\uC815"),a(),r(4,"p"),c(5,"PDF \uBB38\uC11C\uC758 \uBCF4\uC548 \uC124\uC815\uC744 \uAD00\uB9AC\uD569\uB2C8\uB2E4"),a()(),r(6,"div",2)(7,"div",3)(8,"h3"),c(9,"\uC554\uD638 \uBCF4\uD638"),a(),r(10,"label",4)(11,"input",5),f("change",function(){return i.onTogglePasswordProtection()}),a(),b(12,"span",6),a()(),M(13,ec,9,2,"div",7),a(),r(14,"div",2)(15,"div",3)(16,"h3"),c(17,"\uC554\uD638\uD654 \uC218\uC900"),a()(),r(18,"div",8)(19,"select",9),k("ngModelChange",function(o){return S(i.securitySettings.encryptionLevel,o)||(i.securitySettings.encryptionLevel=o),o}),M(20,tc,2,2,"option",10),a()()(),r(21,"div",2)(22,"div",3)(23,"h3"),c(24,"\uBB38\uC11C \uAD8C\uD55C"),a()(),r(25,"div",11)(26,"div",12)(27,"label",13)(28,"input",14),k("ngModelChange",function(o){return S(i.securitySettings.allowPrinting,o)||(i.securitySettings.allowPrinting=o),o}),a(),r(29,"span"),c(30,"\uC778\uC1C4 \uD5C8\uC6A9"),a()()(),r(31,"div",12)(32,"label",13)(33,"input",14),k("ngModelChange",function(o){return S(i.securitySettings.allowCopying,o)||(i.securitySettings.allowCopying=o),o}),a(),r(34,"span"),c(35,"\uD14D\uC2A4\uD2B8 \uBCF5\uC0AC \uD5C8\uC6A9"),a()()(),r(36,"div",12)(37,"label",13)(38,"input",14),k("ngModelChange",function(o){return S(i.securitySettings.allowEditing,o)||(i.securitySettings.allowEditing=o),o}),a(),r(39,"span"),c(40,"\uBB38\uC11C \uD3B8\uC9D1 \uD5C8\uC6A9"),a()()(),r(41,"div",12)(42,"label",13)(43,"input",14),k("ngModelChange",function(o){return S(i.securitySettings.allowAnnotations,o)||(i.securitySettings.allowAnnotations=o),o}),a(),r(44,"span"),c(45,"\uC8FC\uC11D \uCD94\uAC00 \uD5C8\uC6A9"),a()()()()(),r(46,"div",15)(47,"button",16),f("click",function(){return i.onResetSecurity()}),c(48," \uCD08\uAE30\uD654 "),a(),r(49,"button",17),f("click",function(){return i.onApplySecurity()}),c(50," \uBCF4\uC548 \uC124\uC815 \uC801\uC6A9 "),a()()()),e&2&&(l(11),m("checked",i.securitySettings.passwordProtection),l(2),m("ngIf",i.securitySettings.passwordProtection),l(6),O("ngModel",i.securitySettings.encryptionLevel),l(),m("ngForOf",i.encryptionLevels),l(8),O("ngModel",i.securitySettings.allowPrinting),l(5),O("ngModel",i.securitySettings.allowCopying),l(5),O("ngModel",i.securitySettings.allowEditing),l(5),O("ngModel",i.securitySettings.allowAnnotations))},dependencies:[$,R,me,fe,G,Be,ue,Q,Y],styles:['.security-panel[_ngcontent-%COMP%]{padding:24px;background:#fff;height:100%;overflow-y:auto}.security-header[_ngcontent-%COMP%]{margin-bottom:32px}.security-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1a1a1a;margin:0 0 8px}.security-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0;font-size:14px}.security-section[_ngcontent-%COMP%]{margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid #e5e5e5}.security-section[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.section-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#555;margin-bottom:8px}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#007acc}.password-fields[_ngcontent-%COMP%]{margin-top:16px}.toggle-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:48px;height:24px}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#007acc}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(24px)}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.3s;border-radius:24px}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%}.permissions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.permission-item[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;padding:12px;border-radius:6px;transition:background-color .2s}.permission-item[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.permission-item[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:12px;width:18px;height:18px;cursor:pointer}.permission-item[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#333}.security-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:32px;padding-top:24px;border-top:1px solid #e5e5e5}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:10px 24px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;border:none}.btn-primary[_ngcontent-%COMP%]{background-color:#007acc;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#005a9e}.btn-secondary[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333;border:1px solid #ddd}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#e5e5e5}']})};var pn=class s{goToEzReader(){window.location.hash="#/ezReader"}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-home"]],standalone:!1,decls:33,vars:0,consts:[[1,"home-container"],[1,"welcome-section"],[1,"action-buttons"],[1,"btn-primary",3,"click"],[1,"features-section"],[1,"features-grid"],[1,"feature-card"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"h1"),c(3,"EZ Reader\uC5D0 \uC624\uC2E0 \uAC83\uC744 \uD658\uC601\uD569\uB2C8\uB2E4"),a(),r(4,"p"),c(5,"\uAC15\uB825\uD55C PDF \uD3B8\uC9D1 \uB3C4\uAD6C\uB97C \uC0AC\uC6A9\uD574\uBCF4\uC138\uC694"),a(),r(6,"div",2)(7,"button",3),f("click",function(){return i.goToEzReader()}),c(8," PDF \uD3B8\uC9D1\uAE30 \uC2DC\uC791\uD558\uAE30 "),a()()(),r(9,"div",4)(10,"h2"),c(11,"\uC8FC\uC694 \uAE30\uB2A5"),a(),r(12,"div",5)(13,"div",6)(14,"h3"),c(15,"\u{1F4C4} PDF \uBDF0\uC5B4"),a(),r(16,"p"),c(17,"\uACE0\uD488\uC9C8 PDF \uBB38\uC11C \uBDF0\uC5B4"),a()(),r(18,"div",6)(19,"h3"),c(20,"\u270F\uFE0F \uD14D\uC2A4\uD2B8 \uD3B8\uC9D1"),a(),r(21,"p"),c(22,"PDF \uB0B4 \uD14D\uC2A4\uD2B8 \uC218\uC815 \uBC0F \uCD94\uAC00"),a()(),r(23,"div",6)(24,"h3"),c(25,"\u{1F5BC}\uFE0F \uC774\uBBF8\uC9C0 \uC0BD\uC785"),a(),r(26,"p"),c(27,"\uC774\uBBF8\uC9C0 \uBC0F \uB3C4\uD615 \uCD94\uAC00"),a()(),r(28,"div",6)(29,"h3"),c(30,"\u{1F527} \uACE0\uAE09 \uB3C4\uAD6C"),a(),r(31,"p"),c(32,"\uC6CC\uD130\uB9C8\uD06C, \uC11C\uBA85, \uBCC0\uD658 \uB4F1"),a()()()()())},styles:[".home-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem;color:#fff}.welcome-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:4rem;padding:2rem}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.welcome-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:2rem;opacity:.9}.btn-primary[_ngcontent-%COMP%]{background:#ff6b6b;color:#fff;border:none;padding:1rem 2rem;font-size:1.1rem;border-radius:50px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #0003}.btn-primary[_ngcontent-%COMP%]:hover{background:#ff5252;transform:translateY(-2px);box-shadow:0 6px 20px #0000004d}.features-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.features-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;margin-bottom:3rem}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:2rem}.feature-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;padding:2rem;text-align:center;transition:transform .3s ease}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:.8;line-height:1.6}@media (max-width: 768px){.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.features-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var nc=[{path:"",component:ln,children:[{path:"",redirectTo:"recent",pathMatch:"full"},{path:"recent",component:Qe},{path:"home",component:pn},{path:"conversion",component:wt},{path:"properties",component:cn},{path:"security",component:dn}]}],gn=class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=kt({type:s});static \u0275inj=St({imports:[Ot.forChild(nc),Ot]})};var un=class s{constructor(t){this.http=t}OLLAMA_BASE_URL="http://localhost:11434";TARGET_MODEL="gemma3:1b";checkOllamaAvailability(){return P(this,null,function*(){return!1})}translateText(t,e){if(!t.trim())return yt(()=>new Error("\uBC88\uC5ED\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));let o=`\uB2E4\uC74C \uD14D\uC2A4\uD2B8\uB97C ${{english:"\uC601\uC5B4",korean:"\uD55C\uAD6D\uC5B4",japanese:"\uC77C\uBCF8\uC5B4",chinese:"\uC911\uAD6D\uC5B4",spanish:"\uC2A4\uD398\uC778\uC5B4",french:"\uD504\uB791\uC2A4\uC5B4",german:"\uB3C5\uC77C\uC5B4"}[e]||e}\uB85C \uBC88\uC5ED\uD574\uC8FC\uC138\uC694. \uBC88\uC5ED\uB41C \uB0B4\uC6A9\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.

\uD14D\uC2A4\uD2B8:
${t}

\uBC88\uC5ED:`,d={model:this.TARGET_MODEL,prompt:o,stream:!1,options:{temperature:.3,top_p:.9,max_tokens:4e3}},h=new wn({"Content-Type":"application/json"});return this.http.post(`${this.OLLAMA_BASE_URL}/api/generate`,d,{headers:h}).pipe(bn(_=>{if(_.response&&_.response.trim())return{originalText:t,translatedText:_.response.trim(),targetLanguage:e,success:!0};throw new Error("\uBC88\uC5ED \uC751\uB2F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.")}),xn(_=>{let C="\uB85C\uCEEC AI \uBC88\uC5ED \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";return _.status===0?C="Ollama \uC11C\uBC84\uC5D0 \uC5F0\uACB0\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. Ollama\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.":_.status===404?C=`${this.TARGET_MODEL} \uBAA8\uB378\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBAA8\uB378\uC744 \uC124\uCE58\uD574\uC8FC\uC138\uC694.`:_.error?.error?C=_.error.error:_.message&&(C=_.message),yt(()=>({originalText:t,translatedText:"",targetLanguage:e,success:!1,error:C}))}))}summarizeText(t,e="general",i="medium"){if(!t.trim())return yt(()=>new Error("\uC694\uC57D\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));let n="";switch(e){case"bullet":n="\uB2E4\uC74C \uBB38\uC11C\uC758 \uD575\uC2EC \uD3EC\uC778\uD2B8\uB97C \uBC88\uD638\uAC00 \uB9E4\uACA8\uC9C4 \uBAA9\uB85D\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"qa":n="\uB2E4\uC74C \uBB38\uC11C\uB97C Q&A \uD615\uC2DD\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. \uC8FC\uC694 \uC9C8\uBB38\uACFC \uB2F5\uBCC0\uC73C\uB85C \uAD6C\uC131\uD574\uC8FC\uC138\uC694. ";break;case"structure":n="\uB2E4\uC74C \uBB38\uC11C\uB97C \uAD6C\uC870\uC801\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. \uC81C\uBAA9, \uC8FC\uC694 \uC139\uC158, \uD575\uC2EC \uB0B4\uC6A9\uC744 \uCCB4\uACC4\uC801\uC73C\uB85C \uC815\uB9AC\uD574\uC8FC\uC138\uC694. ";break;default:n="\uB2E4\uC74C \uBB38\uC11C\uB97C \uC694\uC57D\uD574\uC8FC\uC138\uC694. "}switch(i){case"short":n+="\uAC04\uACB0\uD558\uAC8C 1-2\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;case"long":n+="\uC790\uC138\uD558\uAC8C 5-6\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. ";break;default:n+="\uC801\uC808\uD55C \uAE38\uC774\uB85C 3-4\uBB38\uB2E8\uC73C\uB85C \uC694\uC57D\uD574\uC8FC\uC138\uC694. "}n+=`\uD55C\uAD6D\uC5B4\uB85C \uC791\uC131\uD574\uC8FC\uC138\uC694. \uC694\uC57D\uB41C \uB0B4\uC6A9\uB9CC \uC751\uB2F5\uD558\uACE0 \uB2E4\uB978 \uC124\uBA85\uC740 \uD3EC\uD568\uD558\uC9C0 \uB9C8\uC138\uC694.

\uBB38\uC11C \uB0B4\uC6A9:
${t}`;let o={model:this.TARGET_MODEL,prompt:n,stream:!1,options:{temperature:.3,top_p:.9,max_tokens:4e3}},d=new wn({"Content-Type":"application/json"});return this.http.post(`${this.OLLAMA_BASE_URL}/api/generate`,o,{headers:d}).pipe(bn(h=>{if(h.response&&h.response.trim())return{originalText:t,translatedText:h.response.trim(),targetLanguage:"korean",success:!0};throw new Error("\uC694\uC57D \uC751\uB2F5\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.")}),xn(h=>{let _="\uB85C\uCEEC AI \uC694\uC57D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.";return h.status===0?_="Ollama \uC11C\uBC84\uC5D0 \uC5F0\uACB0\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. Ollama\uAC00 \uC2E4\uD589 \uC911\uC778\uC9C0 \uD655\uC778\uD574\uC8FC\uC138\uC694.":h.status===404?_=`${this.TARGET_MODEL} \uBAA8\uB378\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uBAA8\uB378\uC744 \uC124\uCE58\uD574\uC8FC\uC138\uC694.`:h.error?.error?_=h.error.error:h.message&&(_=h.message),yt(()=>({originalText:t,translatedText:"",targetLanguage:"korean",success:!1,error:_}))}))}getAvailableModels(){return P(this,null,function*(){return[]})}static \u0275fac=function(e){return new(e||s)(De(Wn))};static \u0275prov=de({token:s,factory:s.\u0275fac,providedIn:"root"})};var mn=class s{getConversionOptions(){return[{id:"image",title:"\uC774\uBBF8\uC9C0 \u2192 PDF",icon:"./images/icons/pc/btn-gnb-image.svg",acceptTypes:["image/*"]},{id:"excel",title:"\uC5D1\uC140 \u2192 PDF",icon:"./images/icons/pc/btn-gnb-xls.svg",acceptTypes:[".xlsx",".xls"]},{id:"powerpoint",title:"\uD30C\uC6CC\uD3EC\uC778\uD2B8 \u2192 PDF",icon:"./images/icons/pc/btn-gnb-ppt.svg",acceptTypes:[".pptx",".ppt"]},{id:"word",title:"\uC6CC\uB4DC \u2192 PDF",icon:"./images/icons/pc/btn-gnb-doc.svg",acceptTypes:[".docx",".doc"]}]}getUploadOptions(){return[{id:"file",title:"\uD30C\uC77C",icon:"",acceptTypes:[".pdf",".doc",".docx",".txt"]},{id:"photo",title:"\uC0AC\uC9C4",icon:"",acceptTypes:["image/*"]},{id:"pdf",title:"PDF",icon:"",acceptTypes:[".pdf"]}]}convertFiles(t,e,i){return P(this,null,function*(){try{return yield this.simulateConversion(t.length),!0}catch{return!1}})}simulateConversion(t){return P(this,null,function*(){return new Promise(e=>{setTimeout(e,1e3+t*500)})})}getDefaultSettings(){return{fileName:"\uBCC0\uD658\uB41C_\uD30C\uC77C",savePath:"/Users/Downloads",quality:80,format:"pdf"}}validateFileType(t,e){let i=t.name.toLowerCase(),n=t.type;return e.some(o=>{if(o.startsWith("."))return i.endsWith(o);if(o.includes("/*")){let d=o.split("/")[0];return n.startsWith(d)}else return n===o})}getSupportedFormatsMessage(t){return`\uC9C0\uC6D0 \uD615\uC2DD: ${t.join(", ")}`}static \u0275fac=function(e){return new(e||s)};static \u0275prov=de({token:s,factory:s.\u0275fac,providedIn:"root"})};function ic(s,t){s&1&&(Pe(0,"p"),c(1,"\uD604\uC7AC \uC5F4\uB824\uC788\uB294 \uC6D0\uBCF8 PDF \uD30C\uC77C\uC744 \uB2E4\uC6B4\uB85C\uB4DC\uD569\uB2C8\uB2E4"),ye())}function oc(s,t){s&1&&(Pe(0,"p",11),c(1,"\uC6D0\uBCF8 PDF\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),ye())}function rc(s,t){s&1&&(Pe(0,"p"),c(1,"\uD3B8\uC9D1\uB41C \uB0B4\uC6A9\uC774 \uBC18\uC601\uB41C PDF \uD30C\uC77C\uC744 \uC0DD\uC131\uD558\uC5EC \uB2E4\uC6B4\uB85C\uB4DC\uD569\uB2C8\uB2E4"),ye())}function ac(s,t){s&1&&(Pe(0,"p",11),c(1,"\uD3B8\uC9D1\uB41C \uD398\uC774\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),ye())}function sc(s,t){if(s&1){let e=y();Pe(0,"div",1),Ke("click",function(){g(e);let n=p();return u(n.close())}),Pe(1,"div",2),Ke("click",function(n){return g(e),u(n.stopPropagation())}),Pe(2,"div",3)(3,"h2"),c(4,"PDF \uB2E4\uC6B4\uB85C\uB4DC"),ye(),Pe(5,"button",4),Ke("click",function(){g(e);let n=p();return u(n.close())}),Pe(6,"span"),c(7,"\xD7"),ye()()(),Pe(8,"div",5)(9,"p",6),c(10,"\uB2E4\uC6B4\uB85C\uB4DC \uBC29\uC2DD\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694"),ye(),Pe(11,"div",7)(12,"button",8),Ke("click",function(){g(e);let n=p();return u(n.selectDownloadType("original"))}),Pe(13,"div",9),c(14,"\u{1F4C4}"),ye(),Pe(15,"div",10)(16,"h3"),c(17,"\uC6D0\uBCF8 \uB2E4\uC6B4\uB85C\uB4DC"),ye(),Et(18,ic,2,0,"p")(19,oc,2,0,"p",11),ye()(),Pe(20,"button",12),Ke("click",function(){g(e);let n=p();return u(n.selectDownloadType("edited"))}),Pe(21,"div",9),c(22,"\u270F\uFE0F"),ye(),Pe(23,"div",10)(24,"h3"),c(25,"\uD3B8\uC9D1\uBCF8 \uB2E4\uC6B4\uB85C\uB4DC"),ye(),Et(26,rc,2,0,"p")(27,ac,2,0,"p",11),ye()()()()()()}if(s&2){let e=p();l(12),T("disabled",!e.hasOriginalPdf),Pn("disabled",!e.hasOriginalPdf),l(6),Dt(e.hasOriginalPdf?18:19),l(2),T("disabled",!e.hasEditedPdf),Pn("disabled",!e.hasEditedPdf),l(6),Dt(e.hasEditedPdf?26:27)}}var fn=class s{hasOriginalPdf=!1;hasEditedPdf=!1;downloadTypeSelected=new D;modalClosed=new D;isVisible=!1;open(){this.isVisible=!0}close(){this.isVisible=!1,this.modalClosed.emit()}selectDownloadType(t){t==="original"&&!this.hasOriginalPdf||t==="edited"&&!this.hasEditedPdf||(this.downloadTypeSelected.emit(t),this.close())}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=F({type:s,selectors:[["app-pdf-download-modal"]],inputs:{hasOriginalPdf:"hasOriginalPdf",hasEditedPdf:"hasEditedPdf"},outputs:{downloadTypeSelected:"downloadTypeSelected",modalClosed:"modalClosed"},decls:1,vars:1,consts:[[1,"modal-backdrop"],[1,"modal-backdrop",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"modal-description"],[1,"download-options"],[1,"download-option","original",3,"click","disabled"],[1,"option-icon"],[1,"option-content"],[1,"disabled-text"],[1,"download-option","edited",3,"click","disabled"]],template:function(e,i){e&1&&Et(0,sc,28,8,"div",0),e&2&&Dt(i.isVisible?0:-1)},dependencies:[ge],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:0;width:90%;max-width:500px;box-shadow:0 10px 40px #0003;animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#999;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:#333}.modal-body[_ngcontent-%COMP%]{padding:24px}.modal-body[_ngcontent-%COMP%]   .modal-description[_ngcontent-%COMP%]{margin:0 0 20px;font-size:14px;color:#666;text-align:center}.download-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.download-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;border:2px solid #e0e0e0;border-radius:8px;background:#fff;cursor:pointer;transition:all .2s;text-align:left}.download-option[_ngcontent-%COMP%]:hover:not(.disabled){border-color:#1976d2;background:#f5f9ff;transform:translate(4px)}.download-option[_ngcontent-%COMP%]:active:not(.disabled){transform:translate(4px) scale(.98)}.download-option.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;background:#f5f5f5}.download-option.disabled[_ngcontent-%COMP%]:hover{border-color:#e0e0e0;background:#f5f5f5;transform:none}.download-option[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{font-size:32px;flex-shrink:0}.download-option[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]{flex:1}.download-option[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:600;color:#333}.download-option[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#666;line-height:1.4}.download-option[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]   p.disabled-text[_ngcontent-%COMP%]{color:#999;font-style:italic}.download-option.original[_ngcontent-%COMP%]:hover:not(.disabled){border-color:#4caf50;background:#f1f8f4}.download-option.edited[_ngcontent-%COMP%]:hover:not(.disabled){border-color:#ff9800;background:#fff8f0}"]})};function lc(s,t){if(s&1&&(r(0,"div",32)(1,"span",33),c(2,"\u26A0\uFE0F"),a(),r(3,"span",34),c(4),a()()),s&2){let e=p();l(4),B(e.errorMessage)}}function cc(s,t){s&1&&(r(0,"span"),c(1,"\u{1F513} \uB85C\uADF8\uC778"),a())}function dc(s,t){s&1&&(r(0,"span",35),b(1,"span",36),r(2,"span"),c(3,"\uB85C\uADF8\uC778 \uC911..."),a()())}var hn=class s{constructor(t,e,i){this.authService=t;this.router=e;this.route=i}username="";password="";errorMessage="";isLoading=!1;returnUrl="/ez-reader";showPassword=!1;buildVersion="0.0.0.40";buildVersionMobile="0.0.0.8";buildInfo="Font Path Fix + Page Delete Fix";get loginTitle(){return"EzReader"}get loginSubtitle(){return"Easy Document Reader"}ngOnInit(){if(this.authService.isAuthenticated()){this.router.navigate(["/ez"]);return}this.route.queryParams.subscribe(t=>{this.returnUrl=t.returnUrl||"/ez-reader"})}onLogin(){if(this.errorMessage="",!this.username||!this.password){this.errorMessage="\uC544\uC774\uB514\uC640 \uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.";return}this.isLoading=!0,setTimeout(()=>{this.authService.login(this.username,this.password)?this.router.navigate([this.returnUrl]):(this.errorMessage="\uC544\uC774\uB514 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uAC00 \uC62C\uBC14\uB974\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",this.password=""),this.isLoading=!1},500)}onKeyPress(t){t.key==="Enter"&&this.onLogin()}togglePasswordVisibility(){this.showPassword=!this.showPassword}clearError(){this.errorMessage=""}static \u0275fac=function(e){return new(e||s)(N(Ve),N(Ie),N(tt))};static \u0275cmp=F({type:s,selectors:[["app-ez-reader-login"]],decls:46,vars:19,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"logo-section"],[1,"app-title"],[1,"subtitle"],[1,"login-body"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","username",1,"form-label"],[1,"label-icon"],[1,"label-text"],["type","text","id","username","name","username","placeholder","\uC544\uC774\uB514\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","username","required","",1,"form-input",3,"ngModelChange","focus","keypress","ngModel","disabled"],["for","password",1,"form-label"],[1,"password-input-wrapper"],["id","password","name","password","placeholder","\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD558\uC138\uC694","autocomplete","current-password","required","",1,"form-input",3,"ngModelChange","focus","keypress","type","ngModel","disabled"],["type","button",1,"toggle-password-btn",3,"click","disabled","title"],["class","error-message",4,"ngIf"],["type","submit",1,"login-btn",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"login-footer"],[1,"footer-text"],[1,"footer-info"],[1,"version-info"],[1,"version-text"],[1,"build-info"],[1,"background-animation"],[1,"floating-shape","shape-1"],[1,"floating-shape","shape-2"],[1,"floating-shape","shape-3"],[1,"floating-shape","shape-4"],[1,"error-message"],[1,"error-icon"],[1,"error-text"],[1,"loading-spinner"],[1,"spinner"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),c(5),a(),r(6,"p",5),c(7),a()()(),r(8,"div",6)(9,"form",7),f("ngSubmit",function(){return i.onLogin()}),r(10,"div",8)(11,"label",9)(12,"span",10),c(13,"\u{1F464}"),a(),r(14,"span",11),c(15,"\uC544\uC774\uB514"),a()(),r(16,"input",12),k("ngModelChange",function(o){return S(i.username,o)||(i.username=o),o}),f("focus",function(){return i.clearError()})("keypress",function(o){return i.onKeyPress(o)}),a()(),r(17,"div",8)(18,"label",13)(19,"span",10),c(20,"\u{1F512}"),a(),r(21,"span",11),c(22,"\uBE44\uBC00\uBC88\uD638"),a()(),r(23,"div",14)(24,"input",15),k("ngModelChange",function(o){return S(i.password,o)||(i.password=o),o}),f("focus",function(){return i.clearError()})("keypress",function(o){return i.onKeyPress(o)}),a(),r(25,"button",16),f("click",function(){return i.togglePasswordVisibility()}),c(26),a()()(),M(27,lc,5,1,"div",17),r(28,"button",18),M(29,cc,2,0,"span",19)(30,dc,4,0,"span",20),a()()(),r(31,"div",21)(32,"p",22),c(33,"Authorized Access Only"),a(),r(34,"p",23),c(35,"\u{1F512} \uBCF4\uC548 \uB85C\uADF8\uC778 \uC2DC\uC2A4\uD15C"),a(),r(36,"div",24)(37,"p",25),c(38),a(),r(39,"p",26),c(40),a()()()(),r(41,"div",27),b(42,"div",28)(43,"div",29)(44,"div",30)(45,"div",31),a()()),e&2&&(l(5),B(i.loginTitle),l(2),B(i.loginSubtitle),l(9),O("ngModel",i.username),m("disabled",i.isLoading),l(8),m("type",i.showPassword?"text":"password"),O("ngModel",i.password),m("disabled",i.isLoading),l(),m("title",zn(i.showPassword?"\uBE44\uBC00\uBC88\uD638 \uC228\uAE30\uAE30":"\uBE44\uBC00\uBC88\uD638 \uBCF4\uAE30"))("disabled",i.isLoading),l(),I(" ",i.showPassword?"\u{1F648}":"\u{1F441}\uFE0F"," "),l(),m("ngIf",i.errorMessage),l(),T("loading",i.isLoading),m("disabled",i.isLoading||!i.username||!i.password),l(),m("ngIf",!i.isLoading),l(),m("ngIf",i.isLoading),l(8),I("v",i.buildVersion),l(2),B(i.buildInfo))},dependencies:[ge,R,Se,Un,G,Q,Nn,Hn,Y,jn],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px;position:relative;overflow:hidden}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d;width:100%;max-width:450px;overflow:hidden;position:relative;z-index:10;animation:_ngcontent-%COMP%_slideUp .6s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);padding:40px 30px;text-align:center;color:#fff}.login-header[_ngcontent-%COMP%]   .logo-section[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin:0 0 8px;text-shadow:2px 2px 4px rgba(0,0,0,.2)}.login-header[_ngcontent-%COMP%]   .logo-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:16px;margin:0;opacity:.9;font-weight:300;letter-spacing:1px}.login-body[_ngcontent-%COMP%]{padding:40px 30px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:24px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;font-weight:600;color:#4a5568;margin-bottom:8px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   .label-icon[_ngcontent-%COMP%]{font-size:18px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{flex:1}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:2px solid #e2e8f0;border-radius:10px;font-size:15px;transition:all .3s ease;background:#f8fafc}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:#fff;box-shadow:0 0 0 4px #667eea1a}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:disabled{background:#e2e8f0;cursor:not-allowed;opacity:.6}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]{position:relative}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{padding-right:50px}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:transparent;border:none;cursor:pointer;font-size:20px;padding:8px;border-radius:6px;transition:all .2s ease}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#667eea1a}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .toggle-password-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background:#fee;border:2px solid #fcc;border-radius:10px;margin-bottom:20px;animation:_ngcontent-%COMP%_shake .5s ease}.login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:20px}.login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{flex:1;color:#c53030;font-size:14px;font-weight:500}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-10px)}75%{transform:translate(10px)}}.login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{width:100%;padding:16px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #667eea66}.login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #667eea80}.login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.login-form[_ngcontent-%COMP%]   .login-btn.loading[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9ca3c7,#9a89b4)}.login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px}.login-form[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:3px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.login-footer[_ngcontent-%COMP%]{background:#f7fafc;padding:20px 30px;text-align:center;border-top:1px solid #e2e8f0}.login-footer[_ngcontent-%COMP%]   .footer-text[_ngcontent-%COMP%]{margin:0 0 4px;font-size:13px;color:#718096;font-weight:500}.login-footer[_ngcontent-%COMP%]   .footer-info[_ngcontent-%COMP%]{margin:0 0 12px;font-size:12px;color:#a0aec0}.login-footer[_ngcontent-%COMP%]   .version-info[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px solid #e2e8f0}.login-footer[_ngcontent-%COMP%]   .version-info[_ngcontent-%COMP%]   .version-text[_ngcontent-%COMP%]{margin:0 0 4px;font-size:11px;color:#667eea;font-weight:600;font-family:Monaco,Courier New,monospace}.login-footer[_ngcontent-%COMP%]   .version-info[_ngcontent-%COMP%]   .build-info[_ngcontent-%COMP%]{margin:0;font-size:10px;color:#a0aec0;font-style:italic}.background-animation[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:1}.background-animation[_ngcontent-%COMP%]   .floating-shape[_ngcontent-%COMP%]{position:absolute;background:#ffffff1a;border-radius:50%;animation:_ngcontent-%COMP%_float 20s infinite ease-in-out}.background-animation[_ngcontent-%COMP%]   .floating-shape.shape-1[_ngcontent-%COMP%]{width:300px;height:300px;top:-150px;left:-150px;animation-delay:0s}.background-animation[_ngcontent-%COMP%]   .floating-shape.shape-2[_ngcontent-%COMP%]{width:200px;height:200px;top:50%;right:-100px;animation-delay:5s}.background-animation[_ngcontent-%COMP%]   .floating-shape.shape-3[_ngcontent-%COMP%]{width:150px;height:150px;bottom:-75px;left:30%;animation-delay:10s}.background-animation[_ngcontent-%COMP%]   .floating-shape.shape-4[_ngcontent-%COMP%]{width:250px;height:250px;top:20%;right:20%;animation-delay:15s}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translate(0) scale(1)}33%{transform:translate(30px,-30px) scale(1.1)}66%{transform:translate(-20px,20px) scale(.9)}}@media (max-width: 768px){.login-container[_ngcontent-%COMP%]{padding:16px}.login-card[_ngcontent-%COMP%]{max-width:100%}.login-header[_ngcontent-%COMP%]{padding:30px 20px}.login-header[_ngcontent-%COMP%]   .logo-section[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:28px}.login-body[_ngcontent-%COMP%]{padding:30px 20px}.login-footer[_ngcontent-%COMP%]{padding:16px 20px}}"]})};var Fi=class s{constructor(t){this.resourceLoader=t;this.resourceLoader.loadAllResources().catch(e=>console.warn(e))}static \u0275fac=function(e){return new(e||s)(De(Ti))};static \u0275mod=kt({type:s});static \u0275inj=St({providers:[si,ft,zt,un,_t,mn,vt,ht,Ve,Ci,_i,hi,At,It,Vt,{provide:ai,useValue:"EzReaderPdfCacheDB"}],imports:[ge,Ot,Qn,gn,Se,ki,Mi,Nt,yi,jt,Ut,Ct,bt,xt,Ht,$t,fn,Qe,Si,Oi,qe,Ei,hn,Di,Lt,Pt]})};export{Fi as EzReaderModule};

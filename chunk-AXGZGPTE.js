import{d as Tn,e as Fn,f as yt,g as $e,h as Xn}from"./chunk-4Q2FHIQY.js";import{a as jn}from"./chunk-TZNZ53SR.js";import{a as Hn,b as Un}from"./chunk-6DYDZLAU.js";import{a as Yn}from"./chunk-JB3SIN2M.js";import{a as wn,b as vt,c as Ue,f as Ye,h as Dn,i as Sn,j as En,k as tt,l as nt,m as it,n as In,o as kn,r as Ne}from"./chunk-Y7A6MJVW.js";import{a as Rn}from"./chunk-ZO574LIR.js";import{e as ze}from"./chunk-JAFV3UXJ.js";import{E as bt,ga as An,h as Pt,ha as Bn,i as Ve,ia as Vn,j as Pe,ja as zn,k as Mn,ka as $n,l as On,la as Ln,ma as Nn,na as Wn,oa as Gn,r as ne}from"./chunk-DILZRO5C.js";import{$ as z,$b as p,Ac as yn,Ba as _n,D as sn,Fb as Me,Gb as ce,Hb as de,Ib as bn,Jb as je,Jc as He,Kb as We,Lb as u,Mb as r,Nb as s,Ob as R,Pb as N,Qb as W,Rb as Xe,Sb as Qe,Tb as et,Ua as mt,V as ln,Va as Te,Vb as L,Ya as _t,Za as c,Zb as w,_b as fe,aa as hn,c as Ae,ca as Cn,da as Ie,db as ge,dc as qe,ea as J,ec as Ke,f as Ze,fc as Je,g as we,gc as vn,hc as H,ic as q,ja as b,k as rn,ka as v,kb as ae,kc as l,l as Be,la as se,lb as xn,lc as T,m as ie,ma as Ct,mc as M,nb as xt,nc as le,oc as he,pc as Ce,qb as I,qc as _e,r as pt,sb as $,tb as Pn,uc as ut,xc as ft,ya as Ge,yc as ht}from"./chunk-2NYEL3ZQ.js";import{a as Y,b as pe,j as E}from"./chunk-TWZW5B45.js";var qn=class o{constructor(t){this.geminiApiManager=t;this.initializeAI(),this.geminiApiManager.apiKey$.subscribe(e=>{e&&this.isApiKey(e)&&(this.ai=new yt({apiKey:e}))})}ai;logSubject=new Ze;logs$=this.logSubject.asObservable();allLogs=[];allLogsSubject=new we([]);allLogs$=this.allLogsSubject.asObservable();GEMINI_REST_API="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent";isApiKey(t){return t.startsWith("AIza")}isOAuthToken(t){return t.startsWith("ya29.")||t.startsWith("ya29a.")}initializeAI(){let t=this.geminiApiManager.getApiKey();t&&this.isApiKey(t)?this.ai=new yt({apiKey:t}):this.ai=new yt({apiKey:""})}addLog(t,e,n){let i={timestamp:new Date,type:t,message:e,details:n};this.allLogs.push(i),this.logSubject.next(i),this.allLogsSubject.next([...this.allLogs]),console.log(`${t==="info"?"\u{1F535}":t==="success"?"\u2705":t==="error"?"\u274C":"\u26A0\uFE0F"} [API Log] ${e}`,n||"")}clearLogs(){this.allLogs=[],this.allLogsSubject.next([])}callGeminiRestApiWithOAuth(t,e){return E(this,null,function*(){this.addLog("info","\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),this.addLog("info","Gemini REST API \uD638\uCD9C \uC2DC\uC791 (OAuth)"),this.addLog("info","\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),this.addLog("info",`\uC5D4\uB4DC\uD3EC\uC778\uD2B8: ${this.GEMINI_REST_API}`),this.addLog("info","\uC778\uC99D \uBC29\uC2DD: Authorization Bearer"),this.addLog("info",`\uD1A0\uD070: ${t.substring(0,30)}...`),this.addLog("info",`\uD1A0\uD070 \uAE38\uC774: ${t.length}`),this.addLog("info",`\uD504\uB86C\uD504\uD2B8 \uAE38\uC774: ${e.length}\uC790`);let n={contents:[{parts:[{text:e}]}]};this.addLog("info","HTTP \uC694\uCCAD \uC804\uC1A1 \uC911...");try{let i=yield fetch(this.GEMINI_REST_API,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(n)});this.addLog("info","\uC751\uB2F5 \uC218\uC2E0\uB428"),this.addLog("info",`HTTP \uC0C1\uD0DC: ${i.status} ${i.statusText}`);let a=yield i.json();if(this.addLog("info","JSON \uD30C\uC2F1 \uC644\uB8CC"),!i.ok){this.addLog("error","API \uC624\uB958 \uC751\uB2F5!"),this.addLog("error",`\uC624\uB958 \uCF54\uB4DC: ${a.error?.code}`),this.addLog("error",`\uC624\uB958 \uBA54\uC2DC\uC9C0: ${a.error?.message}`);let g=a.error?.message||`HTTP ${i.status}`;throw i.status===429&&((yield this.geminiApiManager.switchToBackupKey())?(g="\uD560\uB2F9\uB7C9 \uCD08\uACFC: \uBC31\uC5C5 \uD0A4\uB85C \uC804\uD658\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.",this.addLog("success","\u2705 \uBC31\uC5C5 API \uD0A4\uB85C \uC804\uD658 \uC644\uB8CC")):g="\uD560\uB2F9\uB7C9 \uCD08\uACFC: \uBAA8\uB4E0 \uBC31\uC5C5 \uD0A4\uB97C \uC0AC\uC6A9\uD588\uC2B5\uB2C8\uB2E4."),new Error(`OAuth REST API \uC624\uB958: ${g}`)}let d=a.candidates?.[0]?.content?.parts?.[0]?.text;if(!d)throw new Error("\uC751\uB2F5\uC5D0\uC11C \uD14D\uC2A4\uD2B8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return this.addLog("success","OAuth REST API \uD638\uCD9C \uC644\uB8CC!"),d}catch(i){throw this.addLog("error","OAuth REST API \uD638\uCD9C \uC2E4\uD328!"),this.addLog("error",`\uC5D0\uB7EC: ${i.message}`),i}})}callGeminiRestApiWithApiKey(t,e){return E(this,null,function*(){this.addLog("info","\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),this.addLog("info","Gemini REST API \uD638\uCD9C \uC2DC\uC791 (API Key)"),this.addLog("info","\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550");let n=`${this.GEMINI_REST_API}?key=${t}`;this.addLog("info",`\uC5D4\uB4DC\uD3EC\uC778\uD2B8: ${this.GEMINI_REST_API}`),this.addLog("info","\uC778\uC99D \uBC29\uC2DD: URL Query Parameter"),this.addLog("info",`API Key: ${t.substring(0,10)}...`),this.addLog("info",`\uD504\uB86C\uD504\uD2B8 \uAE38\uC774: ${e.length}\uC790`);let i={contents:[{parts:[{text:e}]}]};this.addLog("info","HTTP \uC694\uCCAD \uC804\uC1A1 \uC911...");try{let a=yield fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});this.addLog("info","\uC751\uB2F5 \uC218\uC2E0\uB428"),this.addLog("info",`HTTP \uC0C1\uD0DC: ${a.status} ${a.statusText}`);let d=yield a.json();if(this.addLog("info","JSON \uD30C\uC2F1 \uC644\uB8CC"),!a.ok){this.addLog("error","API \uC624\uB958 \uC751\uB2F5!"),this.addLog("error",`\uC624\uB958 \uCF54\uB4DC: ${d.error?.code}`),this.addLog("error",`\uC624\uB958 \uBA54\uC2DC\uC9C0: ${d.error?.message}`);let m=d.error?.message||`HTTP ${a.status}`;throw a.status===429&&((yield this.geminiApiManager.switchToBackupKey())?(m="\uD560\uB2F9\uB7C9 \uCD08\uACFC: \uBC31\uC5C5 \uD0A4\uB85C \uC804\uD658\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.",this.addLog("success","\u2705 \uBC31\uC5C5 API \uD0A4\uB85C \uC804\uD658 \uC644\uB8CC")):m="\uD560\uB2F9\uB7C9 \uCD08\uACFC: \uBAA8\uB4E0 \uBC31\uC5C5 \uD0A4\uB97C \uC0AC\uC6A9\uD588\uC2B5\uB2C8\uB2E4."),new Error(`API Key REST API \uC624\uB958: ${m}`)}let g=d.candidates?.[0]?.content?.parts?.[0]?.text;if(!g)throw new Error("\uC751\uB2F5\uC5D0\uC11C \uD14D\uC2A4\uD2B8\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return this.addLog("success","API Key REST API \uD638\uCD9C \uC644\uB8CC!"),g}catch(a){throw this.addLog("error","API Key REST API \uD638\uCD9C \uC2E4\uD328!"),this.addLog("error",`\uC5D0\uB7EC: ${a.message}`),a}})}callGeminiRestApi(t,e){return E(this,null,function*(){return this.callGeminiRestApiWithOAuth(t,e)})}translateText(t,e,n="simple"){if(this.clearLogs(),this.addLog("info","\uBC88\uC5ED \uC694\uCCAD \uC2DC\uC791"),this.addLog("info",`\uC785\uB825 \uD14D\uC2A4\uD2B8 \uAE38\uC774: ${t.length}\uC790`),this.addLog("info",`\uB300\uC0C1 \uC5B8\uC5B4: ${e}`),this.addLog("info",`\uBC88\uC5ED \uD615\uC2DD: ${n==="parallel"?"\uC6D0\uBB38-\uBC88\uC5ED \uBCD1\uB82C":"\uC77C\uBC18 \uBC88\uC5ED"}`),!t.trim())return this.addLog("error","\uBC88\uC5ED\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uBE44\uC5B4\uC788\uC74C"),ie(()=>new Error("\uBC88\uC5ED\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."));let i=this.geminiApiManager.getApiKey();if(!i)return this.addLog("error","\u274C \uC778\uC99D \uD0A4/\uD1A0\uD070\uC774 \uC5C6\uC74C"),this.addLog("warning",'\u{1F4A1} \uB0B4\uC815\uBCF4\uC5D0\uC11C "Google \uC778\uC99D\uD558\uAE30" \uB610\uB294 "Gemini API \uD0A4 \uAC00\uC838\uC624\uAE30"\uB97C \uD074\uB9AD\uD558\uC138\uC694'),ie(()=>new Error(`\uC778\uC99D\uC774 \uD544\uC694\uD569\uB2C8\uB2E4.

\uB0B4\uC815\uBCF4\uC5D0\uC11C:
1. "Google \uC778\uC99D\uD558\uAE30" (OAuth \uD1A0\uD070)
2. "Gemini API \uD0A4 \uAC00\uC838\uC624\uAE30" (\uC9C1\uC811 \uC785\uB825)

\uC911 \uD558\uB098\uB97C \uC120\uD0DD\uD558\uC5EC \uC124\uC815\uD574\uC8FC\uC138\uC694.`));let a=this.isApiKey(i),d=this.isOAuthToken(i);a?(this.addLog("success","\u{1F511} \uC0AC\uC6A9 \uC911\uC778 \uC778\uC99D: Gemini API Key"),this.addLog("info",`\uD0A4 \uC2DC\uC791: ${i.substring(0,10)}...`)):d?(this.addLog("success","\u{1F510} \uC0AC\uC6A9 \uC911\uC778 \uC778\uC99D: Google OAuth \uD1A0\uD070"),this.addLog("info",`\uD1A0\uD070 \uC2DC\uC791: ${i.substring(0,10)}...`)):this.addLog("warning","\u26A0\uFE0F \uC54C \uC218 \uC5C6\uB294 \uD1A0\uD070 \uD0C0\uC785"),this.addLog("info",`\uD1A0\uD070 \uAE38\uC774: ${i.length}\uC790`);let m={english:"English",korean:"Korean",japanese:"Japanese",chinese:"Chinese",spanish:"Spanish",french:"French",german:"German"}[e]||"English",h="";return n==="parallel"?h=`You are a professional translator. Translate the following text to ${m} in parallel format.

Output format (STRICTLY follow this):
[Original] First sentence in source language.
[Translation] First sentence translated to ${m}.

[Original] Second sentence in source language.
[Translation] Second sentence translated to ${m}.

Guidelines:
- Split text into sentences naturally (by punctuation marks like . ! ? etc.)
- Maintain exact 1:1 sentence matching between original and translation
- Use [Original] and [Translation] tags for EVERY sentence pair
- Do not add explanations, notes, or meta information
- Keep formatting consistent throughout
- Preserve the meaning and tone of each sentence
- Each sentence should be on its own line

Text to translate:

${t}`:h=`You are a professional translator. Translate the following text to ${m}.

Guidelines:
- Maintain the original meaning and tone
- Preserve technical terms and proper nouns appropriately
- Use natural, fluent language in the target language
- Keep the same formatting and structure
- Do not add explanations or notes
- Provide ONLY the translated text

Text to translate:

${t}`,this.isOAuthToken(i)?(this.addLog("info","\u{1F4E1} OAuth \uD1A0\uD070 \uAC10\uC9C0 \u2192 Authorization Bearer \uBC29\uC2DD"),rn(this.callGeminiRestApiWithOAuth(i,h)).pipe(pt(f=>(this.addLog("success","\uBC88\uC5ED \uC644\uB8CC!"),{originalText:t,translatedText:f.trim(),targetLanguage:m,success:!0})),sn(f=>(this.addLog("error",`OAuth REST API \uBC88\uC5ED \uC624\uB958: ${f.message}`),ie(()=>({originalText:t,translatedText:"",targetLanguage:m,success:!1,error:`[OAuth] ${f.message}`})))))):(this.addLog("info","\u{1F527} API Key \uAC10\uC9C0 \u2192 URL Query Parameter \uBC29\uC2DD"),rn(this.callGeminiRestApiWithApiKey(i,h)).pipe(pt(f=>(this.addLog("success","\uBC88\uC5ED \uC644\uB8CC!"),{originalText:t,translatedText:f.trim(),targetLanguage:m,success:!0})),sn(f=>(this.addLog("error",`API Key REST API \uBC88\uC5ED \uC624\uB958: ${f.message}`),ie(()=>({originalText:t,translatedText:"",targetLanguage:m,success:!1,error:`[API Key] ${f.message}`}))))))}translateMultipleTexts(t,e){let n=[];return new Ae(i=>{let a=0,d=()=>{if(a>=t.length){i.next(n),i.complete();return}let g=t[a];this.translateText(g,e).subscribe({next:m=>{n.push(m),a++,setTimeout(d,100)},error:m=>{n.push({originalText:g,translatedText:"",targetLanguage:e,success:!1,error:m.message||"\uBC88\uC5ED \uC2E4\uD328"}),a++,setTimeout(d,100)}})};d()})}static \u0275fac=function(e){return new(e||o)(Ie(jn))};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var bi=new Cn("PDF_CACHE_DB_NAME"),ot=class o extends Rn{dbName="PdfAnalysisCacheDB";storeName="pdfAnalysis";version=1;logCategory="PdfCache";constructor(t){super(),t&&(this.dbName=t,this.logCategory=t.replace("DB","")),this.initDB()}createObjectStore(t){if(!t.objectStoreNames.contains(this.storeName)){let e=t.createObjectStore(this.storeName,{keyPath:"id"});e.createIndex("fileName","fileName",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("fileSize","fileSize",{unique:!1}),this.debugLogger.info(this.logCategory,"\u{1F4E6} pdfAnalysis \uC800\uC7A5\uC18C \uC0DD\uC131\uB428")}}savePdfAnalysis(t){return E(this,null,function*(){try{yield this.save(t),this.debugLogger.success(this.logCategory,`\u{1F4BE} PDF \uBD84\uC11D \uB370\uC774\uD130 \uC800\uC7A5 \uC644\uB8CC: ${t.fileName} (${t.id})`)}catch(e){throw this.debugLogger.error(this.logCategory,`\u274C PDF \uBD84\uC11D \uB370\uC774\uD130 \uC800\uC7A5 \uC2E4\uD328: ${e}`),e}})}loadPdfAnalysis(t){return E(this,null,function*(){try{let e=yield this.getById(t);return e?this.debugLogger.success(this.logCategory,`\u{1F4C2} PDF \uBD84\uC11D \uB370\uC774\uD130 \uB85C\uB4DC \uC644\uB8CC: ${e.fileName} (${t})`):this.debugLogger.warn(this.logCategory,`\u26A0\uFE0F PDF \uBD84\uC11D \uB370\uC774\uD130 \uC5C6\uC74C: ${t}`),e}catch(e){throw this.debugLogger.error(this.logCategory,`\u274C PDF \uBD84\uC11D \uB370\uC774\uD130 \uB85C\uB4DC \uC2E4\uD328: ${e}`),e}})}deletePdfAnalysis(t){return E(this,null,function*(){try{yield this.delete(t),this.debugLogger.success(this.logCategory,`\u{1F5D1}\uFE0F PDF \uBD84\uC11D \uB370\uC774\uD130 \uC0AD\uC81C \uC644\uB8CC: ${t}`)}catch(e){throw this.debugLogger.error(this.logCategory,`\u274C PDF \uBD84\uC11D \uB370\uC774\uD130 \uC0AD\uC81C \uC2E4\uD328: ${e}`),e}})}clearAllPdfAnalysis(){return E(this,null,function*(){try{yield this.clear(),this.debugLogger.success(this.logCategory,"\u{1F9F9} \uBAA8\uB4E0 PDF \uBD84\uC11D \uB370\uC774\uD130 \uC0AD\uC81C \uC644\uB8CC")}catch(t){throw this.debugLogger.error(this.logCategory,`\u274C PDF \uBD84\uC11D \uB370\uC774\uD130 \uC804\uCCB4 \uC0AD\uC81C \uC2E4\uD328: ${t}`),t}})}getAllPdfAnalysis(){return E(this,null,function*(){try{let t=yield this.getAll();return this.debugLogger.info(this.logCategory,`\u{1F4CB} PDF \uCE90\uC2DC \uBAA9\uB85D \uC870\uD68C \uC644\uB8CC: ${t.length}\uAC1C`),t}catch(t){throw this.debugLogger.error(this.logCategory,`\u274C PDF \uCE90\uC2DC \uBAA9\uB85D \uC870\uD68C \uC2E4\uD328: ${t}`),t}})}cleanupOldCache(){return E(this,arguments,function*(t=10080*60*1e3){try{let e=yield this.getAllPdfAnalysis(),n=Date.now(),i=0;for(let a of e)n-a.timestamp>t&&(yield this.deletePdfAnalysis(a.id),i++);return i>0?this.debugLogger.info(this.logCategory,`\u{1F9F9} \uC624\uB798\uB41C PDF \uCE90\uC2DC ${i}\uAC1C \uC815\uB9AC \uC644\uB8CC`):this.debugLogger.info(this.logCategory,"\u2139\uFE0F \uC815\uB9AC\uD560 \uC624\uB798\uB41C \uCE90\uC2DC \uC5C6\uC74C"),i}catch(e){throw this.debugLogger.error(this.logCategory,`\u274C \uCE90\uC2DC \uC815\uB9AC \uC911 \uC624\uB958: ${e}`),e}})}getCacheStats(){return E(this,null,function*(){try{let t=yield this.getAllPdfAnalysis();if(t.length===0)return{count:0,totalSize:0,oldestTimestamp:0,newestTimestamp:0};let e=t.reduce((d,g)=>d+g.fileSize,0),n=t.map(d=>d.timestamp),i=Math.min(...n),a=Math.max(...n);return this.debugLogger.info(this.logCategory,`\u{1F4CA} \uCE90\uC2DC \uD1B5\uACC4: ${t.length}\uAC1C, \uCD1D ${(e/1024/1024).toFixed(2)}MB`),{count:t.length,totalSize:e,oldestTimestamp:i,newestTimestamp:a}}catch(t){throw this.debugLogger.error(this.logCategory,`\u274C \uCE90\uC2DC \uD1B5\uACC4 \uC870\uD68C \uC2E4\uD328: ${t}`),t}})}static \u0275fac=function(e){return new(e||o)(Ie(bi,8))};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Mt="5.4.1105",be=class o{loadPromise=null;constructor(){}getPdfjsLib(){return globalThis.pdfJsLib||window.pdfjsLib}loadPdfjs(){if(this.loadPromise)return this.loadPromise;let t=this.getPdfjsLib();return t?(console.log("\u2705 [PDF.js] \uC774\uBBF8 \uB85C\uB4DC\uB428 (\uC911\uBCF5 \uB85C\uB4DC \uBC29\uC9C0)"),this.loadPromise=Promise.resolve(t),this.loadPromise):document.querySelector(`script[src*="viewer-${Mt}.min.mjs"]`)?(console.log("\u23F3 [PDF.js] \uC2A4\uD06C\uB9BD\uD2B8 \uC774\uBBF8 \uCD94\uAC00\uB428, \uB85C\uB4DC \uB300\uAE30 \uC911..."),this.loadPromise=new Promise((n,i)=>{let a=(d=0)=>{let g=this.getPdfjsLib();g?(console.log("\u2705 [PDF.js] \uAE30\uC874 \uC2A4\uD06C\uB9BD\uD2B8 \uB85C\uB4DC \uC644\uB8CC"),n(g)):d<100?setTimeout(()=>a(d+1),50):i(new Error("pdf.js \uB85C\uB4DC \uB300\uAE30 \uC2DC\uAC04 \uCD08\uACFC"))};a()}),this.loadPromise):(this.loadPromise=new Promise((n,i)=>{let a=document.createElement("script");a.type="module";let d=this.getBaseUrl();a.src=`${d}assets/libs/viewer-${Mt}.min.mjs`,console.log("\u{1F4E6} [PDF.js] \uB85C\uB4DC \uC2DC\uB3C4:",a.src),a.onload=()=>{let g=(m=0)=>{let h=this.getPdfjsLib();h?(console.log("\u2705 [PDF.js] \uB85C\uB4DC \uC131\uACF5"),n(h)):m<50?setTimeout(()=>g(m+1),50):i(new Error("pdf.js \uB85C\uB4DC \uD6C4 \uB77C\uC774\uBE0C\uB7EC\uB9AC \uCD08\uAE30\uD654 \uC2E4\uD328"))};g()},a.onerror=g=>{console.error("\u274C [PDF.js] \uB85C\uB4DC \uC2E4\uD328:",a.src,g),i(new Error(`pdf.js \uB85C\uB4DC \uC2E4\uD328: ${a.src}`))},document.head.appendChild(a)}),this.loadPromise)}getBaseUrl(){let t=window.location.protocol,e=!!window.chrome?.webview;if(t==="file:"){let n=window.location.pathname,i=n.substring(0,n.lastIndexOf("/")+1);return console.log("\u{1F4F1} [PDF.js] Android WebView \uAC10\uC9C0, basePath:",i),`file://${i}`}if(e){let n=window.location.origin+"/";return console.log("\u{1F5A5}\uFE0F [PDF.js] WPF WebView2 \uAC10\uC9C0, baseUrl:",n),n}return document.baseURI||window.location.origin+"/"}getDocument(t){return E(this,null,function*(){let e=this.getPdfjsLib();return e||(e=yield this.loadPdfjs()),this.ensureWorkerSrc(e),e.getDocument(t).promise})}ensureWorkerSrc(t){if(t?.GlobalWorkerOptions&&!t.GlobalWorkerOptions.workerSrc){let e=this.getBaseUrl();t.GlobalWorkerOptions.workerSrc=`${e}assets/libs/pdf.worker-${Mt}.min.mjs`,console.log("\u{1F4E6} [PDF.js Worker] \uACBD\uB85C \uC124\uC815:",t.GlobalWorkerOptions.workerSrc)}}get OPS(){return this.getPdfjsLib()?.OPS||{}}get version(){return Mt}get workerOptions(){return this.getPdfjsLib()?.GlobalWorkerOptions}get lib(){return this.getPdfjsLib()}get isLoaded(){return!!globalThis.pdfJsLib||!!window.pdfjsLib}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ot=class o{pdfjsLibService=J(be);constructor(){}extractTextStreamAsJson(t,e){return E(this,null,function*(){try{let n={fileName:t.name,fileSize:t.size,pageCount:0,extractionTimestamp:new Date().toISOString(),extractionMethod:"PDF.js + \uD5A5\uC0C1\uB41C \uBD84\uC11D",pages:[],metadata:{totalTextItems:0,totalWords:0,totalCharacters:0,uniqueFonts:[],hasImages:!1,hasVectorGraphics:!1}},i=yield t.arrayBuffer(),a=this.pdfjsLibService.lib;if(a){a?.VerbosityLevel&&(a.GlobalWorkerOptions.verbosity=0);let d=yield this.pdfjsLibService.getDocument({data:i}),g=d.numPages;n.pageCount=g;let m=new Set,h=0,f=0,C=0;for(let x=1;x<=g;x++){let P=yield d.getPage(x),O=P.getViewport({scale:1}),k=yield P.getTextContent(),F=[];try{F=yield this.extractTextColorsFromOperatorList(P)}catch(X){console.error("\u274C [OperatorList \uC0C9\uC0C1 \uCD94\uCD9C \uC2E4\uD328, \uAE30\uBCF8\uAC12 \uC0AC\uC6A9]",X),F=new Array(k.items.length).fill("#000000")}let j=k.items.map((X,Q)=>{let Z=X.transform,K={id:`page-${x}-item-${Q}`,text:X.str,position:{x:Math.round(Z[4]*100)/100,y:Math.round((O.height-Z[5])*100)/100,width:Math.round(X.width*100)/100,height:Math.round(X.height*100)/100},font:{name:X.fontName||"Unknown",size:Math.round(Math.abs(Z[0])*100)/100},transform:Z,style:{direction:X.dir||"ltr",hasEndOfLine:X.hasEOL||!1,color:F[Q]||"#000000"},analysis:this.analyzeText(X.str)};return X.fontName&&m.add(X.fontName),K}).filter(X=>X.text.trim().length>0),V=this.groupTextIntoSentences(j),A=this.calculatePageStatistics(j),G={pageNumber:x,width:Math.round(O.width),height:Math.round(O.height),textItems:j,sentences:V,statistics:A};n.pages.push(G),h+=j.length,f+=A.wordCount,C+=A.charCount}let _=yield this.checkForImages(d),y=n.pages.reduce((x,P)=>x+P.textItems.reduce((O,k)=>{let F=k.text.replace(/[\s\n\r\t]/g,"");return O+F.length},0),0),S=_&&h===0;S&&(h=0,f=0,C=0,n.pages.forEach(x=>{x.textItems=[],x.sentences=[],x.statistics={totalItems:0,wordCount:0,charCount:0,avgFontSize:0,fontDistribution:{}}}));let D=S?!1:yield this.checkForVectorGraphics(d);return n.metadata={totalTextItems:h,totalWords:f,totalCharacters:C,uniqueFonts:Array.from(m),hasImages:_,hasVectorGraphics:D},n}throw new Error("PDF.js \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4")}catch(n){throw n}})}analyzeText(t){let e=t.trim().split(/\s+/).filter(i=>i.length>0).length,n=t.length;return{wordCount:e,charCount:n,containsEnglish:/[a-zA-Z]/.test(t),containsKorean:/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(t),containsNumbers:/[0-9]/.test(t),containsSpecialChars:/[!@#$%^&*(),.?":{}|<>]/.test(t)}}groupTextIntoSentences(t){let e=[],n={text:"",items:[],x:null,y:null,width:0,height:0,font:null,color:null},i=2;for(let a=0;a<t.length;a++){let d=t[a];n.x===null&&(n.x=d.position.x,n.y=d.position.y,n.font={name:d.font.name,size:d.font.size},n.color=d.style?.color||null);let g=Math.abs(d.position.y-n.y)<=i,m=Math.abs(d.font.size-n.font.size)<.1;a<5;let h=d.text.includes(".")||d.text.includes("!")||d.text.includes("?")||d.text===`
`||d.style?.hasEndOfLine,f=a===t.length-1;if(g&&m){if(n.items.length>0){let _=n.items[n.items.length-1],y=_.position.x+_.position.width,S=d.position.x-y,x=d.position.width/d.text.length*.2;a<10,S>x&&(n.text+=" ")}if(n.text+=d.text,n.items.push(d),n.width+=d.position.width,n.height=Math.max(n.height,d.position.height),(h||f)&&n.text.trim()){let _=n.text.trim(),y={id:`sentence-${e.length+1}`,text:_,position:{x:n.x,y:n.y,width:n.width,height:n.height},font:n.font,itemCount:n.items.length,itemIds:n.items.map(S=>S.id),language:this.detectLanguage(_)};n.color&&(y.color=n.color),e.push(y),n={text:"",items:[],x:null,y:null,width:0,height:0,font:null,color:null}}}else{if(n.text.trim()){let _=n.text.trim(),y={id:`sentence-${e.length+1}`,text:_,position:{x:n.x,y:n.y,width:n.width,height:n.height},font:n.font,itemCount:n.items.length,itemIds:n.items.map(S=>S.id),language:this.detectLanguage(_)};n.color&&(y.color=n.color),e.push(y)}if(n={text:d.text,items:[d],x:d.position.x,y:d.position.y,width:d.position.width,height:d.position.height,font:{name:d.font.name,size:d.font.size},color:d.style?.color||null},f&&n.text.trim()){let _=n.text.trim(),y={id:`sentence-${e.length+1}`,text:_,position:{x:n.x,y:n.y,width:n.width,height:n.height},font:n.font,itemCount:n.items.length,itemIds:n.items.map(S=>S.id),language:this.detectLanguage(_)};n.color&&(y.color=n.color),e.push(y)}}}return e.length>0,e}detectLanguage(t){let e=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(t),n=/[a-zA-Z]/.test(t);return e&&n?"mixed":e?"korean":n?"english":"unknown"}calculatePageStatistics(t){let e=t.reduce((d,g)=>d+g.analysis.wordCount,0),n=t.reduce((d,g)=>d+g.analysis.charCount,0),i=t.length>0?t.reduce((d,g)=>d+g.font.size,0)/t.length:0,a={};return t.forEach(d=>{a[d.font.name]=(a[d.font.name]||0)+1}),{totalItems:t.length,wordCount:e,charCount:n,avgFontSize:Math.round(i*100)/100,fontDistribution:a}}checkForImages(t){return E(this,null,function*(){try{for(let e=1;e<=t.numPages;e++){let i=yield(yield t.getPage(e)).getOperatorList({intent:"display"}),a=this.pdfjsLibService.OPS;for(let d=0;d<i.fnArray.length;d++){let g=i.fnArray[d];if(g===a.paintImageXObject||g===a.paintInlineImageXObject)return!0}}}catch{}return!1})}checkForVectorGraphics(t){return E(this,null,function*(){try{for(let e=1;e<=t.numPages;e++){let i=yield(yield t.getPage(e)).getOperatorList({intent:"display"}),a=this.pdfjsLibService.OPS;for(let d=0;d<i.fnArray.length;d++){let g=i.fnArray[d];if(g===a.moveTo||g===a.lineTo||g===a.curveTo||g===a.rectangle||g===a.fill||g===a.stroke)return!0}}}catch{}return!1})}extractTextColorsFromOperatorList(t){return E(this,null,function*(){try{let e=yield t.getOperatorList({intent:"display"}),n=yield t.getTextContent(),i=t.getViewport({scale:1}),a=e.fnArray,d=e.argsArray,g=this.pdfjsLibService.OPS;if(!g)return[];let m=[],h=[],f={fillColor:"#000000",strokeColor:"#000000",colorSpace:"DeviceRGB",transform:[1,0,0,1,0,0]},C=[1,0,0,1,0,0],_=[1,0,0,1,0,0],y=[],S=0;for(let x=0;x<a.length;x++){let P=a[x],O=d[x];if(P===g.save)h.push({fillColor:f.fillColor,strokeColor:f.strokeColor,colorSpace:f.colorSpace,transform:[...f.transform]}),y.push({index:x,operation:"save",stackDepth:h.length});else if(P===g.restore)h.length>0&&(f=h.pop(),y.push({index:x,operation:"restore",restoredColor:f.fillColor,stackDepth:h.length}));else if(P===g.transform){let[k,F,j,V,A,G]=O,[X,Q,Z,B,K,ee]=f.transform;f.transform=[k*X+F*Z,k*Q+F*B,j*X+V*Z,j*Q+V*B,A*X+G*Z+K,A*Q+G*B+ee]}else if(P===g.setTextMatrix)C=O.slice(),_=O.slice();else if(P===g.moveText){let[k,F]=O;_=[1,0,0,1,k,F],C=[..._]}else if(P===g.setFillColorSpace)f.colorSpace=O[0]?.name||O[0]||"DeviceRGB",y.push({index:x,operation:"setFillColorSpace",colorSpace:f.colorSpace});else if(P===g.setFillRGBColor){let k=this.parseRGBColor(O);k&&(f.fillColor=k,f.colorSpace="DeviceRGB",y.push({index:x,operation:"setFillRGBColor",args:Array.from(O),hexColor:k}))}else if(P===g.setFillGray){let k=this.parseGrayColor(O);k&&(f.fillColor=k,f.colorSpace="DeviceGray",y.push({index:x,operation:"setFillGray",args:Array.from(O),hexColor:k}))}else if(P===g.setFillCMYKColor){let k=this.parseCMYKColor(O);k&&(f.fillColor=k,f.colorSpace="DeviceCMYK",y.push({index:x,operation:"setFillCMYKColor",args:Array.from(O),hexColor:k}))}else if(P===g.setFillColor){let k=this.parseGenericColor(O,f.colorSpace);k&&(f.fillColor=k,y.push({index:x,operation:"setFillColor",colorSpace:f.colorSpace,args:Array.isArray(O)?Array.from(O):O,hexColor:k}))}else if(P===g.showText||P===g.showSpacedText||P===g.nextLineShowText){let k=Math.round(C[4]*100)/100,F=Math.round((i.height-C[5])*100)/100;m.push({x:k,y:F,color:f.fillColor}),y.push({index:x,operation:P===g.showText?"showText":P===g.showSpacedText?"showSpacedText":"nextLineShowText",appliedColor:f.fillColor,position:{x:k,y:F},textIndex:S,colorSpace:f.colorSpace,stackDepth:h.length}),S++}}let D=[];return n.items.forEach((x,P)=>{let O=x.transform,k=Math.round(O[4]*100)/100,F=Math.round((i.height-O[5])*100)/100,j=1,V=m.find(A=>Math.abs(A.x-k)<j&&Math.abs(A.y-F)<j);D.push(V?.color||"#000000")}),y.length>0,D}catch(e){return console.error("\u274C [\uC0C9\uC0C1 \uCD94\uCD9C \uC2E4\uD328]",e),[]}})}parseRGBColor(t){try{let e;if(t instanceof Uint8ClampedArray||t instanceof Uint8Array)e=Array.from(t);else if(Array.isArray(t))e=t;else return null;if(e.length<3)return null;let n=typeof e[0]=="number"?e[0]:parseFloat(e[0]),i=typeof e[1]=="number"?e[1]:parseFloat(e[1]),a=typeof e[2]=="number"?e[2]:parseFloat(e[2]);if(isNaN(n)||isNaN(i)||isNaN(a))return null;let d=n<=1?Math.round(n*255):Math.round(n),g=i<=1?Math.round(i*255):Math.round(i),m=a<=1?Math.round(a*255):Math.round(a);return`#${d.toString(16).padStart(2,"0")}${g.toString(16).padStart(2,"0")}${m.toString(16).padStart(2,"0")}`}catch{return null}}parseGrayColor(t){try{let e;if(t instanceof Uint8ClampedArray||t instanceof Uint8Array)e=Array.from(t);else if(Array.isArray(t))e=t;else return null;if(e.length<1)return null;let n=typeof e[0]=="number"?e[0]:parseFloat(e[0]);if(isNaN(n))return null;let i=n<=1?Math.round(n*255):Math.round(n);return`#${i.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}catch{return null}}parseCMYKColor(t){try{let e;if(t instanceof Uint8ClampedArray||t instanceof Uint8Array)e=Array.from(t);else if(Array.isArray(t))e=t;else return null;if(e.length<4)return null;let n=typeof e[0]=="number"?e[0]:parseFloat(e[0]),i=typeof e[1]=="number"?e[1]:parseFloat(e[1]),a=typeof e[2]=="number"?e[2]:parseFloat(e[2]),d=typeof e[3]=="number"?e[3]:parseFloat(e[3]);if(isNaN(n)||isNaN(i)||isNaN(a)||isNaN(d))return null;let g=Math.max(0,Math.min(255,Math.round(255*(1-n)*(1-d)))),m=Math.max(0,Math.min(255,Math.round(255*(1-i)*(1-d)))),h=Math.max(0,Math.min(255,Math.round(255*(1-a)*(1-d))));return`#${g.toString(16).padStart(2,"0")}${m.toString(16).padStart(2,"0")}${h.toString(16).padStart(2,"0")}`}catch{return null}}parseGenericColor(t,e){try{if(!Array.isArray(t))return null;if(e==="DeviceRGB"&&t.length>=3){let n=typeof t[0]=="number"?t[0]:parseFloat(t[0]),i=typeof t[1]=="number"?t[1]:parseFloat(t[1]),a=typeof t[2]=="number"?t[2]:parseFloat(t[2]);if(isNaN(n)||isNaN(i)||isNaN(a))return null;let d=Math.max(0,Math.min(255,Math.round(n*255))),g=Math.max(0,Math.min(255,Math.round(i*255))),m=Math.max(0,Math.min(255,Math.round(a*255)));return`#${d.toString(16).padStart(2,"0")}${g.toString(16).padStart(2,"0")}${m.toString(16).padStart(2,"0")}`}else if(e==="DeviceGray"&&t.length>=1){let n=typeof t[0]=="number"?t[0]:parseFloat(t[0]);if(isNaN(n))return null;let i=Math.max(0,Math.min(255,Math.round(n*255)));return`#${i.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}else if(e==="DeviceCMYK"&&t.length>=4){let n=typeof t[0]=="number"?t[0]:parseFloat(t[0]),i=typeof t[1]=="number"?t[1]:parseFloat(t[1]),a=typeof t[2]=="number"?t[2]:parseFloat(t[2]),d=typeof t[3]=="number"?t[3]:parseFloat(t[3]);if(isNaN(n)||isNaN(i)||isNaN(a)||isNaN(d))return null;let g=Math.max(0,Math.min(255,Math.round(255*(1-n)*(1-d)))),m=Math.max(0,Math.min(255,Math.round(255*(1-i)*(1-d)))),h=Math.max(0,Math.min(255,Math.round(255*(1-a)*(1-d))));return`#${g.toString(16).padStart(2,"0")}${m.toString(16).padStart(2,"0")}${h.toString(16).padStart(2,"0")}`}return null}catch{return null}}downloadJsonData(t){try{let e=JSON.stringify(t,null,2),n=new Blob([e],{type:"application/json;charset=utf-8;"}),i=document.createElement("a"),a=URL.createObjectURL(n),d=new Date().toISOString().split("T")[0],g=`${t.fileName}_text_stream_${d}.json`;i.setAttribute("href",a),i.setAttribute("download",g),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}catch(e){throw e}}logJsonData(t){}processFileWithAutoExtraction(t){return E(this,null,function*(){try{let e=yield this.extractTextStreamAsJson(t);this.logJsonData(e);let n=this.generateSummary(e);return e}catch(e){throw e}})}filterTextByCondition(t,e){let n=[];return t.pages.forEach(i=>{e.pageNumber&&i.pageNumber!==e.pageNumber||i.textItems.forEach(a=>{let d=!0;e.containsEnglish!==void 0&&(d=d&&a.analysis.containsEnglish===e.containsEnglish),e.containsKorean!==void 0&&(d=d&&a.analysis.containsKorean===e.containsKorean),e.minFontSize!==void 0&&(d=d&&a.font.size>=e.minFontSize),e.maxFontSize!==void 0&&(d=d&&a.font.size<=e.maxFontSize),d&&n.push(a)})}),n}generateSummary(t){return[`\u{1F4C4} PDF \uD30C\uC77C: ${t.fileName}`,"\u{1F4CA} \uAE30\uBCF8 \uC815\uBCF4:",`   - \uD30C\uC77C \uD06C\uAE30: ${this.formatFileSize(t.fileSize)}`,`   - \uD398\uC774\uC9C0 \uC218: ${t.pageCount}`,`   - \uCD94\uCD9C \uC2DC\uAC04: ${new Date(t.extractionTimestamp).toLocaleString("ko-KR")}`,"","\u{1F4C8} \uD14D\uC2A4\uD2B8 \uD1B5\uACC4:",`   - \uCD1D \uD14D\uC2A4\uD2B8 \uC544\uC774\uD15C: ${t.metadata.totalTextItems.toLocaleString()}\uAC1C`,`   - \uCD1D \uB2E8\uC5B4 \uC218: ${t.metadata.totalWords.toLocaleString()}\uAC1C`,`   - \uCD1D \uBB38\uC790 \uC218: ${t.metadata.totalCharacters.toLocaleString()}\uAC1C`,`   - \uC0AC\uC6A9\uB41C \uD3F0\uD2B8: ${t.metadata.uniqueFonts.length}\uAC1C`,"","\u{1F5BC}\uFE0F \uBBF8\uB514\uC5B4 \uC694\uC18C:",`   - \uC774\uBBF8\uC9C0 \uD3EC\uD568: ${t.metadata.hasImages?"\uC608":"\uC544\uB2C8\uC624"}`,`   - \uBCA1\uD130 \uADF8\uB798\uD53D \uD3EC\uD568: ${t.metadata.hasVectorGraphics?"\uC608":"\uC544\uB2C8\uC624"}`,"","\u{1F4DD} \uD398\uC774\uC9C0\uBCC4 \uC0C1\uC138:",...t.pages.map(n=>`   \uD398\uC774\uC9C0 ${n.pageNumber}: ${n.statistics.totalItems}\uAC1C \uD14D\uC2A4\uD2B8, ${n.statistics.wordCount}\uB2E8\uC5B4`)].join(`
`)}formatFileSize(t){if(t===0)return"0 Bytes";let e=1024,n=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,i)).toFixed(2))+" "+n[i]}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Kn=class o{constructor(t){this.snackbar=t}pdfjsLibService=J(be);simulateDocumentGeneration(){return E(this,null,function*(){return new Promise(t=>{setTimeout(()=>{t("\uBB38\uC11C\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")},3e3)})})}executeKeepOnlyFirstPage(t){return E(this,null,function*(){try{let n=yield(yield fetch(t)).arrayBuffer(),i=window.PDFLib;if(!i)throw new Error("PDF-lib \uB77C\uC774\uBE0C\uB7EC\uB9AC\uAC00 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");let{PDFDocument:a}=i,d=yield a.load(n),g=yield a.create(),[m]=yield g.copyPages(d,[0]);g.addPage(m);let h=yield g.save();return new Blob([h],{type:"application/pdf"})}catch(e){return console.error("\u274C \uCCAB \uBC88\uC9F8 \uD398\uC774\uC9C0\uB9CC \uB0A8\uAE30\uAE30 \uC2E4\uD328:",e),this.snackbar.showError("\uCCAB \uBC88\uC9F8 \uD398\uC774\uC9C0\uB9CC \uB0A8\uAE30\uAE30\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),null}})}initializeNewDocument(t){t.pdfPages=[],t.currentPage=1,t.totalPages=0,t.selectedElement=null,t.pdfSrc=null,t.analysisData=null,t.vectorData=null,t.textStreamData=null,t.textOverlayData=null}getPdfPageSize(t,e=0){return E(this,null,function*(){try{let i=yield(yield fetch(t)).arrayBuffer(),a=window.PDFLib;if(!a)throw new Error("PDF-lib \uB77C\uC774\uBE0C\uB7EC\uB9AC\uAC00 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");let{PDFDocument:d}=a,m=(yield d.load(i)).getPage(e),{width:h,height:f}=m.getSize(),C=h>f?"landscape":"portrait";return{width:h,height:f,orientation:C}}catch(n){return console.error("\u274C PDF \uD398\uC774\uC9C0 \uD06C\uAE30 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328:",n),null}})}keepSpecificPages(t,e){return E(this,null,function*(){try{let i=yield(yield fetch(t)).arrayBuffer(),a=window.PDFLib;if(!a)throw new Error("PDF-lib \uB77C\uC774\uBE0C\uB7EC\uB9AC\uAC00 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");let{PDFDocument:d}=a,g=yield d.load(i),m=yield d.create();(yield m.copyPages(g,e)).forEach(_=>m.addPage(_));let f=yield m.save();return new Blob([f],{type:"application/pdf"})}catch(n){return console.error("\u274C \uD2B9\uC815 \uD398\uC774\uC9C0 \uC720\uC9C0 \uC2E4\uD328:",n),this.snackbar.showError("\uD398\uC774\uC9C0 \uC720\uC9C0\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),null}})}pdfBlobToDataUrl(t){return E(this,null,function*(){return new Promise((e,n)=>{let i=new FileReader;i.onload=()=>e(i.result),i.onerror=n,i.readAsDataURL(t)})})}getPdfPageCount(t){return E(this,null,function*(){try{let n=yield(yield fetch(t)).arrayBuffer(),i=window.PDFLib;if(!i)throw new Error("PDF-lib \uB77C\uC774\uBE0C\uB7EC\uB9AC\uAC00 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");let{PDFDocument:a}=i;return(yield a.load(n)).getPageCount()}catch(e){return console.error("\u274C PDF \uD398\uC774\uC9C0 \uC218 \uAC00\uC838\uC624\uAE30 \uC2E4\uD328:",e),0}})}createCombinedDocument(t){return E(this,null,function*(){try{t.debugLogger.info("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131","\u{1F4CA} \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC2DC\uC791 (\uBCA1\uD130 + \uD14D\uC2A4\uD2B8 + \uC774\uBBF8\uC9C0)"),t.debugLogger.info("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131",`\uC2DC\uC791 \uC2DC\uAC04: ${new Date().toLocaleString()}`);let e=t.pdfDocBuilder.validateCombinedDocumentData({vectorData:t.loadedVectorData,textStreamData:t.textStreamRawData,pdfAnalysisData:t.pdfAnalysisData});if(t.debugLogger.info("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131","\u2705 [1\uB2E8\uACC4] \uB370\uC774\uD130 \uAC80\uC99D \uC644\uB8CC"),t.debugLogger.info("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131",`\u2705 [\uD655\uC778] \uBCA1\uD130: ${e.hasVector?"\uC788\uC74C \u2713":"\uC5C6\uC74C \u2717"}, \uD14D\uC2A4\uD2B8: ${e.hasText?"\uC788\uC74C \u2713":"\uC5C6\uC74C \u2717"}, \uC774\uBBF8\uC9C0: ${e.hasImages?"\uC788\uC74C \u2713":"\uC5C6\uC74C \u2717"}`),!e.valid)return this.snackbar.showError(e.message||"\uC0DD\uC131\uD560 \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),t.debugLogger.error("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131","\u274C \uC5D0\uB7EC: \uBCA1\uD130, \uD14D\uC2A4\uD2B8, \uC774\uBBF8\uC9C0 \uBAA8\uB450 \uC5C6\uC74C"),{success:!1};let{hasVector:n,hasText:i,hasImages:a}=e;t.debugLogger.info("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131","\u{1F504} [2\uB2E8\uACC4] \uC0C8 \uBB38\uC11C \uCD08\uAE30\uD654"),t.initializeNewDocument(),t.debugLogger.success("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131","\u2705 \uBB38\uC11C \uCD08\uAE30\uD654 \uC644\uB8CC"),t.cdr.detectChanges();let d=0,g=0,m=0,h=new Map;if(a){this.snackbar.showInfo("\u{1F4CA} \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC911... (1/3: \uC774\uBBF8\uC9C0 \uCD94\uCD9C)"),t.cdr.detectChanges(),h=yield t.extractImagesFromPdf();let x=Array.from(h.values()).reduce((P,O)=>P+O.length,0);t.cdr.detectChanges()}else t.cdr.detectChanges();if(n){t.debugLogger.info("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131","\u2705 hasVector = true, \uBCA1\uD130 \uCC98\uB9AC \uBE14\uB85D \uC9C4\uC785!"),this.snackbar.showInfo("\u{1F4CA} \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC911... (2/3: \uBCA1\uD130 \uCC98\uB9AC)"),t.cdr.detectChanges(),t.pdfPages.length>0&&(t.debugLogger.warn("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131",`\u26A0\uFE0F pdfPages\uAC00 \uBE44\uC5B4\uC788\uC9C0 \uC54A\uC74C! ${t.pdfPages.length}\uD398\uC774\uC9C0 \u2192 0\uD398\uC774\uC9C0\uB85C \uCD08\uAE30\uD654`),t.pdfPages.length=0);let x=t.loadedVectorData.pageDetails?.length||1;t.debugLogger.info("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131",`\u{1F3AF} \uBCA1\uD130 \uD398\uC774\uC9C0 \uC81C\uD55C: ${x}\uD398\uC774\uC9C0`),yield t.vectorElementConverter.createPagesFromOriginalPdfSvg(t.loadedVectorData,t.pdfAnalysisData,t.pdfPages,t.pageWidth,t.pageHeight,t.addDebugLog),t.pdfPages.length>x&&(t.debugLogger.warn("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131",`\u26A0\uFE0F \uD398\uC774\uC9C0 \uC218 \uCD08\uACFC \uAC10\uC9C0: ${t.pdfPages.length} \u2192 ${x}\uD398\uC774\uC9C0\uB85C \uC81C\uD55C`),t.pdfPages.length=x),d=t.pdfPages.length,t.cdr.detectChanges()}else t.debugLogger.warn("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131","\u274C hasVector = false, \uBCA1\uD130 \uCC98\uB9AC \uBE14\uB85D \uAC74\uB108\uB700!");this.snackbar.showInfo("\u{1F4CA} \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC911... (3/3: \uD14D\uC2A4\uD2B8 \uC624\uBC84\uB808\uC774)");let f=new Set;t.loadedVectorData?.pageDetails&&t.loadedVectorData.pageDetails.forEach((x,P)=>{x.svgGenerationMethod==="Canvas"&&(f.add(P),t.debugLogger.warn("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131",`\u{1F504} \uD398\uC774\uC9C0 ${P+1}: Canvas Fallback \uAC10\uC9C0`))});let C=f.size>0;C&&t.debugLogger.warn("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131",`\u26A0\uFE0F Canvas Fallback \uD398\uC774\uC9C0: ${Array.from(f).map(x=>x+1).join(", ")} - \uD574\uB2F9 \uD398\uC774\uC9C0\uB294 \uD14D\uC2A4\uD2B8/\uC774\uBBF8\uC9C0 \uCD94\uAC00 \uAC74\uB108\uB700`);let _=t.pdfPages.length;if(i&&n){if(t.cdr.detectChanges(),t.textStreamRawData&&t.textStreamRawData.pages){let x=t.textStreamRawData.pages.slice(0,_);t.debugLogger.info("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131",`\u{1F3AF} \uD14D\uC2A4\uD2B8 \uD398\uC774\uC9C0 \uC81C\uD55C: ${t.textStreamRawData.pages.length} \u2192 ${x.length}\uD398\uC774\uC9C0`);let P=pe(Y({},t.textStreamRawData),{pages:x.map(O=>pe(Y({},O),{textItems:t.groupTextItems(O.textItems||[])}))});yield t.pageBuilder.overlayTextOnPages(P,t.pdfPages,f,()=>{})}t.cdr.detectChanges()}else if(i&&!n){t.cdr.detectChanges();let x=t.pageBuilder.createPagesFromTextStream(t.textStreamRawData,t.pdfPages,()=>{});t.pdfPages=x,g=t.pdfPages.length,this.snackbar.showSuccess(`\uD14D\uC2A4\uD2B8\uC2A4\uD2B8\uB9BC \uB370\uC774\uD130\uB85C ${t.pdfPages.length}\uAC1C \uD398\uC774\uC9C0\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4.`),t.cdr.detectChanges()}if(a&&h.size>0){t.cdr.detectChanges();for(let[x,P]of h.entries()){let O=x-1;if(O<t.pdfPages.length){if(f.has(O)){t.debugLogger.info("\uC774\uBBF8\uC9C0\uC88C\uD45C",`\u23ED\uFE0F \uD398\uC774\uC9C0 ${x}: Canvas Fallback \uD398\uC774\uC9C0 - \uC774\uBBF8\uC9C0 ${P.length}\uAC1C \uAC74\uB108\uB700`);continue}let k=t.pdfPages[O];for(let F of P)k.elements.push(F),t.debugLogger.info("\uC774\uBBF8\uC9C0\uC88C\uD45C",`\u{1F4CD} \uD398\uC774\uC9C0 ${x} \uC774\uBBF8\uC9C0 \uCD94\uAC00 - x: ${F.x?.toFixed(2)}pt, y: ${F.y?.toFixed(2)}pt, width: ${F.width?.toFixed(2)}pt, height: ${F.height?.toFixed(2)}pt`),F.transform||console.warn("   \u26A0\uFE0F Transform \uB370\uC774\uD130 \uC5C6\uC74C!",F)}}m=t.pdfPages.reduce((x,P)=>x+P.elements.filter(O=>O.type==="image").length,0),t.cdr.detectChanges()}else t.cdr.detectChanges();let y=t.pdfPages.reduce((x,P)=>x+P.elements.filter(O=>O.type==="svg").length,0),S=t.pdfPages.reduce((x,P)=>x+P.elements.filter(O=>O.type==="text").length,0),D=t.pdfPages.reduce((x,P)=>x+P.elements.filter(O=>O.type==="image").length,0);if(C){let x=t.pdfPages.length-f.size;t.debugLogger.warn("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131",`\u{1F504} \uD63C\uD569 \uBAA8\uB4DC \uC644\uB8CC - \uC804\uCCB4: ${t.pdfPages.length}\uCABD, \uC815\uC0C1: ${x}\uCABD (SVG+\uD14D\uC2A4\uD2B8+\uC774\uBBF8\uC9C0), Fallback: ${f.size}\uCABD (SVG\uB9CC)`),this.snackbar.showWarning(`\u26A0\uFE0F \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC644\uB8CC (${t.pdfPages.length}\uCABD) - ${f.size}\uAC1C \uD398\uC774\uC9C0\uB294 \uC774\uBBF8\uC9C0\uB85C \uCC98\uB9AC\uB428`)}else t.debugLogger.success("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131",`\u{1F389} \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC644\uB8CC - \uD398\uC774\uC9C0: ${t.pdfPages.length}, SVG: ${y}, \uD14D\uC2A4\uD2B8: ${S}, \uC774\uBBF8\uC9C0: ${D}`),this.snackbar.showSuccess(`\u2705 \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC644\uB8CC! (${t.pdfPages.length}\uCABD, SVG ${y}\uAC1C + \uD14D\uC2A4\uD2B8 ${S}\uAC1C)`);return t.closeAllModals(),{success:!0,pdfPages:t.pdfPages,totalPages:t.pdfPages.length,currentPage:1}}catch(e){return t.debugLogger.error("\uD63C\uD569\uBB38\uC11C\uC0DD\uC131",`\u274C \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC2E4\uD328: ${e}`),this.snackbar.showError("\u274C \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),{success:!1}}})}loadImagePdfToEditor(t){return E(this,null,function*(){try{let e=t.pdfDocBuilder.validateImagePdfData(t.pdfBlob);if(!e.valid)return this.snackbar.showError(e.message||"PDF \uB370\uC774\uD130 \uAC80\uC99D \uC2E4\uD328"),{success:!1};this.snackbar.showInfo("\u{1F5BC}\uFE0F \uC774\uBBF8\uC9C0 PDF\uB97C \uD3B8\uC9D1\uAE30\uC5D0 \uB85C\uB4DC \uC911..."),t.initializeNewDocument();let n=yield t.pdfBlob.arrayBuffer(),i=yield this.pdfjsLibService.getDocument({data:n});for(let d=1;d<=i.numPages;d++){let g=yield i.getPage(d),m=g.getViewport({scale:1}),h=yield g.getOperatorList(),f=[];for(let S=0;S<h.fnArray.length;S++){let D=h.fnArray[S];if(D===85||D===86){let x=null,P=[];for(let O=S-1;O>=0&&O>=S-20;O--){let k=h.fnArray[O],F=h.argsArray[O];if((k===12||k===74||k===75)&&P.unshift({fn:k,args:F}),k===11)break}if(P.length>0){let O=(F,j)=>[F[0]*j[0]+F[2]*j[1],F[1]*j[0]+F[3]*j[1],F[0]*j[2]+F[2]*j[3],F[1]*j[2]+F[3]*j[3],F[0]*j[4]+F[2]*j[5]+F[4],F[1]*j[4]+F[3]*j[5]+F[5]],k=P[0].args;for(let F=1;F<P.length;F++)k=O(k,P[F].args);x=k}f.push({name:h.argsArray[S][0],transform:x,index:S})}}let C=document.createElement("canvas");C.width=m.width,C.height=m.height;let _=C.getContext("2d");if(!_)continue;yield g.render({canvas:C,canvasContext:_,viewport:m}).promise;let y={id:`page-${d}-${Date.now()}`,pageNumber:d,width:m.width/2,height:m.height/2,elements:[]};if(f.length>0)for(let S of f){if(!S.transform)continue;let[D,,,x,P,O]=S.transform.map(Math.abs),k=m.height/2,F=k-O-x,j=(k-O-x)*2,V=document.createElement("canvas");V.width=D*2,V.height=x*2;let A=V.getContext("2d");A&&(A.drawImage(C,P*2,j,D*2,x*2,0,0,D*2,x*2),y.elements.push({id:`image-${d}-${S.index}-${Date.now()}`,type:"image",x:P,y:F,width:D,height:x,src:V.toDataURL("image/png"),coordinateSystem:"svg"}))}else y.elements.push({id:`image-${d}-${Date.now()}`,type:"image",x:0,y:0,width:m.width/2,height:m.height/2,src:C.toDataURL("image/png"),coordinateSystem:"svg"});t.pdfPages.push(y)}let a=0;return t.cdr.detectChanges(),this.snackbar.showSuccess(`\u2705 \uC774\uBBF8\uC9C0 PDF \uB85C\uB4DC \uC644\uB8CC! (${i.numPages} \uD398\uC774\uC9C0)`),{success:!0,pdfPages:t.pdfPages,currentPageIndex:a}}catch(e){return console.error("\u274C \uC774\uBBF8\uC9C0 PDF \uB85C\uB4DC \uC2E4\uD328:",e),this.snackbar.showError("\u274C \uC774\uBBF8\uC9C0 PDF \uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4."),{success:!1}}})}static \u0275fac=function(e){return new(e||o)(Ie($e))};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Jn=class o{debugLogs=[];constructor(){}integrateVectorGraphicsIntoPages(t,e,n){return E(this,null,function*(){let i=e?.pageDetails||e?.pages;if(!e||!i||i.length===0){console.warn("\u26A0\uFE0F \uD1B5\uD569\uD560 \uBCA1\uD130 \uADF8\uB798\uD53D \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}n("VECTOR_INTEGRATION","\uBCA1\uD130 \uADF8\uB798\uD53D \uD1B5\uD569 \uC2DC\uC791",{totalPages:t.length,vectorPages:i.length});for(let a=0;a<t.length;a++){let d=t[a],g=a+1;if(a<i.length){let m=i[a],h=this.convertVectorOperationsToElements(m,g,n);h.length>0?(d.elements.push(...h),n("VECTOR_ELEMENTS_ADDED",`\uD398\uC774\uC9C0 ${g}\uC5D0 \uBCA1\uD130 \uC694\uC18C \uCD94\uAC00`,{pageNumber:g,elementCount:h.length,totalElements:d.elements.length})):console.warn(`\u26A0\uFE0F \uD398\uC774\uC9C0 ${g}\uC5D0 \uC0DD\uC131\uB41C \uBCA1\uD130 \uC694\uC18C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.`)}}})}convertVectorOperationsToElements(t,e,n){let i=[];if(t.svgContent||t.fullPageSvg){let a=t.svgContent||t.fullPageSvg,d=t.dimensions?.width||595,g=t.dimensions?.height||842,m={id:`pdf-svg-${e}`,type:"svg",x:0,y:0,width:d,height:g,svgContent:a,rotation:0,opacity:1,metadata:{isVectorGraphic:!0,source:"pdf-svg-content",pageNumber:e}};i.push(m),n("VECTOR_SVG_ELEMENT",`\uD398\uC774\uC9C0 ${e} SVG \uC694\uC18C \uC0DD\uC131`,{pageNumber:e,svgLength:a.length})}else console.warn(`\u26A0\uFE0F \uD398\uC774\uC9C0 ${e}\uC5D0 SVG \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.`);return i}convertVectorOperationsToElements_DEPRECATED(t,e,n){let i=[],a="",d=0,g=0,m=!1,h=0,f=[],C=null,_=null;return(t.operations||[]).forEach((y,S)=>{let D=y.args||[],x=y.coordinates;switch(n("VECTOR_OPERATION",`Operation ${S}: ${y.type}`,{type:y.type,args:D,coordinates:x,isVectorGraphic:y.isVectorGraphic}),y.type){case"moveTo":m&&a&&f.length>0&&(this.createVectorElementFromPath(i,a,f,e,h++),f.length=0),x&&x.x!==void 0&&x.y!==void 0?(d=x.x,g=x.y,a=`M ${d} ${g}`,f.push({x:d,y:g}),m=!0):D.length>=2&&typeof D[0]=="number"&&(d=Number(D[0]),g=Number(D[1]),a=`M ${d} ${g}`,f.push({x:d,y:g}),m=!0);break;case"lineTo":if(m){let P,O;x&&x.x!==void 0&&x.y!==void 0?(P=x.x,O=x.y):D.length>=2&&typeof D[0]=="number"&&(P=Number(D[0]),O=Number(D[1])),P!==void 0&&O!==void 0&&(a+=` L ${P} ${O}`,f.push({x:P,y:O}),d=P,g=O)}break;case"curve":case"bezierCurveTo":if(m&&D.length>=6){let P=Number(D[0]),O=Number(D[1]),k=Number(D[2]),F=Number(D[3]),j=Number(D[4]),V=Number(D[5]);a+=` C ${P} ${O} ${k} ${F} ${j} ${V}`,f.push({x:P,y:O},{x:k,y:F},{x:j,y:V}),d=j,g=V}break;case"closePath":m&&(a+=" Z",f.length>0&&(this.createVectorElementFromPath(i,a,f,e,h++),f.length=0),m=!1,a="");break;case"rectangle":if(D.length>=4){let P=this.createRectangleFromVectorArgs(D,e,h++);P&&i.push(P)}break;case"circle":if(D.length>=3){let P=this.createCircleFromVectorArgs(D,e,h++);P&&i.push(P)}break;case"stroke":case"fill":m&&a&&f.length>0&&(this.createVectorElementFromPath(i,a,f,e,h++),f.length=0,m=!1,a="");break}}),m&&a&&f.length>0&&this.createVectorElementFromPath(i,a,f,e,h++),i}createVectorElementFromPath(t,e,n,i,a){if(n.length===0)return;let d=this.calculateBoundingBoxFromPoints(n),g={id:`vector-path-${i}-${a}`,type:"vector-path",x:d.x,y:d.y,width:d.width,height:d.height,pathData:e,strokeColor:"#2c3e50",strokeWidth:2,fillColor:"none",rotation:0,opacity:1,metadata:{isVectorGraphic:!0,source:"pdf-vector-operations",pageNumber:i}};t.push(g)}calculateBoundingBoxFromPoints(t){if(t.length===0)return{x:0,y:0,width:100,height:100};let e=t.map(f=>f.x),n=t.map(f=>f.y),i=Math.min(...e),a=Math.max(...e),d=Math.min(...n),g=Math.max(...n),m=a-i,h=g-d;return{x:i,y:d,width:m>0?m:100,height:h>0?h:100}}createRectangleFromVectorArgs(t,e,n){if(t.length<4)return null;let i=Number(t[0]),a=Number(t[1]),d=Number(t[2]),g=Number(t[3]);return{id:`vector-rect-${e}-${n}`,type:"shape",shapeType:"rectangle",x:i,y:a,width:Math.abs(d),height:Math.abs(g),fillColor:"#e3f2fd",strokeColor:"#2196f3",strokeWidth:2,rotation:0,opacity:.8,metadata:{isVectorGraphic:!0,source:"pdf-rectangle",pageNumber:e}}}createCircleFromVectorArgs(t,e,n){if(t.length<3)return null;let i=Number(t[0]),a=Number(t[1]),d=Number(t[2]);return{id:`vector-circle-${e}-${n}`,type:"shape",shapeType:"circle",x:i-d,y:a-d,width:d*2,height:d*2,fillColor:"#fff3e0",strokeColor:"#ff9800",strokeWidth:2,rotation:0,opacity:.8,metadata:{isVectorGraphic:!0,source:"pdf-circle",pageNumber:e}}}createPagesFromOriginalPdfSvg(t,e,n,i,a,d){return E(this,null,function*(){d("VectorService","\u{1F3A8} createPagesFromOriginalPdfSvg \uC2DC\uC791"),d("VectorService",`vectorData \uC874\uC7AC: ${!!t}`),d("VectorService",`pdfPages \uCD08\uAE30 \uAE38\uC774: ${n.length}`);let g=t?.pageDetails||t?.pages;if(d("VectorService",`pages \uCD94\uCD9C \uACB0\uACFC: ${!!g}, \uAE38\uC774: ${g?.length||0}`),!t||!g||g.length===0){console.warn("\u26A0\uFE0F \uBCA1\uD130 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),d("VectorService","\u26A0\uFE0F \uBCA1\uD130 \uB370\uC774\uD130 \uC5C6\uC74C - \uC870\uAE30 \uC885\uB8CC");return}d("CREATE_PAGES_SVG","\uC6D0\uBCF8 PDF SVG \uD398\uC774\uC9C0 \uC0DD\uC131",{totalPages:g.length});for(let f=0;f<g.length;f++){let C=g[f],_=f+1;d("VectorService",`\u{1F4C4} \uD398\uC774\uC9C0 ${_} \uCC98\uB9AC \uC2DC\uC791`),d("VectorService",`\uD398\uC774\uC9C0 ${_} \uB370\uC774\uD130 - originalSvg: ${!!C.originalSvg}, operations: ${C.operations?.length||0}\uAC1C`),d("VectorService",`\uD398\uC774\uC9C0 ${_} \uD0A4: ${Object.keys(C).join(", ")}`);let y={id:`page-${_}`,pageNumber:_,width:i,height:a,elements:[],thumbnail:void 0};if(C.svgContent&&C.svgContent.length>100){d("VectorService",`\uD398\uC774\uC9C0 ${_}: svgContent \uACBD\uB85C \uC120\uD0DD (${C.svgContent.length} bytes)`);let S={id:`pdf-svg-${_}`,type:"svg",x:0,y:0,width:i,height:a,svgContent:C.svgContent,rotation:0,opacity:1,metadata:{isVectorGraphic:!0,source:"pdf-svg-content",pageNumber:_}};y.elements.push(S),d("VectorService",`\u2705 \uD398\uC774\uC9C0 ${_}: svgContent \uCD94\uAC00 \uC644\uB8CC`)}else if(C.fullPageSvg&&C.fullPageSvg.length>100){d("VectorService",`\uD398\uC774\uC9C0 ${_}: fullPageSvg \uACBD\uB85C \uC120\uD0DD (${C.fullPageSvg.length} bytes)`);let S={id:`pdf-svg-${_}`,type:"svg",x:0,y:0,width:i,height:a,svgContent:C.fullPageSvg,rotation:0,opacity:1,metadata:{isVectorGraphic:!0,source:"pdf-fullpage-svg",pageNumber:_}};y.elements.push(S),d("VectorService",`\u2705 \uD398\uC774\uC9C0 ${_}: fullPageSvg \uCD94\uAC00 \uC644\uB8CC`)}else if(C.originalSvg){d("VectorService",`\uD398\uC774\uC9C0 ${_}: originalSvg \uACBD\uB85C \uC120\uD0DD`);let S={id:`pdf-svg-${_}`,type:"svg",x:0,y:0,width:i,height:a,svgContent:C.originalSvg,rotation:0,opacity:1,metadata:{isVectorGraphic:!0,source:"pdf-original-svg",pageNumber:_}};y.elements.push(S),d("VectorService",`\u2705 \uD398\uC774\uC9C0 ${_}: originalSvg \uCD94\uAC00 \uC644\uB8CC`)}else if(C.svgContent&&C.svgContent.length>100){d("VectorService",`\uD398\uC774\uC9C0 ${_}: svgContent \uACBD\uB85C \uC120\uD0DD (${C.svgContent.length} bytes)`);let S={id:`pdf-svg-${_}`,type:"svg",x:0,y:0,width:i,height:a,svgContent:C.svgContent,rotation:0,opacity:1,metadata:{isVectorGraphic:!0,source:"pdf-svg-content",pageNumber:_}};y.elements.push(S),d("VectorService",`\u2705 \uD398\uC774\uC9C0 ${_}: svgContent \uCD94\uAC00 \uC644\uB8CC`)}else console.warn(`\u26A0\uFE0F \uD398\uC774\uC9C0 ${_}: SVG \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4 (svgContent, fullPageSvg, originalSvg \uBAA8\uB450 \uC5C6\uC74C)`),d("VectorService",`\u26A0\uFE0F \uD398\uC774\uC9C0 ${_}: SVG \uCF58\uD150\uCE20 \uC5C6\uC74C`);n.push(y),d("VectorService",`\uD398\uC774\uC9C0 ${_}: pdfPages\uC5D0 \uCD94\uAC00, \uC694\uC18C=${y.elements.length}\uAC1C, \uD604\uC7AC \uCD1D ${n.length}\uD398\uC774\uC9C0`)}let m=n.reduce((f,C)=>f+C.elements.length,0),h=n.reduce((f,C)=>f+C.elements.filter(_=>_.type==="svg").length,0);d("VectorService",`\u2705 \uC804\uCCB4 \uC644\uB8CC: ${n.length}\uAC1C \uD398\uC774\uC9C0, ${m}\uAC1C \uC694\uC18C, svg=${h}\uAC1C`)})}createPagesFromVectorSvg(t,e,n,i,a,d,g){return E(this,null,function*(){let m=t?.pageDetails||t?.pages;if(!t||!m||m.length===0){console.warn("\u26A0\uFE0F \uBCA1\uD130 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}for(let h=0;h<m.length;h++){let f=m[h],C=h+1,_={id:`page-${C}`,pageNumber:C,width:i,height:a,elements:[],thumbnail:void 0},y=d(f,C);if(y&&y.length>100){let S={id:`vector-svg-${C}`,type:"svg",x:0,y:0,width:i,height:a,svgContent:y,rotation:0,opacity:1,metadata:{isVectorGraphic:!0,source:"generated-svg",pageNumber:C}};_.elements.push(S)}n.push(_)}})}createRectangleElementsFromOperations(t,e,n,i,a){let d=[],g=null,m=null,h=[];for(let f=0;f<t.length;f++){let C=t[f];if(C.fnCode===31){h.push({fill:g,stroke:m});continue}if(C.fnCode===32){let _=h.pop();_&&(g=_.fill,m=_.stroke);continue}if(C.fnCode===59&&C.args){let _=C.args,y=_[0]||_.r||0,S=_[1]||_.g||0,D=_[2]||_.b||0,x=y<=1?Math.round(y*255):Math.round(y),P=S<=1?Math.round(S*255):Math.round(S),O=D<=1?Math.round(D*255):Math.round(D);g=`rgb(${x}, ${P}, ${O})`}if(C.fnCode===60&&C.args){let _=C.args,y=_[0]||_.r||0,S=_[1]||_.g||0,D=_[2]||_.b||0,x=y<=1?Math.round(y*255):Math.round(y),P=S<=1?Math.round(S*255):Math.round(S),O=D<=1?Math.round(D*255):Math.round(D);m=`rgb(${x}, ${P}, ${O})`}if(C.fnCode===91&&C.args&&Array.isArray(C.args[0])&&C.args[0].includes(19)){let y=C.args[1];if(y&&y.length>=4){let S=y[0],D=y[1],x=y[2],P=y[3],O=i-D-P,k=`<svg xmlns="http://www.w3.org/2000/svg" width="${n}" height="${i}" viewBox="0 0 ${n} ${i}">
  <rect x="${S}" y="${O}" width="${x}" height="${P}" fill="${g||"transparent"}" stroke="${m||"none"}" stroke-width="${m?1:0}"/>
</svg>`,F={id:`rect-${e}-${d.length+1}`,type:"svg",x:0,y:0,width:n,height:i,svgContent:k,rotation:0,opacity:1,metadata:{isVectorGraphic:!0,source:"pdf-rectangle-operation",pageNumber:e,rectangleIndex:d.length+1,fillColor:g,strokeColor:m,coordinates:{x:S,y:O,width:x,height:P}}};d.push(F),a("VectorService",`Rectangle \uC0DD\uC131: x=${S}, y=${D}->${O}, w=${x}, h=${P}, fill=${g}`)}}}return d}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Zn=class o{constructor(){}initializeNewDocument(t,e){let n=[];return e&&e(),n}createPagesFromTextStream(t,e,n){if(!t||!t.pages||t.pages.length===0)return console.warn("\u26A0\uFE0F \uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),e;let i=[];return t.pages.forEach((a,d)=>{n&&n(`\uD398\uC774\uC9C0 ${d+1} \uC0DD\uC131 \uC911...`);let g={id:`page-${Date.now()}-${d}`,pageNumber:d+1,width:a.width,height:a.height,elements:[]},m=a.sentences||a.textItems;m&&m.forEach((h,f)=>{if(!h.text||h.text.trim().length===0)return;let C=h.text.trim(),_=h.font?.size>0?h.font.size:12,y=C.length,S=_*.7,D=y*S,x=h.position?.width>0?h.position.width:200,O=Math.max(x,D)*1.15,k=Math.max(100,Math.min(O,600)),F=h.position?.height>0?h.position.height:20,j=Math.ceil(D/k),V=Math.max(F,_*j*1.4),A={id:`text-${Date.now()}-${d}-${f}`,type:"text",x:h.position?.x||0,y:h.position?.y||0,width:k,height:V,text:C,fontSize:_,fontFamily:h.font?.name||"Arial",color:h.color||h.style?.color||"#000000"};g.elements.push(A)}),i.push(g)}),i}createPagesFromBasicStructure(t,e,n){if(!t||!t.pages||t.pages.length===0)return console.warn("\u26A0\uFE0F PDF \uAD6C\uC870 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),e;let i=[];return t.pages.forEach((a,d)=>{n&&n(`\uD398\uC774\uC9C0 ${d+1} \uC0DD\uC131 \uC911...`);let g={id:`page-${Date.now()}-${d}`,pageNumber:a.pageNumber||d+1,width:a.width||595,height:a.height||842,elements:[]};a.elements&&a.elements.forEach(m=>{g.elements.push(Y({},m))}),i.push(g)}),i}createPagesFromStructure(t,e,n,i){return t?this.createPagesFromTextStream(t,n,i):e?this.createPagesFromBasicStructure(e,n,i):(console.warn("\u26A0\uFE0F \uC0AC\uC6A9 \uAC00\uB2A5\uD55C PDF \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),n)}overlayTextOnPages(t,e,n,i){return E(this,null,function*(){if(!t||!t.pages)return;let a=-.9,d=-.1;for(let g=0;g<Math.min(e.length,t.pages.length);g++){if(n&&n.has(g))continue;let m=e[g],h=t.pages[g];i&&i(`\uD398\uC774\uC9C0 ${g+1} \uD14D\uC2A4\uD2B8 \uC624\uBC84\uB808\uC774 \uC911...`);let f=0,C=h.sentences&&h.sentences.length>0?h.sentences:h.textItems;C&&C.forEach((_,y)=>{if(!_.text||_.text.trim().length===0)return;let S=_.text.trim(),D=_.font?.size>0?_.font.size:12,x;if(_.itemCount&&_.itemCount>1){let X=Math.max(10,D*.5);x=(_.position?.width||200)+X}else{let Q=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(S)?D*.75:D*.6,Z=S.length*Q,B=Math.max(15,D*.8);x=Z+B}let P=Math.max(50,D*3);x=Math.max(P,Math.min(x,900));let O=_.position?.height>0?_.position.height:20,k=Math.max(O,D*1.4),F=D*d,j=D*a,V=(_.position?.x||0)+F,A=(_.position?.y||0)+j,G={id:`text-overlay-${Date.now()}-${g}-${y}`,type:"text",text:S,x:V,y:A,width:x,height:k,fontSize:D,fontFamily:_.font?.name||"Arial",color:_.color||_.style?.color||"#000000"};m.elements.push(G),f++,f<=3})}})}overlayImagesOnPages(t,e,n){return E(this,null,function*(){if(!t||t.size===0){console.warn("\u26A0\uFE0F \uC774\uBBF8\uC9C0 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}t.forEach((i,a)=>{n&&n(`\uD398\uC774\uC9C0 ${a} \uC774\uBBF8\uC9C0 \uC624\uBC84\uB808\uC774 \uC911...`);let d=a-1;if(d>=0&&d<e.length){let g=e[d];i.forEach(m=>{let h={id:`image-overlay-${Date.now()}-${Math.random()}`,type:"image",src:m.src,x:m.x,y:m.y,width:m.width,height:m.height};g.elements.push(h)})}})})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Mi={zoom:100,currentPage:1,height:"100%",showToolbar:!1,showPagingButtons:!1,showZoomButtons:!1,showSidebarButton:!1,showFindButton:!1,showPresentationModeButton:!1,showOpenFileButton:!1,showPrintButton:!1,showDownloadButton:!1,showSecondaryToolbarButton:!1,showRotateButton:!1,showSpreadButton:!1,showPropertiesButton:!1,showHandToolButton:!1,showDrawEditor:!1,showStampEditor:!1,showHighlightEditor:!1,editorHighlightParamsToolbar:!1,textLayer:!0,handTool:!1,enableDragAndDrop:!1,showBorders:!1,showUnverifiedSignatures:!1,sidebarVisible:!1,deviceType:"desktop"},Oi={zoom:"auto",currentPage:1,height:"100vh",showToolbar:!1,showPagingButtons:!0,showZoomButtons:!0,showSidebarButton:!1,showFindButton:!1,showPresentationModeButton:!1,showOpenFileButton:!1,showPrintButton:!1,showDownloadButton:!1,showSecondaryToolbarButton:!1,showRotateButton:!1,showSpreadButton:!1,showPropertiesButton:!1,showHandToolButton:!1,textLayer:!0,deviceType:"mobile"};function Qn(o){return o==="mobile"||o==="tablet"?Oi:Mi}var at=class o{currentPageSubject=new we(1);totalPagesSubject=new we(0);zoomLevelSubject=new we(100);isLoadingSubject=new we(!1);loadErrorSubject=new we(null);currentPage$=this.currentPageSubject.asObservable();totalPages$=this.totalPagesSubject.asObservable();zoomLevel$=this.zoomLevelSubject.asObservable();isLoading$=this.isLoadingSubject.asObservable();loadError$=this.loadErrorSubject.asObservable();constructor(){}get currentPage(){return this.currentPageSubject.value}get totalPages(){return this.totalPagesSubject.value}get zoomLevel(){return this.zoomLevelSubject.value}get isLoading(){return this.isLoadingSubject.value}startLoading(){this.isLoadingSubject.next(!0),this.loadErrorSubject.next(null)}handlePdfLoaded(t){this.isLoadingSubject.next(!1),this.totalPagesSubject.next(t.pagesCount),this.loadErrorSubject.next(null)}handlePdfLoadingFailed(t){this.isLoadingSubject.next(!1);let e=t?.message||"PDF \uB85C\uB4DC \uC2E4\uD328";this.loadErrorSubject.next(e),console.warn("\u274C PDF \uB85C\uB4DC \uC2E4\uD328:",t)}handlePageChange(t){let e=typeof t=="number"?t:parseInt(String(t),10);!isNaN(e)&&e>=1&&e<=this.totalPages&&this.currentPageSubject.next(e)}handleZoomChange(t){let e=typeof t=="string"?t==="auto"?"auto":parseInt(t):t;this.zoomLevelSubject.next(e)}goToPage(t){t>=1&&t<=this.totalPages?this.currentPageSubject.next(t):console.warn("\u26A0\uFE0F \uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uD398\uC774\uC9C0:",t)}nextPage(){let t=this.currentPage;t<this.totalPages&&this.goToPage(t+1)}previousPage(){let t=this.currentPage;t>1&&this.goToPage(t-1)}goToFirstPage(){this.goToPage(1)}goToLastPage(){this.goToPage(this.totalPages)}zoomIn(){let t=this.zoomLevel;if(typeof t=="number"){let e=Math.max(1,Math.round(t*.1)),n=Math.min(t+e,2e3);this.zoomLevelSubject.next(n)}else this.zoomLevelSubject.next(110)}zoomOut(){let t=this.zoomLevel;if(typeof t=="number"){let e=Math.max(1,Math.round(t*.1)),n=Math.max(t-e,1);this.zoomLevelSubject.next(n)}else this.zoomLevelSubject.next(90)}resetZoom(){this.zoomLevelSubject.next(100)}setAutoZoom(){this.zoomLevelSubject.next("auto")}setZoomLevel(t){this.zoomLevelSubject.next(t)}reset(){this.currentPageSubject.next(1),this.totalPagesSubject.next(0),this.zoomLevelSubject.next(100),this.isLoadingSubject.next(!1),this.loadErrorSubject.next(null)}isValidPage(t){return t>=1&&t<=this.totalPages}getPageInfo(){return`${this.currentPage} / ${this.totalPages}`}getZoomInfo(){let t=this.zoomLevel;return t==="auto"?"\uC790\uB3D9":`${t}%`}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};function Di(o,t){if(o&1){let e=L();r(0,"ngx-extended-pdf-viewer",3),w("pdfLoaded",function(i){b(e);let a=p();return v(a.onPdfLoaded(i))})("pdfLoadingFailed",function(i){b(e);let a=p();return v(a.onPdfLoadingFailed(i))})("pageChange",function(i){b(e);let a=p();return v(a.onPageChange(i))})("zoomChange",function(i){b(e);let a=p();return v(a.onZoomChange(i))})("pageRendered",function(i){b(e);let a=p();return v(a.onPageRendered(i))})("textSelectionChange",function(i){b(e);let a=p();return v(a.onTextSelectionChange(i))})("updateFindMatchesCount",function(i){b(e);let a=p();return v(a.onUpdateFindMatchesCount(i))})("updateFindState",function(i){b(e);let a=p();return v(a.onUpdateFindState(i))}),s()}if(o&2){let e=p();u("src",e.pdfSrc)("page",e.effectiveConfig.currentPage||1)("zoom",e.effectiveConfig.zoom||100)("minZoom",e.effectiveConfig.minZoom||.01)("maxZoom",e.effectiveConfig.maxZoom||20)("mobileFriendlyZoom",e.isMobile?"page-width":"")("height",e.effectiveConfig.height||"100%")("showToolbar",e.effectiveConfig.showToolbar||!1)("showSidebarButton",e.effectiveConfig.showSidebarButton||!1)("sidebarVisible",e.effectiveConfig.sidebarVisible||!1)("showFindButton",e.effectiveConfig.showFindButton||!1)("showPagingButtons",e.effectiveConfig.showPagingButtons||!1)("showZoomButtons",e.effectiveConfig.showZoomButtons||!1)("showPresentationModeButton",e.effectiveConfig.showPresentationModeButton||!1)("showOpenFileButton",e.effectiveConfig.showOpenFileButton||!1)("showPrintButton",e.effectiveConfig.showPrintButton||!1)("showDownloadButton",e.effectiveConfig.showDownloadButton||!1)("showSecondaryToolbarButton",e.effectiveConfig.showSecondaryToolbarButton||!1)("showRotateButton",e.effectiveConfig.showRotateButton||!1)("showSpreadButton",e.effectiveConfig.showSpreadButton||!1)("showPropertiesButton",e.effectiveConfig.showPropertiesButton||!1)("showHandToolButton",e.effectiveConfig.showHandToolButton||!1)("handTool",e.effectiveConfig.handTool||!1)("textLayer",e.effectiveConfig.textLayer!==!1)("showBorders",e.effectiveConfig.showBorders||!1)("enableDragAndDrop",e.effectiveConfig.enableDragAndDrop||!1)("showUnverifiedSignatures",e.effectiveConfig.showUnverifiedSignatures||!1)("showDrawEditor",e.effectiveConfig.showDrawEditor||!1)("showStampEditor",e.effectiveConfig.showStampEditor||!1)("showHighlightEditor",e.effectiveConfig.showHighlightEditor||!1)("scrollMode",e.effectiveConfig.scrollMode??0)("pageViewMode",e.effectiveConfig.pageViewMode||"multiple")}}function Si(o,t){o&1&&(r(0,"div",4)(1,"div",5),R(2,"i",6),r(3,"p"),l(4,"PDF \uD30C\uC77C\uC744 \uC120\uD0DD\uD558\uC138\uC694"),s()()())}var wt=class o{constructor(t,e,n,i){this.pdfViewerHelper=t;this.cdr=e;this.elementRef=n;this.ngZone=i}pdfSrc=null;config={};isMobile;useHelperService=!0;showFloatingZoom=!0;pdfLoaded=new $;pdfLoadingFailed=new $;pageChange=new $;zoomChange=new $;pageRendered=new $;textSelectionChange=new $;updateFindMatchesCount=new $;updateFindState=new $;effectiveConfig={};totalPages=0;destroy$=new Ze;wheelHandler=null;ngOnInit(){this.initializeViewer()}ngOnChanges(t){(t.config||t.pdfSrc)&&(this.updateEffectiveConfig(),this.cdr.detectChanges())}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.wheelHandler=t=>{(t.ctrlKey||t.metaKey)&&(t.preventDefault(),t.stopPropagation(),this.ngZone.run(()=>{t.deltaY<0?this.zoomIn():t.deltaY>0&&this.zoomOut()}))},this.elementRef.nativeElement.addEventListener("wheel",this.wheelHandler,{capture:!0,passive:!1})})}ngOnDestroy(){this.wheelHandler&&(this.elementRef.nativeElement.removeEventListener("wheel",this.wheelHandler,{capture:!0}),this.wheelHandler=null),this.destroy$.next(),this.destroy$.complete()}initializeViewer(){this.isMobile===void 0&&(this.isMobile=!1),this.updateEffectiveConfig(),this.cdr.detectChanges(),this.useHelperService&&(this.pdfViewerHelper.currentPage$.pipe(ln(this.destroy$)).subscribe(t=>{this.effectiveConfig.currentPage!==t&&(this.effectiveConfig.currentPage=t,this.cdr.detectChanges())}),this.pdfViewerHelper.zoomLevel$.pipe(ln(this.destroy$)).subscribe(t=>{this.effectiveConfig.zoom!==t&&(this.effectiveConfig.zoom=t,this.cdr.detectChanges())}))}updateEffectiveConfig(){let t=this.isMobile?"mobile":"desktop",e=Qn(t);this.effectiveConfig=pe(Y(Y({},e),this.config),{pdfSrc:this.pdfSrc,deviceType:t})}onPdfLoaded(t){t&&t.pagesCount&&(this.totalPages=t.pagesCount,this.cdr.detectChanges()),this.useHelperService&&this.pdfViewerHelper.handlePdfLoaded(t),this.pdfLoaded.emit(t)}onPdfLoadingFailed(t){console.warn("\u274C SharedPdfViewer - PDF \uB85C\uB4DC \uC2E4\uD328:",t),this.useHelperService&&this.pdfViewerHelper.handlePdfLoadingFailed(t),this.pdfLoadingFailed.emit(t)}onPageChange(t){this.useHelperService&&this.pdfViewerHelper.handlePageChange(t),this.pageChange.emit(t),this.cdr.detectChanges()}onZoomChange(t){let e=typeof t=="string"?parseInt(t):t;this.useHelperService&&this.pdfViewerHelper.handleZoomChange(e),this.zoomChange.emit(e),this.cdr.detectChanges()}onTextSelectionChange(t){let e=t?.text||t;e&&this.textSelectionChange.emit(e)}onPageRendered(t){this.pageRendered.emit({pageNumber:t?.pageNumber||t?.source?.pageNumber,source:t?.source||t})}onUpdateFindMatchesCount(t){this.updateFindMatchesCount.emit(t)}onUpdateFindState(t){this.updateFindState.emit(t)}zoomIn(){let t=typeof this.effectiveConfig.zoom=="string"?parseInt(this.effectiveConfig.zoom):this.effectiveConfig.zoom||100,e=Math.max(1,Math.round(t*.1)),n=Math.min(t+e,2e3);this.effectiveConfig.zoom=n,this.useHelperService&&this.pdfViewerHelper.handleZoomChange(n),this.zoomChange.emit(n),this.cdr.detectChanges()}zoomOut(){let t=typeof this.effectiveConfig.zoom=="string"?parseInt(this.effectiveConfig.zoom):this.effectiveConfig.zoom||100,e=Math.max(1,Math.round(t*.1)),n=Math.max(t-e,1);this.effectiveConfig.zoom=n,this.useHelperService&&this.pdfViewerHelper.handleZoomChange(n),this.zoomChange.emit(n),this.cdr.detectChanges()}static \u0275fac=function(e){return new(e||o)(ge(at),ge(He),ge(_n),ge(Pn))};static \u0275cmp=ae({type:o,selectors:[["shared-pdf-viewer"]],inputs:{pdfSrc:"pdfSrc",config:"config",isMobile:"isMobile",useHelperService:"useHelperService",showFloatingZoom:"showFloatingZoom"},outputs:{pdfLoaded:"pdfLoaded",pdfLoadingFailed:"pdfLoadingFailed",pageChange:"pageChange",zoomChange:"zoomChange",pageRendered:"pageRendered",textSelectionChange:"textSelectionChange",updateFindMatchesCount:"updateFindMatchesCount",updateFindState:"updateFindState"},features:[Ge],decls:3,vars:6,consts:[[1,"shared-pdf-viewer-wrapper"],["style","width: 100%; display: block;",3,"src","page","zoom","minZoom","maxZoom","mobileFriendlyZoom","height","showToolbar","showSidebarButton","sidebarVisible","showFindButton","showPagingButtons","showZoomButtons","showPresentationModeButton","showOpenFileButton","showPrintButton","showDownloadButton","showSecondaryToolbarButton","showRotateButton","showSpreadButton","showPropertiesButton","showHandToolButton","handTool","textLayer","showBorders","enableDragAndDrop","showUnverifiedSignatures","showDrawEditor","showStampEditor","showHighlightEditor","scrollMode","pageViewMode","pdfLoaded","pdfLoadingFailed","pageChange","zoomChange","pageRendered","textSelectionChange","updateFindMatchesCount","updateFindState",4,"ngIf"],["class","no-pdf-placeholder",4,"ngIf"],[2,"width","100%","display","block",3,"pdfLoaded","pdfLoadingFailed","pageChange","zoomChange","pageRendered","textSelectionChange","updateFindMatchesCount","updateFindState","src","page","zoom","minZoom","maxZoom","mobileFriendlyZoom","height","showToolbar","showSidebarButton","sidebarVisible","showFindButton","showPagingButtons","showZoomButtons","showPresentationModeButton","showOpenFileButton","showPrintButton","showDownloadButton","showSecondaryToolbarButton","showRotateButton","showSpreadButton","showPropertiesButton","showHandToolButton","handTool","textLayer","showBorders","enableDragAndDrop","showUnverifiedSignatures","showDrawEditor","showStampEditor","showHighlightEditor","scrollMode","pageViewMode"],[1,"no-pdf-placeholder"],[1,"placeholder-content"],[1,"fas","fa-file-pdf"]],template:function(e,n){e&1&&(r(0,"div",0),I(1,Di,1,32,"ngx-extended-pdf-viewer",1)(2,Si,5,0,"div",2),s()),e&2&&(q("mobile",n.isMobile)("desktop",!n.isMobile),c(),u("ngIf",n.pdfSrc),c(),u("ngIf",!n.pdfSrc))},dependencies:[ne,Pe,Fn,Tn],styles:['@charset "UTF-8";.shared-pdf-viewer-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:auto;-webkit-overflow-scrolling:touch}.shared-pdf-viewer-wrapper.mobile[_ngcontent-%COMP%]{touch-action:pan-x pan-y pinch-zoom}.shared-pdf-viewer-wrapper.mobile[_ngcontent-%COMP%]     ngx-extended-pdf-viewer{width:100%!important;max-width:none!important}.shared-pdf-viewer-wrapper.mobile[_ngcontent-%COMP%]     #viewerContainer{display:flex!important;align-items:flex-start!important;justify-content:flex-start!important;overflow:auto!important}.shared-pdf-viewer-wrapper.mobile[_ngcontent-%COMP%]     #viewer{margin:auto}.shared-pdf-viewer-wrapper.mobile[_ngcontent-%COMP%]     .ng2-pdf-viewer-container{overflow:auto!important;width:100%!important}.shared-pdf-viewer-wrapper.mobile[_ngcontent-%COMP%]     canvas{max-width:none!important;height:auto!important}.no-pdf-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:#f5f5f5}.placeholder-content[_ngcontent-%COMP%]{text-align:center;color:#999}.placeholder-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px;opacity:.5}.placeholder-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:0}@media (max-width: 768px){.placeholder-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px}.placeholder-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}.floating-zoom-controls[_ngcontent-%COMP%]{position:fixed;right:12px;bottom:12px;display:flex;flex-direction:column;gap:6px;z-index:1000}.zoom-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:#fff;border:1px solid #e0e0e0;box-shadow:0 2px 6px #0000001a;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#333;transition:all .2s ease}.zoom-btn[_ngcontent-%COMP%]:hover{box-shadow:0 3px 10px #00000026;transform:scale(1.05);border-color:#007acc;background:#f8f9fa}.zoom-btn[_ngcontent-%COMP%]:active{transform:scale(.95);background:#e9ecef}.zoom-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.zoom-level-display[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:12px;padding:4px 8px;font-size:11px;font-weight:600;color:#333;text-align:center;box-shadow:0 2px 6px #0000001a;min-width:32px;-webkit-user-select:none;user-select:none}.page-info-display[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:12px;padding:4px 8px;font-size:11px;font-weight:600;color:#333;text-align:center;box-shadow:0 2px 6px #0000001a;min-width:32px;-webkit-user-select:none;user-select:none;display:flex;align-items:center;justify-content:center;gap:2px}.current-page[_ngcontent-%COMP%]{color:#007acc}.page-separator[_ngcontent-%COMP%]{color:#999}.total-pages[_ngcontent-%COMP%]{color:#666}'],changeDetection:0})};var ei=class o{shapeSelected=new $;cancel=new $;selectShape(t){this.shapeSelected.emit(t)}onCancel(){this.cancel.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=ae({type:o,selectors:[["app-shared-shape-selection-modal"]],outputs:{shapeSelected:"shapeSelected",cancel:"cancel"},decls:21,vars:0,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"shape-grid"],[1,"shape-item",3,"click"],[1,"shape-preview","rectangle"],[1,"shape-preview","circle"],[1,"shape-preview","line"]],template:function(e,n){e&1&&(N(0,"div",0),fe("click",function(){return n.onCancel()}),N(1,"div",1),fe("click",function(a){return a.stopPropagation()}),N(2,"div",2)(3,"h3"),l(4,"\uB3C4\uD615 \uC120\uD0DD"),W(),N(5,"button",3),fe("click",function(){return n.onCancel()}),l(6,"\xD7"),W()(),N(7,"div",4)(8,"div",5)(9,"button",6),fe("click",function(){return n.selectShape("rectangle")}),Xe(10,"div",7),N(11,"span"),l(12,"\uC0AC\uAC01\uD615"),W()(),N(13,"button",6),fe("click",function(){return n.selectShape("circle")}),Xe(14,"div",8),N(15,"span"),l(16,"\uC6D0"),W()(),N(17,"button",6),fe("click",function(){return n.selectShape("line")}),Xe(18,"div",9),N(19,"span"),l(20,"\uC120"),W()()()()()())},dependencies:[ne],styles:['.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 20px #00000026;width:90%;max-width:500px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#666;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;color:#333}.modal-body[_ngcontent-%COMP%]{padding:24px 20px;overflow-y:auto}.shape-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}.shape-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;padding:20px;background:#fff;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .2s}.shape-item[_ngcontent-%COMP%]:hover{border-color:#4285f4;background-color:#f8f9fa;transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.shape-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.shape-preview[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center;position:relative}.shape-preview.rectangle[_ngcontent-%COMP%]{border:2px solid #4285f4;background-color:#4285f433;border-radius:4px}.shape-preview.circle[_ngcontent-%COMP%]{border:2px solid #4285f4;background-color:#4285f433;border-radius:50%}.shape-preview.line[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background-color:#4285f4;top:50%;left:0}']})};var Dt=class o{createSignatureElement(t,e={}){let{centerOnPage:n=!0,pageWidth:i=595,pageHeight:a=842,x:d,y:g,defaultWidth:m=200,defaultHeight:h=100}=e,f=t.width||m,C=t.height||h,_=d??0,y=g??0;return n&&d===void 0&&g===void 0&&(_=(i-f)/2,y=(a-C)/2),{id:`signature-${Date.now()}`,type:"signature",x:_,y,width:f,height:C,src:t.dataUrl,opacity:1}}canvasToDataUrl(t,e="image/png"){return t.toDataURL(e)}resizeSignature(t,e,n){return new Promise((i,a)=>{let d=new Image;d.onload=()=>{let g=d.width,m=d.height;if(g>e||m>n){let h=Math.min(e/g,n/m);g=g*h,m=m*h}i({dataUrl:t,width:g,height:m})},d.onerror=g=>{a(g)},d.src=t})}initializeCanvas(t,e=500,n=250){t.width=e,t.height=n;let i=t.getContext("2d");if(!i)throw new Error("Canvas context not available");return i.clearRect(0,0,e,n),i.strokeStyle="#000000",i.lineWidth=2,i.lineCap="round",i.lineJoin="round",i}clearCanvas(t){let e=t.getContext("2d");e&&e.clearRect(0,0,t.width,t.height)}isCanvasEmpty(t){let e=t.getContext("2d");if(!e)return!0;let i=e.getImageData(0,0,t.width,t.height).data;for(let a=0;a<i.length;a+=4)if(i[a+3]!==0)return!1;return!0}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ii=["signatureCanvas"],ti=class o{constructor(t){this.signatureService=t}canvasRef;signatureCreated=new $;cancel=new $;ctx=null;isDrawing=!1;lastX=0;lastY=0;ngAfterViewInit(){let t=this.canvasRef.nativeElement;this.ctx=this.signatureService.initializeCanvas(t,500,250)}ngOnDestroy(){}startDrawing(t){this.isDrawing=!0;let e=this.canvasRef.nativeElement.getBoundingClientRect();if(t instanceof MouseEvent)this.lastX=t.clientX-e.left,this.lastY=t.clientY-e.top;else{let n=t.touches[0];this.lastX=n.clientX-e.left,this.lastY=n.clientY-e.top}}draw(t){if(!this.isDrawing||!this.ctx)return;t.preventDefault();let e=this.canvasRef.nativeElement.getBoundingClientRect(),n=0,i=0;if(t instanceof MouseEvent)n=t.clientX-e.left,i=t.clientY-e.top;else{let a=t.touches[0];n=a.clientX-e.left,i=a.clientY-e.top}this.ctx.beginPath(),this.ctx.moveTo(this.lastX,this.lastY),this.ctx.lineTo(n,i),this.ctx.stroke(),this.lastX=n,this.lastY=i}stopDrawing(){this.isDrawing=!1}clear(){this.signatureService.clearCanvas(this.canvasRef.nativeElement)}save(){return E(this,null,function*(){let t=this.canvasRef.nativeElement;if(this.signatureService.isCanvasEmpty(t)){alert("\uC11C\uBA85\uC744 \uADF8\uB824\uC8FC\uC138\uC694.");return}try{let e=this.signatureService.canvasToDataUrl(t),n=yield this.signatureService.resizeSignature(e,300,150);this.signatureCreated.emit(n)}catch(e){console.error("Error saving signature:",e),alert("\uC11C\uBA85 \uC800\uC7A5 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}onCancel(){this.cancel.emit()}static \u0275fac=function(e){return new(e||o)(ge(Dt))};static \u0275cmp=ae({type:o,selectors:[["app-shared-signature-pad-modal"]],viewQuery:function(e,n){if(e&1&&qe(Ii,5),e&2){let i;Ke(i=Je())&&(n.canvasRef=i.first)}},outputs:{signatureCreated:"signatureCreated",cancel:"cancel"},decls:25,vars:0,consts:[["signatureCanvas",""],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"signature-pad-container"],[1,"signature-canvas",3,"mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"],[1,"signature-placeholder"],[1,"signature-instructions"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){if(e&1){let i=L();N(0,"div",1),fe("click",function(){return b(i),v(n.onCancel())}),N(1,"div",2),fe("click",function(d){return b(i),v(d.stopPropagation())}),N(2,"div",3)(3,"h3"),l(4,"\uC11C\uBA85 \uCD94\uAC00"),W(),N(5,"button",4),fe("click",function(){return b(i),v(n.onCancel())}),l(6,"\xD7"),W()(),N(7,"div",5)(8,"div",6)(9,"canvas",7,0),fe("mousedown",function(d){return b(i),v(n.startDrawing(d))})("mousemove",function(d){return b(i),v(n.draw(d))})("mouseup",function(){return b(i),v(n.stopDrawing())})("mouseleave",function(){return b(i),v(n.stopDrawing())})("touchstart",function(d){return b(i),v(n.startDrawing(d))})("touchmove",function(d){return b(i),v(n.draw(d))})("touchend",function(){return b(i),v(n.stopDrawing())}),W(),N(11,"div",8),l(12,"\uC5EC\uAE30\uC5D0 \uC11C\uBA85\uD558\uC138\uC694"),W()(),N(13,"div",9),l(14," \uB9C8\uC6B0\uC2A4\uB098 \uD130\uCE58\uB85C \uC11C\uBA85\uC744 \uADF8\uB824\uC8FC\uC138\uC694 "),W()(),N(15,"div",10)(16,"button",11),fe("click",function(){return b(i),v(n.clear())}),N(17,"span"),l(18,"\u{1F5D1}\uFE0F"),W(),N(19,"span"),l(20,"\uC9C0\uC6B0\uAE30"),W()(),N(21,"button",11),fe("click",function(){return b(i),v(n.onCancel())}),l(22," \uCDE8\uC18C "),W(),N(23,"button",12),fe("click",function(){return b(i),v(n.save())}),l(24," \uC800\uC7A5 "),W()()()()}},dependencies:[ne],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 20px #00000026;width:90%;max-width:600px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#666;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;color:#333}.modal-body[_ngcontent-%COMP%]{padding:24px 20px;overflow-y:auto;flex:1}.signature-pad-container[_ngcontent-%COMP%]{position:relative;width:100%;background:#fafafa;border:2px dashed #ddd;border-radius:8px;overflow:hidden}.signature-pad-container[_ngcontent-%COMP%]   .signature-canvas[_ngcontent-%COMP%]{display:block;width:100%;height:250px;cursor:crosshair;background:#fff;touch-action:none}.signature-pad-container[_ngcontent-%COMP%]   .signature-placeholder[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#999;font-size:16px;pointer-events:none;-webkit-user-select:none;user-select:none}.signature-instructions[_ngcontent-%COMP%]{margin-top:12px;text-align:center;color:#666;font-size:14px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #e0e0e0}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:6px}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #0000001a}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff}.modal-footer[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3367d6}.modal-footer[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333}.modal-footer[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}"]})};var ki=["svgCanvas"],Ti=["canvasContainer"];function Fi(o,t){if(o&1){let e=L();r(0,"button",44),w("click",function(){let i=b(e).$implicit,a=p();return v(a.selectTool(i.type))}),r(1,"span",45),l(2),s(),r(3,"span",46),l(4),s()()}if(o&2){let e=t.$implicit,n=p();q("active",n.currentTool===e.type),u("title",e.name),c(2),T(e.icon),c(2),T(e.name)}}function Ai(o,t){if(o&1){let e=L();r(0,"div",8)(1,"label"),l(2,"\uCC44\uC6B0\uAE30 \uD22C\uBA85\uB3C4:"),s(),r(3,"input",13),w("input",function(i){b(e);let a=p();return v(a.currentFillOpacity=+i.target.value)}),s(),r(4,"span",11),l(5),s()()}if(o&2){let e=p();c(3),u("value",e.currentFillOpacity),c(2),M("",(e.currentFillOpacity*100).toFixed(0),"%")}}function Bi(o,t){if(o&1){let e=L();r(0,"button",47),w("click",function(){b(e);let i=p();return v(i.finishPolygon())}),l(1," \uB2E4\uAC01\uD615 \uC644\uB8CC "),s()}}function Vi(o,t){if(o&1){let e=L();r(0,"button",48),w("click",function(){b(e);let i=p();return v(i.finishCurrentPath())}),l(1," \uADF8\uB9AC\uAE30 \uCDE8\uC18C "),s()}}function zi(o,t){if(o&1){let e=L();r(0,"button",49),w("click",function(){b(e);let i=p();return v(i.deleteSelectedPath())}),l(1," \uC120\uD0DD\uD55C \uD328\uC2A4 \uC0AD\uC81C "),s()}}function $i(o,t){o&1&&(r(0,"span"),l(1,"(\uC2DC\uC791\uC810\uC744 \uD074\uB9AD\uD558\uC138\uC694)"),s())}function Li(o,t){o&1&&(r(0,"span"),l(1,"(\uC9C1\uC120\uC774 \uADF8\uB824\uC9D1\uB2C8\uB2E4)"),s())}function Ni(o,t){o&1&&(r(0,"span"),l(1,"(\uC774\uCC28 \uBCA0\uC9C0\uC5B4 \uACE1\uC120)"),s())}function Ri(o,t){o&1&&(r(0,"span"),l(1,"(\uC0BC\uCC28 \uBCA0\uC9C0\uC5B4 \uACE1\uC120)"),s())}function ji(o,t){o&1&&(r(0,"span"),l(1,"(\uC644\uB8CC! \uC0C8\uB85C\uC6B4 \uACE1\uC120\uC744 \uC2DC\uC791\uD558\uC138\uC694)"),s())}function Wi(o,t){if(o&1&&(r(0,"div",50)(1,"h5"),l(2,"\uBCA0\uC9C0\uC5B4 \uACE1\uC120 \uADF8\uB9AC\uAE30"),s(),r(3,"p"),l(4,"\uC810\uC744 \uD074\uB9AD\uD560 \uB54C\uB9C8\uB2E4 \uC2E4\uC2DC\uAC04\uC73C\uB85C \uACE1\uC120\uC774 \uADF8\uB824\uC9D1\uB2C8\uB2E4:"),s(),r(5,"ol")(6,"li"),l(7),s(),r(8,"li"),l(9),s(),r(10,"li"),l(11),s(),r(12,"li"),l(13),s()(),r(14,"div",51),l(15),I(16,$i,2,0,"span",38)(17,Li,2,0,"span",38)(18,Ni,2,0,"span",38)(19,Ri,2,0,"span",38)(20,ji,2,0,"span",38),s()()),o&2){let e=p();c(6),q("completed",e.bezierPoints.length>=1),c(),M("\uC2DC\uC791\uC810 ",e.bezierPoints.length>=1?"\u2713":""),c(),q("completed",e.bezierPoints.length>=2),c(),M("\uCCAB \uBC88\uC9F8 \uC870\uC808\uC810 ",e.bezierPoints.length>=2?"\u2713":""),c(),q("completed",e.bezierPoints.length>=3),c(),M("\uB450 \uBC88\uC9F8 \uC870\uC808\uC810 ",e.bezierPoints.length>=3?"\u2713":""),c(),q("completed",e.bezierPoints.length>=4),c(),M("\uB05D\uC810 ",e.bezierPoints.length>=4?"\u2713":""),c(2),M(" \uD604\uC7AC \uB2E8\uACC4: ",e.bezierPoints.length,"/4 "),c(),u("ngIf",e.bezierPoints.length===0),c(),u("ngIf",e.bezierPoints.length===1),c(),u("ngIf",e.bezierPoints.length===2),c(),u("ngIf",e.bezierPoints.length===3),c(),u("ngIf",e.bezierPoints.length===4)}}function Gi(o,t){o&1&&(r(0,"div",54)(1,"span",55),l(2,"\u{1F3A8} \uADF8\uB9AC\uB294 \uC911..."),s()())}function Hi(o,t){if(o&1&&(r(0,"div",52)(1,"h5"),l(2,"\uC790\uC720 \uADF8\uB9AC\uAE30 (\uBE0C\uB7EC\uC2DC)"),s(),r(3,"p"),l(4,"\uB9C8\uC6B0\uC2A4\uB97C \uD074\uB9AD\uD558\uACE0 \uB4DC\uB798\uADF8\uD558\uC5EC \uC790\uC720\uB86D\uAC8C \uADF8\uB9AC\uC138\uC694."),s(),r(5,"ul")(6,"li"),l(7,"\uD074\uB9AD + \uB4DC\uB798\uADF8: \uADF8\uB9AC\uAE30"),s(),r(8,"li"),l(9,"\uB9C8\uC6B0\uC2A4 \uB5BC\uAE30: \uADF8\uB9AC\uAE30 \uC644\uB8CC"),s(),r(10,"li"),l(11,"ESC: \uD604\uC7AC \uADF8\uB9AC\uAE30 \uCDE8\uC18C"),s()(),I(12,Gi,3,0,"div",53),s()),o&2){let e=p();c(12),u("ngIf",e.isFreeDraw)}}function Ui(o,t){o&1&&(r(0,"div",54)(1,"span",55),l(2,"\u{1F9FD} \uC9C0\uC6B0\uB294 \uC911..."),s()())}function Yi(o,t){if(o&1){let e=L();r(0,"div",56)(1,"h5"),l(2,"\uC9C0\uC6B0\uAC1C"),s(),r(3,"p"),l(4,"\uB9C8\uC6B0\uC2A4\uB97C \uD074\uB9AD\uD558\uACE0 \uB4DC\uB798\uADF8\uD558\uC5EC \uD328\uC2A4\uB97C \uC9C0\uC6B0\uC138\uC694."),s(),r(5,"div",8)(6,"label"),l(7,"\uC9C0\uC6B0\uAC1C \uD06C\uAE30:"),s(),r(8,"input",57),w("input",function(i){b(e);let a=p();return v(a.eraserSize=+i.target.value)}),s(),r(9,"span",11),l(10),s()(),I(11,Ui,3,0,"div",53),s()}if(o&2){let e=p();c(8),u("value",e.eraserSize),c(2),M("",e.eraserSize,"px"),c(),u("ngIf",e.isErasing)}}function Xi(o,t){if(o&1&&(r(0,"div",58)(1,"h5"),l(2,"\uB2E4\uAC01\uD615 \uADF8\uB9AC\uAE30"),s(),r(3,"p"),l(4,"\uC810\uB4E4\uC744 \uD074\uB9AD\uD558\uC5EC \uC5F0\uACB0\uD558\uACE0, '\uB2E4\uAC01\uD615 \uC644\uB8CC' \uBC84\uD2BC\uC744 \uB20C\uB7EC \uB9C8\uBB34\uB9AC\uD558\uC138\uC694."),s(),r(5,"div",51),l(6),s()()),o&2){let e=p();c(6),M(" \uD604\uC7AC \uC810 \uAC1C\uC218: ",e.currentPoints.length," ")}}function qi(o,t){if(o&1&&(se(),r(0,"defs")(1,"pattern",59),R(2,"path",60),s()()),o&2){let e=p();c(),Me("width",e.gridSize)("height",e.gridSize),c(),Me("d","M "+e.gridSize+" 0 L 0 0 0 "+e.gridSize)}}function Ki(o,t){o&1&&(se(),R(0,"rect",61))}function Ji(o,t){if(o&1){let e=L();se(),r(0,"path",62),w("click",function(){let i=b(e).$implicit,a=p();return v(a.selectPath(i))}),s()}if(o&2){let e=t.$implicit,n=p();q("selected",n.selectedPath===e)("brush-path",e.d.includes("Q")),Me("d",e.d)("stroke",e.stroke)("stroke-width",e.strokeWidth)("fill",e.fill)("fill-opacity",e.fillOpacity)("stroke-opacity",e.strokeOpacity)("transform",e.transform)("stroke-linecap",e.d.includes("Q")?"round":"butt")("stroke-linejoin",e.d.includes("Q")?"round":"miter")}}function Zi(o,t){if(o&1&&(se(),R(0,"path")),o&2){let e=p();q("preview-path",!0)("brush-preview",e.currentTool==="brush"),Me("d",e.previewPath.d)("stroke",e.previewPath.stroke)("stroke-width",e.previewPath.strokeWidth)("fill",e.previewPath.fill)("fill-opacity",e.previewPath.fillOpacity)("stroke-opacity",e.previewPath.strokeOpacity)("stroke-linecap",e.currentTool==="brush"?"round":"butt")("stroke-linejoin",e.currentTool==="brush"?"round":"miter")}}function Qi(o,t){if(o&1&&(se(),r(0,"g"),R(1,"circle",64),r(2,"text",65),l(3),s(),r(4,"text",66),l(5),s()()),o&2){let e=t.$implicit,n=t.index,i=p(2);c(),Me("cx",e.x)("cy",e.y)("fill",n===0||n===i.bezierPoints.length-1&&i.bezierPoints.length===4?"#ff4444":"#4444ff")("stroke","white")("stroke-width",3)("opacity",.9),c(),Me("x",e.x)("y",e.y+1),c(),M(" ",n+1," "),c(),Me("x",e.x)("y",e.y-20),c(),M(" ",n===0?"\uC2DC\uC791":n===1?"\uC870\uC8081":n===2?"\uC870\uC8082":"\uB05D"," ")}}function eo(o,t){if(o&1&&(se(),r(0,"g"),I(1,Qi,6,12,"g",63),s()),o&2){let e=p();c(),u("ngForOf",e.bezierPoints)}}function to(o,t){if(o&1&&(se(),R(0,"circle",68)),o&2){let e=t.$implicit;Me("cx",e.x)("cy",e.y)}}function no(o,t){if(o&1&&(se(),r(0,"g"),I(1,to,1,2,"circle",67),s()),o&2){let e=p();c(),u("ngForOf",e.currentPoints)}}function io(o,t){if(o&1){let e=L();r(0,"div",72),w("click",function(){let i=b(e).$implicit,a=p(2);return v(a.selectPath(i))}),r(1,"div",73),se(),r(2,"svg",74),R(3,"path",75),s()(),Ct(),r(4,"div",76)(5,"div",77),l(6),s(),r(7,"div",78),l(8),s()(),r(9,"button",79),w("click",function(i){let a=b(e).$implicit;return p(2).deletePath(a),v(i.stopPropagation())}),l(10," \u2715 "),s()()}if(o&2){let e=t.$implicit,n=t.index,i=p(2);q("selected",i.selectedPath===e),c(3),Me("d",e.d)("stroke",e.stroke)("stroke-width",i.Math.max(1,e.strokeWidth/2))("fill",e.fill)("fill-opacity",e.fillOpacity)("stroke-opacity",e.strokeOpacity),c(3),M("\uD328\uC2A4 ",n+1),c(2),le(" ",e.stroke," / ",e.strokeWidth,"px ")}}function oo(o,t){if(o&1&&(r(0,"div",69)(1,"h4"),l(2),s(),r(3,"div",70),I(4,io,11,11,"div",71),s()()),o&2){let e=p();c(2),M("\uD328\uC2A4 \uBAA9\uB85D (",e.paths.length,"\uAC1C)"),c(2),u("ngForOf",e.paths)("ngForTrackBy",e.trackByPath)}}function ao(o,t){o&1&&(r(0,"div",80)(1,"h5"),l(2,"\uD0A4\uBCF4\uB4DC \uB2E8\uCD95\uD0A4"),s(),r(3,"ul")(4,"li")(5,"strong"),l(6,"Del"),s(),l(7,": \uC120\uD0DD\uD55C \uD328\uC2A4 \uC0AD\uC81C"),s(),r(8,"li")(9,"strong"),l(10,"Esc"),s(),l(11,": \uD604\uC7AC \uADF8\uB9AC\uAE30 \uCDE8\uC18C"),s(),r(12,"li")(13,"strong"),l(14,"Ctrl+Z"),s(),l(15,": \uC2E4\uD589 \uCDE8\uC18C"),s()()())}var ni=class o{svgCanvas;canvasContainer;width=800;height=600;backgroundColor="#ffffff";gridSize=20;showGrid=!0;snapToGrid=!1;pathsChanged=new $;pathSelected=new $;close=new $;Math=Math;drawingTools=[{type:"pen",name:"\uD39C \uB3C4\uAD6C",icon:"\u270F\uFE0F"},{type:"brush",name:"\uBE0C\uB7EC\uC2DC (\uC790\uC720 \uADF8\uB9AC\uAE30)",icon:"\u{1F58C}\uFE0F"},{type:"eraser",name:"\uC9C0\uC6B0\uAC1C",icon:"\u{1F9FD}"},{type:"bezier",name:"\uBCA0\uC9C0\uC5B4 \uACE1\uC120",icon:"\u{1F30A}"},{type:"line",name:"\uC9C1\uC120",icon:"\u{1F4CF}"},{type:"rectangle",name:"\uC0AC\uAC01\uD615",icon:"\u2B1C"},{type:"ellipse",name:"\uD0C0\uC6D0",icon:"\u2B55"},{type:"polygon",name:"\uB2E4\uAC01\uD615",icon:"\u{1F537}"}];currentTool="pen";currentStroke="#000000";currentStrokeWidth=2;currentFill="none";currentFillOpacity=1;currentStrokeOpacity=1;paths=[];selectedPath=null;previewPath=null;isDrawing=!1;currentPoints=[];startPoint=null;isFreeDraw=!1;freeDrawPath="";lastPoint=null;isErasing=!1;eraserSize=20;bezierPoints=[];showControlPoints=!0;zoom=1;panX=0;panY=0;selectedPoints=[];draggingPoint=null;constructor(){}ngOnInit(){this.setupEventListeners()}ngOnDestroy(){this.removeEventListeners()}setupEventListeners(){}removeEventListeners(){}selectTool(t){this.currentTool==="bezier"&&t!=="bezier"&&(this.removeTemporaryBezierPath(),this.bezierPoints=[]),this.currentTool=t,this.finishCurrentPath()}setStroke(t){this.currentStroke=t,this.selectedPath&&(this.selectedPath.stroke=t,this.emitPathsChanged())}setStrokeWidth(t){this.currentStrokeWidth=t,this.selectedPath&&(this.selectedPath.strokeWidth=t,this.emitPathsChanged())}setFill(t){this.currentFill=t,this.selectedPath&&(this.selectedPath.fill=t,this.emitPathsChanged())}onMouseDown(t){let e=this.getMousePoint(t);switch(this.currentTool){case"pen":this.startPenDrawing(e);break;case"brush":this.startFreeDrawing(e);break;case"eraser":this.startErasing(e);break;case"bezier":this.handleBezierPoint(e);break;case"line":case"rectangle":case"ellipse":this.startShapeDrawing(e);break;case"polygon":this.handlePolygonPoint(e);break}}onMouseMove(t){if(!this.isDrawing&&!this.isFreeDraw&&!this.isErasing)return;let e=this.getMousePoint(t);switch(this.currentTool){case"pen":this.continuePenDrawing(e);break;case"brush":this.continueFreeDrawing(e);break;case"eraser":this.continueErasing(e);break;case"line":case"rectangle":case"ellipse":this.updateShapePreview(e);break}}onMouseUp(t){let e=this.getMousePoint(t);switch(this.currentTool){case"pen":this.finishPenDrawing();break;case"brush":this.finishFreeDrawing();break;case"eraser":this.finishErasing();break;case"line":case"rectangle":case"ellipse":this.finishShapeDrawing(e);break}}getMousePoint(t){let e=this.svgCanvas.nativeElement.getBoundingClientRect(),n=(t.clientX-e.left)/this.zoom-this.panX,i=(t.clientY-e.top)/this.zoom-this.panY;return this.snapToGrid&&(n=Math.round(n/this.gridSize)*this.gridSize,i=Math.round(i/this.gridSize)*this.gridSize),{x:n,y:i}}startPenDrawing(t){this.isDrawing=!0,this.currentPoints=[{x:t.x,y:t.y,type:"M"}]}continuePenDrawing(t){this.currentPoints.push({x:t.x,y:t.y,type:"L"}),this.updatePreviewPath()}finishPenDrawing(){if(this.currentPoints.length>1){let t=this.pointsToPathData(this.currentPoints);this.addPath(t)}this.isDrawing=!1,this.currentPoints=[],this.previewPath=null}handleBezierPoint(t){let e={x:Math.round(t.x*10)/10,y:Math.round(t.y*10)/10,type:"M"};if(this.bezierPoints.length>0){let n=this.bezierPoints[this.bezierPoints.length-1];if(Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))<5)return}if(this.bezierPoints.push(e),this.bezierPoints.length>=2&&this.updateBezierPreview(),this.bezierPoints.length===4){this.removeTemporaryBezierPath();let n=this.createBezierPath(this.bezierPoints);this.addPath(n),this.bezierPoints=[]}}updateBezierPreview(){let t=this.createBezierPathProgressive(this.bezierPoints),e=this.paths.findIndex(i=>i.id.startsWith("temp-bezier-")),n={id:"temp-bezier-current",d:t,stroke:this.currentStroke,strokeWidth:this.currentStrokeWidth,fill:this.currentFill,fillOpacity:this.currentFillOpacity,strokeOpacity:this.currentStrokeOpacity*.7};e>=0?this.paths[e]=n:this.paths.push(n)}removeTemporaryBezierPath(){let t=this.paths.length;this.paths=this.paths.filter(e=>!e.id.startsWith("temp-bezier-")),this.paths.length}createBezierPathProgressive(t){if(t.length<2)return"";let e=`M ${t[0].x} ${t[0].y}`;return t.length===2?e+=` L ${t[1].x} ${t[1].y}`:t.length===3?e+=` Q ${t[1].x} ${t[1].y} ${t[2].x} ${t[2].y}`:t.length>=4&&(e+=` C ${t[1].x} ${t[1].y} ${t[2].x} ${t[2].y} ${t[3].x} ${t[3].y}`),e}createBezierPath(t){if(t.length!==4)return"";let[e,n,i,a]=t;return`M ${e.x} ${e.y} C ${n.x} ${n.y} ${i.x} ${i.y} ${a.x} ${a.y}`}startShapeDrawing(t){this.isDrawing=!0,this.startPoint=t}updateShapePreview(t){if(!this.startPoint)return;let e=this.getShapePathData(this.startPoint,t);this.previewPath={id:"preview",d:e,stroke:this.currentStroke,strokeWidth:this.currentStrokeWidth,fill:this.currentFill,fillOpacity:this.currentFillOpacity,strokeOpacity:this.currentStrokeOpacity}}finishShapeDrawing(t){if(!this.startPoint)return;let e=this.getShapePathData(this.startPoint,t);this.addPath(e),this.isDrawing=!1,this.startPoint=null,this.previewPath=null}getShapePathData(t,e){let n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y),a=Math.min(t.x,e.x),d=Math.min(t.y,e.y);switch(this.currentTool){case"line":return`M ${t.x} ${t.y} L ${e.x} ${e.y}`;case"rectangle":return`M ${a} ${d} L ${a+n} ${d} L ${a+n} ${d+i} L ${a} ${d+i} Z`;case"ellipse":let g=a+n/2,m=d+i/2,h=n/2,f=i/2;return`M ${g-h} ${m} A ${h} ${f} 0 1 0 ${g+h} ${m} A ${h} ${f} 0 1 0 ${g-h} ${m}`;default:return""}}handlePolygonPoint(t){this.currentPoints.push({x:t.x,y:t.y,type:this.currentPoints.length===0?"M":"L"}),this.updatePreviewPath()}finishPolygon(){if(this.currentPoints.length>2){this.currentPoints.push({x:0,y:0,type:"Z"});let t=this.pointsToPathData(this.currentPoints);this.addPath(t)}this.currentPoints=[],this.previewPath=null}pointsToPathData(t){return t.map(e=>{switch(e.type){case"M":return`M ${e.x} ${e.y}`;case"L":return`L ${e.x} ${e.y}`;case"C":return`C ${e.controlPoint1?.x} ${e.controlPoint1?.y} ${e.controlPoint2?.x} ${e.controlPoint2?.y} ${e.x} ${e.y}`;case"Z":return"Z";default:return`L ${e.x} ${e.y}`}}).join(" ")}updatePreviewPath(){this.currentPoints.length!==0&&(this.previewPath={id:"preview",d:this.pointsToPathData(this.currentPoints),stroke:this.currentStroke,strokeWidth:this.currentStrokeWidth,fill:"none",fillOpacity:this.currentFillOpacity,strokeOpacity:this.currentStrokeOpacity})}addPath(t){let e={id:this.generatePathId(),d:t,stroke:this.currentStroke,strokeWidth:this.currentStrokeWidth,fill:this.currentFill,fillOpacity:this.currentFillOpacity,strokeOpacity:this.currentStrokeOpacity};this.paths.push(e),this.emitPathsChanged()}generatePathId(){return"path_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}selectPath(t){this.selectedPath=t,this.pathSelected.emit(t)}deletePath(t){let e=this.paths.indexOf(t);e>-1&&(this.paths.splice(e,1),this.selectedPath===t&&(this.selectedPath=null,this.pathSelected.emit(null)),this.emitPathsChanged())}deleteSelectedPath(){this.selectedPath&&this.deletePath(this.selectedPath)}finishCurrentPath(){this.isDrawing=!1,this.isFreeDraw=!1,this.isErasing=!1,this.currentPoints=[],this.bezierPoints.length>0&&(this.removeTemporaryBezierPath(),this.bezierPoints=[]),this.startPoint=null,this.previewPath=null,this.freeDrawPath="",this.lastPoint=null}clearAll(){this.paths=[],this.selectedPath=null,this.finishCurrentPath(),this.emitPathsChanged(),this.pathSelected.emit(null)}undo(){this.paths.length>0&&this.paths.pop()}emitPathsChanged(){}zoomIn(){this.zoom=Math.min(this.zoom*1.2,5)}zoomOut(){this.zoom=Math.max(this.zoom/1.2,.2)}resetView(){this.zoom=1,this.panX=0,this.panY=0}exportToSVG(){let t=this.svgCanvas.nativeElement;return new XMLSerializer().serializeToString(t)}startFreeDrawing(t){this.isFreeDraw=!0,this.isDrawing=!0,this.lastPoint=t,this.freeDrawPath=`M ${t.x} ${t.y}`,this.previewPath={id:"preview",d:this.freeDrawPath,stroke:this.currentStroke,strokeWidth:this.currentStrokeWidth,fill:"none",fillOpacity:this.currentFillOpacity,strokeOpacity:this.currentStrokeOpacity}}continueFreeDrawing(t){if(!this.isFreeDraw||!this.lastPoint)return;let e=t.x-this.lastPoint.x,n=t.y-this.lastPoint.y;if(Math.sqrt(e*e+n*n)>2){let a=(this.lastPoint.x+t.x)/2,d=(this.lastPoint.y+t.y)/2;this.freeDrawPath+=` Q ${this.lastPoint.x} ${this.lastPoint.y} ${a} ${d}`,this.lastPoint=t,this.previewPath&&(this.previewPath.d=this.freeDrawPath)}}finishFreeDrawing(){if(!this.isFreeDraw||!this.freeDrawPath)return;let t={id:this.generateId(),d:this.freeDrawPath,stroke:this.currentStroke,strokeWidth:this.currentStrokeWidth,fill:"none",fillOpacity:this.currentFillOpacity,strokeOpacity:this.currentStrokeOpacity};this.paths.push(t),this.selectedPath=t,this.isFreeDraw=!1,this.isDrawing=!1,this.freeDrawPath="",this.lastPoint=null,this.previewPath=null,this.emitPathsChanged(),this.pathSelected.emit(t)}startErasing(t){this.isErasing=!0,this.eraseAtPoint(t)}continueErasing(t){this.isErasing&&this.eraseAtPoint(t)}finishErasing(){this.isErasing=!1}eraseAtPoint(t){let e=this.eraserSize/2,n=[];this.paths.forEach(i=>{this.isPathIntersectingEraser(i,t,e)&&n.push(i)}),n.length>0&&(n.forEach(i=>{let a=this.paths.indexOf(i);a>-1&&this.paths.splice(a,1)}),n.includes(this.selectedPath)&&(this.selectedPath=null,this.pathSelected.emit(null)),this.emitPathsChanged())}isPathIntersectingEraser(t,e,n){let a=t.d.match(/([ML])\s*([\d.-]+)\s*([\d.-]+)/g);if(!a)return!1;for(let d of a){let g=d.match(/([ML])\s*([\d.-]+)\s*([\d.-]+)/);if(g){let m=parseFloat(g[2]),h=parseFloat(g[3]);if(Math.sqrt(Math.pow(m-e.x,2)+Math.pow(h-e.y,2))<=n)return!0}}return!1}generateId(){return"path-"+Math.random().toString(36).substr(2,9)+"-"+Date.now()}getPathsData(){return[...this.paths]}loadPaths(t){this.paths=[...t],this.selectedPath=null,this.emitPathsChanged(),this.pathSelected.emit(null)}onKeyDown(t){t.key==="Delete"&&this.selectedPath?this.deleteSelectedPath():t.key==="Escape"?this.finishCurrentPath():t.ctrlKey&&t.key==="z"&&(t.preventDefault(),this.undo())}trackByPath(t,e){return e.id}applyAndClose(){this.currentTool==="polygon"&&this.currentPoints.length>2&&this.finishPolygon(),this.paths.length>0&&this.pathsChanged.emit(this.paths),this.close.emit()}cancel(){this.close.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=ae({type:o,selectors:[["app-vector-path-drawer"]],viewQuery:function(e,n){if(e&1&&(qe(ki,7),qe(Ti,7)),e&2){let i;Ke(i=Je())&&(n.svgCanvas=i.first),Ke(i=Je())&&(n.canvasContainer=i.first)}},hostBindings:function(e,n){e&1&&w("keydown",function(a){return n.onKeyDown(a)},_t)},inputs:{width:"width",height:"height",backgroundColor:"backgroundColor",gridSize:"gridSize",showGrid:"showGrid",snapToGrid:"snapToGrid"},outputs:{pathsChanged:"pathsChanged",pathSelected:"pathSelected",close:"close"},decls:88,vars:41,consts:[["canvasContainer",""],["svgCanvas",""],[1,"vector-path-drawer-overlay"],[1,"vector-path-drawer"],[1,"tools-panel"],[1,"drawing-tools"],["class","tool-btn",3,"active","title","click",4,"ngFor","ngForOf"],[1,"style-controls"],[1,"control-group"],["type","color",1,"color-picker",3,"input","value"],["type","range","min","1","max","20",1,"range-input",3,"input","value"],[1,"value"],[1,"toggle-btn",3,"click"],["type","range","min","0","max","1","step","0.1",1,"range-input",3,"input","value"],["class","control-group",4,"ngIf"],[1,"view-controls"],[1,"button-group"],[1,"control-btn",3,"click"],["type","checkbox",1,"checkbox",3,"ngModelChange","ngModel"],[1,"zoom-info"],[1,"action-buttons"],["class","action-btn finish",3,"click",4,"ngIf"],["class","action-btn cancel",3,"click",4,"ngIf"],["class","action-btn delete",3,"click",4,"ngIf"],["class","bezier-guide",4,"ngIf"],["class","brush-guide",4,"ngIf"],["class","eraser-guide",4,"ngIf"],["class","polygon-guide",4,"ngIf"],[1,"canvas-area"],[1,"canvas-header"],[1,"header-actions"],[1,"modal-actions-compact"],["title","\uC2E4\uD589\uCDE8\uC18C",1,"icon-btn","undo",3,"click","disabled"],["title","\uBAA8\uB450 \uC9C0\uC6B0\uAE30",1,"icon-btn","clear",3,"click","disabled"],["title","\uC801\uC6A9",1,"icon-btn","apply",3,"click","disabled"],["title","\uB2EB\uAE30",1,"icon-btn","cancel",3,"click"],[1,"canvas-container"],[1,"svg-canvas",3,"mousedown","mousemove","mouseup"],[4,"ngIf"],["width","100%","height","100%","fill","url(#grid)",4,"ngIf"],["class","vector-path",3,"selected","brush-path","click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"preview-path","brush-preview",4,"ngIf"],["class","paths-list",4,"ngIf"],["class","keyboard-shortcuts",4,"ngIf"],[1,"tool-btn",3,"click","title"],[1,"tool-icon"],[1,"tool-name"],[1,"action-btn","finish",3,"click"],[1,"action-btn","cancel",3,"click"],[1,"action-btn","delete",3,"click"],[1,"bezier-guide"],[1,"progress"],[1,"brush-guide"],["class","drawing-status",4,"ngIf"],[1,"drawing-status"],[1,"status-indicator"],[1,"eraser-guide"],["type","range","min","10","max","50",1,"range-input",3,"input","value"],[1,"polygon-guide"],["id","grid","patternUnits","userSpaceOnUse"],["fill","none","stroke","#e0e0e0","stroke-width","0.5"],["width","100%","height","100%","fill","url(#grid)"],[1,"vector-path",3,"click"],[4,"ngFor","ngForOf"],["r","12",1,"control-point","bezier-point"],["text-anchor","middle","alignment-baseline","middle","fill","white","font-size","12","font-weight","bold",1,"control-point-number"],["text-anchor","middle","fill","#333","font-size","10","font-weight","bold",1,"control-point-label"],["r","3","fill","#ff4444","class","polygon-point",4,"ngFor","ngForOf"],["r","3","fill","#ff4444",1,"polygon-point"],[1,"paths-list"],[1,"path-items"],["class","path-item",3,"selected","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"path-item",3,"click"],[1,"path-preview"],["width","40","height","20","viewBox","0 0 40 20"],["transform","scale(0.1) translate(0, 0)"],[1,"path-info"],[1,"path-name"],[1,"path-details"],["title","\uC0AD\uC81C",1,"delete-path-btn",3,"click"],[1,"keyboard-shortcuts"]],template:function(e,n){if(e&1){let i=L();r(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3"),l(4,"\uBCA1\uD130 \uADF8\uB9AC\uAE30 \uB3C4\uAD6C"),s(),r(5,"div",5),I(6,Fi,5,5,"button",6),s(),r(7,"div",7)(8,"h4"),l(9,"\uC2A4\uD0C0\uC77C \uC124\uC815"),s(),r(10,"div",8)(11,"label"),l(12,"\uC120 \uC0C9\uC0C1:"),s(),r(13,"input",9),w("input",function(d){return b(i),v(n.setStroke(d.target.value))}),s()(),r(14,"div",8)(15,"label"),l(16,"\uC120 \uB450\uAED8:"),s(),r(17,"input",10),w("input",function(d){return b(i),v(n.setStrokeWidth(+d.target.value))}),s(),r(18,"span",11),l(19),s()(),r(20,"div",8)(21,"label"),l(22,"\uCC44\uC6B0\uAE30:"),s(),r(23,"input",9),w("input",function(d){return b(i),v(n.setFill(d.target.value))}),s(),r(24,"button",12),w("click",function(){return b(i),v(n.setFill(n.currentFill==="none"?"#ffffff":"none"))}),l(25),s()(),r(26,"div",8)(27,"label"),l(28,"\uC120 \uD22C\uBA85\uB3C4:"),s(),r(29,"input",13),w("input",function(d){return b(i),v(n.currentStrokeOpacity=+d.target.value)}),s(),r(30,"span",11),l(31),s()(),I(32,Ai,6,2,"div",14),s(),r(33,"div",15)(34,"h4"),l(35,"\uBDF0 \uCEE8\uD2B8\uB864"),s(),r(36,"div",16)(37,"button",17),w("click",function(){return b(i),v(n.zoomIn())}),l(38,"\uD655\uB300 (+)"),s(),r(39,"button",17),w("click",function(){return b(i),v(n.zoomOut())}),l(40,"\uCD95\uC18C (-)"),s(),r(41,"button",17),w("click",function(){return b(i),v(n.resetView())}),l(42,"\uB9AC\uC14B"),s()(),r(43,"div",8)(44,"label")(45,"input",18),_e("ngModelChange",function(d){return b(i),Ce(n.showGrid,d)||(n.showGrid=d),v(d)}),s(),l(46," \uACA9\uC790 \uD45C\uC2DC "),s()(),r(47,"div",8)(48,"label")(49,"input",18),_e("ngModelChange",function(d){return b(i),Ce(n.snapToGrid,d)||(n.snapToGrid=d),v(d)}),s(),l(50," \uACA9\uC790\uC5D0 \uB9DE\uCDA4 "),s()(),r(51,"div",19),l(52),s()(),r(53,"div",20),I(54,Bi,2,0,"button",21)(55,Vi,2,0,"button",22)(56,zi,2,0,"button",23),s(),I(57,Wi,21,18,"div",24)(58,Hi,13,1,"div",25)(59,Yi,12,3,"div",26)(60,Xi,7,1,"div",27),s(),r(61,"div",28)(62,"div",29)(63,"h3"),l(64,"\uBCA1\uD130 \uCE94\uBC84\uC2A4"),s(),r(65,"div",30)(66,"div",31)(67,"button",32),w("click",function(){return b(i),v(n.undo())}),l(68," \u27F2 "),s(),r(69,"button",33),w("click",function(){return b(i),v(n.clearAll())}),l(70," \u{1F5D1}\uFE0F "),s(),r(71,"button",34),w("click",function(){return b(i),v(n.applyAndClose())}),l(72," \uC801\uC6A9 "),s(),r(73,"button",35),w("click",function(){return b(i),v(n.cancel())}),l(74," \uB2EB\uAE30 "),s()()()(),r(75,"div",36,0),se(),r(77,"svg",37,1),w("mousedown",function(d){return b(i),v(n.onMouseDown(d))})("mousemove",function(d){return b(i),v(n.onMouseMove(d))})("mouseup",function(d){return b(i),v(n.onMouseUp(d))}),l(79,"> "),I(80,qi,3,3,"defs",38)(81,Ki,1,0,"rect",39)(82,Ji,1,13,"path",40)(83,Zi,1,12,"path",41)(84,eo,2,1,"g",38)(85,no,2,1,"g",38),s()(),I(86,oo,5,3,"div",42),s()(),I(87,ao,16,0,"div",43),s()}e&2&&(c(6),u("ngForOf",n.drawingTools),c(7),u("value",n.currentStroke),c(4),u("value",n.currentStrokeWidth),c(2),M("",n.currentStrokeWidth,"px"),c(4),u("value",n.currentFill==="none"?"#ffffff":n.currentFill),c(),q("active",n.currentFill!=="none"),c(),M(" ",n.currentFill==="none"?"\uCC44\uC6B0\uAE30 \uC5C6\uC74C":"\uCC44\uC6B0\uAE30 \uC788\uC74C"," "),c(4),u("value",n.currentStrokeOpacity),c(2),M("",(n.currentStrokeOpacity*100).toFixed(0),"%"),c(),u("ngIf",n.currentFill!=="none"),c(13),he("ngModel",n.showGrid),c(4),he("ngModel",n.snapToGrid),c(3),M(" \uC90C: ",(n.zoom*100).toFixed(0),"% "),c(2),u("ngIf",n.currentTool==="polygon"&&n.currentPoints.length>2),c(),u("ngIf",n.isDrawing),c(),u("ngIf",n.selectedPath),c(),u("ngIf",n.currentTool==="bezier"),c(),u("ngIf",n.currentTool==="brush"),c(),u("ngIf",n.currentTool==="eraser"),c(),u("ngIf",n.currentTool==="polygon"),c(7),u("disabled",n.paths.length===0),c(2),u("disabled",n.paths.length===0&&n.currentPoints.length===0),c(2),u("disabled",n.paths.length===0&&n.currentPoints.length===0),c(4),H("background-color",n.backgroundColor),c(2),H("transform","scale("+n.zoom+") translate("+n.panX+"px, "+n.panY+"px)"),Me("width",n.width)("height",n.height)("viewBox","0 0 "+n.width+" "+n.height)("data-tool",n.currentTool),c(3),u("ngIf",n.showGrid),c(),u("ngIf",n.showGrid),c(),u("ngForOf",n.paths)("ngForTrackBy",n.trackByPath),c(),u("ngIf",n.previewPath),c(),u("ngIf",n.currentTool==="bezier"&&n.showControlPoints),c(),u("ngIf",n.currentTool==="polygon"),c(),u("ngIf",n.paths.length>0),c(),u("ngIf",!1))},dependencies:[ne,Ve,Pe,Ne,wn,Ue,Ye],styles:[".vector-path-drawer-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:10000;display:flex;align-items:center;justify-content:center}.vector-path-drawer[_ngcontent-%COMP%]{display:flex;height:100vh;width:100vw;background:#f5f5f5;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]{width:300px;background:#fff;border-right:1px solid #e0e0e0;padding:20px;overflow-y:auto;box-shadow:2px 0 5px #0000001a}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 15px;color:#333}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;border-bottom:2px solid #4285f4;padding-bottom:10px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-top:25px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin-top:15px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .drawing-tools[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:8px;margin-bottom:25px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .drawing-tools[_ngcontent-%COMP%]   .tool-btn[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;border:1px solid #ddd;border-radius:6px;background:#fff;cursor:pointer;transition:all .2s ease}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .drawing-tools[_ngcontent-%COMP%]   .tool-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;border-color:#4285f4}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .drawing-tools[_ngcontent-%COMP%]   .tool-btn.active[_ngcontent-%COMP%]{background:#4285f4;color:#fff;border-color:#4285f4}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .drawing-tools[_ngcontent-%COMP%]   .tool-btn[_ngcontent-%COMP%]   .tool-icon[_ngcontent-%COMP%]{font-size:18px;margin-right:10px;min-width:24px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .drawing-tools[_ngcontent-%COMP%]   .tool-btn[_ngcontent-%COMP%]   .tool-name[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]{margin-bottom:25px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:15px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;margin-bottom:5px;color:#555}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .color-picker[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .color-picker[_ngcontent-%COMP%]{width:100%;height:35px;border:1px solid #ddd;border-radius:4px;cursor:pointer}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .range-input[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .range-input[_ngcontent-%COMP%]{width:100%;margin-bottom:5px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:11px;color:#666;text-align:right}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;font-size:12px;margin-top:5px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover, .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{background:#4285f4;color:#fff;border-color:#4285f4}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{width:auto;margin-right:8px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:has(.checkbox), .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:has(.checkbox){flex-direction:row;align-items:center;font-size:12px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:5px;margin-bottom:15px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]{padding:8px 4px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;font-size:11px;transition:background .2s}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]:hover, .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .style-controls[_ngcontent-%COMP%]   .zoom-info[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .view-controls[_ngcontent-%COMP%]   .zoom-info[_ngcontent-%COMP%]{font-size:12px;color:#666;text-align:center;padding:8px;background:#f8f9fa;border-radius:4px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;font-size:12px;font-weight:500;transition:all .2s}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 5px #0000001a}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.finish[_ngcontent-%COMP%]{background:#34a853;color:#fff;border-color:#34a853}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.cancel[_ngcontent-%COMP%]{background:#fbbc04;color:#333;border-color:#fbbc04}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.delete[_ngcontent-%COMP%]{background:#ea4335;color:#fff;border-color:#ea4335}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.undo[_ngcontent-%COMP%]{background:#4285f4;color:#fff;border-color:#4285f4}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.clear[_ngcontent-%COMP%]{background:#ea4335;color:#fff;border-color:#ea4335}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .bezier-guide[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .polygon-guide[_ngcontent-%COMP%]{background:#e8f4ff;padding:15px;border-radius:6px;border-left:4px solid #4285f4;margin-top:20px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .bezier-guide[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .polygon-guide[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:12px;color:#555}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .bezier-guide[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .polygon-guide[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:10px 0 10px 20px;padding:0}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .bezier-guide[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .polygon-guide[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:11px;color:#666;margin-bottom:3px;transition:all .3s ease}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .bezier-guide[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .polygon-guide[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]{color:#28a745;font-weight:600;background:#28a7451a;padding:2px 4px;border-radius:3px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .bezier-guide[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .polygon-guide[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background:#4285f4;color:#fff;padding:6px 10px;border-radius:4px;font-size:11px;font-weight:600;text-align:center;margin-top:10px}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .bezier-guide[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]   .polygon-guide[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:10px;opacity:.9;font-style:italic}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background:#fff}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background:#f8f9fa;border-bottom:1px solid #e0e0e0}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .modal-actions-compact[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin:0;padding:0;border:none}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .modal-actions-compact[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]{padding:10px 12px;border:none;border-radius:6px;font-size:14px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;min-height:40px;min-width:70px}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .modal-actions-compact[_ngcontent-%COMP%]   .icon-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .modal-actions-compact[_ngcontent-%COMP%]   .icon-btn.undo[_ngcontent-%COMP%]{background:#e8f0fe;color:#1a73e8;font-size:18px}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .modal-actions-compact[_ngcontent-%COMP%]   .icon-btn.undo[_ngcontent-%COMP%]:hover:not(:disabled){background:#d2e3fc;transform:scale(1.05)}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .modal-actions-compact[_ngcontent-%COMP%]   .icon-btn.clear[_ngcontent-%COMP%]{background:#fce8e6;color:#d93025;font-size:16px}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .modal-actions-compact[_ngcontent-%COMP%]   .icon-btn.clear[_ngcontent-%COMP%]:hover:not(:disabled){background:#fad2cf;transform:scale(1.05)}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .modal-actions-compact[_ngcontent-%COMP%]   .icon-btn.cancel[_ngcontent-%COMP%]{background:#f1f3f4;color:#5f6368;font-size:14px;font-weight:600}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .modal-actions-compact[_ngcontent-%COMP%]   .icon-btn.cancel[_ngcontent-%COMP%]:hover:not(:disabled){background:#e8eaed;transform:scale(1.05)}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .modal-actions-compact[_ngcontent-%COMP%]   .icon-btn.apply[_ngcontent-%COMP%]{background:#1a73e8;color:#fff;font-size:14px;font-weight:600}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .modal-actions-compact[_ngcontent-%COMP%]   .icon-btn.apply[_ngcontent-%COMP%]:hover:not(:disabled){background:#1557b0;box-shadow:0 2px 8px #1a73e84d;transform:scale(1.05)}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden;display:flex;justify-content:center;align-items:center}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .svg-canvas[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px;cursor:crosshair;transition:transform .2s ease}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .svg-canvas[_ngcontent-%COMP%]   .vector-path[_ngcontent-%COMP%]{cursor:pointer;transition:stroke-width .2s}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .svg-canvas[_ngcontent-%COMP%]   .vector-path[_ngcontent-%COMP%]:hover{stroke-width:attr(stroke-width)1}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .svg-canvas[_ngcontent-%COMP%]   .vector-path.selected[_ngcontent-%COMP%]{stroke-dasharray:5,5;animation:_ngcontent-%COMP%_dash 1s linear infinite}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .svg-canvas[_ngcontent-%COMP%]   .preview-path[_ngcontent-%COMP%]{opacity:.7;stroke-dasharray:3,3}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .svg-canvas[_ngcontent-%COMP%]   .control-point[_ngcontent-%COMP%]{cursor:pointer;stroke:#fff;stroke-width:2;transition:all .2s ease}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .svg-canvas[_ngcontent-%COMP%]   .control-point[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .svg-canvas[_ngcontent-%COMP%]   .control-point.bezier-point[_ngcontent-%COMP%]{stroke-width:3;filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .svg-canvas[_ngcontent-%COMP%]   .control-point.bezier-point[_ngcontent-%COMP%]:hover{transform:scale(1.15);filter:drop-shadow(0 3px 6px rgba(0,0,0,.3))}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .svg-canvas[_ngcontent-%COMP%]   .control-point-number[_ngcontent-%COMP%]{pointer-events:none;text-shadow:1px 1px 2px rgba(0,0,0,.5)}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .svg-canvas[_ngcontent-%COMP%]   .control-point-label[_ngcontent-%COMP%]{pointer-events:none;background:#ffffffe6;padding:2px 4px;border-radius:3px;font-family:Segoe UI,sans-serif}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .svg-canvas[_ngcontent-%COMP%]   .polygon-point[_ngcontent-%COMP%]{cursor:pointer;stroke:#fff;stroke-width:1}@keyframes _ngcontent-%COMP%_dash{to{stroke-dashoffset:-10}}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .paths-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;padding:15px 20px;background:#f8f9fa;border-top:1px solid #e0e0e0}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .paths-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:14px;color:#333}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .paths-list[_ngcontent-%COMP%]   .path-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .paths-list[_ngcontent-%COMP%]   .path-items[_ngcontent-%COMP%]   .path-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px;background:#fff;border:1px solid #ddd;border-radius:4px;cursor:pointer;transition:all .2s}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .paths-list[_ngcontent-%COMP%]   .path-items[_ngcontent-%COMP%]   .path-item[_ngcontent-%COMP%]:hover{background:#f0f0f0;transform:translateY(-1px);box-shadow:0 2px 5px #0000001a}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .paths-list[_ngcontent-%COMP%]   .path-items[_ngcontent-%COMP%]   .path-item.selected[_ngcontent-%COMP%]{border-color:#4285f4;background:#e8f4ff}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .paths-list[_ngcontent-%COMP%]   .path-items[_ngcontent-%COMP%]   .path-item[_ngcontent-%COMP%]   .path-preview[_ngcontent-%COMP%]{margin-right:12px;border:1px solid #ddd;border-radius:2px;background:#fff}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .paths-list[_ngcontent-%COMP%]   .path-items[_ngcontent-%COMP%]   .path-item[_ngcontent-%COMP%]   .path-info[_ngcontent-%COMP%]{flex:1}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .paths-list[_ngcontent-%COMP%]   .path-items[_ngcontent-%COMP%]   .path-item[_ngcontent-%COMP%]   .path-info[_ngcontent-%COMP%]   .path-name[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#333;margin-bottom:2px}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .paths-list[_ngcontent-%COMP%]   .path-items[_ngcontent-%COMP%]   .path-item[_ngcontent-%COMP%]   .path-info[_ngcontent-%COMP%]   .path-details[_ngcontent-%COMP%]{font-size:10px;color:#666}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .paths-list[_ngcontent-%COMP%]   .path-items[_ngcontent-%COMP%]   .path-item[_ngcontent-%COMP%]   .delete-path-btn[_ngcontent-%COMP%]{width:24px;height:24px;border:none;border-radius:50%;background:#ea4335;color:#fff;cursor:pointer;font-size:12px;display:flex;align-items:center;justify-content:center;transition:all .2s}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]   .paths-list[_ngcontent-%COMP%]   .path-items[_ngcontent-%COMP%]   .path-item[_ngcontent-%COMP%]   .delete-path-btn[_ngcontent-%COMP%]:hover{background:#d33b2c;transform:scale(1.1)}.vector-path-drawer[_ngcontent-%COMP%]   .keyboard-shortcuts[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background:#000c;color:#fff;padding:15px;border-radius:6px;font-size:12px;max-width:250px}.vector-path-drawer[_ngcontent-%COMP%]   .keyboard-shortcuts[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 10px;font-size:13px}.vector-path-drawer[_ngcontent-%COMP%]   .keyboard-shortcuts[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:15px}.vector-path-drawer[_ngcontent-%COMP%]   .keyboard-shortcuts[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.vector-path-drawer[_ngcontent-%COMP%]   .keyboard-shortcuts[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#4285f4}@media (max-width: 768px){.vector-path-drawer[_ngcontent-%COMP%]{flex-direction:column;height:auto}.vector-path-drawer[_ngcontent-%COMP%]   .tools-panel[_ngcontent-%COMP%]{width:100%;max-height:300px;order:2}.vector-path-drawer[_ngcontent-%COMP%]   .canvas-area[_ngcontent-%COMP%]{order:1;min-height:400px}}.brush-guide[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:15px;border-radius:8px;margin-bottom:20px}.brush-guide[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:10px;color:#fff}.brush-guide[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin-bottom:8px;opacity:.9}.brush-guide[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:11px;margin:8px 0;padding-left:15px;opacity:.9}.brush-guide[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:3px}.brush-guide[_ngcontent-%COMP%]   .drawing-status[_ngcontent-%COMP%]{margin-top:12px;padding:8px;background:#ffffff1a;border-radius:4px;text-align:center}.brush-guide[_ngcontent-%COMP%]   .drawing-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{font-size:12px;font-weight:600;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.6}to{opacity:1}}.eraser-guide[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a24);color:#fff;padding:15px;border-radius:8px;margin-bottom:20px}.eraser-guide[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:10px;color:#fff}.eraser-guide[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin-bottom:12px;opacity:.9}.eraser-guide[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]{margin-bottom:12px}.eraser-guide[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px;margin-bottom:5px;display:block;opacity:.9}.eraser-guide[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .range-input[_ngcontent-%COMP%]{width:100%;margin-bottom:5px}.eraser-guide[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:11px;opacity:.8}.eraser-guide[_ngcontent-%COMP%]   .drawing-status[_ngcontent-%COMP%]{margin-top:12px;padding:8px;background:#ffffff1a;border-radius:4px;text-align:center}.eraser-guide[_ngcontent-%COMP%]   .drawing-status[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{font-size:12px;font-weight:600;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}.svg-canvas[data-tool=brush][_ngcontent-%COMP%]{cursor:crosshair}.svg-canvas[data-tool=brush][_ngcontent-%COMP%]:active{cursor:none}.svg-canvas[data-tool=eraser][_ngcontent-%COMP%]{cursor:grab}.svg-canvas[data-tool=eraser][_ngcontent-%COMP%]:active{cursor:grabbing}.preview-path[_ngcontent-%COMP%]{opacity:.7;filter:drop-shadow(0 0 2px rgba(0,0,0,.3))}.preview-path.brush-preview[_ngcontent-%COMP%]{stroke-linecap:round;stroke-linejoin:round}.vector-path[_ngcontent-%COMP%]{cursor:pointer}.vector-path.brush-path[_ngcontent-%COMP%]{stroke-linecap:round;stroke-linejoin:round;filter:drop-shadow(0 1px 2px rgba(0,0,0,.2))}.vector-path.selected[_ngcontent-%COMP%]{filter:drop-shadow(0 0 4px rgba(66,133,244,.8))}.vector-path[_ngcontent-%COMP%]:hover{opacity:.8}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}"]})};var ii=[{label:"\uD55C\uAE00 \uACE0\uB515\uCCB4",options:[{value:"Noto Sans KR",label:"Noto Sans KR"},{value:"NanumGothic",label:"\uB098\uB214\uACE0\uB515"},{value:"NanumBarunGothic",label:"\uB098\uB214\uBC14\uB978\uACE0\uB515"},{value:"IBM Plex Sans KR",label:"IBM Plex Sans KR"},{value:"NanumSquare",label:"\uB098\uB214\uC2A4\uD018\uC5B4"},{value:"Black Han Sans",label:"Black Han Sans (\uAD75\uC740\uCCB4)"}]},{label:"\uD55C\uAE00 \uBA85\uC870\uCCB4",options:[{value:"Noto Serif KR",label:"Noto Serif KR"},{value:"NanumMyeongjo",label:"\uB098\uB214\uBA85\uC870"}]},{label:"\uD55C\uAE00 \uC190\uAE00\uC528/\uCE90\uC8FC\uC5BC",options:[{value:"NanumPen",label:"\uB098\uB214\uC190\uAE00\uC528\uD39C"},{value:"NanumBrush",label:"\uB098\uB214\uC190\uAE00\uC528\uBD93"},{value:"DoHyeon",label:"\uB3C4\uD604\uCCB4"},{value:"Jua",label:"\uC8FC\uC544\uCCB4"},{value:"Gaegu",label:"\uAC1C\uAD6C\uC7C1\uC774\uCCB4"},{value:"GamjaFlower",label:"\uAC10\uC790\uAF43\uCCB4"},{value:"Sunflower",label:"\uD574\uBC14\uB77C\uAE30\uCCB4"},{value:"EastSeaDokdo",label:"\uB3D9\uD574\uB3C5\uB3C4\uCCB4"},{value:"HiMelody",label:"\uD558\uC774\uBA5C\uB85C\uB514\uCCB4"}]},{label:"\uC601\uBB38 \uD3F0\uD2B8",options:[{value:"Arial",label:"Arial"},{value:"Helvetica",label:"Helvetica"},{value:"Times New Roman",label:"Times New Roman"},{value:"Courier New",label:"Courier New"},{value:"Georgia",label:"Georgia"},{value:"Verdana",label:"Verdana"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"},{value:"Lato",label:"Lato"},{value:"Montserrat",label:"Montserrat"},{value:"Poppins",label:"Poppins"},{value:"Inter",label:"Inter"},{value:"Ubuntu",label:"Ubuntu"}]}];var ro=(o,t)=>t.label,so=(o,t)=>t.value;function lo(o,t){if(o&1&&(r(0,"option",26),l(1),s()),o&2){let e=t.$implicit;u("value",e.value),c(),M(" ",e.label," ")}}function co(o,t){if(o&1&&(r(0,"optgroup",12),je(1,lo,2,2,"option",26,so),s()),o&2){let e=t.$implicit;u("label",e.label),c(),We(e.options)}}var oi=class o{data;pageWidth=595;pageHeight=842;save=new $;cancel=new $;editorData;fontGroups=ii;ngOnInit(){this.editorData=Y({},this.data)}get previewText(){return this.editorData.text||"\uD14D\uC2A4\uD2B8 \uBBF8\uB9AC\uBCF4\uAE30"}get isEditMode(){return!!this.editorData.elementId}get saveButtonText(){return this.isEditMode?"\uC218\uC815 \uC644\uB8CC":"\uD14D\uC2A4\uD2B8 \uCD94\uAC00"}onSave(){this.save.emit(this.editorData)}onCancel(){this.cancel.emit()}onBackdropClick(t){t.target.classList.contains("text-editor-modal")&&this.onCancel()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=ae({type:o,selectors:[["app-text-editor-modal"]],inputs:{data:"data",pageWidth:"pageWidth",pageHeight:"pageHeight"},outputs:{save:"save",cancel:"cancel"},decls:66,vars:19,consts:[[1,"text-editor-modal",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],["aria-label","\uB2EB\uAE30",1,"close-btn",3,"click"],[1,"modal-body"],[1,"text-editor-container"],[1,"editor-section"],["placeholder","\uC5EC\uAE30\uC5D0 \uD14D\uC2A4\uD2B8\uB97C \uC785\uB825\uD558\uC138\uC694...","rows","4",1,"text-input",3,"ngModelChange","ngModel"],[1,"style-section"],[1,"style-controls"],[1,"control-group"],[1,"font-select",3,"ngModelChange","ngModel"],[3,"label"],["type","range","min","8","max","72",1,"range-input",3,"ngModelChange","ngModel"],[1,"value-display"],["type","color",1,"color-input",3,"ngModelChange","ngModel"],[1,"position-section"],[1,"position-controls"],["type","number","min","0",1,"number-input",3,"ngModelChange","ngModel","max"],[1,"unit"],["type","number","min","50",1,"number-input",3,"ngModelChange","ngModel","max"],[1,"preview-section"],[1,"text-preview"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"],[3,"value"]],template:function(e,n){e&1&&(r(0,"div",0),w("click",function(a){return n.onBackdropClick(a)}),r(1,"div",1),w("click",function(a){return a.stopPropagation()}),r(2,"div",2)(3,"h2"),l(4,"\uD14D\uC2A4\uD2B8 \uD3B8\uC9D1\uAE30 \u270F\uFE0F"),s(),r(5,"button",3),w("click",function(){return n.onCancel()}),r(6,"span"),l(7,"\xD7"),s()()(),r(8,"div",4)(9,"div",5)(10,"div",6)(11,"h3"),l(12,"\uD14D\uC2A4\uD2B8 \uB0B4\uC6A9"),s(),r(13,"textarea",7),_e("ngModelChange",function(a){return Ce(n.editorData.text,a)||(n.editorData.text=a),a}),s()(),r(14,"div",8)(15,"h3"),l(16,"\uC2A4\uD0C0\uC77C \uC124\uC815"),s(),r(17,"div",9)(18,"div",10)(19,"label"),l(20,"\uAE00\uAF34:"),s(),r(21,"select",11),_e("ngModelChange",function(a){return Ce(n.editorData.fontFamily,a)||(n.editorData.fontFamily=a),a}),je(22,co,3,1,"optgroup",12,ro),s()(),r(24,"div",10)(25,"label"),l(26,"\uD06C\uAE30:"),s(),r(27,"input",13),_e("ngModelChange",function(a){return Ce(n.editorData.fontSize,a)||(n.editorData.fontSize=a),a}),s(),r(28,"span",14),l(29),s()(),r(30,"div",10)(31,"label"),l(32,"\uC0C9\uC0C1:"),s(),r(33,"input",15),_e("ngModelChange",function(a){return Ce(n.editorData.color,a)||(n.editorData.color=a),a}),s()()()(),r(34,"div",16)(35,"h3"),l(36,"\uC704\uCE58 \uC124\uC815"),s(),r(37,"div",17)(38,"div",10)(39,"label"),l(40,"X \uC704\uCE58:"),s(),r(41,"input",18),_e("ngModelChange",function(a){return Ce(n.editorData.x,a)||(n.editorData.x=a),a}),s(),r(42,"span",19),l(43,"px"),s()(),r(44,"div",10)(45,"label"),l(46,"Y \uC704\uCE58:"),s(),r(47,"input",18),_e("ngModelChange",function(a){return Ce(n.editorData.y,a)||(n.editorData.y=a),a}),s(),r(48,"span",19),l(49,"px"),s()(),r(50,"div",10)(51,"label"),l(52,"\uB108\uBE44:"),s(),r(53,"input",20),_e("ngModelChange",function(a){return Ce(n.editorData.width,a)||(n.editorData.width=a),a}),s(),r(54,"span",19),l(55,"px"),s()()()(),r(56,"div",21)(57,"h3"),l(58,"\uBBF8\uB9AC\uBCF4\uAE30"),s(),r(59,"div",22),l(60),s()()()(),r(61,"div",23)(62,"button",24),w("click",function(){return n.onCancel()}),l(63,"\uCDE8\uC18C"),s(),r(64,"button",25),w("click",function(){return n.onSave()}),l(65),s()()()()),e&2&&(c(13),he("ngModel",n.editorData.text),c(8),he("ngModel",n.editorData.fontFamily),c(),We(n.fontGroups),c(5),he("ngModel",n.editorData.fontSize),c(2),M("",n.editorData.fontSize,"px"),c(4),he("ngModel",n.editorData.color),c(8),he("ngModel",n.editorData.x),u("max",n.pageWidth),c(6),he("ngModel",n.editorData.y),u("max",n.pageHeight),c(6),he("ngModel",n.editorData.width),u("max",n.pageWidth),c(6),H("font-size",n.editorData.fontSize,"px")("font-family",n.editorData.fontFamily)("color",n.editorData.color),c(),M(" ",n.previewText," "),c(5),T(n.saveButtonText))},dependencies:[ne,Ne,nt,it,vt,Dn,En,tt,Ue,kn,In,Ye],styles:['@charset "UTF-8";.text-editor-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 40px #0003;width:90%;max-width:700px;max-height:90vh;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.modal-header[_ngcontent-%COMP%]{padding:20px 24px;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#1a202c}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;color:#718096;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:#f7fafc;color:#2d3748}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.text-editor-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.editor-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .style-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .position-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .preview-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;font-weight:600;color:#2d3748;text-transform:uppercase;letter-spacing:.5px}.text-input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #cbd5e0;border-radius:6px;font-size:14px;font-family:inherit;resize:vertical;transition:border-color .2s}.text-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3182ce;box-shadow:0 0 0 3px #3182ce1a}.text-input[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.style-controls[_ngcontent-%COMP%], .position-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.control-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:80px;font-size:14px;color:#4a5568;font-weight:500}.control-group[_ngcontent-%COMP%]   .value-display[_ngcontent-%COMP%], .control-group[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:13px;color:#718096;margin-left:8px}.font-select[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:1px solid #cbd5e0;border-radius:6px;font-size:14px;background-color:#fff;cursor:pointer;transition:border-color .2s}.font-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3182ce;box-shadow:0 0 0 3px #3182ce1a}.range-input[_ngcontent-%COMP%]{flex:1;height:6px;border-radius:3px;background:#e2e8f0;outline:none;-webkit-appearance:none;appearance:none}.range-input[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:18px;height:18px;border-radius:50%;background:#3182ce;cursor:pointer;transition:transform .2s}.range-input[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2)}.range-input[_ngcontent-%COMP%]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:#3182ce;cursor:pointer;border:none;transition:transform .2s}.range-input[_ngcontent-%COMP%]::-moz-range-thumb:hover{transform:scale(1.2)}.color-input[_ngcontent-%COMP%]{width:60px;height:36px;border:1px solid #cbd5e0;border-radius:6px;cursor:pointer;padding:2px}.color-input[_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:0}.color-input[_ngcontent-%COMP%]::-webkit-color-swatch{border:none;border-radius:4px}.number-input[_ngcontent-%COMP%]{width:100px;padding:8px 12px;border:1px solid #cbd5e0;border-radius:6px;font-size:14px;text-align:right;transition:border-color .2s}.number-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3182ce;box-shadow:0 0 0 3px #3182ce1a}.number-input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .number-input[_ngcontent-%COMP%]::-webkit-outer-spin-button{opacity:1}.text-preview[_ngcontent-%COMP%]{min-height:80px;padding:16px;background-color:#f7fafc;border:2px dashed #cbd5e0;border-radius:6px;display:flex;align-items:center;justify-content:center;text-align:center;word-wrap:break-word}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0;display:flex;justify-content:flex-end;gap:12px}.btn-secondary[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{padding:10px 20px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;border:none}.btn-secondary[_ngcontent-%COMP%]:disabled, .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:#f7fafc;color:#4a5568;border:1px solid #cbd5e0}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#edf2f7}.btn-primary[_ngcontent-%COMP%]{background-color:#3182ce;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2c5282}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-30px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{width:95%;max-height:95vh}.control-group[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:auto}.control-group[_ngcontent-%COMP%]   .font-select[_ngcontent-%COMP%], .control-group[_ngcontent-%COMP%]   .range-input[_ngcontent-%COMP%]{width:100%}}'],changeDetection:0})};function go(o,t){if(o&1&&(r(0,"div",4)(1,"span",5),l(2,"\uD06C\uAE30:"),s(),r(3,"span",6),l(4),s()()),o&2){let e=p(2);c(4),T(e.formatFileSize(e.analysis.fileSize))}}function po(o,t){if(o&1&&(r(0,"div",4)(1,"span",5),l(2,"\uD3F0\uD2B8:"),s(),r(3,"span",6),l(4),s()()),o&2){let e=p(2);c(4),M("",e.analysis.uniqueFonts.length,"\uC885\uB958")}}function mo(o,t){if(o&1&&(r(0,"div",4)(1,"span",5),l(2,"\uACBD\uB85C:"),s(),r(3,"span",6),l(4),s()()),o&2){let e=p(3);c(4),M("",e.analysis.vectorSummary.totalPaths.toLocaleString()||0,"\uAC1C")}}function uo(o,t){if(o&1&&(r(0,"div",4)(1,"span",5),l(2,"\uC120:"),s(),r(3,"span",6),l(4),s()()),o&2){let e=p(3);c(4),M("",e.analysis.vectorSummary.totalLines.toLocaleString()||0,"\uAC1C")}}function fo(o,t){if(o&1&&(r(0,"div",3)(1,"h3"),l(2,"\u{1F3A8} \uBCA1\uD130 \uADF8\uB798\uD53D"),s(),r(3,"div",4)(4,"span",5),l(5,"\uC791\uC5C5:"),s(),r(6,"span",6),l(7),s()(),I(8,mo,5,1,"div",7)(9,uo,5,1,"div",7),s()),o&2){let e=p(2);c(7),M("",(e.analysis.totalVectorOperations==null?null:e.analysis.totalVectorOperations.toLocaleString())||0,"\uAC1C"),c(),u("ngIf",e.analysis.vectorSummary),c(),u("ngIf",e.analysis.vectorSummary)}}function ho(o,t){if(o&1&&(r(0,"div",4)(1,"span",5),l(2,"\uAC1C\uC218:"),s(),r(3,"span",6),l(4),s()()),o&2){let e=p(3);c(4),M("",e.analysis.imageInfo.totalImages,"\uAC1C")}}function Co(o,t){if(o&1&&(r(0,"div",4)(1,"span",5),l(2,"\uD398\uC774\uC9C0:"),s(),r(3,"span",6),l(4),s()()),o&2){let e=p(3);c(4),M("",e.analysis.imageInfo.pagesWithImages,"\uCABD")}}function _o(o,t){if(o&1&&(r(0,"div",3)(1,"h3"),l(2,"\u{1F5BC}\uFE0F \uC774\uBBF8\uC9C0"),s(),I(3,ho,5,1,"div",7)(4,Co,5,1,"div",7),s()),o&2){let e=p(2);c(3),u("ngIf",e.analysis.imageInfo),c(),u("ngIf",e.analysis.imageInfo)}}function xo(o,t){if(o&1&&(r(0,"div",3)(1,"h3"),l(2,"\u{1F310} \uC5B8\uC5B4 \uAC10\uC9C0"),s(),r(3,"div",4)(4,"span",5),l(5,"\uD55C\uAD6D\uC5B4:"),s(),r(6,"span",6),l(7),s()(),r(8,"div",4)(9,"span",5),l(10,"\uC601\uC5B4:"),s(),r(11,"span",6),l(12),s()(),r(13,"div",4)(14,"span",5),l(15,"\uD63C\uD569:"),s(),r(16,"span",6),l(17),s()()()),o&2){let e=p(2);c(7),M("",e.analysis.languageDetection.korean.toLocaleString()||0,"\uAC1C"),c(5),M("",e.analysis.languageDetection.english.toLocaleString()||0,"\uAC1C"),c(5),M("",e.analysis.languageDetection.mixed.toLocaleString()||0,"\uAC1C")}}function Po(o,t){if(o&1&&(r(0,"div",2)(1,"div",3)(2,"h3"),l(3,"\u{1F4C4} \uBB38\uC11C \uC815\uBCF4"),s(),r(4,"div",4)(5,"span",5),l(6,"\uD30C\uC77C\uBA85:"),s(),r(7,"span",6),l(8),s()(),r(9,"div",4)(10,"span",5),l(11,"\uD398\uC774\uC9C0:"),s(),r(12,"span",6),l(13),s()(),I(14,go,5,1,"div",7),s(),r(15,"div",3)(16,"h3"),l(17,"\u{1F4DD} \uD14D\uC2A4\uD2B8 \uBD84\uC11D"),s(),r(18,"div",4)(19,"span",5),l(20,"\uBB38\uC790:"),s(),r(21,"span",6),l(22),s()(),r(23,"div",4)(24,"span",5),l(25,"\uB2E8\uC5B4:"),s(),r(26,"span",6),l(27),s()(),r(28,"div",4)(29,"span",5),l(30,"\uD14D\uC2A4\uD2B8 \uD56D\uBAA9:"),s(),r(31,"span",6),l(32),s()(),I(33,po,5,1,"div",7),s(),I(34,fo,10,3,"div",8)(35,_o,5,2,"div",8)(36,xo,18,3,"div",8),s()),o&2){let e=p();c(8),T(e.analysis.fileName||"\uC54C \uC218 \uC5C6\uC74C"),c(5),M("",e.analysis.pageCount,"\uCABD"),c(),u("ngIf",e.analysis.fileSize),c(8),M("",e.analysis.totalCharacters.toLocaleString()||0,"\uAC1C"),c(5),M("",e.analysis.totalWords.toLocaleString()||0,"\uAC1C"),c(5),M("",e.analysis.totalTextItems.toLocaleString()||0,"\uAC1C"),c(),u("ngIf",e.analysis.uniqueFonts==null?null:e.analysis.uniqueFonts.length),c(),u("ngIf",e.analysis.hasVectorGraphics),c(),u("ngIf",e.analysis.hasImages),c(),u("ngIf",e.analysis.languageDetection)}}function bo(o,t){o&1&&(r(0,"div",9)(1,"p"),l(2,"\uBD84\uC11D \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),s()())}var St=class o{analysis=null;formatFileSize(t){if(t===0)return"0 Bytes";let e=1024,n=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,i)*100)/100+" "+n[i]}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=ae({type:o,selectors:[["shared-pdf-analysis-summary"]],inputs:{analysis:"analysis"},decls:2,vars:2,consts:[["class","analysis-summary",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"analysis-summary"],[1,"summary-section"],[1,"info-row"],[1,"label"],[1,"value"],["class","info-row",4,"ngIf"],["class","summary-section",4,"ngIf"],[1,"no-data"]],template:function(e,n){e&1&&I(0,Po,37,10,"div",0)(1,bo,3,0,"div",1),e&2&&(u("ngIf",n.analysis),c(),u("ngIf",!n.analysis))},dependencies:[ne,Pe],styles:['@charset "UTF-8";.analysis-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:16px;background:#f5f5f5;border-radius:8px}.summary-section[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:6px;box-shadow:0 1px 3px #0000001a}.summary-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;font-weight:600;color:#333}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.label[_ngcontent-%COMP%]{font-weight:500;color:#666}.value[_ngcontent-%COMP%]{font-weight:600;color:#333}.no-data[_ngcontent-%COMP%]{padding:40px;text-align:center;color:#999}@media (max-width: 768px){.analysis-summary[_ngcontent-%COMP%]{gap:12px;padding:12px}.summary-section[_ngcontent-%COMP%]{padding:12px}.summary-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.info-row[_ngcontent-%COMP%]{padding:6px 0;font-size:14px}}']})};function vo(o,t){if(o&1&&(r(0,"div",1),l(1),s()),o&2){let e=t.$implicit,n=p();H("left",e.x,"px")("top",e.y,"px")("width",e.width||100,"px")("height",e.height||20,"px")("font-family",n.getFontFamily(e))("font-size",n.getFontSize(e),"px")("color",n.getFontColor(e))("font-weight",n.getFontWeight(e))("font-style",n.getFontStyle(e)),q("viewer-mode",n.mode==="view"),c(),M(" ",e.text,`
`)}}var Et=class o{editors=[];mode="view";trackByFn;getFontFamily(t){return t.font?.name||"Arial"}getFontSize(t){return t.font?.size||14}getFontColor(t){return t.font?.color||"#000000"}getFontWeight(t){let e=t.font?.weight;return typeof e=="number"?e.toString():e||"normal"}getFontStyle(t){return t.font?.style||"normal"}trackByIndex(t,e){return this.trackByFn?this.trackByFn(t,e):t}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=ae({type:o,selectors:[["app-text-overlay"]],inputs:{editors:"editors",mode:"mode",trackByFn:"trackByFn"},decls:1,vars:2,consts:[["class","modified-text-overlay",3,"viewer-mode","left","top","width","height","font-family","font-size","color","font-weight","font-style",4,"ngFor","ngForOf","ngForTrackBy"],[1,"modified-text-overlay"]],template:function(e,n){e&1&&I(0,vo,2,21,"div",0),e&2&&u("ngForOf",n.editors)("ngForTrackBy",n.trackByFn||n.trackByIndex)},dependencies:[ne,Ve],styles:[".modified-text-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;white-space:pre-wrap;word-wrap:break-word;z-index:10}.modified-text-overlay.viewer-mode[_ngcontent-%COMP%]{z-index:15}"]})};function yo(o,t){if(o&1&&(r(0,"div",1),R(1,"div",2),r(2,"p",3),l(3),s()()),o&2){let e=p();c(3),T(e.message)}}var It=class o{message="PDF\uB97C \uBD88\uB7EC\uC624\uB294 \uC911...";visible=!0;static \u0275fac=function(e){return new(e||o)};static \u0275cmp=ae({type:o,selectors:[["app-loading-spinner"]],inputs:{message:"message",visible:"visible"},decls:1,vars:1,consts:[["class","loading-container",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"loading-text"]],template:function(e,n){e&1&&I(0,yo,4,1,"div",0),e&2&&u("ngIf",n.visible)},dependencies:[ne,Pe],styles:[".loading-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#fffffff2;z-index:9999}.loading-spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{margin-top:16px;font-size:14px;color:#666;font-weight:500}"]})};var kt=class o{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustHtml(t)}static \u0275fac=function(e){return new(e||o)(ge(bt,16))};static \u0275pipe=xt({name:"sanitizeHtml",type:o,pure:!0})};var Tt=class o{debugLogger=J(ze);constructor(){this.debugLogger.warn("Factory","PdfContentFactory is stubbed")}getStrategy(t){return null}getStrategyByType(t){return null}getAvailableTypes(t){return[]}getAvailableContentTypes(t){return[]}getStrategyInfo(t){return{type:t,label:this.getTypeLabel(t),icon:this.getTypeIcon(t),description:this.getTypeDescription(t)}}canGenerate(t,e){return!1}validate(t,e){return!1}getAllTypeStats(t){return[]}getTypeLabel(t){return t}getTypeIcon(t){return""}getTypeDescription(t){return""}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ft=class{debugSteps=[];calculate(t){let{transform:e,pageWidth:n,pageHeight:i,analysisScale:a=2,targetCoordinateSystem:d="canvas",enableDebugLog:g=!1}=t;this.debugSteps=[];let m=this.extractRawCoordinates(e);this.debugSteps.push(`Step 1: Transform \uCD94\uCD9C \u2192 x=${m.translateX}, y=${m.translateY}, w=${m.scaleX}, h=${m.scaleY}`);let h=this.applyScaleCorrection(m,a);this.debugSteps.push(`Step 2: \uC2A4\uCF00\uC77C \uBCF4\uC815 (x${h.scaleFactor}) \u2192 x=${h.x}, y=${h.y}, w=${h.width}, h=${h.height}`);let f=this.convertCoordinateSystem(h,i,d);return this.debugSteps.push(`Step 3: \uC88C\uD45C\uACC4 \uBCC0\uD658 (${d}) \u2192 x=${f.x}, y=${f.y}`),{x:f.x,y:f.y,width:f.width,height:f.height,metadata:{originalTransform:[...e],appliedScale:h.scaleFactor,coordinateSystem:d,calculationSteps:[...this.debugSteps]}}}extractRawCoordinates(t){if(!t||t.length<6)throw new Error(`Invalid transform array: ${t}`);return{scaleX:t[0],skewY:t[1],skewX:t[2],scaleY:t[3],translateX:t[4],translateY:t[5]}}applyScaleCorrection(t,e){let n=1/e;return{x:t.translateX*n,y:t.translateY*n,width:Math.abs(t.scaleX)*n,height:Math.abs(t.scaleY)*n,scaleFactor:n}}convertCoordinateSystem(t,e,n){return n==="canvas"?{x:t.x,y:e-t.y-t.height,width:t.width,height:t.height,coordinateSystem:"canvas"}:{x:t.x,y:t.y,width:t.width,height:t.height,coordinateSystem:"pdf"}}validate(t,e){let n=[],i=[];t.x<0&&n.push(`X \uC88C\uD45C\uAC00 \uC74C\uC218\uC785\uB2C8\uB2E4: ${t.x}`),t.x>e.width&&i.push(`X \uC88C\uD45C\uAC00 \uD398\uC774\uC9C0 \uB108\uBE44\uB97C \uCD08\uACFC\uD569\uB2C8\uB2E4: ${t.x} > ${e.width}`),t.y<0&&n.push(`Y \uC88C\uD45C\uAC00 \uC74C\uC218\uC785\uB2C8\uB2E4: ${t.y}`),t.y>e.height&&i.push(`Y \uC88C\uD45C\uAC00 \uD398\uC774\uC9C0 \uB192\uC774\uB97C \uCD08\uACFC\uD569\uB2C8\uB2E4: ${t.y} > ${e.height}`),t.width<=0&&n.push(`\uB108\uBE44\uAC00 0 \uC774\uD558\uC785\uB2C8\uB2E4: ${t.width}`),t.height<=0&&n.push(`\uB192\uC774\uAC00 0 \uC774\uD558\uC785\uB2C8\uB2E4: ${t.height}`),t.x+t.width>e.width&&i.push(`\uC774\uBBF8\uC9C0\uAC00 \uD398\uC774\uC9C0 \uC624\uB978\uCABD \uBC16\uC73C\uB85C \uB098\uAC11\uB2C8\uB2E4: ${t.x+t.width} > ${e.width}`),t.y+t.height>e.height&&i.push(`\uC774\uBBF8\uC9C0\uAC00 \uD398\uC774\uC9C0 \uC544\uB798\uCABD \uBC16\uC73C\uB85C \uB098\uAC11\uB2C8\uB2E4: ${t.y+t.height} > ${e.height}`);let a;return i.length>0&&(a=pe(Y({},t),{x:Math.max(0,Math.min(t.x,e.width-t.width)),y:Math.max(0,Math.min(t.y,e.height-t.height)),width:Math.min(t.width,e.width),height:Math.min(t.height,e.height)})),{isValid:n.length===0,errors:n,warnings:i,normalizedCoordinates:a}}getDebugInfo(){return{steps:[...this.debugSteps],timestamp:new Date().toISOString()}}};var rt=class o{debugLogger=J(ze);coordinateCalculator=new Ft;extractFromAnalysisData(t,e={}){let{preferOriginal:n=!0,pageNumbers:i=null,analysisScale:a=1}=e,d=[],g=new Map;if(!t?.imageInfo?.images)return{images:[],totalCount:0,pageMap:g};for(let m of t.imageInfo.images){if(!m.images||!Array.isArray(m.images))continue;let h=m.pageNumber||1,f=m.pageHeight||842;if(!(i&&!i.includes(h)))for(let C of m.images){C._logged||(this.debugLogger.info("\uC774\uBBF8\uC9C0\uBD84\uC11D",`\u{1F5BC}\uFE0F [${C.name}] \uC6D0\uBCF8 \uB370\uC774\uD130 \uBD84\uC11D`),this.debugLogger.info("\uC774\uBBF8\uC9C0\uBD84\uC11D",`   \uD06C\uAE30: width=${C.width}, height=${C.height}`),this.debugLogger.info("\uC774\uBBF8\uC9C0\uBD84\uC11D",`   transform: [${C.transform?.join(", ")||"\uC5C6\uC74C"}]`),this.debugLogger.info("\uC774\uBBF8\uC9C0\uBD84\uC11D",`   \uD398\uC774\uC9C0 \uD06C\uAE30: ${C.pageWidth||"?"} x ${C.pageHeight||"?"} pt`),C.x!==void 0&&C.y!==void 0?this.debugLogger.info("\uC774\uBBF8\uC9C0\uBD84\uC11D",`   \u2705 \uC6D0\uBCF8 \uC88C\uD45C \uC788\uC74C: x=${C.x}, y=${C.y}`):this.debugLogger.warn("\uC774\uBBF8\uC9C0\uBD84\uC11D","   \u26A0\uFE0F \uC6D0\uBCF8 \uC88C\uD45C \uC5C6\uC74C - transform\uC5D0\uC11C \uACC4\uC0B0 \uD544\uC694"),C.position&&this.debugLogger.info("\uC774\uBBF8\uC9C0\uBD84\uC11D",`   position: x=${C.position.x}, y=${C.position.y}`),C._logged=!0);let _=this.extractSingleImage(C,h,f,n,a);_&&(d.push(_),g.has(h)||g.set(h,[]),g.get(h).push(_))}}return{images:d,totalCount:d.length,pageMap:g}}extractSingleImage(t,e,n,i,a=1){let d=i?t.dataUrl||t.thumbnail||t.originalImage||t.data||t.src:t.thumbnail||t.dataUrl||t.originalImage||t.data||t.src;if(!d)return this.debugLogger.warn("\uC774\uBBF8\uC9C0\uBD84\uC11D",`\u26A0\uFE0F \uC774\uBBF8\uC9C0 \uB370\uC774\uD130 \uC5C6\uC74C: ${t.name}`),null;let g=t.pdfWidth||t.width,m=t.pdfHeight||t.height;if(t.x!==void 0&&t.y!==void 0&&g!==void 0&&m!==void 0){let x=t.detectedScaleFactor||1,P;return x>1&&t.yFromTop!==void 0?(P=t.yFromTop,this.debugLogger.info("\uC774\uBBF8\uC9C0\uBD84\uC11D",`\u2705 [${x}x \uC2A4\uCF00\uC77C] yFromTop \uC0AC\uC6A9: ${t.name}, y=${P}`)):(P=t.y,this.debugLogger.info("\uC774\uBBF8\uC9C0\uBD84\uC11D",`\u2705 [\uC815\uC0C1 \uC2A4\uCF00\uC77C] y \uC0AC\uC6A9: ${t.name}, y=${P}`)),{id:`img-${e}-${t.name||Date.now()}`,name:t.name||"unknown",pageNumber:e,src:d,x:t.x,y:P,width:g,height:m,transform:t.transform}}let h=t.transform;if(!h||h.length<6)return this.debugLogger.warn("\uC774\uBBF8\uC9C0\uBD84\uC11D",`\u26A0\uFE0F \uC88C\uD45C \uC815\uBCF4 \uC5C6\uC74C (x/y/width/height \uBC0F transform \uBAA8\uB450 \uC5C6\uC74C): ${t.name}`),null;let f=t.pageWidth||595,C=t.pageHeight||n,{x:_,y,width:S,height:D}=this.calculateImagePosition(h,f,C,a);return{id:`img-${e}-${t.name||Date.now()}`,name:t.name||"unknown",pageNumber:e,src:d,x:_,y,width:S,height:D,transform:h}}calculateImagePosition(t,e,n,i=1){let a=this.coordinateCalculator.calculate({transform:t,pageWidth:e,pageHeight:n,analysisScale:i,targetCoordinateSystem:"canvas",enableDebugLog:!0});return{x:a.x,y:a.y,width:a.width,height:a.height}}calculateImagePositionForPdfLib(t,e,n=595){let i=Math.abs(t[0]),a=Math.abs(t[3]),d=t[4],g=t[5];this.debugLogger.info("\uC88C\uD45C\uBCC0\uD658",`\u{1F50D} Transform \uC6D0\uBCF8: [${t.map(S=>S.toFixed(2)).join(", ")}]`),this.debugLogger.info("\uC88C\uD45C\uBCC0\uD658",`   PDF \uD398\uC774\uC9C0 \uD06C\uAE30: ${n.toFixed(0)} x ${e.toFixed(0)} pt`);let m=d,h=g,f=i,C=a,_=595,y=842;if(n>_*1.5||e>y*1.5){let S=n/_,D=e/y,x=Math.max(S,D);m=d/x,h=g/x,f=i/x,C=a/x,this.debugLogger.warn("\uC88C\uD45C\uBCC0\uD658",`   \u26A0\uFE0F PDF \uD398\uC774\uC9C0\uAC00 A4\uBCF4\uB2E4 \uD07C - \uC2A4\uCF00\uC77C \uBCF4\uC815 \uC801\uC6A9: \xF7${x.toFixed(2)}`)}return this.debugLogger.info("\uC88C\uD45C\uBCC0\uD658",`   \u2705 \uCD5C\uC885 \uC88C\uD45C: x=${m.toFixed(2)}pt, y=${h.toFixed(2)}pt, w=${f.toFixed(2)}pt, h=${C.toFixed(2)}pt`),{x:m,y:h,width:f,height:C}}base64ToUint8Array(t){let e=t.includes(",")?t.split(",")[1]:t;return Uint8Array.from(atob(e),n=>n.charCodeAt(0))}getImageType(t){return t.startsWith("data:image/jpeg")||t.startsWith("data:image/jpg")?"jpeg":"png"}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};function Oo(o,t){if(o&1&&(r(0,"span",9),l(1),s()),o&2){let e=p();c(),T(e.icon)}}function wo(o,t){if(o&1){let e=L();r(0,"button",10),w("click",function(i){return b(e),p().onViewOriginal(),v(i.stopPropagation())}),l(1," \u{1F4C4} "),s()}}function Do(o,t){if(o&1){let e=L();r(0,"button",11),w("click",function(i){return b(e),p().onNewDocument(),v(i.stopPropagation())}),l(1),s()}if(o&2){let e=p();u("title",e.newDocumentButtonTitle||"\uC0C8 \uBB38\uC11C"),c(),M(" ",e.newDocumentButtonText||"\u2795"," ")}}function So(o,t){if(o&1){let e=L();r(0,"button",11),w("click",function(i){return b(e),p().toggleMinimize(),v(i.stopPropagation())}),l(1),s()}if(o&2){let e=p();u("title",e.isMinimized?"\uD3BC\uCE58\uAE30":"\uCD5C\uC18C\uD654"),c(),M(" ",e.isMinimized?"\u25BC":"\u25B2"," ")}}function Eo(o,t){if(o&1){let e=L();r(0,"button",12),w("click",function(i){return b(e),p().onClose(),v(i.stopPropagation())}),l(1," \u2715 "),s()}}var At=class o{title="";icon="";minimizable=!0;closable=!0;isMinimized=!1;isDraggable=!1;showViewOriginalButton=!1;showNewDocumentButton=!1;newDocumentButtonText="\u2795";newDocumentButtonTitle="\uC0C8 \uBB38\uC11C";minimize=new $;close=new $;dragStart=new $;viewOriginal=new $;newDocument=new $;toggleMinimize(){this.isMinimized=!this.isMinimized,this.minimize.emit(this.isMinimized)}onClose(){this.close.emit()}onDragStart(t){this.isDraggable&&this.dragStart.emit(t)}onViewOriginal(){this.viewOriginal.emit()}onNewDocument(){this.newDocument.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=ae({type:o,selectors:[["app-pdf-draggable-header"]],inputs:{title:"title",icon:"icon",minimizable:"minimizable",closable:"closable",isMinimized:"isMinimized",isDraggable:"isDraggable",showViewOriginalButton:"showViewOriginalButton",showNewDocumentButton:"showNewDocumentButton",newDocumentButtonText:"newDocumentButtonText",newDocumentButtonTitle:"newDocumentButtonTitle"},outputs:{minimize:"minimize",close:"close",dragStart:"dragStart",viewOriginal:"viewOriginal",newDocument:"newDocument"},decls:11,vars:8,consts:[[1,"draggable-header",3,"mousedown"],[1,"header-content"],[1,"header-title"],["class","header-icon",4,"ngIf"],[1,"header-text"],[1,"header-actions"],["class","header-btn","title","\uC6D0\uBCF8 \uBCF4\uAE30",3,"click",4,"ngIf"],["class","header-btn",3,"title","click",4,"ngIf"],["class","header-btn close-btn","title","\uB2EB\uAE30",3,"click",4,"ngIf"],[1,"header-icon"],["title","\uC6D0\uBCF8 \uBCF4\uAE30",1,"header-btn",3,"click"],[1,"header-btn",3,"click","title"],["title","\uB2EB\uAE30",1,"header-btn","close-btn",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0),w("mousedown",function(a){return n.onDragStart(a)}),r(1,"div",1)(2,"div",2),I(3,Oo,2,1,"span",3),r(4,"span",4),l(5),s()(),r(6,"div",5),I(7,wo,2,0,"button",6)(8,Do,2,2,"button",7)(9,So,2,2,"button",7)(10,Eo,2,0,"button",8),s()()()),e&2&&(q("minimized",n.isMinimized),c(3),u("ngIf",n.icon),c(2),T(n.title),c(2),u("ngIf",n.showViewOriginalButton),c(),u("ngIf",n.showNewDocumentButton),c(),u("ngIf",n.minimizable),c(),u("ngIf",n.closable))},dependencies:[ne,Pe],styles:[".draggable-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:12px 16px;border-radius:8px 8px 0 0;cursor:move;-webkit-user-select:none;user-select:none;transition:all .3s ease}.draggable-header.minimized[_ngcontent-%COMP%]{border-radius:8px}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:600;font-size:14px}.header-icon[_ngcontent-%COMP%]{font-size:18px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.header-btn[_ngcontent-%COMP%]{background:#fff3;border:none;color:#fff;width:24px;height:24px;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;transition:background .2s}.header-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.close-btn[_ngcontent-%COMP%]:hover{background:#f009}"]})};function Io(o,t){if(o&1){let e=L();r(0,"app-pdf-draggable-header",9),w("dragStart",function(i){b(e);let a=p(2);return v(a.onDragStart(i))})("minimize",function(){b(e);let i=p(2);return v(i.toggleMinimize())})("viewOriginal",function(){b(e);let i=p(2);return v(i.viewOriginalDocument())})("newDocument",function(){b(e);let i=p(2);return v(i.createNewDocument())})("close",function(){b(e);let i=p(2);return v(i.close())}),s()}if(o&2){let e=p(2);u("isDraggable",!0)("isMinimized",e.isMinimized)("showViewOriginalButton",!0)("showNewDocumentButton",!0)("newDocumentButtonText",e.newDocumentButtonText)("newDocumentButtonTitle",e.newDocumentButtonTitle)}}function ko(o,t){if(o&1&&(Qe(0),r(1,"span",17),l(2),s(),et()),o&2){let e=p(3);c(2),M(" - \uD398\uC774\uC9C0 ",e.analyzedPage," ")}}function To(o,t){if(o&1&&(Qe(0),r(1,"span",17),l(2),s(),et()),o&2){let e=p(3);c(2),M(" - \uD398\uC774\uC9C0 ",e.analysisData.pages[0].pageNumber," ")}}function Fo(o,t){if(o&1){let e=L();r(0,"div",10)(1,"div",11)(2,"div",12),l(3,"\u{1F4CA}"),s(),r(4,"h3",13),l(5," PDF \uBD84\uC11D \uC815\uBCF4 "),I(6,ko,3,1,"ng-container",14)(7,To,3,1,"ng-container",14),s()(),r(8,"div",15)(9,"button",16),w("click",function(){b(e);let i=p(2);return v(i.close())}),l(10,"\u2715"),s()()()}if(o&2){let e=p(2);c(6),u("ngIf",e.analyzedPage),c(),u("ngIf",!e.analyzedPage&&e.analysisData&&e.analysisData.pages&&e.analysisData.pages.length>0)}}function Ao(o,t){if(o&1&&(r(0,"option",33),l(1),s()),o&2){let e=t.$implicit;u("value",e),c(),M(" ",e," \uD398\uC774\uC9C0 ")}}function Bo(o,t){if(o&1&&(r(0,"div",49)(1,"div",50)(2,"span",51),l(3),s(),r(4,"span",52),l(5),s()(),r(6,"div",53)(7,"span",54),l(8),s(),r(9,"span",55),l(10),s(),r(11,"span",56),l(12),s(),r(13,"span",57),l(14),s()()()),o&2){let e=t.$implicit,n=t.index,i=p(7);c(3),M("",n+1,"."),c(),u("title",e.text),c(),M('"',i.truncateText(e.text,50),'"'),c(3),T(e.font),c(2),M("",e.fontSize,"pt"),c(),H("background-color",e.color),c(),T(e.color),c(2),le("x:",i.Math.round((e.position==null?null:e.position.x)||0),", y:",i.Math.round((e.position==null?null:e.position.y)||0))}}function Vo(o,t){if(o&1){let e=L();r(0,"div",58)(1,"button",59),w("click",function(){b(e);let i=p(7);return v(i.loadMoreTextItems())}),l(2),s()()}if(o&2){let e=p(7);c(2),M(" \uB354 \uBCF4\uAE30 (",e.getRemainingTextItemsCount(),"\uAC1C \uB0A8\uC74C) ")}}function zo(o,t){if(o&1&&(r(0,"div",46),I(1,Bo,15,10,"div",47)(2,Vo,3,1,"div",48),s()),o&2){let e=p(6);c(),u("ngForOf",e.getAnalysisPageTextItems()),c(),u("ngIf",e.hasMoreTextItems())}}function $o(o,t){if(o&1){let e=L();r(0,"div",36)(1,"div",37),l(2,"\u{1F4DD} \uD14D\uC2A4\uD2B8 \uC815\uBCF4"),s(),r(3,"div",38)(4,"div",39)(5,"span",40),l(6,"\uD14D\uC2A4\uD2B8 \uD56D\uBAA9:"),s(),r(7,"span",41),l(8),s()(),r(9,"div",39)(10,"span",40),l(11,"\uC0AC\uC6A9\uB41C \uD3F0\uD2B8:"),s(),r(12,"span",41),l(13),s()()(),r(14,"div",43)(15,"div",44),w("click",function(){b(e);let i=p(5);return v(i.togglePageTextItems())}),r(16,"span",20),l(17),s(),r(18,"span"),l(19),s()(),I(20,zo,3,2,"div",45),s()()}if(o&2){let e,n,i=p(5);c(8),M("",((e=i.getSelectedPageTextInfo().textItems)==null?null:e.length)||0,"\uAC1C"),c(5),M("",i.getSelectedPageFonts().length,"\uC885"),c(4),T(i.showPageTextItems?"\u25BC":"\u25B6"),c(2),M("\uD14D\uC2A4\uD2B8 \uD56D\uBAA9 \uC0C1\uC138 (",((n=i.getSelectedPageTextInfo().textItems)==null?null:n.length)||0,"\uAC1C)"),c(),u("ngIf",i.showPageTextItems)}}function Lo(o,t){if(o&1&&(r(0,"div",39)(1,"span",40),l(2,"\uD328\uC2A4:"),s(),r(3,"span",41),l(4),s()()),o&2){let e=p(6);c(4),M("",e.getSelectedPageVectorInfo().statistics.paths,"\uAC1C")}}function No(o,t){if(o&1&&(r(0,"div",39)(1,"span",40),l(2,"\uC120:"),s(),r(3,"span",41),l(4),s()()),o&2){let e=p(6);c(4),M("",e.getSelectedPageVectorInfo().statistics.lines,"\uAC1C")}}function Ro(o,t){if(o&1&&(r(0,"div",39)(1,"span",40),l(2,"\uACE1\uC120:"),s(),r(3,"span",41),l(4),s()()),o&2){let e=p(6);c(4),M("",e.getSelectedPageVectorInfo().statistics.curves,"\uAC1C")}}function jo(o,t){if(o&1&&(r(0,"div",39)(1,"span",40),l(2,"\uC0AC\uAC01\uD615:"),s(),r(3,"span",41),l(4),s()()),o&2){let e=p(6);c(4),M("",e.getSelectedPageVectorInfo().statistics.rectangles,"\uAC1C")}}function Wo(o,t){if(o&1){let e=L();r(0,"div",62)(1,"div",63)(2,"span"),l(3,"\u{1F5BC}\uFE0F \uBCA1\uD130 \uBBF8\uB9AC\uBCF4\uAE30"),s(),r(4,"button",64),w("click",function(){b(e);let i=p(6);return v(i.showVectorDetailForPage(i.selectedAnalysisPage))}),l(5," \uD655\uB300 \uBCF4\uAE30 "),s()(),R(6,"div",65),ft(7,"sanitizeHtml"),s()}if(o&2){let e=p(6);c(6),u("innerHTML",ht(7,1,e.getSelectedPageVectorSvg()),mt)}}function Go(o,t){if(o&1&&(r(0,"div",36)(1,"div",37),l(2,"\u{1F3A8} \uBCA1\uD130 \uADF8\uB798\uD53D"),s(),r(3,"div",38)(4,"div",39)(5,"span",40),l(6,"\uCD1D \uC5F0\uC0B0:"),s(),r(7,"span",41),l(8),s()(),I(9,Lo,5,1,"div",60)(10,No,5,1,"div",60)(11,Ro,5,1,"div",60)(12,jo,5,1,"div",60),s(),I(13,Wo,8,3,"div",61),s()),o&2){let e,n,i,a,d=p(5);c(8),M("",d.getSelectedPageVectorInfo().totalOperations||0,"\uAC1C"),c(),u("ngIf",(e=d.getSelectedPageVectorInfo().statistics)==null?null:e.paths),c(),u("ngIf",(n=d.getSelectedPageVectorInfo().statistics)==null?null:n.lines),c(),u("ngIf",(i=d.getSelectedPageVectorInfo().statistics)==null?null:i.curves),c(),u("ngIf",(a=d.getSelectedPageVectorInfo().statistics)==null?null:a.rectangles),c(),u("ngIf",d.getSelectedPageVectorSvg())}}function Ho(o,t){if(o&1&&(r(0,"span",87),l(1),s()),o&2){let e=p(7);c(),M(" \uC804\uCCB4\uD398\uC774\uC9C0 ",e.getPageImageStats().bySize.fullpage," ")}}function Uo(o,t){if(o&1&&(r(0,"span",88),l(1),s()),o&2){let e=p(7);c(),M(" \uB300\uD615 ",e.getPageImageStats().bySize.large," ")}}function Yo(o,t){if(o&1&&(r(0,"span",89),l(1),s()),o&2){let e=p(7);c(),M(" \uC911\uD615 ",e.getPageImageStats().bySize.medium," ")}}function Xo(o,t){if(o&1&&(r(0,"span",90),l(1),s()),o&2){let e=p(7);c(),M(" \uC18C\uD615 ",e.getPageImageStats().bySize.small," ")}}function qo(o,t){if(o&1&&(r(0,"span",91),l(1),s()),o&2){let e=p(7);c(),M(" \uC378\uB124\uC77C ",e.getPageImageStats().bySize.thumbnail," ")}}function Ko(o,t){if(o&1&&(r(0,"span",92),l(1),s()),o&2){let e=p(7);c(),M(" \uC544\uC774\uCF58 ",e.getPageImageStats().bySize.icon," ")}}function Jo(o,t){if(o&1&&(r(0,"span",93),l(1),s()),o&2){let e=p(7);c(),M(" \uC778\uC1C4\uC6A9 ",e.getPageImageStats().byQuality.print," ")}}function Zo(o,t){if(o&1&&(r(0,"span",94),l(1),s()),o&2){let e=p(7);c(),M(" \uC591\uD638 ",e.getPageImageStats().byQuality.good," ")}}function Qo(o,t){if(o&1&&(r(0,"span",95),l(1),s()),o&2){let e=p(7);c(),M(" \uD654\uBA74\uC6A9 ",e.getPageImageStats().byQuality.screen," ")}}function ea(o,t){if(o&1&&(r(0,"span",96),l(1),s()),o&2){let e=p(7);c(),M(" \uC800\uD488\uC9C8 ",e.getPageImageStats().byQuality.low," ")}}function ta(o,t){if(o&1&&(r(0,"span"),l(1),s()),o&2){let e=p(7);c(),M(" \uD3C9\uADE0 ",e.getPageImageStats().averageDpi," DPI ")}}function na(o,t){if(o&1&&(r(0,"span",97),l(1),s()),o&2){let e=p(7);c(),M(" \u26A0\uFE0F ",e.getPageImageStats().scaledImages,"\uAC1C \uC2A4\uCF00\uC77C \uC870\uC815\uB428 ")}}function ia(o,t){if(o&1&&(r(0,"div",69)(1,"div",70),l(2,"\u{1F4CA} \uC774\uBBF8\uC9C0 \uBD84\uB958 \uD1B5\uACC4"),s(),r(3,"div",71)(4,"div",72)(5,"div",73),l(6,"\u{1F4D0} \uD06C\uAE30\uBCC4"),s(),r(7,"div",74),I(8,Ho,2,1,"span",75)(9,Uo,2,1,"span",76)(10,Yo,2,1,"span",77)(11,Xo,2,1,"span",78)(12,qo,2,1,"span",79)(13,Ko,2,1,"span",80),s()(),r(14,"div",72)(15,"div",73),l(16,"\u{1F3A8} \uD488\uC9C8\uBCC4"),s(),r(17,"div",74),I(18,Jo,2,1,"span",81)(19,Zo,2,1,"span",82)(20,Qo,2,1,"span",83)(21,ea,2,1,"span",84),s()(),r(22,"div",72)(23,"div",73),l(24,"\u{1F4C8} \uCD94\uAC00 \uC815\uBCF4"),s(),r(25,"div",85),I(26,ta,2,1,"span",14)(27,na,2,1,"span",86),s()()()()),o&2){let e=p(6);c(8),u("ngIf",e.getPageImageStats().bySize.fullpage>0),c(),u("ngIf",e.getPageImageStats().bySize.large>0),c(),u("ngIf",e.getPageImageStats().bySize.medium>0),c(),u("ngIf",e.getPageImageStats().bySize.small>0),c(),u("ngIf",e.getPageImageStats().bySize.thumbnail>0),c(),u("ngIf",e.getPageImageStats().bySize.icon>0),c(5),u("ngIf",e.getPageImageStats().byQuality.print>0),c(),u("ngIf",e.getPageImageStats().byQuality.good>0),c(),u("ngIf",e.getPageImageStats().byQuality.screen>0),c(),u("ngIf",e.getPageImageStats().byQuality.low>0),c(5),u("ngIf",e.getPageImageStats().averageDpi>0),c(),u("ngIf",e.getPageImageStats().scaledImages>0)}}function oa(o,t){if(o&1&&(r(0,"span",127),l(1),s()),o&2){let e=p().$implicit;c(),T(e.name)}}function aa(o,t){if(o&1&&(r(0,"div",128),R(1,"img",129),s()),o&2){let e=p(),n=e.$implicit,i=e.index;c(),u("src",n.dataUrl,Te)("alt","\uC774\uBBF8\uC9C0 "+(i+1))}}function ra(o,t){o&1&&(r(0,"div",130)(1,"span"),l(2,"\u{1F5BC}\uFE0F"),s()())}function sa(o,t){if(o&1&&(r(0,"div",114)(1,"span",115),l(2,"\uC2A4\uCF00\uC77C \uC870\uC815:"),s(),r(3,"span",131),l(4),s(),r(5,"span",117),l(6),s()()),o&2){let e=p().$implicit,n=p(7);c(4),M("",n.getImageScaleInfo(e).scaleFactor,"x"),c(2),T(n.getImageScaleInfo(e).description)}}function la(o,t){if(o&1&&(r(0,"div",135)(1,"span",123),l(2,"scaleX:"),s(),r(3,"span",124),l(4),s()()),o&2){let e=p(2).$implicit,n=p(7);c(4),T(n.formatCoordinate(e.transform[0]))}}function ca(o,t){if(o&1&&(r(0,"div",135)(1,"span",123),l(2,"scaleY:"),s(),r(3,"span",124),l(4),s()()),o&2){let e=p(2).$implicit,n=p(7);c(4),T(n.formatCoordinate(e.transform[3]))}}function da(o,t){if(o&1&&(r(0,"div",135)(1,"span",123),l(2,"translateX:"),s(),r(3,"span",124),l(4),s()()),o&2){let e=p(2).$implicit,n=p(7);c(4),T(n.formatCoordinate(e.transform[4]))}}function ga(o,t){if(o&1&&(r(0,"div",135)(1,"span",123),l(2,"translateY:"),s(),r(3,"span",124),l(4),s()()),o&2){let e=p(2).$implicit,n=p(7);c(4),T(n.formatCoordinate(e.transform[5]))}}function pa(o,t){if(o&1&&(r(0,"div",120)(1,"div",112),l(2,"\u{1F504} Transform \uB9E4\uD2B8\uB9AD\uC2A4"),s(),r(3,"div",132)(4,"code"),l(5),s()(),r(6,"div",133),I(7,la,5,1,"div",134)(8,ca,5,1,"div",134)(9,da,5,1,"div",134)(10,ga,5,1,"div",134),s()()),o&2){let e=p().$implicit,n=p(7);c(5),T(n.formatTransform(e.transform||e.originalTransform)),c(2),u("ngIf",e.transform),c(),u("ngIf",e.transform),c(),u("ngIf",e.transform),c(),u("ngIf",e.transform)}}function ma(o,t){if(o&1&&(r(0,"li"),l(1),s()),o&2){let e=t.$implicit;c(),T(e)}}function ua(o,t){if(o&1&&(r(0,"div",136)(1,"div",137),l(2,"\u26A0\uFE0F \uBB38\uC81C \uAC10\uC9C0"),s(),r(3,"ul",138),I(4,ma,2,1,"li",139),s()()),o&2){let e=p().$implicit,n=p(7);c(4),u("ngForOf",n.getImageWarnings(e))}}function fa(o,t){if(o&1&&(r(0,"div",100)(1,"div",101)(2,"span",102),l(3),s(),I(4,oa,2,1,"span",103),r(5,"div",104)(6,"span",105),l(7),s(),r(8,"span",106),l(9),s(),r(10,"span",107),l(11),s()()(),r(12,"div",108),I(13,aa,2,2,"div",109)(14,ra,3,0,"div",110),s(),r(15,"div",111)(16,"div",112),l(17,"\u{1F3F7}\uFE0F \uC774\uBBF8\uC9C0 \uBD84\uB958"),s(),r(18,"div",113)(19,"div",114)(20,"span",115),l(21,"\uD06C\uAE30 \uC720\uD615:"),s(),r(22,"span",116),l(23),s(),r(24,"span",117),l(25),s()(),r(26,"div",114)(27,"span",115),l(28,"\uBC30\uCE58 \uC704\uCE58:"),s(),r(29,"span",116),l(30),s(),r(31,"span",117),l(32),s()(),r(33,"div",114)(34,"span",115),l(35,"\uC885\uD6A1\uBE44:"),s(),r(36,"span",116),l(37),s(),r(38,"span",117),l(39),s()(),r(40,"div",114)(41,"span",115),l(42,"\uC774\uBBF8\uC9C0 \uD488\uC9C8:"),s(),r(43,"span",118),l(44),s(),r(45,"span",117),l(46),s()(),I(47,sa,7,2,"div",119),s()(),r(48,"div",120)(49,"div",112),l(50,"\u{1F4D0} \uC6D0\uBCF8 \uC774\uBBF8\uC9C0 \uD06C\uAE30"),s(),r(51,"div",121)(52,"div",122)(53,"span",123),l(54,"\uB108\uBE44:"),s(),r(55,"span",124),l(56),s()(),r(57,"div",122)(58,"span",123),l(59,"\uB192\uC774:"),s(),r(60,"span",124),l(61),s()()()(),r(62,"div",120)(63,"div",112),l(64,"\u{1F4CD} PDF \uBC30\uCE58 \uC88C\uD45C (pt)"),s(),r(65,"div",121)(66,"div",122)(67,"span",123),l(68,"X (\uC67C\uCABD \uAE30\uC900):"),s(),r(69,"span",124),l(70),s()(),r(71,"div",122)(72,"span",123),l(73,"Y (\uD558\uB2E8 \uAE30\uC900):"),s(),r(74,"span",124),l(75),s()(),r(76,"div",122)(77,"span",123),l(78,"Y (\uC0C1\uB2E8 \uAE30\uC900):"),s(),r(79,"span",124),l(80),s()(),r(81,"div",122)(82,"span",123),l(83,"\uB80C\uB354\uB9C1 \uB108\uBE44:"),s(),r(84,"span",124),l(85),s()(),r(86,"div",122)(87,"span",123),l(88,"\uB80C\uB354\uB9C1 \uB192\uC774:"),s(),r(89,"span",124),l(90),s()()()(),I(91,pa,11,5,"div",125),r(92,"div",120)(93,"div",112),l(94,"\u{1F4C4} \uD398\uC774\uC9C0 \uC815\uBCF4"),s(),r(95,"div",121)(96,"div",122)(97,"span",123),l(98,"\uD398\uC774\uC9C0 \uB108\uBE44:"),s(),r(99,"span",124),l(100),s()(),r(101,"div",122)(102,"span",123),l(103,"\uD398\uC774\uC9C0 \uB192\uC774:"),s(),r(104,"span",124),l(105),s()()()(),I(106,ua,5,1,"div",126),s()),o&2){let e=t.$implicit,n=t.index,i=p(7);c(3),M("\uC774\uBBF8\uC9C0 ",n+1),c(),u("ngIf",e.name),c(2),H("background-color",i.getImageSizeCategory(e).color),c(),M(" ",i.getImageSizeCategory(e).label," "),c(),u("ngClass",i.getImageQualityCategory(e).type),c(),M(" ",i.getImageQualityCategory(e).label," "),c(2),M(" ",i.getImageAspectRatioCategory(e).label," "),c(2),u("ngIf",e.dataUrl),c(),u("ngIf",!e.dataUrl),c(8),H("color",i.getImageSizeCategory(e).color),c(),M(" ",i.getImageSizeCategory(e).label," "),c(2),T(i.getImageSizeCategory(e).description),c(5),T(i.getImagePositionCategory(e).label),c(2),T(i.getImagePositionCategory(e).description),c(5),le("",i.getImageAspectRatioCategory(e).label," (",i.getImageAspectRatioCategory(e).ratio,")"),c(2),T(i.getImageAspectRatioCategory(e).description),c(4),u("ngClass","quality-"+i.getImageQualityCategory(e).type),c(),le(" ",i.getImageQualityCategory(e).label," (",i.getImageQualityCategory(e).dpi," DPI) "),c(2),T(i.getImageQualityCategory(e).description),c(),u("ngIf",i.getImageScaleInfo(e).isScaled),c(9),M("",e.originalWidth||"N/A","px"),c(5),M("",e.originalHeight||"N/A","px"),c(8),q("warning",i.isCoordinateWarning(e,"x")),c(),M(" ",i.formatCoordinate(e.x)," "),c(4),q("warning",i.isCoordinateWarning(e,"y")),c(),M(" ",i.formatCoordinate(e.y)," "),c(5),M(" ",i.formatCoordinate(e.yFromTop)," "),c(4),q("warning",i.isCoordinateWarning(e,"width")),c(),M(" ",i.formatCoordinate(e.pdfWidth),"pt "),c(4),q("warning",i.isCoordinateWarning(e,"height")),c(),M(" ",i.formatCoordinate(e.pdfHeight),"pt "),c(),u("ngIf",e.transform||e.originalTransform),c(9),M("",e.pageWidth||"N/A","pt"),c(5),M("",e.pageHeight||"N/A","pt"),c(),u("ngIf",i.getImageWarnings(e).length>0)}}function ha(o,t){if(o&1&&(r(0,"div",98),I(1,fa,107,43,"div",99),s()),o&2){let e=p(6);c(),u("ngForOf",e.getSelectedPageImages())}}function Ca(o,t){o&1&&(r(0,"div",140)(1,"span"),l(2,"\uC774 \uD398\uC774\uC9C0\uC5D0 \uC774\uBBF8\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),s()())}function _a(o,t){if(o&1&&(r(0,"div",36)(1,"div",37),l(2),s(),I(3,ia,28,12,"div",66)(4,ha,2,1,"div",67)(5,Ca,3,0,"div",68),s()),o&2){let e=p(5);c(2),M("\u{1F5BC}\uFE0F \uC774\uBBF8\uC9C0 (",e.getSelectedPageImageInfo().count||0,"\uAC1C)"),c(),u("ngIf",e.getPageImageStats()),c(),u("ngIf",e.getSelectedPageImages().length>0),c(),u("ngIf",e.getSelectedPageImages().length===0)}}function xa(o,t){if(o&1&&(r(0,"div",34)(1,"div",35)(2,"h5"),l(3),s()(),r(4,"div",36)(5,"div",37),l(6,"\u{1F4D0} \uD398\uC774\uC9C0 \uC815\uBCF4"),s(),r(7,"div",38)(8,"div",39)(9,"span",40),l(10,"\uD06C\uAE30:"),s(),r(11,"span",41),l(12),s()(),r(13,"div",39)(14,"span",40),l(15,"\uBC29\uD5A5:"),s(),r(16,"span",41),l(17),s()()()(),I(18,$o,21,5,"div",42)(19,Go,14,6,"div",42)(20,_a,6,4,"div",42),s()),o&2){let e=p(4);c(3),M("\u{1F4CB} ",e.selectedAnalysisPage," \uD398\uC774\uC9C0 \uBD84\uC11D \uACB0\uACFC"),c(9),T(e.getSelectedPageSize()),c(5),T(e.getSelectedPageOrientation()),c(),u("ngIf",e.getSelectedPageTextInfo()),c(),u("ngIf",e.getSelectedPageVectorInfo()),c(),u("ngIf",e.getSelectedPageImageInfo())}}function Pa(o,t){if(o&1&&(r(0,"div",141)(1,"div",142),l(2,"\u{1F4C4}"),s(),r(3,"p"),l(4),s()()),o&2){let e=p(4);c(4),M("",e.selectedAnalysisPage," \uD398\uC774\uC9C0\uC758 \uBD84\uC11D \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.")}}function ba(o,t){if(o&1){let e=L();r(0,"div",23)(1,"div",24)(2,"button",25),w("click",function(){b(e);let i=p(3);return v(i.goToPreviousAnalysisPage())}),l(3," \u25C0 \uC774\uC804 "),s(),r(4,"div",26)(5,"select",27),_e("ngModelChange",function(i){b(e);let a=p(3);return Ce(a.selectedAnalysisPage,i)||(a.selectedAnalysisPage=i),v(i)}),w("ngModelChange",function(i){b(e);let a=p(3);return v(a.onAnalysisPageChange(i))}),I(6,Ao,2,2,"option",28),s(),r(7,"span",29),l(8),s()(),r(9,"button",30),w("click",function(){b(e);let i=p(3);return v(i.goToNextAnalysisPage())}),l(10," \uB2E4\uC74C \u25B6 "),s()(),I(11,xa,21,6,"div",31)(12,Pa,5,1,"div",32),s()}if(o&2){let e=p(3);c(2),u("disabled",e.selectedAnalysisPage<=1),c(3),he("ngModel",e.selectedAnalysisPage),c(),u("ngForOf",e.getPageNumbers()),c(2),M("/ ",e.analysisData.pageCount," \uD398\uC774\uC9C0"),c(),u("disabled",e.selectedAnalysisPage>=e.analysisData.pageCount),c(2),u("ngIf",e.getSelectedPageAnalysis()),c(),u("ngIf",!e.getSelectedPageAnalysis())}}function va(o,t){if(o&1){let e=L();r(0,"div",18)(1,"div",19),w("click",function(){b(e);let i=p(2);return v(i.togglePageAnalysis())}),r(2,"div",11)(3,"span",20),l(4),s(),r(5,"h4"),l(6,"\u{1F4C4} \uD398\uC774\uC9C0\uBCC4 \uBD84\uC11D \uC815\uBCF4"),s(),r(7,"span",21),l(8),s()()(),I(9,ba,13,7,"div",22),s()}if(o&2){let e=p(2);c(4),T(e.isPageAnalysisExpanded?"\u25BC":"\u25B6"),c(4),M("",e.analysisData.pageCount,"\uD398\uC774\uC9C0"),c(),u("ngIf",e.isPageAnalysisExpanded)}}function ya(o,t){if(o&1&&(r(0,"div",5),I(1,Io,1,6,"app-pdf-draggable-header",6)(2,Fo,11,2,"div",7)(3,va,10,3,"div",8),s()),o&2){let e=p();c(),u("ngIf",e.isDraggable),c(),u("ngIf",!e.isDraggable),c(),u("ngIf",!e.isCollapsed&&!e.isMinimized&&e.analysisData&&e.analysisData.pageCount>0)}}function Ma(o,t){o&1&&(r(0,"div",143)(1,"div",142),l(2,"\u{1F4CA}"),s(),r(3,"div",144),l(4,"PDF\uB97C \uBD88\uB7EC\uC624\uBA74 \uBD84\uC11D \uC815\uBCF4\uAC00 \uD45C\uC2DC\uB429\uB2C8\uB2E4"),s()())}function Oa(o,t){if(o&1){let e=L();r(0,"button",175),w("click",function(){let i=b(e).$implicit,a=p(5);return v(a.selectMiniPage(i.pageNumber))}),l(1),s()}if(o&2){let e=t.$implicit,n=p(5);q("active",n.selectedMiniPage===e.pageNumber),c(),M(" ",e.pageNumber," ")}}function wa(o,t){if(o&1&&(r(0,"div",173),I(1,Oa,2,3,"button",174),s()),o&2){let e=p(4);c(),u("ngForOf",e.vectorData.pageDetails)}}function Da(o,t){o&1&&(r(0,"div",29)(1,"span",176),l(2,"\uD398\uC774\uC9C0 1"),s()())}function Sa(o,t){if(o&1&&(r(0,"span",177),l(1),s()),o&2){let e=p(4);c(),M(" ",e.getSelectedPageGenerationMethod()," ")}}function Ea(o,t){if(o&1&&(r(0,"div",178),R(1,"div",179),ft(2,"sanitizeHtml"),s()),o&2){let e=p(4);c(),u("innerHTML",ht(2,1,e.vectorSvgMinimap),mt)}}function Ia(o,t){o&1&&(r(0,"div",178)(1,"div",180),R(2,"div",181),r(3,"p"),l(4,"\uBBF8\uB2C8\uB9F5 \uC0DD\uC131 \uC911..."),s()()())}function ka(o,t){if(o&1&&(r(0,"div",166)(1,"h4"),l(2,"\u{1F4CD} \uBCA1\uD130 \uBBF8\uB2C8\uB9F5"),s(),I(3,wa,2,1,"div",167)(4,Da,3,0,"div",168),r(5,"div",169),I(6,Sa,2,1,"span",170),r(7,"span",171),l(8),s()(),I(9,Ea,3,3,"div",172)(10,Ia,5,0,"div",172),s()),o&2){let e=p(3);c(3),u("ngIf",e.vectorData.pageDetails.length>1),c(),u("ngIf",e.vectorData.pageDetails.length===1),c(2),u("ngIf",e.getSelectedPageGenerationMethod()),c(2),M(" \u{1F3A8} ",e.getSelectedPageOperations()," \uC5F0\uC0B0 "),c(),u("ngIf",e.vectorSvgMinimap),c(),u("ngIf",!e.vectorSvgMinimap)}}function Ta(o,t){if(o&1&&(r(0,"span"),R(1,"br"),l(2),s()),o&2){let e=p(4);c(2),le("(\uD14D\uC2A4\uD2B8 \uAE00\uB9AC\uD504: ",e.formatNumber(e.getGlyphPaths()),", \uC2E4\uC81C \uB3C4\uD615: ",e.formatNumber(e.getShapePaths()),") ")}}function Fa(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u{1F4D0}"),s(),r(4,"div",185),l(5,"\uD328\uC2A4 (Paths)"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",188),s(),r(10,"div",189),l(11," \uBCF5\uC7A1\uD55C \uD615\uD0DC\uB97C \uADF8\uB9AC\uB294 \uACBD\uB85C "),I(12,Ta,3,2,"span",14),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.analysisData.vectorSummary.totalPaths)),c(2),H("width",e.getVectorElementPercentage(e.analysisData.vectorSummary.totalPaths),"%"),c(3),u("ngIf",e.hasGlyphShapeData())}}function Aa(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u{1F4CF}"),s(),r(4,"div",185),l(5,"\uC120 (Lines)"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",190),s(),r(10,"div",189),l(11,"\uC9C1\uC120 \uC5F0\uACB0"),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.analysisData.vectorSummary.totalLines)),c(2),H("width",e.getVectorElementPercentage(e.analysisData.vectorSummary.totalLines),"%")}}function Ba(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u3030\uFE0F"),s(),r(4,"div",185),l(5,"\uACE1\uC120 (Curves)"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",191),s(),r(10,"div",189),l(11,"\uBCA0\uC9C0\uC5B4 \uACE1\uC120"),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.analysisData.vectorSummary.totalCurves)),c(2),H("width",e.getVectorElementPercentage(e.analysisData.vectorSummary.totalCurves),"%")}}function Va(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u25AD"),s(),r(4,"div",185),l(5,"\uC0AC\uAC01\uD615 (Rectangles)"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",192),s(),r(10,"div",189),l(11,"\uC0AC\uAC01\uD615 \uB3C4\uD615"),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.analysisData.vectorSummary.totalRectangles)),c(2),H("width",e.getVectorElementPercentage(e.analysisData.vectorSummary.totalRectangles),"%")}}function za(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u{1F3A8}"),s(),r(4,"div",185),l(5,"\uCC44\uC6B0\uAE30 (Fill)"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",193),s(),r(10,"div",189),l(11,"\uB3C4\uD615 \uB0B4\uBD80 \uCC44\uC6B0\uAE30"),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.analysisData.vectorSummary.totalFillOperations)),c(2),H("width",e.getVectorElementPercentage(e.analysisData.vectorSummary.totalFillOperations),"%")}}function $a(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u{1F58A}\uFE0F"),s(),r(4,"div",185),l(5,"\uC120 \uADF8\uB9AC\uAE30 (Stroke)"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",194),s(),r(10,"div",189),l(11,"\uB3C4\uD615 \uC678\uACFD\uC120 \uADF8\uB9AC\uAE30"),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.analysisData.vectorSummary.totalStrokeOperations)),c(2),H("width",e.getVectorElementPercentage(e.analysisData.vectorSummary.totalStrokeOperations),"%")}}function La(o,t){if(o&1&&(r(0,"div",152),I(1,ka,11,6,"div",153),r(2,"div",154)(3,"div",155)(4,"div",156),l(5,"\u{1F4CA}"),s(),r(6,"div",157)(7,"div",158),l(8,"\uCD1D \uBCA1\uD130 \uC5F0\uC0B0"),s(),r(9,"div",159),l(10),s(),r(11,"div",160),l(12),s()()()(),r(13,"div",120)(14,"h4"),l(15,"\uBCA1\uD130 \uAD6C\uC131 \uC694\uC18C"),s(),I(16,Fa,13,4,"div",161)(17,Aa,12,3,"div",161)(18,Ba,12,3,"div",161)(19,Va,12,3,"div",161),s(),r(20,"div",120)(21,"h4"),l(22,"\uB80C\uB354\uB9C1 \uC5F0\uC0B0"),s(),I(23,za,12,3,"div",161)(24,$a,12,3,"div",161),s(),r(25,"div",162)(26,"div",163)(27,"div",164),l(28,"\uD3C9\uADE0 \uC5F0\uC0B0/\uD398\uC774\uC9C0"),s(),r(29,"div",165),l(30),s()(),r(31,"div",163)(32,"div",164),l(33,"\uBCF5\uC7A1\uB3C4 \uC218\uC900"),s(),r(34,"div",165),l(35),s()()()()),o&2){let e=p(2);c(),u("ngIf",e.vectorData&&e.vectorData.pageDetails&&e.vectorData.pageDetails.length>0),c(9),T(e.formatNumber(e.analysisData.totalVectorOperations)),c(2),M("",e.getVectorComplexity()," \uBCF5\uC7A1\uB3C4"),c(4),u("ngIf",e.analysisData.vectorSummary),c(),u("ngIf",e.analysisData.vectorSummary),c(),u("ngIf",e.analysisData.vectorSummary),c(),u("ngIf",e.analysisData.vectorSummary),c(4),u("ngIf",e.analysisData.vectorSummary),c(),u("ngIf",e.analysisData.vectorSummary),c(6),T(e.formatNumber(e.Math.round((e.analysisData.totalVectorOperations||0)/e.analysisData.pageCount))),c(5),T(e.getVectorComplexity())}}function Na(o,t){if(o&1){let e=L();r(0,"div",145),w("click",function(){b(e);let i=p();return v(i.closeVectorDetail())}),r(1,"div",146),w("click",function(i){return b(e),v(i.stopPropagation())}),r(2,"div",147)(3,"h3"),l(4,"\u{1F3A8} \uBCA1\uD130 \uADF8\uB798\uD53D \uC0C1\uC138 \uBD84\uC11D"),s(),r(5,"button",148),w("click",function(){b(e);let i=p();return v(i.closeVectorDetail())}),l(6,"\u2715"),s()(),I(7,La,36,11,"div",149),r(8,"div",150)(9,"button",151),w("click",function(){b(e);let i=p();return v(i.closeVectorDetail())}),l(10,"\uB2EB\uAE30"),s()()()()}if(o&2){let e=p();c(7),u("ngIf",e.analysisData)}}function Ra(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u{1F30D}"),s(),r(4,"div",185),l(5,"\uD63C\uD569"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",199),s(),r(10,"div",189),l(11),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.analysisData.languageDetection.mixed)),c(2),H("width",e.getTextLanguagePercentage(e.analysisData.languageDetection.mixed),"%"),c(2),M("",e.getTextLanguagePercentage(e.analysisData.languageDetection.mixed),"%")}}function ja(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u{1F522}"),s(),r(4,"div",185),l(5,"\uC22B\uC790"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",200),s(),r(10,"div",189),l(11,"\uC22B\uC790 \uB370\uC774\uD130"),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.analysisData.languageDetection.numbers)),c(2),H("width",e.getTextLanguagePercentage(e.analysisData.languageDetection.numbers),"%")}}function Wa(o,t){if(o&1&&(r(0,"div",120)(1,"h4"),l(2,"\u{1F310} \uC5B8\uC5B4 \uBD84\uD3EC"),s(),r(3,"div",182)(4,"div",183)(5,"div",184),l(6,"\u{1F1F0}\u{1F1F7}"),s(),r(7,"div",185),l(8,"\uD55C\uAD6D\uC5B4"),s(),r(9,"div",186),l(10),s()(),r(11,"div",187),R(12,"div",197),s(),r(13,"div",189),l(14),s()(),r(15,"div",182)(16,"div",183)(17,"div",184),l(18,"\u{1F1FA}\u{1F1F8}"),s(),r(19,"div",185),l(20,"\uC601\uC5B4"),s(),r(21,"div",186),l(22),s()(),r(23,"div",187),R(24,"div",198),s(),r(25,"div",189),l(26),s()(),I(27,Ra,12,4,"div",161)(28,ja,12,3,"div",161),s()),o&2){let e=p(2);c(10),T(e.formatNumber(e.analysisData.languageDetection.korean)),c(2),H("width",e.getTextLanguagePercentage(e.analysisData.languageDetection.korean),"%"),c(2),M("",e.getTextLanguagePercentage(e.analysisData.languageDetection.korean),"%"),c(8),T(e.formatNumber(e.analysisData.languageDetection.english)),c(2),H("width",e.getTextLanguagePercentage(e.analysisData.languageDetection.english),"%"),c(2),M("",e.getTextLanguagePercentage(e.analysisData.languageDetection.english),"%"),c(),u("ngIf",e.analysisData.languageDetection.mixed>0),c(),u("ngIf",e.analysisData.languageDetection.numbers>0)}}function Ga(o,t){if(o&1&&(r(0,"div",204)(1,"span",205),l(2),s(),r(3,"span",206),l(4),s()()),o&2){let e=t.$implicit,n=t.index;c(2),T(n+1),c(2),T(e)}}function Ha(o,t){if(o&1&&(r(0,"div",120)(1,"h4"),l(2,"\u{1F3A8} \uD3F0\uD2B8 \uC815\uBCF4"),s(),r(3,"div",201)(4,"div",156),l(5,"\u{1F4DD}"),s(),r(6,"div",157)(7,"div",158),l(8,"\uACE0\uC720 \uD3F0\uD2B8 \uC218"),s(),r(9,"div",159),l(10),s(),r(11,"div",160),l(12),s()()(),r(13,"div",202),I(14,Ga,5,2,"div",203),s()()),o&2){let e=p(2);c(10),T(e.analysisData.uniqueFonts.length),c(2),M("",e.getFontDiversity()," \uB2E4\uC591\uC131"),c(2),u("ngForOf",e.analysisData.uniqueFonts)}}function Ua(o,t){if(o&1&&(r(0,"div",209),R(1,"div",210),r(2,"div",211)(3,"div",212),l(4),s(),r(5,"div",213),l(6),s()(),r(7,"div",214),R(8,"div",215),s()()),o&2){let e=t.$implicit,n=p(3);c(),H("background-color",e.color),c(3),T(e.color),c(2),le("",n.formatNumber(e.count),"\uD68C (",e.percentage,"%)"),c(2),H("width",e.percentage,"%")}}function Ya(o,t){if(o&1&&(r(0,"div",120)(1,"h4"),l(2,"\u{1F3A8} \uD14D\uC2A4\uD2B8 \uC0C9\uC0C1"),s(),r(3,"div",201)(4,"div",156),l(5,"\u{1F308}"),s(),r(6,"div",157)(7,"div",158),l(8,"\uACE0\uC720 \uC0C9\uC0C1 \uC218"),s(),r(9,"div",159),l(10),s(),r(11,"div",160),l(12),s()()(),r(13,"div",207),I(14,Ua,9,7,"div",208),s()()),o&2){let e=p(2);c(10),T(e.analysisData.textColors.uniqueColors.length),c(2),T(e.analysisData.textColors.uniqueColors.length===1?"\uB2E8\uC77C \uC0C9\uC0C1":"\uB2E4\uC591\uD55C \uC0C9\uC0C1"),c(2),u("ngForOf",e.getSortedColors())}}function Xa(o,t){if(o&1&&(r(0,"option",33),l(1),s()),o&2){let e=t.$implicit,n=p(3);u("value",e),c(),le(" \uD398\uC774\uC9C0 ",e," (",n.getPageTextCount(e),"\uAC1C \uD56D\uBAA9) ")}}function qa(o,t){if(o&1&&(r(0,"div",219)(1,"div",50)(2,"div",220),l(3),s(),r(4,"div",221),R(5,"div",222),r(6,"div",223)(7,"span",224),l(8,"\uC0C9\uC0C1:"),s(),r(9,"span",225),l(10),s()()()(),r(11,"div",226),l(12),s(),r(13,"div",227)(14,"span",228),l(15),s(),r(16,"span",228),l(17),s(),r(18,"span",228),l(19),s()()()),o&2){let e=t.$implicit,n=t.index,i=p(3);c(3),M("#",i.currentTextPage*i.textItemsPerPage+n+1),c(2),H("background-color",i.normalizeColor(e.color))("border",e.color==="#ffffff"||e.color==="#FFFFFF"?"1px solid #ddd":"none"),u("title","\uC6D0\uBCF8: "+e.color+`
\uC815\uADDC\uD654: `+i.normalizeColor(e.color)),c(5),T(i.normalizeColor(e.color)),c(),H("color",i.normalizeColor(e.color))("font-family",e.font+", Arial, sans-serif")("font-size",e.fontSize,"pt")("background",i.getBackgroundForTextColor(e.color))("text-shadow",i.getTextShadowForColor(e.color))("padding","12px")("border-radius","6px"),c(),M(" ",e.text," "),c(3),M("\u{1F4DD} ",e.font),c(2),M("\u{1F4CF} ",e.fontSize,"pt"),c(2),le("\u{1F4CD} (",i.Math.round(e.position.x),", ",i.Math.round(e.position.y),")")}}function Ka(o,t){if(o&1){let e=L();r(0,"div",229)(1,"button",230),w("click",function(){b(e);let i=p(3);return v(i.prevTextPage())}),l(2," \u2190 \uC774\uC804 "),s(),r(3,"span",231),l(4),s(),r(5,"button",230),w("click",function(){b(e);let i=p(3);return v(i.nextTextPage())}),l(6," \uB2E4\uC74C \u2192 "),s()()}if(o&2){let e=p(3);c(),u("disabled",e.currentTextPage===0),c(3),le(" ",e.currentTextPage+1," / ",e.getTotalTextPages()," "),c(),u("disabled",e.currentTextPage>=e.getTotalTextPages()-1)}}function Ja(o,t){if(o&1){let e=L();r(0,"div",120)(1,"h4"),l(2,"\u{1F4DD} \uD14D\uC2A4\uD2B8 \uD56D\uBAA9 \uC0C1\uC138 (\uD398\uC774\uC9C0\uBCC4)"),s(),r(3,"div",173)(4,"label"),l(5,"\uD398\uC774\uC9C0 \uC120\uD0DD:"),s(),r(6,"select",27),_e("ngModelChange",function(i){b(e);let a=p(2);return Ce(a.selectedPage,i)||(a.selectedPage=i),v(i)}),w("ngModelChange",function(i){b(e);let a=p(2);return v(a.changeSelectedPage(i))}),I(7,Xa,2,3,"option",28),s()(),r(8,"div",216),I(9,qa,20,26,"div",217),s(),I(10,Ka,7,4,"div",218),s()}if(o&2){let e=p(2);c(6),he("ngModel",e.selectedPage),c(),u("ngForOf",e.getAvailablePages()),c(2),u("ngForOf",e.getCurrentPageTextItems()),c(),u("ngIf",e.getTotalTextPages()>1)}}function Za(o,t){if(o&1){let e=L();r(0,"div",145),w("click",function(){b(e);let i=p();return v(i.closeTextDetailModal())}),r(1,"div",195),w("click",function(i){return b(e),v(i.stopPropagation())}),r(2,"div",147)(3,"h3"),l(4,"\u{1F4DD} \uD14D\uC2A4\uD2B8 \uC0C1\uC138 \uC815\uBCF4"),s(),r(5,"button",196),w("click",function(){b(e);let i=p();return v(i.closeTextDetailModal())}),l(6,"\u2715"),s()(),r(7,"div",152)(8,"div",154)(9,"div",155)(10,"div",156),l(11,"\u{1F4DD}"),s(),r(12,"div",157)(13,"div",158),l(14,"\uCD1D \uD14D\uC2A4\uD2B8 \uD56D\uBAA9"),s(),r(15,"div",159),l(16),s(),r(17,"div",160),l(18),s()()(),r(19,"div",155)(20,"div",156),l(21,"\u{1F4D6}"),s(),r(22,"div",157)(23,"div",158),l(24,"\uCD1D \uB2E8\uC5B4 \uC218"),s(),r(25,"div",159),l(26),s(),r(27,"div",160),l(28),s()()(),r(29,"div",155)(30,"div",156),l(31,"\u{1F524}"),s(),r(32,"div",157)(33,"div",158),l(34,"\uCD1D \uBB38\uC790 \uC218"),s(),r(35,"div",159),l(36),s(),r(37,"div",160),l(38),s()()()(),I(39,Wa,29,10,"div",125)(40,Ha,15,3,"div",125)(41,Ya,15,3,"div",125),r(42,"div",120)(43,"h4"),l(44,"\u{1F4CA} \uCD94\uAC00 \uD1B5\uACC4"),s(),r(45,"div",163)(46,"div",164),l(47,"\uD3C9\uADE0 \uD14D\uC2A4\uD2B8/\uD398\uC774\uC9C0"),s(),r(48,"div",165),l(49),s()(),r(50,"div",163)(51,"div",164),l(52,"\uD3C9\uADE0 \uB2E8\uC5B4/\uD398\uC774\uC9C0"),s(),r(53,"div",165),l(54),s()(),r(55,"div",163)(56,"div",164),l(57,"\uD3C9\uADE0 \uBB38\uC790/\uD398\uC774\uC9C0"),s(),r(58,"div",165),l(59),s()(),r(60,"div",163)(61,"div",164),l(62,"\uC8FC \uC5B8\uC5B4"),s(),r(63,"div",165),l(64),s()()(),I(65,Ja,11,4,"div",125),s(),r(66,"div",150)(67,"button",151),w("click",function(){b(e);let i=p();return v(i.closeTextDetailModal())}),l(68,"\uB2EB\uAE30"),s()()()()}if(o&2){let e=p();c(16),T(e.formatNumber(e.analysisData.totalTextItems)),c(2),M("",e.displayData.avgTextPerPage," \uD56D\uBAA9/\uCABD"),c(8),T(e.formatNumber(e.analysisData.totalWords)),c(2),M("\uD3C9\uADE0 ",e.getAverageWordLength(),"\uC790/\uB2E8\uC5B4"),c(8),T(e.formatNumber(e.analysisData.totalCharacters)),c(2),M("",e.Math.round(e.analysisData.totalCharacters/e.analysisData.pageCount)," \uBB38\uC790/\uCABD"),c(),u("ngIf",e.analysisData.languageDetection),c(),u("ngIf",e.analysisData.uniqueFonts&&e.analysisData.uniqueFonts.length>0),c(),u("ngIf",e.analysisData.textColors&&e.analysisData.textColors.uniqueColors.length>0),c(8),T(e.formatNumber(e.Math.round(e.analysisData.totalTextItems/e.analysisData.pageCount))),c(5),T(e.formatNumber(e.Math.round(e.analysisData.totalWords/e.analysisData.pageCount))),c(5),T(e.formatNumber(e.Math.round(e.analysisData.totalCharacters/e.analysisData.pageCount))),c(5),T(e.getLanguageDominant()),c(),u("ngIf",e.analysisData.pages&&e.analysisData.pages.length>0)}}function Qa(o,t){if(o&1){let e=L();r(0,"button",236),w("click",function(){b(e);let i=p(2);return v(i.createCombinedDocument())}),l(1," \u{1F4CA} \uD3B8\uC9D1 \uBB38\uC11C \uB9CC\uB4E4\uAE30 "),s()}}function er(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u{1F4D0}"),s(),r(4,"div",185),l(5,"\uD328\uC2A4"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",188),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.analysisData.vectorSummary.totalPaths)),c(2),H("width",e.getVectorElementPercentage(e.analysisData.vectorSummary.totalPaths),"%")}}function tr(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u{1F4CF}"),s(),r(4,"div",185),l(5,"\uC120"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",190),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.analysisData.vectorSummary.totalLines)),c(2),H("width",e.getVectorElementPercentage(e.analysisData.vectorSummary.totalLines),"%")}}function nr(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u3030\uFE0F"),s(),r(4,"div",185),l(5,"\uACE1\uC120"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",191),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.analysisData.vectorSummary.totalCurves)),c(2),H("width",e.getVectorElementPercentage(e.analysisData.vectorSummary.totalCurves),"%")}}function ir(o,t){if(o&1&&(r(0,"div",120)(1,"h4"),l(2,"\u{1F3A8} \uBCA1\uD130 \uADF8\uB798\uD53D \uBD84\uC11D"),s(),r(3,"div",237)(4,"div",155)(5,"div",156),l(6,"\u{1F3A8}"),s(),r(7,"div",157)(8,"div",158),l(9,"\uCD1D \uBCA1\uD130 \uC5F0\uC0B0"),s(),r(10,"div",159),l(11),s(),r(12,"div",160),l(13),s()()()(),I(14,er,10,3,"div",161)(15,tr,10,3,"div",161)(16,nr,10,3,"div",161),s()),o&2){let e=p(2);c(11),T(e.formatNumber(e.analysisData.totalVectorOperations)),c(2),M("",e.getVectorComplexity()," \uBCF5\uC7A1\uB3C4"),c(),u("ngIf",e.analysisData.vectorSummary),c(),u("ngIf",e.analysisData.vectorSummary),c(),u("ngIf",e.analysisData.vectorSummary)}}function or(o,t){if(o&1&&(r(0,"div")(1,"div",182)(2,"div",183)(3,"div",184),l(4,"\u{1F1F0}\u{1F1F7}"),s(),r(5,"div",185),l(6,"\uD55C\uAD6D\uC5B4"),s(),r(7,"div",186),l(8),s()(),r(9,"div",187),R(10,"div",197),s()(),r(11,"div",182)(12,"div",183)(13,"div",184),l(14,"\u{1F1FA}\u{1F1F8}"),s(),r(15,"div",185),l(16,"\uC601\uC5B4"),s(),r(17,"div",186),l(18),s()(),r(19,"div",187),R(20,"div",198),s()()()),o&2){let e=p(3);c(8),T(e.formatNumber(e.analysisData.languageDetection.korean)),c(2),H("width",e.getTextLanguagePercentage(e.analysisData.languageDetection.korean),"%"),c(8),T(e.formatNumber(e.analysisData.languageDetection.english)),c(2),H("width",e.getTextLanguagePercentage(e.analysisData.languageDetection.english),"%")}}function ar(o,t){if(o&1&&(r(0,"div",120)(1,"h4"),l(2,"\u{1F4DD} \uD14D\uC2A4\uD2B8 \uBD84\uC11D"),s(),r(3,"div",237)(4,"div",155)(5,"div",156),l(6,"\u{1F4DD}"),s(),r(7,"div",157)(8,"div",158),l(9,"\uCD1D \uD14D\uC2A4\uD2B8 \uD56D\uBAA9"),s(),r(10,"div",159),l(11),s(),r(12,"div",160),l(13),s()()(),r(14,"div",155)(15,"div",156),l(16,"\u{1F4D6}"),s(),r(17,"div",157)(18,"div",158),l(19,"\uCD1D \uB2E8\uC5B4 \uC218"),s(),r(20,"div",159),l(21),s(),r(22,"div",160),l(23),s()()()(),I(24,or,21,6,"div",14),s()),o&2){let e=p(2);c(11),T(e.formatNumber(e.analysisData.totalTextItems)),c(2),M("",e.displayData.avgTextPerPage," \uD56D\uBAA9/\uCABD"),c(8),T(e.formatNumber(e.analysisData.totalWords)),c(2),M("\uD3C9\uADE0 ",e.getAverageWordLength(),"\uC790/\uB2E8\uC5B4"),c(),u("ngIf",e.analysisData.languageDetection)}}function rr(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u{1F5BC}\uFE0F"),s(),r(4,"div",185),l(5,"\uC77C\uBC18 \uC774\uBBF8\uC9C0"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",240),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.getImageTypeCount("Image"))),c(2),H("width",e.getImageTypePercentage("Image"),"%")}}function sr(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u{1F4F7}"),s(),r(4,"div",185),l(5,"JPEG"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",241),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.getImageTypeCount("JPEG"))),c(2),H("width",e.getImageTypePercentage("JPEG"),"%")}}function lr(o,t){if(o&1&&(r(0,"div",182)(1,"div",183)(2,"div",184),l(3,"\u{1F3A8}"),s(),r(4,"div",185),l(5,"PNG"),s(),r(6,"div",186),l(7),s()(),r(8,"div",187),R(9,"div",242),s()()),o&2){let e=p(3);c(7),T(e.formatNumber(e.getImageTypeCount("PNG"))),c(2),H("width",e.getImageTypePercentage("PNG"),"%")}}function cr(o,t){if(o&1){let e=L();r(0,"div",120)(1,"h4"),l(2,"\u{1F5BC}\uFE0F \uC774\uBBF8\uC9C0 \uBD84\uC11D"),s(),r(3,"div",237)(4,"div",155)(5,"div",156),l(6,"\u{1F5BC}\uFE0F"),s(),r(7,"div",157)(8,"div",158),l(9,"\uCD1D \uC774\uBBF8\uC9C0 \uC218"),s(),r(10,"div",159),l(11),s(),r(12,"div",160),l(13),s()()()(),I(14,rr,10,3,"div",161)(15,sr,10,3,"div",161)(16,lr,10,3,"div",161),r(17,"div",238)(18,"button",239),w("click",function(i){b(e);let a=p(2);return a.openImageDetail(i),v(a.closeCombinedAnalysisModal())}),l(19," \u{1F5BC}\uFE0F \uC774\uBBF8\uC9C0 \uC0C1\uC138 "),s()()()}if(o&2){let e=p(2);c(11),T(e.formatNumber(e.analysisData.imageInfo.totalImages)),c(2),M("",e.analysisData.imageInfo.pagesWithImages,"\uAC1C \uD398\uC774\uC9C0"),c(),u("ngIf",e.getImageTypeCount("Image")>0),c(),u("ngIf",e.getImageTypeCount("JPEG")>0),c(),u("ngIf",e.getImageTypeCount("PNG")>0)}}function dr(o,t){if(o&1&&(r(0,"div",246)(1,"div",247)(2,"span",248),l(3,"\u{1F3A8}"),s(),r(4,"span"),l(5,"\uBCA1\uD130 \uADF8\uB798\uD53D"),s()(),r(6,"div",249)(7,"div",250)(8,"span",251),l(9),s()()(),r(10,"div",252),l(11),s()()),o&2){let e=p(3);c(7),H("width",e.getVectorTextRatio().vectorPercentage,"%"),c(2),M("",e.getVectorTextRatio().vectorPercentage,"%"),c(2),M("",e.formatNumber(e.analysisData.totalVectorOperations)," \uC5F0\uC0B0")}}function gr(o,t){if(o&1&&(r(0,"div",246)(1,"div",247)(2,"span",248),l(3,"\u{1F4DD}"),s(),r(4,"span"),l(5,"\uD14D\uC2A4\uD2B8"),s()(),r(6,"div",249)(7,"div",253)(8,"span",251),l(9),s()()(),r(10,"div",252),l(11),s()()),o&2){let e=p(3);c(7),H("width",e.getVectorTextRatio().textPercentage,"%"),c(2),M("",e.getVectorTextRatio().textPercentage,"%"),c(2),M("",e.formatNumber(e.analysisData.totalTextItems)," \uD56D\uBAA9")}}function pr(o,t){if(o&1&&(r(0,"div",246)(1,"div",247)(2,"span",248),l(3,"\u{1F5BC}\uFE0F"),s(),r(4,"span"),l(5,"\uC774\uBBF8\uC9C0"),s()(),r(6,"div",249)(7,"div",254)(8,"span",251),l(9),s()()(),r(10,"div",252),l(11),s()()),o&2){let e=p(3);c(7),H("width",e.getImageRatioPercentage(),"%"),c(2),M("",e.getImageRatioPercentage(),"%"),c(2),M("",e.formatNumber(e.analysisData.imageInfo.totalImages)," \uAC1C")}}function mr(o,t){if(o&1&&(r(0,"div",120)(1,"h4"),l(2,"\u2696\uFE0F \uCF58\uD150\uCE20 \uBE44\uC728 \uBE44\uAD50"),s(),r(3,"div",243),I(4,dr,12,4,"div",244)(5,gr,12,4,"div",244)(6,pr,12,4,"div",244),s(),r(7,"div",245)(8,"p"),l(9),s()()()),o&2){let e=p(2);c(4),u("ngIf",e.analysisData.hasVectorGraphics),c(),u("ngIf",e.analysisData.totalTextItems>0),c(),u("ngIf",e.analysisData.hasImages&&e.analysisData.imageInfo),c(3),T(e.getContentDominance())}}function ur(o,t){if(o&1){let e=L();r(0,"div",145),w("click",function(){b(e);let i=p();return v(i.closeCombinedAnalysisModal())}),r(1,"div",232),w("click",function(i){return b(e),v(i.stopPropagation())}),r(2,"div",147)(3,"h3"),l(4,"\u{1F4CA} \uBCA1\uD130 + \uD14D\uC2A4\uD2B8 + \uC774\uBBF8\uC9C0 \uD1B5\uD569 \uBD84\uC11D"),s(),r(5,"button",196),w("click",function(){b(e);let i=p();return v(i.closeCombinedAnalysisModal())}),l(6,"\u2715"),s()(),r(7,"div",152)(8,"div",154)(9,"div",155)(10,"div",156),l(11,"\u{1F4CA}"),s(),r(12,"div",157)(13,"div",158),l(14,"\uBB38\uC11C \uD0C0\uC785"),s(),r(15,"div",159),l(16),s(),r(17,"div",160),l(18),s()()()(),r(19,"div",120)(20,"h4"),l(21,"\u26A1 \uBE60\uB978 \uC561\uC158"),s(),r(22,"div",233),I(23,Qa,2,0,"button",234),r(24,"button",235),w("click",function(){b(e);let i=p();return v(i.exportOriginalPdf())}),l(25," \u{1F4BE} \uC6D0\uBCF8 PDF \uB2E4\uC6B4\uB85C\uB4DC "),s()()(),I(26,ir,17,5,"div",125)(27,ar,25,5,"div",125)(28,cr,20,5,"div",125)(29,mr,10,4,"div",125),s(),r(30,"div",150)(31,"button",151),w("click",function(){b(e);let i=p();return v(i.closeCombinedAnalysisModal())}),l(32,"\uB2EB\uAE30"),s()()()()}if(o&2){let e=p();c(9),q("has-both",e.analysisData.hasVectorGraphics&&e.analysisData.totalTextItems>0)("text-only",!e.analysisData.hasVectorGraphics&&e.analysisData.totalTextItems>0)("vector-only",e.analysisData.hasVectorGraphics&&!e.analysisData.totalTextItems),c(7),T(e.getCombinedContentType()),c(2),T(e.getCombinedStats()),c(5),u("ngIf",e.analysisData.hasVectorGraphics&&e.analysisData.totalTextItems>0),c(3),u("ngIf",e.analysisData.hasVectorGraphics),c(),u("ngIf",e.analysisData.totalTextItems>0),c(),u("ngIf",e.analysisData.hasImages&&e.analysisData.imageInfo),c(),u("ngIf",e.analysisData.hasVectorGraphics||e.analysisData.totalTextItems>0||e.analysisData.hasImages)}}function fr(o,t){if(o&1&&(r(0,"div",277),R(1,"img",129),s()),o&2){let e=p().$implicit;c(),u("src",e.thumbnail,Te)("alt",e.name)}}function hr(o,t){o&1&&(r(0,"div",278)(1,"span",279),l(2,"\u{1F5BC}\uFE0F"),s(),r(3,"span",280),l(4,"\uBBF8\uB9AC\uBCF4\uAE30 \uC5C6\uC74C"),s()())}function Cr(o,t){if(o&1&&(r(0,"div",100)(1,"span",271),l(2,"\uD06C\uAE30:"),s(),r(3,"span",272),l(4),s()()),o&2){let e=p().$implicit,n=p(3);c(4),le("",n.safeNumber(e.width).toFixed(1)," \xD7 ",n.safeNumber(e.height).toFixed(1),"pt")}}function _r(o,t){if(o&1&&(r(0,"div",100)(1,"span",271),l(2,"\uC6D0\uBCF8:"),s(),r(3,"span",272),l(4),s()()),o&2){let e=p().$implicit,n=p(3);c(4),le("",n.safeNumber(e.originalWidth)," \xD7 ",n.safeNumber(e.originalHeight),"px")}}function xr(o,t){if(o&1&&(r(0,"div",100)(1,"span",271),l(2,"\uD3EC\uB9F7:"),s(),r(3,"span",272),l(4),s()()),o&2){let e=p().$implicit;c(4),T(e.format)}}function Pr(o,t){if(o&1&&(r(0,"div",281)(1,"span",271),l(2,"\u{1F4C4} Transform:"),s(),r(3,"span",282),l(4),s()()),o&2){let e=p().$implicit,n=p(3);c(4),M("[",n.formatTransformArray(e.transform),"]")}}function br(o,t){if(o&1&&(r(0,"div",100)(1,"span",271),l(2,"\u{1F3AF} \uC704\uCE58:"),s(),r(3,"span",272),l(4),s()()),o&2){let e=p().$implicit,n=p(3);c(4),le("X: ",n.safeNumber(e.x).toFixed(2),", Y: ",n.safeNumber(e.y).toFixed(2),"pt")}}function vr(o,t){if(o&1&&(r(0,"div",283)(1,"span",271),l(2,"\u{1F4CF} \uC2A4\uCF00\uC77C:"),s(),r(3,"span",272)(4,"span",284),l(5),s(),r(6,"span",285),l(7),s()()()),o&2){let e=p().$implicit;c(4),q("scaled",e.detectedScaleFactor>1),c(),M(" ",e.detectedScaleFactor,"x "),c(),q("from-top",e.detectedScaleFactor>1),c(),M(" ",e.detectedScaleFactor>1?"yFromTop \uC0AC\uC6A9":"y \uC0AC\uC6A9"," ")}}function yr(o,t){if(o&1&&(r(0,"div",100)(1,"span",271),l(2,"\u{1F4CD} yFromTop:"),s(),r(3,"span",272),l(4),s()()),o&2){let e=p().$implicit,n=p(3);c(4),M("",n.safeNumber(e.yFromTop).toFixed(2),"pt")}}function Mr(o,t){if(o&1&&(r(0,"span",287),l(1),s()),o&2){let e=p(2).$implicit;c(),M(" (\u{1F504} ",e.pageRotation,"\xB0)")}}function Or(o,t){if(o&1&&(r(0,"div",100)(1,"span",271),l(2,"\u{1F4D0} \uD398\uC774\uC9C0:"),s(),r(3,"span",272),l(4),I(5,Mr,2,1,"span",286),s()()),o&2){let e=p().$implicit,n=p(3);c(4),le(" ",n.safeNumber(e.pageWidth).toFixed(1)," \xD7 ",n.safeNumber(e.pageHeight).toFixed(1),"pt "),c(),u("ngIf",e.pageRotation)}}function wr(o,t){if(o&1&&(r(0,"div",298)(1,"div",299),l(2,"\u{1F3AF} Viewport Transform"),s(),r(3,"div",300)(4,"code"),l(5),s()(),r(6,"div",301)(7,"small"),l(8,"\u{1F4A1} PDF.js\uAC00 \uC801\uC6A9\uD558\uB294 \uD398\uC774\uC9C0 \uC88C\uD45C \uBCC0\uD658 \uD589\uB82C"),s()()()),o&2){let e=p(2).$implicit,n=p(3);c(5),M("[",n.formatTransformArray(e.viewportTransform),"]")}}function Dr(o,t){o&1&&(r(0,"span"),l(1,"X\uC88C\uD45C \uBC94\uC704 \uCD08\uACFC "),s())}function Sr(o,t){o&1&&(r(0,"span"),l(1,"Y\uC88C\uD45C \uBC94\uC704 \uCD08\uACFC "),s())}function Er(o,t){o&1&&(r(0,"span"),l(1,"\uB108\uBE44 \uCD08\uACFC "),s())}function Ir(o,t){o&1&&(r(0,"span"),l(1,"\uB192\uC774 \uCD08\uACFC"),s())}function kr(o,t){if(o&1&&(r(0,"div",306),I(1,Dr,2,0,"span",14)(2,Sr,2,0,"span",14)(3,Er,2,0,"span",14)(4,Ir,2,0,"span",14),s()),o&2){let e=p(3).$implicit;c(),u("ngIf",e.coordinateIssueDetails.outOfBoundsX),c(),u("ngIf",e.coordinateIssueDetails.outOfBoundsY),c(),u("ngIf",e.coordinateIssueDetails.oversizedWidth),c(),u("ngIf",e.coordinateIssueDetails.oversizedHeight)}}function Tr(o,t){if(o&1&&(r(0,"div",307)(1,"small"),l(2),s()()),o&2){let e=p(3).$implicit;c(2),le("\uC6D0\uBCF8 \uC88C\uD45C: X=",e.originalX==null?null:e.originalX.toFixed(2),"pt, Y=",e.originalY==null?null:e.originalY.toFixed(2),"pt")}}function Fr(o,t){if(o&1&&(r(0,"div",302)(1,"div",303),l(2,"\u26A0\uFE0F \uC88C\uD45C \uBB38\uC81C \uAC10\uC9C0"),s(),I(3,kr,5,4,"div",304)(4,Tr,3,2,"div",305),s()),o&2){let e=p(2).$implicit;c(3),u("ngIf",e.coordinateIssueDetails),c(),u("ngIf",e.originalX!==void 0)}}function Ar(o,t){if(o&1&&(r(0,"div",308)(1,"div",299),l(2,"\u{1F527} \uC774\uBBF8\uC9C0 \uD53D\uC140 \uC815\uADDC\uD654"),s(),r(3,"div",309)(4,"div",310)(5,"span",311),l(6,"\uC774\uBBF8\uC9C0 \uB108\uBE44:"),s(),r(7,"span",312),l(8),s()(),r(9,"div",310)(10,"span",311),l(11,"\uC774\uBBF8\uC9C0 \uB192\uC774:"),s(),r(12,"span",312),l(13),s()()(),r(14,"div",313)(15,"div",300)(16,"strong"),l(17,"\uC6D0\uBCF8 (Raw):"),s(),r(18,"code"),l(19),s()(),r(20,"div",314),l(21,"\u2B07\uFE0F \uC774\uBBF8\uC9C0 \uD53D\uC140 \uD06C\uAE30\uB85C \uB098\uB204\uAE30"),s(),r(22,"div",300)(23,"strong"),l(24,"\uC815\uADDC\uD654 (Normalized):"),s(),r(25,"code"),l(26),s()(),r(27,"div",301)(28,"small"),l(29),s()()()()),o&2){let e=p(2).$implicit,n=p(3);c(8),M("",e.imagePixelWidth," px"),c(5),M("",e.imagePixelHeight," px"),c(6),M("[",n.formatTransformArray(e.rawTransform),"]"),c(7),M("[",n.formatTransformArray(e.transform),"]"),c(3),le("\u{1F4A1} \uC2E4\uC81C PDF \uD06C\uAE30: ",e.transform[0].toFixed(2)," \xD7 ",n.absValue(e.transform[3]).toFixed(2)," pt")}}function Br(o,t){if(o&1&&(r(0,"details",288)(1,"summary",289),l(2,"\u{1F4CA} Transform \uC0C1\uC138\uBCF4\uAE30"),s(),I(3,wr,9,1,"div",290)(4,Fr,5,2,"div",291)(5,Ar,30,6,"div",292),r(6,"div",293)(7,"div",294)(8,"span",295),l(9,"scaleX (\uB108\uBE44):"),s(),r(10,"span",296),l(11),s()(),r(12,"div",294)(13,"span",295),l(14,"skewY (Y\uAE30\uC6B8\uC784):"),s(),r(15,"span",296),l(16),s()(),r(17,"div",294)(18,"span",295),l(19,"skewX (X\uAE30\uC6B8\uC784):"),s(),r(20,"span",296),l(21),s()(),r(22,"div",294)(23,"span",295),l(24,"scaleY (\uB192\uC774):"),s(),r(25,"span",296),l(26),s()(),r(27,"div",294)(28,"span",295),l(29,"translateX (X\uC704\uCE58):"),s(),r(30,"span",296),l(31),s()(),r(32,"div",294)(33,"span",295),l(34,"translateY (Y\uC704\uCE58):"),s(),r(35,"span",296),l(36),s()()(),r(37,"div",297)(38,"small"),l(39,"\u{1F4A1} PDF \uC88C\uD45C\uACC4: \uC6D0\uC810 \uC67C\uCABD \uD558\uB2E8, Y\uCD95 \uC704\uB85C \uC99D\uAC00, \uB2E8\uC704 pt (1pt = 1/72 inch)"),s()()()),o&2){let e=p().$implicit;c(3),u("ngIf",e.viewportTransform),c(),u("ngIf",e.hasCoordinateIssue),c(),u("ngIf",e.rawTransform&&e.imagePixelWidth),c(6),M("",e.transform[0].toFixed(6)," pt"),c(5),M("",e.transform[1].toFixed(6)," pt"),c(5),M("",e.transform[2].toFixed(6)," pt"),c(5),M("",e.transform[3].toFixed(6)," pt"),c(5),M("",e.transform[4].toFixed(6)," pt"),c(5),M("",e.transform[5].toFixed(6)," pt")}}function Vr(o,t){if(o&1&&(r(0,"div",266),I(1,fr,2,2,"div",267)(2,hr,5,0,"div",268),r(3,"div",269)(4,"div",127),l(5),s(),r(6,"div",270)(7,"div",100)(8,"span",271),l(9,"\uD0C0\uC785:"),s(),r(10,"span",272),l(11),s()(),I(12,Cr,5,2,"div",273)(13,_r,5,2,"div",273)(14,xr,5,1,"div",273)(15,Pr,5,1,"div",274)(16,br,5,2,"div",273)(17,vr,8,6,"div",275)(18,yr,5,1,"div",273)(19,Or,6,3,"div",273),s(),I(20,Br,40,9,"details",276),s()()),o&2){let e=t.$implicit;c(),u("ngIf",e.thumbnail),c(),u("ngIf",!e.thumbnail),c(3),T(e.name),c(6),T(e.type),c(),u("ngIf",e.width&&e.height),c(),u("ngIf",e.originalWidth&&e.originalHeight),c(),u("ngIf",e.format),c(),u("ngIf",e.transform&&e.transform.length===6),c(),u("ngIf",e.x!==void 0&&e.y!==void 0),c(),u("ngIf",e.detectedScaleFactor),c(),u("ngIf",e.yFromTop!==void 0),c(),u("ngIf",e.pageWidth&&e.pageHeight),c(),u("ngIf",e.transform&&e.transform.length===6)}}function zr(o,t){if(o&1&&(r(0,"div",261)(1,"div",35)(2,"div",262),l(3),s(),r(4,"div",263),l(5),s()(),r(6,"div",264),I(7,Vr,21,13,"div",265),s()()),o&2){let e=t.$implicit;c(3),M("\uD398\uC774\uC9C0 ",e.pageNumber),c(2),M("",e.images.length,"\uAC1C \uC774\uBBF8\uC9C0"),c(2),u("ngForOf",e.images)}}function $r(o,t){if(o&1){let e=L();r(0,"div",255),w("click",function(){b(e);let i=p();return v(i.closeImageDetailModal())})("keydown.escape",function(){b(e);let i=p();return v(i.closeImageDetailModal())}),r(1,"div",256),w("click",function(i){return b(e),v(i.stopPropagation())}),r(2,"div",147)(3,"h3"),l(4,"\u{1F5BC}\uFE0F \uC774\uBBF8\uC9C0 \uC0C1\uC138 \uC815\uBCF4"),s(),r(5,"button",257),w("click",function(){b(e);let i=p();return v(i.closeImageDetailModal())}),l(6,"\u2715"),s()(),r(7,"div",152)(8,"div",154)(9,"div",155)(10,"div",156),l(11,"\u{1F5BC}\uFE0F"),s(),r(12,"div",157)(13,"div",158),l(14,"\uCD1D \uC774\uBBF8\uC9C0 \uC218"),s(),r(15,"div",159),l(16),s(),r(17,"div",160),l(18),s()()(),r(19,"div",155)(20,"div",156),l(21,"\u{1F4C4}"),s(),r(22,"div",157)(23,"div",158),l(24,"\uC774\uBBF8\uC9C0 \uD3EC\uD568 \uD398\uC774\uC9C0"),s(),r(25,"div",159),l(26),s(),r(27,"div",160),l(28),s()()(),r(29,"div",155)(30,"div",156),l(31,"\u{1F4CA}"),s(),r(32,"div",157)(33,"div",158),l(34,"\uD398\uC774\uC9C0\uB2F9 \uD3C9\uADE0"),s(),r(35,"div",159),l(36),s(),r(37,"div",160),l(38,"\uC774\uBBF8\uC9C0/\uD398\uC774\uC9C0"),s()()()(),r(39,"div",120)(40,"h4"),l(41,"\u{1F4C4} \uD398\uC774\uC9C0\uBCC4 \uC774\uBBF8\uC9C0"),s(),I(42,zr,8,3,"div",258),s(),r(43,"div",120)(44,"h4"),l(45,"\u{1F4CA} \uC774\uBBF8\uC9C0 \uD0C0\uC785 \uD1B5\uACC4"),s(),r(46,"div",182)(47,"div",183)(48,"div",184),l(49,"\u{1F4E6}"),s(),r(50,"div",185),l(51,"XObject \uC774\uBBF8\uC9C0"),s(),r(52,"div",186),l(53),s()(),r(54,"div",187),R(55,"div",259),s(),r(56,"div",189),l(57,"\uC678\uBD80 \uC774\uBBF8\uC9C0 \uAC1D\uCCB4"),s()(),r(58,"div",182)(59,"div",183)(60,"div",184),l(61,"\u{1F4DD}"),s(),r(62,"div",185),l(63,"Inline \uC774\uBBF8\uC9C0"),s(),r(64,"div",186),l(65),s()(),r(66,"div",187),R(67,"div",260),s(),r(68,"div",189),l(69,"\uC778\uB77C\uC778 \uC774\uBBF8\uC9C0"),s()()()(),r(70,"div",150)(71,"button",151),w("click",function(){b(e);let i=p();return v(i.closeImageDetailModal())}),l(72,"\uB2EB\uAE30"),s()()()()}if(o&2){let e=p();c(16),T(e.formatNumber(e.analysisData.imageInfo.totalImages)),c(2),M("",e.analysisData.imageInfo.pagesWithImages,"\uAC1C \uD398\uC774\uC9C0"),c(8),T(e.safeNumber(e.analysisData.imageInfo.pagesWithImages)),c(2),M("",e.safePercentage(e.analysisData.imageInfo.pagesWithImages,e.analysisData.pageCount),"%"),c(8),T(e.safeAverage(e.analysisData.imageInfo.totalImages,e.analysisData.imageInfo.pagesWithImages)),c(6),u("ngForOf",e.analysisData.imageInfo.images),c(11),T(e.getImageTypeCount("XObject")),c(2),H("width",e.getImageTypePercentage("XObject"),"%"),c(10),T(e.getImageTypeCount("Inline")),c(2),H("width",e.getImageTypePercentage("Inline"),"%")}}var Bt=class o{analysisData=null;isCollapsed=!1;isDraggable=!0;isCompact=!0;vectorData=null;imageData=null;vectorMinimaps={};hasGeneratedDocument=!1;analyzedPage=null;closeEvent=new $;createSvgPdfEvent=new $;createTextStructureDocEvent=new $;createCombinedDocEvent=new $;viewOriginalEvent=new $;createNewDocumentEvent=new $;requestMinimapEvent=new $;exportPdfEvent=new $;createImagePdfEvent=new $;exportOriginalPdfEvent=new $;Math=Math;pdfFactory=J(Tt);pdfImageExtractor=J(rt);currentStrategy;ContentType;snackbar=J($e);debugLogger=J(ze);librariesLoaded=!1;librariesLoadPromise=null;isDragging=!1;dragStartX=0;dragStartY=0;currentX=20;currentY=80;isMinimized=!1;showVectorDetailModal=!1;showTextDetailModal=!1;showImageDetailModal=!1;selectedPage=1;textItemsPerPage=50;currentTextPage=0;showCombinedAnalysisModal=!1;_vectorSvgMinimap="";selectedMiniPage=1;statCards=[];showJsonView=!1;isPdfStructureExpanded=!1;isPageAnalysisExpanded=!0;selectedAnalysisPage=1;showPageTextItems=!1;textItemsDisplayCount=20;get vectorSvgMinimap(){if(this.vectorMinimaps&&this.vectorMinimaps[this.selectedMiniPage])return this.vectorMinimaps[this.selectedMiniPage];if(this.vectorData&&this.vectorData.pageDetails){let t=this.vectorData.pageDetails.find(e=>e.pageNumber===this.selectedMiniPage);if(t&&t.svgContent)return t.svgContent}return this._vectorSvgMinimap?this._vectorSvgMinimap:this.createLoadingMinimap()}set vectorSvgMinimap(t){this._vectorSvgMinimap=t}hasGlyphShapeData(){let t=this.analysisData?.vectorSummary;return t?.glyphPaths!==void 0||t?.shapePaths!==void 0}getGlyphPaths(){return this.analysisData?.vectorSummary?.glyphPaths||0}hasFullPageSvg(){return this.vectorData?.pageDetails?this.vectorData.pageDetails.some(t=>t.fullPageSvg&&t.fullPageSvg.length>0):!1}getPageSize(){if(!this.analysisData)return"\uC54C \uC218 \uC5C6\uC74C";let t=this.analysisData.pageWidth,e=this.analysisData.pageHeight;return!t||!e?"\uC54C \uC218 \uC5C6\uC74C":`${Math.round(t)} \xD7 ${Math.round(e)} pt`}getPdfVersion(){return this.analysisData?.pdfVersion||"1.7"}getPdfMetadata(){if(!this.analysisData)return null;let t=this.analysisData,e=t.pdfMetadata||t.vectorInfo?.pdfMetadata||{};return!e||Object.keys(e).length===0||!(e.Author||e.author||e.Creator||e.creator||e.Producer||e.producer||e.Title||e.title||e.Subject||e.subject||e.Keywords||e.keywords||e.CreationDate||e.creationDate||e.ModDate||e.modDate)?null:{author:e.Author||e.author||"",creator:e.Creator||e.creator||"",producer:e.Producer||e.producer||"",title:e.Title||e.title||"",subject:e.Subject||e.subject||"",keywords:e.Keywords||e.keywords||"",creationDate:e.CreationDate||e.creationDate||"",modDate:e.ModDate||e.modDate||e.ModificationDate||""}}formatPdfDate(t){if(!t)return"";if(t.startsWith("D:")){let e=t.substring(2),n=e.substring(0,4),i=e.substring(4,6),a=e.substring(6,8),d=e.substring(8,10),g=e.substring(10,12),m=e.substring(12,14);return`${n}-${i}-${a} ${d}:${g}:${m}`}if(t.includes("T")){let e=new Date(t);if(!isNaN(e.getTime()))return e.toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}return t}getImageDetails(){if(!this.analysisData?.imageInfo||!this.analysisData.imageInfo.images)return[];let t=[];return this.analysisData.imageInfo.images.forEach(e=>{e.images.forEach((n,i)=>{let a=n.originalWidth||n.width,d=n.originalHeight||n.height;t.push({label:`\uD398\uC774\uC9C0 ${e.pageNumber} - \uC774\uBBF8\uC9C0 ${i+1}`,size:`${a} \xD7 ${d}`,filter:n.filter||n.type||"Unknown"})})}),t}getTextSentences(){if(!this.analysisData?.textInfo?.pages)return[];let t=[];return this.analysisData.textInfo.pages.forEach(e=>{e.sentences&&Array.isArray(e.sentences)&&t.push(...e.sentences)}),t}formatColor(t){if(!t)return"N/A";if(typeof t=="string")return t;if(Array.isArray(t)){if(t.length===3)return`rgb(${t.map(e=>Math.round(e*255)).join(", ")})`;if(t.length===4){let[e,n,i,a]=t;return`cmyk(${Math.round(e*100)}%, ${Math.round(n*100)}%, ${Math.round(i*100)}%, ${Math.round(a*100)}%)`}}return typeof t=="object"&&"r"in t?`rgb(${t.r}, ${t.g}, ${t.b})`:JSON.stringify(t)}getStreamAnalysis(){let t=[];return this.analysisData&&(t.push({type:"\uD14D\uC2A4\uD2B8",count:this.analysisData.totalTextItems||0}),(this.analysisData.hasVectorGraphics||this.analysisData.totalVectorOperations!==void 0)&&t.push({type:"\uBCA1\uD130 \uADF8\uB798\uD53D",count:this.analysisData.totalVectorOperations||0}),(this.analysisData.hasImages||this.analysisData.imageInfo)&&t.push({type:"\uC774\uBBF8\uC9C0 (XObject)",count:this.analysisData.imageInfo?.totalImages||0}),this.analysisData.vectorSummary?.totalPaths&&t.push({type:"\uD328\uC2A4",count:this.analysisData.vectorSummary.totalPaths})),t}toggleJsonView(){this.showJsonView=!this.showJsonView}togglePdfStructure(){this.isPdfStructureExpanded=!this.isPdfStructureExpanded}getStructureAsJson(){if(!this.analysisData)return"{}";let t=this.analysisData?.vectorInfo,e=this.analysisData,n=this.extractPdfMetadata(e),i={filename:this.analysisData.fileName||"unknown.pdf",analysis_date:new Date().toISOString().split("T")[0],basic_info:{pages:this.analysisData.pageCount,metadata:n,page_size:{width:this.getPageSize().split(" \xD7 ")[0]+" pt",height:this.getPageSize().split(" \xD7 ")[1]?.replace(" pt","")+" pt"||"0 pt",orientation:this.getPageOrientation()}},text_analysis:{total_characters:this.analysisData.totalCharacters||0,total_lines:this.analysisData.totalTextItems||0,total_words:this.analysisData.totalWords||0,has_extractable_text:this.analysisData.totalTextItems>0,preview:this.getTextPreview()},image_analysis:{total_images:this.analysisData.imageInfo?.totalImages||0,pages_with_images:this.analysisData.imageInfo?.pagesWithImages||0,image_objects:this.getImageDetails().map(a=>a.label)},stream_analysis:{total_streams:1,first_page:{content_stream_size:`${this.analysisData.fileSize||0} bytes`,commands:{path_drawing:(this.analysisData.vectorSummary?.totalPaths||0)+(this.analysisData.vectorSummary?.totalLines||0)+(this.analysisData.vectorSummary?.totalCurves||0)+(this.analysisData.vectorSummary?.totalRectangles||0),rectangles:this.analysisData.vectorSummary?.totalRectangles||0,text_operations:this.analysisData.totalTextItems||0,image_xobjects:this.analysisData.imageInfo?.totalImages||0,color_settings:0,transform_matrix:0},rectangles_detail:this.extractRectanglesDetail(),content_types:{has_vector_graphics:this.analysisData.hasVectorGraphics||!1,has_text_streams:this.analysisData.totalTextItems>0,has_images:(this.analysisData.imageInfo?.totalImages||0)>0}}},resources:{xobjects:this.analysisData.imageInfo?.totalImages||0,fonts:this.analysisData.uniqueFonts?.length||0,ext_gstates:0},conclusion:{pdf_type:this.getPdfType(),issues:this.getPdfIssues(),recommendations:this.getPdfRecommendations()},vectorInfo:this.getEnhancedVectorInfo(),pageWidth:this.analysisData.pageWidth,pageHeight:this.analysisData.pageHeight,imageInfo:this.analysisData.imageInfo,debug_info:this.getDebugInfo()};return JSON.stringify(i,null,2)}getEnhancedVectorInfo(){let t=this.analysisData?.vectorInfo;if(!t)return null;let e=this.extractRectanglesDetail();return pe(Y({},t),{pageDetails:t.pageDetails?.map((i,a)=>a===0&&e.length>0?pe(Y({},i),{debugInfo:pe(Y({},i.debugInfo||{}),{rectangles_detail:e})}):i)||[]})}getPageOrientation(){let t=this.getPageSize(),[e,n]=t.split(" \xD7 "),i=parseFloat(e),a=parseFloat(n);return i>a?"\uAC00\uB85C(Landscape)":"\uC138\uB85C(Portrait)"}extractPdfMetadata(t){let e=t.pdfMetadata||t.vectorInfo?.pdfMetadata||t.textInfo?.pdfMetadata||{};return{title:e.Title||e.title||"",author:e.Author||e.author||"",creationdate:e.CreationDate||e.creationDate||"",moddate:e.ModDate||e.modDate||e.ModificationDate||"",producer:e.Producer||e.producer||"",creator:e.Creator||e.creator||""}}getTextPreview(){if(!this.analysisData)return"";let t=this.analysisData,e=t.textStreamData;if(e?.pages&&e.pages.length>0){let i="";for(let a of e.pages){for(let d of a.items||[])if(i+=d.str||"",i.length>=500)break;if(i.length>=500)break}return i.substring(0,500).replace(/\n/g,"\\n")}if(t.pages&&t.pages.length>0){let i="";for(let a of t.pages){for(let d of a.textItems||[])if(i+=d.text||"",i.length>=500)break;if(i.length>=500)break}return i.substring(0,500).replace(/\n/g,"\\n")}let n=t.textInfo;if(n?.pages&&n.pages.length>0){let i="";for(let a of n.pages){for(let d of a.textItems||[])if(i+=d.text||"",i.length>=500)break;if(i.length>=500)break}return i.substring(0,500).replace(/\n/g,"\\n")}return""}extractRectanglesDetail(){if(!this.analysisData)return[];let t=this.analysisData?.vectorInfo;if(!t?.pageDetails||t.pageDetails.length===0)return[];let e=[],n=t.pageDetails[0];if(!n.operations||n.operations.length===0)return[];let i=null,a=null,d=[],g=[];for(let m of n.operations){if(m.fnCode===31){g.push({type:"SAVE",stackDepth:d.length}),d.push({fill:i?Y({},i):null,stroke:a?Y({},a):null});continue}if(m.fnCode===32){let h=d.pop();g.push({type:"RESTORE",restored:h,stackDepth:d.length}),h&&(i=h.fill,a=h.stroke);continue}if(m.fnCode===59&&m.args){let h=m.args,f=h[0]||h.r||0,C=h[1]||h.g||0,_=h[2]||h.b||0;i={r:f<=1?Math.round(f*255):Math.round(f),g:C<=1?Math.round(C*255):Math.round(C),b:_<=1?Math.round(_*255):Math.round(_)},g.push({type:"SET_FILL",color:i})}if(m.fnCode===60&&m.args){let h=m.args,f=h[0]||h.r||0,C=h[1]||h.g||0,_=h[2]||h.b||0;a={r:f<=1?Math.round(f*255):Math.round(f),g:C<=1?Math.round(C*255):Math.round(C),b:_<=1?Math.round(_*255):Math.round(_)}}if(m.fnCode===91&&m.args&&Array.isArray(m.args[0])&&m.args[0].includes(19)){let f=m.args[1];if(f&&f.length>=4){let C={index:e.length+1,x:f[0],y:f[1],width:f[2],height:f[3],area:f[2]*f[3]};if(g.push({type:"RECTANGLE",index:e.length+1,fillColor:i,stackDepth:d.length}),i){let _=Math.round(i.r),y=Math.round(i.g),S=Math.round(i.b);C.fill_color={r:_,g:y,b:S},C.fill_color_hex=`#${_.toString(16).padStart(2,"0")}${y.toString(16).padStart(2,"0")}${S.toString(16).padStart(2,"0")}`}if(a){let _=Math.round(a.r),y=Math.round(a.g),S=Math.round(a.b);C.stroke_color={r:_,g:y,b:S},C.stroke_color_hex=`#${_.toString(16).padStart(2,"0")}${y.toString(16).padStart(2,"0")}${S.toString(16).padStart(2,"0")}`}e.push(C)}}}return e.length>0&&(e[0].debug_operations=g),e}getPdfType(){if(!this.analysisData)return"\uC54C \uC218 \uC5C6\uB294 \uD0C0\uC785";let t=this.analysisData.hasVectorGraphics||!1,e=this.analysisData.totalTextItems>0;return(this.analysisData.imageInfo?.totalImages||0)>0&&!t&&!e?"\uC774\uBBF8\uC9C0 \uAE30\uBC18 PDF (PowerPoint \uC0DD\uC131)":t&&e?"\uBCA1\uD130 + \uD14D\uC2A4\uD2B8 \uD63C\uD569 PDF":t?"\uBCA1\uD130 \uADF8\uB798\uD53D PDF":e?"\uD14D\uC2A4\uD2B8 \uAE30\uBC18 PDF":"\uC54C \uC218 \uC5C6\uB294 \uD0C0\uC785"}getPdfIssues(){if(!this.analysisData)return[];let t=[],e=this.analysisData.hasVectorGraphics||!1,n=this.analysisData.totalTextItems>0,i=(this.analysisData.imageInfo?.totalImages||0)>0;return e||t.push("\uBCA1\uD130 \uADF8\uB798\uD53D \uC5C6\uC74C - \uACBD\uB85C \uADF8\uB9AC\uAE30 \uBA85\uB839\uC5B4\uAC00 \uC801\uC74C"),n||t.push("\uD14D\uC2A4\uD2B8 \uC2A4\uD2B8\uB9BC \uC5C6\uC74C - \uD14D\uC2A4\uD2B8 \uBA85\uB839\uC5B4\uAC00 0\uAC1C"),i&&!e&&!n&&t.push("\uBAA8\uB4E0 \uCF58\uD150\uCE20\uAC00 \uC774\uBBF8\uC9C0(XObject)\uB85C \uC800\uC7A5\uB428"),t}getPdfRecommendations(){if(!this.analysisData)return[];let t=[],e=this.analysisData.hasVectorGraphics||!1,n=this.analysisData.totalTextItems>0;return!e&&!n&&(t.push("\uBCA1\uD130 \uADF8\uB798\uD53D\uC774\uB098 \uD14D\uC2A4\uD2B8\uAC00 \uD3EC\uD568\uB41C PDF \uC0AC\uC6A9"),t.push("PowerPoint\uC5D0\uC11C PDF \uC0DD\uC131 \uC2DC '\uACE0\uD488\uC9C8' \uB610\uB294 '\uBCA1\uD130' \uC635\uC158 \uC0AC\uC6A9"),t.push("\uC774\uBBF8\uC9C0 \uC804\uC6A9 PDF\uC5D0 \uB300\uD55C \uBCC4\uB3C4 \uCC98\uB9AC \uB85C\uC9C1 \uCD94\uAC00 \uD544\uC694")),t}getDebugInfo(){let t=this.analysisData?.vectorInfo;if(t?.pageDetails?.length>0){let e=t.pageDetails[0],n=e?.debugInfo;if(n)return pe(Y({},n),{pageStatistics:e.statistics,totalOperations:t.totalOperations,vectorSummary:t.summary,analysisContext:{pageCount:t.pageCount,totalPaths:t.summary?.totalPaths||0,totalLines:t.summary?.totalLines||0,totalCurves:t.summary?.totalCurves||0,totalRectangles:t.summary?.totalRectangles||0}})}return{error:"debugInfo not found",vectorInfoKeys:t?Object.keys(t):null,vectorInfoPageDetails:t?.pageDetails?"exists":"missing",vectorInfoPageDetailsLength:t?.pageDetails?.length||0,firstPageKeys:t?.pageDetails?.[0]?Object.keys(t.pageDetails[0]):null,vectorInfoSummary:t?{totalOperations:t.totalOperations,pageCount:t.pageCount,summary:t.summary}:null}}copyStructureAsJson(){return E(this,null,function*(){try{let t=this.getStructureAsJson();yield navigator.clipboard.writeText(t),this.snackbar.showSuccess("\uC804\uCCB4 JSON \uB370\uC774\uD130\uAC00 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("\uD074\uB9BD\uBCF4\uB4DC \uBCF5\uC0AC \uC2E4\uD328:",t),this.snackbar.showError("\uD074\uB9BD\uBCF4\uB4DC \uBCF5\uC0AC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}copyTextInfoAsJson(){return E(this,null,function*(){try{if(!this.analysisData?.textInfo){this.snackbar.showWarning("\uD14D\uC2A4\uD2B8 \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let t={filename:this.analysisData.fileName||"unknown.pdf",analysis_date:new Date().toISOString().split("T")[0],text_analysis:{total_items:this.analysisData.totalTextItems||0,total_characters:this.analysisData.totalCharacters||0,total_words:this.analysisData.totalWords||0,has_extractable_text:this.analysisData.totalTextItems>0,preview:this.getTextPreview()},text_details:this.analysisData.textInfo,fonts:this.analysisData.uniqueFonts||[]};yield navigator.clipboard.writeText(JSON.stringify(t,null,2)),this.snackbar.showSuccess("\uD14D\uC2A4\uD2B8 \uC815\uBCF4\uAC00 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("\uD14D\uC2A4\uD2B8 \uC815\uBCF4 \uBCF5\uC0AC \uC2E4\uD328:",t),this.snackbar.showError("\uD14D\uC2A4\uD2B8 \uC815\uBCF4 \uBCF5\uC0AC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}copyVectorInfoAsJson(){return E(this,null,function*(){try{if(!this.analysisData?.vectorInfo&&!this.analysisData?.vectorSummary){this.snackbar.showWarning("\uBCA1\uD130 \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let t={filename:this.analysisData.fileName||"unknown.pdf",analysis_date:new Date().toISOString().split("T")[0],vector_analysis:{has_vector_graphics:this.analysisData.hasVectorGraphics||!1,total_rectangles:this.analysisData.vectorSummary?.totalRectangles||0,total_paths:this.analysisData.vectorSummary?.totalPaths||0,total_lines:this.analysisData.vectorSummary?.totalLines||0,total_curves:this.analysisData.vectorSummary?.totalCurves||0},rectangles_detail:this.extractRectanglesDetail(),vector_info:this.getEnhancedVectorInfo()};yield navigator.clipboard.writeText(JSON.stringify(t,null,2)),this.snackbar.showSuccess("\uBCA1\uD130 \uC815\uBCF4\uAC00 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("\uBCA1\uD130 \uC815\uBCF4 \uBCF5\uC0AC \uC2E4\uD328:",t),this.snackbar.showError("\uBCA1\uD130 \uC815\uBCF4 \uBCF5\uC0AC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}copyImageInfoAsJson(){return E(this,null,function*(){try{if(!this.analysisData?.imageInfo||this.analysisData.imageInfo.totalImages===0){this.snackbar.showWarning("\uC774\uBBF8\uC9C0 \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let t={filename:this.analysisData.fileName||"unknown.pdf",analysis_date:new Date().toISOString().split("T")[0],image_analysis:{total_images:this.analysisData.imageInfo.totalImages,pages_with_images:this.analysisData.imageInfo.pagesWithImages,image_details:this.getImageDetails().map(e=>({label:e.label,size:e.size,filter:e.filter}))},image_info:this.analysisData.imageInfo};yield navigator.clipboard.writeText(JSON.stringify(t,null,2)),this.snackbar.showSuccess("\uC774\uBBF8\uC9C0 \uC815\uBCF4\uAC00 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}catch(t){console.error("\uC774\uBBF8\uC9C0 \uC815\uBCF4 \uBCF5\uC0AC \uC2E4\uD328:",t),this.snackbar.showError("\uC774\uBBF8\uC9C0 \uC815\uBCF4 \uBCF5\uC0AC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}getShapePaths(){return this.analysisData?.vectorSummary?.shapePaths||0}displayData={textPercentage:0,vectorPercentage:0,koreanPercentage:0,englishPercentage:0,formattedFileSize:"",avgTextPerPage:0,avgVectorPerPage:0};buildStatCards(){return this.analysisData?[{icon:"\u{1F4CA}",label:this.getCombinedContentType(),value:"\uD3B8\uC9D1\uBB38\uC11C \uB9CC\uB4E4\uAE30",detail:this.isCompact?void 0:this.getCombinedStats(),isEmpty:!1,clickable:!0,customClass:"combined-analysis",onClick:()=>{this.openCombinedAnalysis(new MouseEvent("click"))}},{icon:"\u{1F4DD}",label:"new",value:"\uC0C8\uBB38\uC11C \uB9CC\uB4E4\uAE30",detail:"\uD3B8\uC9D1\uC774 \uC544\uB2CC \uBE48 \uD398\uC774\uC9C0\uB97C \uB9CC\uB4ED\uB2C8\uB2E4",isEmpty:!1,clickable:!0,customClass:"new-document-btn-card",onClick:()=>this.createNewDocument()},{icon:"\u{1F4DD}",label:`${this.analysisData.totalTextItems||0}\uAC1C`,value:"\uD14D\uC2A4\uD2B8 \uC0C1\uC138\uC815\uBCF4",detail:this.isCompact?void 0:`${this.displayData.avgTextPerPage} \uD56D\uBAA9/\uCABD`,isEmpty:!this.analysisData.totalTextItems,clickable:this.analysisData.totalTextItems>0,customClass:"text-info",onClick:()=>this.openTextDetail(new MouseEvent("click"))},{icon:"\u{1F3A8}",label:this.analysisData.hasVectorGraphics?`${this.analysisData.totalVectorOperations||0}\uAC1C`:"\uC5C6\uC74C",value:"\uBCA1\uD130 \uC0C1\uC138\uC815\uBCF4",detail:this.analysisData.hasVectorGraphics&&!this.isCompact?this.getVectorComplexity():void 0,isEmpty:!this.analysisData.hasVectorGraphics&&!this.hasFullPageSvg(),clickable:this.analysisData.hasVectorGraphics||this.hasFullPageSvg(),customClass:"vector-info",onClick:()=>this.openVectorDetail(new MouseEvent("click"))},{icon:"\u{1F5BC}\uFE0F",label:this.analysisData.hasImages&&this.analysisData.imageInfo?`${this.analysisData.imageInfo.totalImages}\uAC1C`:"\uC5C6\uC74C",value:"\uC774\uBBF8\uC9C0 \uC0C1\uC138\uC815\uBCF4",detail:this.analysisData.hasImages&&this.analysisData.imageInfo&&!this.isCompact?`${this.analysisData.imageInfo.pagesWithImages}\uAC1C \uD398\uC774\uC9C0`:void 0,isEmpty:!this.analysisData.hasImages,clickable:this.analysisData.hasImages,customClass:"image-info",onClick:()=>this.openImageDetail(new MouseEvent("click"))}]:[]}ngOnChanges(t){t.analysisData&&this.analysisData&&(this.calculateDisplayData(),this.statCards=this.buildStatCards(),this.ensureLibrariesLoaded()),t.analyzedPage,(t.vectorMinimaps||t.vectorData)&&this.requestCurrentPageMinimap()}ensureLibrariesLoaded(){return E(this,null,function*(){if(!this.librariesLoaded){if(this.librariesLoadPromise)return this.librariesLoadPromise;this.librariesLoadPromise=this.loadLibraries(),yield this.librariesLoadPromise}})}loadLibraries(){return new Promise((t,e)=>{let n=[{name:"PDF-lib",url:"https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js",checkLoaded:()=>typeof window.PDFLib<"u"},{name:"JSZip",url:"https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js",checkLoaded:()=>typeof window.JSZip<"u"}];if(n.filter(g=>g.checkLoaded()).length===n.length){this.librariesLoaded=!0,t();return}let d=n.filter(g=>!g.checkLoaded()).map(g=>new Promise((m,h)=>{let f=document.createElement("script");f.src=g.url,f.async=!0,f.onload=()=>{m()},f.onerror=()=>{console.error(`\u274C ${g.name} \uB77C\uC774\uBE0C\uB7EC\uB9AC \uB85C\uB4DC \uC2E4\uD328`),h(new Error(`${g.name} \uB85C\uB4DC \uC2E4\uD328`))},document.head.appendChild(f)}));Promise.all(d).then(()=>{typeof window.PDFLib<"u"&&(window.PDFLib=window.PDFLib),this.librariesLoaded=!0,t()}).catch(g=>{console.error("\u274C \uB77C\uC774\uBE0C\uB7EC\uB9AC \uB85C\uB4DC \uC911 \uC624\uB958 \uBC1C\uC0DD:",g),this.snackbar.showError("PDF \uB77C\uC774\uBE0C\uB7EC\uB9AC \uB85C\uB4DC \uC2E4\uD328. \uD398\uC774\uC9C0\uB97C \uC0C8\uB85C\uACE0\uCE68\uD574\uC8FC\uC138\uC694."),e(g)})})}calculateDisplayData(){if(!this.analysisData)return;let t=this.analysisData,e=t.totalTextItems+(t.totalVectorOperations||0);if(e>0&&(this.displayData.textPercentage=Math.round(t.totalTextItems/e*100),this.displayData.vectorPercentage=Math.round((t.totalVectorOperations||0)/e*100)),t.languageDetection){let n=t.languageDetection.korean+t.languageDetection.english+t.languageDetection.mixed;n>0&&(this.displayData.koreanPercentage=Math.round(t.languageDetection.korean/n*100),this.displayData.englishPercentage=Math.round(t.languageDetection.english/n*100))}t.fileSize&&(this.displayData.formattedFileSize=this.formatFileSize(t.fileSize)),t.pageCount>0&&(this.displayData.avgTextPerPage=Math.round(t.totalTextItems/t.pageCount),this.displayData.avgVectorPerPage=Math.round((t.totalVectorOperations||0)/t.pageCount))}formatFileSize(t){if(t===0)return"0 Bytes";let e=1024,n=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,i)*100)/100+" "+n[i]}formatNumber(t){return t==null?"0":t.toLocaleString()}getLanguageDominant(){if(!this.analysisData?.languageDetection)return"-";let t=this.analysisData.languageDetection;return t.korean>t.english&&t.korean>t.mixed?"\uD55C\uAD6D\uC5B4":t.english>t.korean&&t.english>t.mixed?"English":t.mixed>0?"\uD63C\uD569":"-"}getVectorComplexity(){let t=this.analysisData?.totalVectorOperations||0;return t===0?"\uC5C6\uC74C":t<100?"\uB2E8\uC21C":t<500?"\uBCF4\uD1B5":t<2e3?"\uBCF5\uC7A1":"\uB9E4\uC6B0 \uBCF5\uC7A1"}onDragStart(t){if(!this.isDraggable)return;let e=t.target;e.closest(".stat-card")||e.closest("app-pdf-stat-card")||(this.isDragging=!0,this.dragStartX=t.clientX-this.currentX,this.dragStartY=t.clientY-this.currentY,t.preventDefault())}onDrag(t){this.isDragging&&(this.currentX=t.clientX-this.dragStartX,this.currentY=t.clientY-this.dragStartY,t.preventDefault())}onDragEnd(){this.isDragging=!1}toggleMinimize(){this.isMinimized=!this.isMinimized}close(){this.closeEvent.emit()}openTextDetail(t){t.stopPropagation(),this.analysisData&&this.analysisData.totalTextItems>0&&(this.showTextDetailModal=!0)}closeTextDetailModal(){this.showTextDetailModal=!1}createTextStructureDocument(){this.createTextStructureDocEvent.emit()}openCombinedAnalysis(t){t.stopPropagation(),this.showCombinedAnalysisModal=!0}closeCombinedAnalysisModal(){this.showCombinedAnalysisModal=!1}openImageDetail(t){t.stopPropagation(),this.analysisData&&this.analysisData.hasImages&&this.analysisData.imageInfo&&(this.showImageDetailModal=!0)}closeImageDetailModal(){this.showImageDetailModal=!1}getCombinedContentType(){if(!this.analysisData)return"-";let t=this.analysisData.hasVectorGraphics,e=this.analysisData.totalTextItems>0,n=this.analysisData.hasImages,i=[];return t&&i.push("\uBCA1\uD130"),e&&i.push("\uD14D\uC2A4\uD2B8"),n&&i.push("\uC774\uBBF8\uC9C0"),i.length===0?"\uC5C6\uC74C":i.length===3?"\uC804\uCCB4 \uD63C\uD569":i.length===2?i.join("+"):i[0]}getCombinedStats(){if(!this.analysisData)return"-";let t=this.analysisData.hasVectorGraphics,e=this.analysisData.totalTextItems>0,n=this.analysisData.hasImages,i=[];return t&&i.push(`\uBCA1\uD130 ${this.formatNumber(this.analysisData.totalVectorOperations)}`),e&&i.push(`\uD14D\uC2A4\uD2B8 ${this.formatNumber(this.analysisData.totalTextItems)}`),n&&this.analysisData.imageInfo&&i.push(`\uC774\uBBF8\uC9C0 ${this.formatNumber(this.analysisData.imageInfo.totalImages)}`),i.length===0?"\uCF58\uD150\uCE20 \uC5C6\uC74C":i.join(" + ")}getVectorTextRatio(){if(!this.analysisData)return{vectorPercentage:0,textPercentage:0};let t=this.analysisData.totalVectorOperations||0,e=this.analysisData.totalTextItems||0,n=t+e;if(n===0)return{vectorPercentage:0,textPercentage:0};let i=Math.round(t/n*100),a=Math.round(e/n*100);return{vectorPercentage:i,textPercentage:a}}getImageRatioPercentage(){if(!this.analysisData||!this.analysisData.hasImages||!this.analysisData.imageInfo)return 0;let t=this.analysisData.totalVectorOperations||0,e=this.analysisData.totalTextItems||0,i=(this.analysisData.imageInfo.totalImages||0)*100,a=t+e+i;return a===0?0:Math.round(i/a*100)}getContentDominance(){let t=this.getVectorTextRatio();return t.vectorPercentage>70?"\u{1F3A8} \uBCA1\uD130 \uADF8\uB798\uD53D\uC774 \uC9C0\uBC30\uC801\uC778 \uBB38\uC11C\uC785\uB2C8\uB2E4. \uC774\uBBF8\uC9C0\uB098 \uB2E4\uC774\uC5B4\uADF8\uB7A8\uC774 \uB9CE\uC740 \uBB38\uC11C\uB85C \uBCF4\uC785\uB2C8\uB2E4.":t.textPercentage>70?"\u{1F4DD} \uD14D\uC2A4\uD2B8\uAC00 \uC9C0\uBC30\uC801\uC778 \uBB38\uC11C\uC785\uB2C8\uB2E4. \uC8FC\uB85C \uD14D\uC2A4\uD2B8 \uAE30\uBC18\uC758 \uBB38\uC11C\uC785\uB2C8\uB2E4.":Math.abs(t.vectorPercentage-t.textPercentage)<20?"\u2696\uFE0F \uBCA1\uD130\uC640 \uD14D\uC2A4\uD2B8\uAC00 \uADE0\uD615\uC744 \uC774\uB8E8\uB294 \uBB38\uC11C\uC785\uB2C8\uB2E4. \uC774\uBBF8\uC9C0\uC640 \uD14D\uC2A4\uD2B8\uAC00 \uC801\uC808\uD788 \uD63C\uD569\uB41C \uBB38\uC11C\uC785\uB2C8\uB2E4.":t.vectorPercentage>t.textPercentage?"\u{1F3A8} \uBCA1\uD130 \uADF8\uB798\uD53D\uC774 \uB354 \uB9CE\uC740 \uBB38\uC11C\uC785\uB2C8\uB2E4.":"\u{1F4DD} \uD14D\uC2A4\uD2B8\uAC00 \uB354 \uB9CE\uC740 \uBB38\uC11C\uC785\uB2C8\uB2E4."}createCombinedDocument(){if(this.debugLogger.info("\uD63C\uD569\uBB38\uC11C","\u{1F4CA} \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC2DC\uC791 (\uBCA1\uD130 + \uD14D\uC2A4\uD2B8)"),!this.analysisData){this.debugLogger.error("\uD63C\uD569\uBB38\uC11C","\u274C analysisData\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.snackbar.showWarning("\uBD84\uC11D \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let t=this.analysisData.hasVectorGraphics,e=this.analysisData.totalTextItems>0;if(!t&&!e){this.debugLogger.error("\uD63C\uD569\uBB38\uC11C","\u274C \uBCA1\uD130 \uADF8\uB798\uD53D\uACFC \uD14D\uC2A4\uD2B8\uAC00 \uBAA8\uB450 \uC5C6\uC2B5\uB2C8\uB2E4."),this.snackbar.showWarning("\uC0DD\uC131\uD560 \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.debugLogger.success("\uD63C\uD569\uBB38\uC11C",`\u2705 \uD63C\uD569 \uBB38\uC11C \uC0DD\uC131 \uC774\uBCA4\uD2B8 \uBC1C\uC0DD - \uBCA1\uD130: ${t?"O":"X"}, \uD14D\uC2A4\uD2B8: ${e?"O":"X"}`),this.createCombinedDocEvent.emit()}viewOriginalDocument(){this.debugLogger.info("\uC6D0\uBCF8\uBCF4\uAE30","\u{1F441}\uFE0F \uC6D0\uBCF8 PDF \uBCF4\uAE30 \uC694\uCCAD"),this.viewOriginalEvent.emit(),this.snackbar.showInfo("\uC6D0\uBCF8 PDF \uBDF0\uC5B4\uB85C \uC804\uD658\uD569\uB2C8\uB2E4.")}createNewDocument(){this.debugLogger.info("\uC0C8\uBB38\uC11C","\u{1F4DD} \uC0C8\uBB38\uC11C \uB9CC\uB4E4\uAE30 \uC694\uCCAD"),this.createNewDocumentEvent.emit();let t=this.hasGeneratedDocument?"\uD3B8\uC9D1 \uBB38\uC11C\uB97C \uD45C\uC2DC\uD569\uB2C8\uB2E4.":"\uC0C8\uBB38\uC11C\uB97C \uC791\uC131\uD569\uB2C8\uB2E4.";this.snackbar.showInfo(t)}get newDocumentButtonText(){return this.hasGeneratedDocument?"\u{1F4C4}":"\u{1F4DD}"}get newDocumentButtonTitle(){return this.hasGeneratedDocument?"\uD3B8\uC9D1 \uBB38\uC11C \uBCF4\uAE30":"\uC0C8\uBB38\uC11C \uB9CC\uB4E4\uAE30"}exportPdf(){this.exportPdfEvent.emit()}createCombinedPdf(){if(this.debugLogger.info("\uD63C\uD569PDF","\u{1F4C4} \uD63C\uD569 PDF \uC0DD\uC131 \uC2DC\uC791 (\uBCA1\uD130 + \uD14D\uC2A4\uD2B8 + \uC774\uBBF8\uC9C0)"),!this.analysisData){this.debugLogger.error("\uD63C\uD569PDF","\u274C analysisData\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.snackbar.showWarning("\uBD84\uC11D \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let t=this.analysisData.hasVectorGraphics,e=this.analysisData.totalTextItems>0,n=this.analysisData.hasImages;if(!t&&!e&&!n){this.debugLogger.error("\uD63C\uD569PDF","\u274C \uC0DD\uC131\uD560 \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this.snackbar.showWarning("\uC0DD\uC131\uD560 \uCF58\uD150\uCE20\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.debugLogger.success("\uD63C\uD569PDF",`\u2705 \uD63C\uD569 PDF \uC0DD\uC131 \uC2DC\uC791 - \uBCA1\uD130: ${t?"O":"X"}, \uD14D\uC2A4\uD2B8: ${e?"O":"X"}, \uC774\uBBF8\uC9C0: ${n?"O":"X"}`),this.createCombinedDocEvent.emit()}openVectorDetail(t){t.stopPropagation(),this.analysisData?.hasVectorGraphics?(this.showVectorDetailModal=!0,this.generateVectorSvgMinimap(this.selectedMiniPage)):console.warn("\u26A0\uFE0F \uBCA1\uD130 \uADF8\uB798\uD53D\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.")}closeVectorDetail(){this.showVectorDetailModal=!1,this._vectorSvgMinimap=""}createNewPdfWithSvg(){if(!this.vectorData||!this.analysisData){console.warn("\u26A0\uFE0F \uBCA1\uD130 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.createSvgPdfEvent.emit({vectorData:this.vectorData,analysisData:this.analysisData,selectedPage:this.selectedMiniPage})}selectMiniPage(t){if(this.selectedMiniPage=t,!(this.vectorMinimaps&&this.vectorMinimaps[t])){if(this.vectorData&&this.vectorData.pageDetails){let e=this.vectorData.pageDetails.find(n=>n.pageNumber===t);if(e&&e.svgContent)return}this.requestMinimapEvent.emit({pageNumber:t,vectorData:this.vectorData}),this.generateVectorSvgMinimap(t)}}requestCurrentPageMinimap(){(!this.vectorMinimaps||!this.vectorMinimaps[this.selectedMiniPage])&&this.requestMinimapEvent.emit({pageNumber:this.selectedMiniPage,vectorData:this.vectorData})}generateVectorSvgMinimap(t){if(!this.vectorData||!this.vectorData.pageDetails){console.warn("\u26A0\uFE0F vectorData\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),this._vectorSvgMinimap=this.createEmptyMinimap();return}let e=this.vectorData.pageDetails.find(n=>n.pageNumber===t);if(!e){console.warn(`\u26A0\uFE0F \uD398\uC774\uC9C0 ${t}\uC5D0 \uBCA1\uD130 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.`),this._vectorSvgMinimap=this.createEmptyMinimap();return}if(e.fullPageSvg&&e.fullPageSvg.length>0){let n=e.svgGenerationMethod||"\uC54C \uC218 \uC5C6\uC74C";this._vectorSvgMinimap=e.fullPageSvg;return}if(e.svgContent&&e.svgContent.length>0){this._vectorSvgMinimap=e.svgContent;return}console.warn(`\u26A0\uFE0F \uD398\uC774\uC9C0 ${t}\uC5D0 SVG \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.`),this._vectorSvgMinimap=this.createEmptyMinimap()}createEmptyMinimap(){return`
      <svg width="400" height="565" viewBox="0 0 400 565" xmlns="http://www.w3.org/2000/svg">
        <rect width="100%" height="100%" fill="#f8fafc" stroke="#e2e8f0" stroke-width="2"/>
        <text x="200" y="270" font-family="Arial" font-size="16" fill="#94a3b8" text-anchor="middle">
          SVG \uBBF8\uB9AC\uBCF4\uAE30\uB97C \uC0DD\uC131\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4
        </text>
        <text x="200" y="295" font-family="Arial" font-size="12" fill="#cbd5e1" text-anchor="middle">
          PDF \uBD84\uC11D \uC911 SVG \uB370\uC774\uD130\uAC00 \uC0DD\uC131\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4
        </text>
      </svg>
    `}createLoadingMinimap(){return`
      <svg width="400" height="565" viewBox="0 0 400 565" xmlns="http://www.w3.org/2000/svg">
        <rect width="100%" height="100%" fill="#f8fafc" stroke="#e2e8f0" stroke-width="2"/>
        
        <!-- \uB85C\uB529 \uC560\uB2C8\uBA54\uC774\uC158 -->
        <circle cx="200" cy="260" r="15" fill="none" stroke="#3b82f6" stroke-width="3" stroke-linecap="round">
          <animate attributeName="stroke-dasharray" values="0 94;47 47;0 94" dur="1.5s" repeatCount="indefinite"/>
          <animate attributeName="stroke-dashoffset" values="0;-47;-94" dur="1.5s" repeatCount="indefinite"/>
        </circle>
        
        <text x="200" y="300" font-family="Arial" font-size="14" fill="#64748b" text-anchor="middle">
          \uBCA1\uD130 \uBBF8\uB2C8\uB9F5 \uC0DD\uC131 \uC911...
        </text>
        <text x="200" y="320" font-family="Arial" font-size="12" fill="#94a3b8" text-anchor="middle">
          \uD398\uC774\uC9C0 ${this.selectedMiniPage}
        </text>
      </svg>
    `}getSelectedPageGenerationMethod(){if(!this.vectorData||!this.vectorData.pageDetails)return null;let t=this.vectorData.pageDetails.find(e=>e.pageNumber===this.selectedMiniPage);return!t||!t.svgGenerationMethod?null:t.svgGenerationMethod}getVectorElementPercentage(t){let e=this.analysisData?.totalVectorOperations||1;return Math.round(t/e*100)}getTextLanguagePercentage(t){if(!this.analysisData?.languageDetection)return 0;let e=this.analysisData.languageDetection,n=e.korean+e.english+e.mixed||1;return Math.round(t/n*100)}getAverageWordLength(){return!this.analysisData||this.analysisData.totalWords===0?0:Math.round(this.analysisData.totalCharacters/this.analysisData.totalWords*10)/10}getFontDiversity(){let t=this.analysisData?.uniqueFonts?.length||0;return t===0?"\uC5C6\uC74C":t===1?"\uB2E8\uC77C":t<=3?"\uC801\uC74C":t<=6?"\uBCF4\uD1B5":"\uB2E4\uC591\uD568"}getColorPercentage(t){if(!this.analysisData?.textColors)return 0;let e=this.analysisData.totalTextItems||1,n=this.analysisData.textColors.colorDistribution[t]||0;return Math.round(n/e*100)}getSortedColors(){return this.analysisData?.textColors?this.analysisData.textColors.uniqueColors.map(t=>({color:t,count:this.analysisData.textColors.colorDistribution[t],percentage:this.getColorPercentage(t)})).sort((t,e)=>e.count-t.count):[]}getSelectedPageTextItems(){return this.analysisData?.pages?this.analysisData.pages.find(e=>e.pageNumber===this.selectedPage)?.textItems||[]:[]}getCurrentPageTextItems(){let t=this.getSelectedPageTextItems(),e=this.currentTextPage*this.textItemsPerPage,n=e+this.textItemsPerPage;return t.slice(e,n)}getTotalTextPages(){let t=this.getSelectedPageTextItems();return Math.ceil(t.length/this.textItemsPerPage)}nextTextPage(){this.currentTextPage<this.getTotalTextPages()-1&&this.currentTextPage++}prevTextPage(){this.currentTextPage>0&&this.currentTextPage--}changeSelectedPage(t){this.selectedPage=t,this.currentTextPage=0}getAvailablePages(){return this.analysisData?.pages?this.analysisData.pages.map(t=>t.pageNumber).sort((t,e)=>t-e):[]}getPageTextCount(t){return this.analysisData?.pages&&this.analysisData.pages.find(n=>n.pageNumber===t)?.textItems.length||0}getSelectedPageOperations(){return!this.vectorData||!this.vectorData.pageDetails?0:this.vectorData.pageDetails.find(e=>e.pageNumber===this.selectedMiniPage)?.operations?.length||0}getColorBrightness(t){let e=0,n=0,i=0;if(t.startsWith("#")){let a=t.replace("#","");if(a.length===6)e=parseInt(a.substr(0,2),16),n=parseInt(a.substr(2,2),16),i=parseInt(a.substr(4,2),16);else if(a.length===8)e=parseInt(a.substr(2,2),16),n=parseInt(a.substr(4,2),16),i=parseInt(a.substr(6,2),16);else if(a.length===10)e=parseInt(a.substr(4,2),16),n=parseInt(a.substr(6,2),16),i=parseInt(a.substr(8,2),16);else if(a.length===12){let d=a.substr(0,4),g=a.substr(4,4),m=a.substr(8,4);d===g&&g===m?(e=parseInt(a.substr(0,2),16),n=parseInt(a.substr(4,2),16),i=parseInt(a.substr(8,2),16)):(e=parseInt(a.substr(4,2),16),n=parseInt(a.substr(6,2),16),i=parseInt(a.substr(8,2),16))}else a.length===3&&(e=parseInt(a.substr(0,1)+a.substr(0,1),16),n=parseInt(a.substr(1,1)+a.substr(1,1),16),i=parseInt(a.substr(2,1)+a.substr(2,1),16))}else if(t.startsWith("rgb")){let a=t.match(/\d+/g);a&&(e=parseInt(a[0]),n=parseInt(a[1]),i=parseInt(a[2]))}return(e*299+n*587+i*114)/1e3}normalizeColor(t){if(!t.startsWith("#"))return t;let e=t.replace("#","");if(e.length===6)return t;if(console.warn(`\u26A0\uFE0F \uBE44\uD45C\uC900 \uC0C9\uC0C1 \uCF54\uB4DC \uAC10\uC9C0: ${t} (${e.length}\uC790\uB9AC)`),e.length===12||e.length===10)return console.error(`\u274C ${e.length}\uC790\uB9AC \uC0C9\uC0C1 \uCF54\uB4DC\uB294 \uD30C\uC2F1\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4: ${t}`),console.error("   PDF \uC6D0\uBCF8\uC5D0\uC11C \uC0C9\uC0C1\uC774 \uC81C\uB300\uB85C \uCD94\uCD9C\uB418\uC5C8\uB294\uC9C0 \uD655\uC778\uC774 \uD544\uC694\uD569\uB2C8\uB2E4."),`#${e.substr(0,6)}`;if(e.length===8){let n=e.substr(2,2),i=e.substr(4,2),a=e.substr(6,2);return`#${n}${i}${a}`}if(e.length===3){let n=e.substr(0,1),i=e.substr(1,1),a=e.substr(2,1);return`#${n}${n}${i}${i}${a}${a}`}return console.warn(`\u26A0\uFE0F \uC54C \uC218 \uC5C6\uB294 \uC0C9\uC0C1 \uD615\uC2DD: ${t}, \uC55E 6\uC790\uB9AC\uB9CC \uC0AC\uC6A9\uD569\uB2C8\uB2E4.`),`#${e.substr(0,Math.min(6,e.length))}`}getBackgroundForTextColor(t){let e=this.getColorBrightness(t);return e>200?"linear-gradient(135deg, #1e293b 0%, #334155 100%)":e<50?"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)":"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)"}getTextShadowForColor(t){let e=this.getColorBrightness(t);return e>200?"0 1px 3px rgba(0, 0, 0, 0.8), 0 0 1px rgba(0, 0, 0, 0.5)":e<50?"0 0 2px rgba(255, 255, 255, 0.8), 0 1px 2px rgba(59, 130, 246, 0.3)":"0 0 1px rgba(255, 255, 255, 0.5)"}getImageTypeCount(t){if(!this.analysisData?.imageInfo?.images)return 0;let e=0;return this.analysisData.imageInfo.images.forEach(n=>{n.images.forEach(i=>{i.type===t&&e++})}),e}getImageTypePercentage(t){if(!this.analysisData?.imageInfo?.totalImages)return 0;let e=this.getImageTypeCount(t);return Math.round(e/this.analysisData.imageInfo.totalImages*100)}createImagePdfDocument(){return E(this,null,function*(){if(!this.analysisData?.imageInfo||!this.analysisData.imageInfo.images){this.snackbar.showError("\uC774\uBBF8\uC9C0 \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{yield this.ensureLibrariesLoaded();let t=window.PDFLib;if(!t){this.snackbar.showError("PDF \uC0DD\uC131 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),console.error("\u274C PDF-lib \uB77C\uC774\uBE0C\uB7EC\uB9AC\uAC00 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");return}let{PDFDocument:e}=t,n=this.analysisData.pageWidth||595.28,i=this.analysisData.pageHeight||841.89;if(!n||!i){let f=this.analysisData?.imageInfo?.images?.[0];if(f){let C=f;n=C.pageWidth||n,i=C.pageHeight||i}}let a=this.pdfImageExtractor.extractFromAnalysisData(this.analysisData,{preferOriginal:!0,analysisScale:1});if(a.totalCount===0){this.snackbar.showError("PDF\uC5D0 \uCD94\uAC00\uD560 \uC774\uBBF8\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}for(let f of a.images){let C=f.x+f.width,_=f.y+f.height;(f.x<0||f.y<0)&&console.warn("  \u26A0\uFE0F \uACBD\uACE0: \uC774\uBBF8\uC9C0\uAC00 \uD398\uC774\uC9C0 \uC67C\uCABD/\uD558\uB2E8\uC744 \uBC97\uC5B4\uB0A8!"),(C>n||_>i)&&console.warn(`  \u26A0\uFE0F \uACBD\uACE0: \uC774\uBBF8\uC9C0\uAC00 \uD398\uC774\uC9C0 \uC624\uB978\uCABD/\uC0C1\uB2E8\uC744 \uBC97\uC5B4\uB0A8! (right=${C.toFixed(1)} > ${n}, top=${_.toFixed(1)} > ${i})`)}let d=yield e.create(),g=0;for(let[f,C]of a.pageMap.entries()){if(C.length===0)continue;let _=d.addPage([n,i]);for(let y of C)try{let S=this.analysisData.imageInfo.images.flatMap(V=>V.images).find(V=>V.name===y.name);if(!S){console.error(`\u274C \uC774\uBBF8\uC9C0 \uB370\uC774\uD130\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C: ${y.name}`);continue}let D=S.x||0,x=S.y||0,P=S.width||y.width,O=S.height||y.height,k=y.src.split(",")[1]||y.src,F=Uint8Array.from(atob(k),V=>V.charCodeAt(0)),j;y.src.startsWith("data:image/jpeg")||y.src.startsWith("data:image/jpg")?j=yield d.embedJpg(F):j=yield d.embedPng(F),_.drawImage(j,{x:D,y:x,width:P,height:O}),g++}catch(S){console.error(`\u274C \uC774\uBBF8\uC9C0 \uCC98\uB9AC \uC2E4\uD328: ${y.name}`,S)}}if(g===0){this.snackbar.showError("PDF\uC5D0 \uCD94\uAC00\uD560 \uC774\uBBF8\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let m=yield d.save(),h=new Blob([m],{type:"application/pdf"});this.snackbar.showSuccess(`\u2705 \uC774\uBBF8\uC9C0 PDF \uC0DD\uC131 \uC644\uB8CC! (${g}\uAC1C \uC774\uBBF8\uC9C0) - \uC0C8 \uD3B8\uC9D1\uAE30\uC5D0\uC11C \uC5F4\uB9BD\uB2C8\uB2E4.`),this.createImagePdfEvent.emit(h)}catch(t){console.error("\u274C PDF \uC0DD\uC131 \uC624\uB958:",t),this.snackbar.showError("PDF \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}downloadAllImages(){return E(this,null,function*(){if(!this.analysisData?.imageInfo||!this.analysisData.imageInfo.images){this.snackbar.showError("\uB2E4\uC6B4\uB85C\uB4DC\uD560 \uC774\uBBF8\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{yield this.ensureLibrariesLoaded();let t=window.JSZip;if(!t){this.snackbar.showError("ZIP \uC0DD\uC131 \uB77C\uC774\uBE0C\uB7EC\uB9AC\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),console.error("JSZip \uB77C\uC774\uBE0C\uB7EC\uB9AC\uAC00 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4.");return}let e=new t,n=0;if(this.analysisData.imageInfo.images.forEach(g=>{let m=`page_${g.pageNumber}`,h=e.folder(m);g.images.forEach((f,C)=>{if(f.thumbnail){let _=f.thumbnail.split(",")[1],y=`${f.name||`image_${C+1}`}.png`;h&&(h.file(y,_,{base64:!0}),n++)}})}),n===0){this.snackbar.showError("\uB2E4\uC6B4\uB85C\uB4DC\uD560 \uC774\uBBF8\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}let i=yield e.generateAsync({type:"blob"}),a=URL.createObjectURL(i),d=document.createElement("a");d.href=a,d.download=`images_${this.analysisData.fileName||"document"}_${Date.now()}.zip`,d.click(),URL.revokeObjectURL(a),this.snackbar.showSuccess(`\u2705 ZIP \uB2E4\uC6B4\uB85C\uB4DC \uC644\uB8CC! (${n}\uAC1C \uC774\uBBF8\uC9C0)`)}catch(t){console.error("\u274C ZIP \uC0DD\uC131 \uC624\uB958:",t),this.snackbar.showError("ZIP \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}createUnifiedPdf(t){return E(this,null,function*(){if(!this.analysisData){this.snackbar.showWarning("\uBD84\uC11D \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");return}try{let e=t?this.pdfFactory.getStrategyByType(t):this.pdfFactory.getStrategy(this.analysisData);if(!e){this.snackbar.showError("PDF \uC0DD\uC131 \uC804\uB7B5\uC744 \uC120\uD0DD\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}if(!e.validate(this.analysisData)){let d=this.pdfFactory.getStrategyInfo(e.type);this.snackbar.showWarning(`${d.description}\uB97C \uC0DD\uC131\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4. \uD544\uC694\uD55C \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.`);return}this.snackbar.showInfo(`${this.getStrategyName(e.type)} PDF \uC0DD\uC131 \uC911...`);let n=this.preparePageContent(),i={fileName:this.analysisData.fileName||"document",pageSize:{width:595.28,height:841.89},title:`${this.analysisData.fileName||"\uBB38\uC11C"} - ${this.getStrategyName(e.type)}`,author:"LOWORLD AI",subject:`PDF ${this.getStrategyName(e.type)} \uBD84\uC11D \uACB0\uACFC`,keywords:[e.type,"PDF","\uBD84\uC11D"]},a=yield e.generatePdf(n,i);this.downloadPdfBlob(a,e.type),this.snackbar.showSuccess(`${this.getStrategyName(e.type)} PDF\uAC00 \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4! \u{1F389}`)}catch(e){console.error("\u274C PDF \uC0DD\uC131 \uC2E4\uD328:",e),this.snackbar.showError("PDF \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}})}preparePageContent(){if(!this.analysisData)return[];let t=[];for(let e=1;e<=this.analysisData.pageCount;e++){let n={pageNumber:e};if(this.vectorData?.pageDetails){let i=this.vectorData.pageDetails.find(a=>a.pageNumber===e);i&&(n.vector={svgContent:i.svgContent||""})}if(this.analysisData.pages){let i=this.analysisData.pages.find(a=>a.pageNumber===e);i&&(n.text=i.textItems.map(a=>({text:a.text,font:a.font,fontSize:a.fontSize,color:a.color,position:{x:a.position.x,y:a.position.y}})))}if(this.analysisData.imageInfo?.images){let i=this.analysisData.imageInfo.images.find(a=>a.pageNumber===e);i&&i.images.length>0&&(n.images=i.images.map(a=>({pageNumber:a.pageNumber,type:a.type,name:a.name,width:a.width,height:a.height,transform:a.transform,format:a.format,thumbnail:a.thumbnail,originalImage:a.originalImage})))}t.push(n)}return t}downloadPdfBlob(t,e){let n=URL.createObjectURL(t),i=document.createElement("a");i.href=n;let a=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),d=this.getStrategyName(e).toLowerCase().replace(/ /g,"-");i.download=`${this.analysisData?.fileName||"document"}-${d}-${a}.pdf`,i.click(),URL.revokeObjectURL(n)}getStrategyName(t){return{vector:"\uBCA1\uD130",text:"\uD14D\uC2A4\uD2B8",image:"\uC774\uBBF8\uC9C0",combined:"\uD63C\uD569"}[t]||t}getCurrentStrategyType(){return this.analysisData?this.pdfFactory.getStrategy(this.analysisData)?.type:void 0}getAvailableContentTypes(){return this.analysisData?this.pdfFactory.getAvailableContentTypes(this.analysisData):[]}exportOriginalPdf(){this.exportOriginalPdfEvent.emit()}safePercentage(t,e){if(!e||e===0||!t)return 0;let n=Math.round(t/e*100);return isNaN(n)||!isFinite(n)?0:n}safeAverage(t,e){if(!e||e===0||!t)return"0";let n=t/e;return isNaN(n)||!isFinite(n)?"0":n.toFixed(1)}safeNumber(t){return t==null||isNaN(t)||!isFinite(t)?0:t}formatTransformArray(t){return!t||t.length!==6?"N/A":t.map(e=>e.toFixed(2)).join(", ")}absValue(t){return Math.abs(t)}togglePageAnalysis(){this.isPageAnalysisExpanded=!this.isPageAnalysisExpanded,this.isPageAnalysisExpanded&&(this.selectedAnalysisPage=1,this.showPageTextItems=!1,this.textItemsDisplayCount=20)}getPageNumbers(){return!this.analysisData||!this.analysisData.pageCount?[]:Array.from({length:this.analysisData.pageCount},(t,e)=>e+1)}goToPreviousAnalysisPage(){this.selectedAnalysisPage>1&&(this.selectedAnalysisPage--,this.onAnalysisPageChange(this.selectedAnalysisPage))}goToNextAnalysisPage(){this.analysisData&&this.selectedAnalysisPage<this.analysisData.pageCount&&(this.selectedAnalysisPage++,this.onAnalysisPageChange(this.selectedAnalysisPage))}onAnalysisPageChange(t){this.selectedAnalysisPage=t,this.showPageTextItems=!1,this.textItemsDisplayCount=20}getSelectedPageAnalysis(){if(!this.analysisData)return null;let t=this.getSelectedPageTextInfo(),e=this.getSelectedPageVectorInfo(),n=this.getSelectedPageImageInfo();return t||e||n?{pageNumber:this.selectedAnalysisPage,textInfo:t,vectorInfo:e,imageInfo:n}:null}getSelectedPageSize(){if(!this.analysisData)return"\uC54C \uC218 \uC5C6\uC74C";if(this.vectorData?.pageDetails){let t=this.vectorData.pageDetails.find(e=>e.pageNumber===this.selectedAnalysisPage);if(t?.pageWidth&&t?.pageHeight)return`${Math.round(t.pageWidth)} \xD7 ${Math.round(t.pageHeight)} pt`}return this.analysisData.pageWidth&&this.analysisData.pageHeight?`${Math.round(this.analysisData.pageWidth)} \xD7 ${Math.round(this.analysisData.pageHeight)} pt`:"\uC54C \uC218 \uC5C6\uC74C"}getSelectedPageOrientation(){if(!this.analysisData)return"\uC54C \uC218 \uC5C6\uC74C";if(this.vectorData?.pageDetails){let t=this.vectorData.pageDetails.find(e=>e.pageNumber===this.selectedAnalysisPage);if(t?.pageWidth&&t?.pageHeight)return t.pageWidth>t.pageHeight?"\uAC00\uB85C (Landscape)":"\uC138\uB85C (Portrait)"}return this.analysisData.pageOrientation==="landscape"?"\uAC00\uB85C (Landscape)":"\uC138\uB85C (Portrait)"}getSelectedPageTextInfo(){return this.analysisData?.pages?this.analysisData.pages.find(t=>t.pageNumber===this.selectedAnalysisPage):null}getSelectedPageFonts(){let t=this.getSelectedPageTextInfo();if(!t?.textItems)return[];let e=new Set;return t.textItems.forEach(n=>{n.font&&e.add(n.font)}),Array.from(e)}togglePageTextItems(){this.showPageTextItems=!this.showPageTextItems,this.showPageTextItems&&(this.textItemsDisplayCount=20)}getAnalysisPageTextItems(){let t=this.getSelectedPageTextInfo();return t?.textItems?t.textItems.slice(0,this.textItemsDisplayCount):[]}hasMoreTextItems(){let t=this.getSelectedPageTextInfo();return t?.textItems?t.textItems.length>this.textItemsDisplayCount:!1}getRemainingTextItemsCount(){let t=this.getSelectedPageTextInfo();return t?.textItems?Math.max(0,t.textItems.length-this.textItemsDisplayCount):0}loadMoreTextItems(){this.textItemsDisplayCount+=20}truncateText(t,e){return t?t.length<=e?t:t.substring(0,e)+"...":""}getSelectedPageVectorInfo(){return this.vectorData?.pageDetails?this.vectorData.pageDetails.find(t=>t.pageNumber===this.selectedAnalysisPage):this.analysisData?.vectorInfo?.pageDetails?this.analysisData.vectorInfo.pageDetails.find(t=>t.pageNumber===this.selectedAnalysisPage):null}getSelectedPageVectorSvg(){let t=this.getSelectedPageVectorInfo();return t&&(t.svgContent||t.fullPageSvg)||""}showVectorDetailForPage(t){this.selectedMiniPage=t,this.showVectorDetailModal=!0}getSelectedPageImageInfo(){if(!this.imageData?.images)return null;let t=this.imageData.images.find(e=>e.pageNumber===this.selectedAnalysisPage);return!t||!t.images||t.images.length===0?null:{count:t.images.length,images:t.images,pageWidth:t.pageWidth,pageHeight:t.pageHeight,pageRotation:t.pageRotation}}getSelectedPageImages(){let t=this.getSelectedPageImageInfo();return t?.images?t.images:[]}formatCoordinate(t){return t==null||isNaN(t)?"N/A":t.toFixed(2)}formatTransform(t){return!t||!Array.isArray(t)?"N/A":`[${t.map(e=>e!=null?e.toFixed(2):"N/A").join(", ")}]`}isCoordinateWarning(t,e){if(!t)return!1;let n=t.pageWidth||595,i=t.pageHeight||842;switch(e){case"x":let a=t.x;return a!=null&&(a<0||a>n);case"y":let d=t.y;return d!=null&&(d<0||d>i*2);case"width":let g=t.pdfWidth;return g!=null&&(g<=0||g>n);case"height":let m=t.pdfHeight;return m!=null&&(m<=0||m>i);default:return!1}}getImageWarnings(t){let e=[];if(!t)return e;let n=t.pageWidth||595,i=t.pageHeight||842;t.noTransform&&e.push("\u26A0\uFE0F Transform \uC815\uBCF4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. \uC88C\uD45C\uB97C \uD655\uC778\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let a=t.x;a!=null&&a<0&&e.push(`X \uC88C\uD45C(${a.toFixed(2)}pt)\uAC00 \uC74C\uC218\uC785\uB2C8\uB2E4. \uC774\uBBF8\uC9C0\uAC00 \uD398\uC774\uC9C0 \uC67C\uCABD \uBC14\uAE65\uC5D0 \uC788\uC2B5\uB2C8\uB2E4.`);let d=t.pdfWidth,g=t.pdfHeight;d!=null&&d>n&&e.push(`\uC774\uBBF8\uC9C0 \uB108\uBE44(${d.toFixed(2)}pt)\uAC00 \uD398\uC774\uC9C0 \uB108\uBE44(${n.toFixed(2)}pt)\uB97C \uCD08\uACFC\uD569\uB2C8\uB2E4.`),g!=null&&g>i&&e.push(`\uC774\uBBF8\uC9C0 \uB192\uC774(${g.toFixed(2)}pt)\uAC00 \uD398\uC774\uC9C0 \uB192\uC774(${i.toFixed(2)}pt)\uB97C \uCD08\uACFC\uD569\uB2C8\uB2E4.`),a!==void 0&&d!==void 0&&a+d>n&&e.push(`\uC774\uBBF8\uC9C0 \uC624\uB978\uCABD \uB05D(${(a+d).toFixed(2)}pt)\uC774 \uD398\uC774\uC9C0 \uC624\uB978\uCABD(${n.toFixed(2)}pt)\uC744 \uBC97\uC5B4\uB0A9\uB2C8\uB2E4.`);let m=t.transform||t.originalTransform;if(m&&Array.isArray(m)&&m.length>=6){let h=Math.abs(m[0]),f=Math.abs(m[3]);(h===0||f===0)&&e.push("Transform \uC2A4\uCF00\uC77C\uC774 0\uC785\uB2C8\uB2E4. \uC774\uBBF8\uC9C0\uAC00 \uBCF4\uC774\uC9C0 \uC54A\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),m[3]<0}return e}getImageSizeCategory(t){if(!t)return{type:"unknown",label:"\uC54C \uC218 \uC5C6\uC74C",color:"#999",description:"\uC815\uBCF4 \uC5C6\uC74C"};let e=t.pageWidth||595,n=t.pageHeight||842,i=t.pdfWidth||0,a=t.pdfHeight||0,d=i/e,g=a/n,m=i*a/(e*n);return m>=.8?{type:"fullpage",label:"\uC804\uCCB4 \uD398\uC774\uC9C0",color:"#e74c3c",description:"\uD398\uC774\uC9C0 \uC804\uCCB4\uB97C \uCC28\uC9C0\uD558\uB294 \uC774\uBBF8\uC9C0"}:m>=.5?{type:"large",label:"\uB300\uD615",color:"#e67e22",description:"\uD398\uC774\uC9C0\uC758 50% \uC774\uC0C1 \uCC28\uC9C0"}:m>=.25?{type:"medium",label:"\uC911\uD615",color:"#f39c12",description:"\uD398\uC774\uC9C0\uC758 25~50% \uCC28\uC9C0"}:m>=.1?{type:"small",label:"\uC18C\uD615",color:"#27ae60",description:"\uD398\uC774\uC9C0\uC758 10~25% \uCC28\uC9C0"}:m>=.01?{type:"thumbnail",label:"\uC378\uB124\uC77C",color:"#3498db",description:"\uD398\uC774\uC9C0\uC758 1~10% \uCC28\uC9C0"}:{type:"icon",label:"\uC544\uC774\uCF58",color:"#9b59b6",description:"\uB9E4\uC6B0 \uC791\uC740 \uC774\uBBF8\uC9C0 (\uC544\uC774\uCF58/\uB9C8\uCEE4)"}}getImagePositionCategory(t){if(!t)return{type:"unknown",label:"\uC54C \uC218 \uC5C6\uC74C",description:"\uC704\uCE58 \uC815\uBCF4 \uC5C6\uC74C"};let e=t.pageWidth||595,n=t.pageHeight||842,i=t.x||0,a=t.yFromTop||0,d=t.pdfWidth||0,g=t.pdfHeight||0,m=i+d/2,h=a+g/2,f="";m<e*.33?f="\uC67C\uCABD":m>e*.67?f="\uC624\uB978\uCABD":f="\uAC00\uC6B4\uB370";let C="";return h<n*.33?C="\uC0C1\uB2E8":h>n*.67?C="\uD558\uB2E8":C="\uC911\uC559",f==="\uAC00\uC6B4\uB370"&&C==="\uC911\uC559"?{type:"center",label:"\uC911\uC559",description:"\uD398\uC774\uC9C0 \uC911\uC559\uC5D0 \uBC30\uCE58"}:{type:`${C}-${f}`,label:`${C} ${f}`,description:`\uD398\uC774\uC9C0 ${C} ${f}\uC5D0 \uBC30\uCE58`}}getImageAspectRatioCategory(t){if(!t)return{type:"unknown",label:"\uC54C \uC218 \uC5C6\uC74C",ratio:"N/A",description:"\uC815\uBCF4 \uC5C6\uC74C"};let e=t.pdfWidth||t.originalWidth||0,n=t.pdfHeight||t.originalHeight||0;if(e===0||n===0)return{type:"invalid",label:"\uBB34\uD6A8",ratio:"0:0",description:"\uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uD06C\uAE30"};let i=e/n,a=i.toFixed(2);return Math.abs(i-1)<.1?{type:"square",label:"\uC815\uC0AC\uAC01\uD615",ratio:"1:1",description:"\uAC00\uB85C\uC138\uB85C \uBE44\uC728\uC774 \uB3D9\uC77C"}:i>=1.7&&i<=1.8?{type:"widescreen",label:"\uC640\uC774\uB4DC\uC2A4\uD06C\uB9B0",ratio:"16:9",description:"\uC640\uC774\uB4DC \uBE44\uC728 (16:9)"}:i>=1.3&&i<=1.4?{type:"standard",label:"\uD45C\uC900",ratio:"4:3",description:"\uD45C\uC900 \uBE44\uC728 (4:3)"}:i>2?{type:"panorama",label:"\uD30C\uB178\uB77C\uB9C8",ratio:`${a}:1`,description:"\uB9E4\uC6B0 \uB113\uC740 \uAC00\uB85C\uD615 \uC774\uBBF8\uC9C0"}:i>1?{type:"landscape",label:"\uAC00\uB85C\uD615",ratio:`${a}:1`,description:"\uAC00\uB85C\uAC00 \uB354 \uAE34 \uC774\uBBF8\uC9C0"}:i<.5?{type:"tall",label:"\uC138\uB85C \uAE34\uD615",ratio:`1:${(1/i).toFixed(2)}`,description:"\uB9E4\uC6B0 \uAE34 \uC138\uB85C\uD615 \uC774\uBBF8\uC9C0"}:{type:"portrait",label:"\uC138\uB85C\uD615",ratio:`1:${(1/i).toFixed(2)}`,description:"\uC138\uB85C\uAC00 \uB354 \uAE34 \uC774\uBBF8\uC9C0"}}getImageQualityCategory(t){if(!t)return{type:"unknown",label:"\uC54C \uC218 \uC5C6\uC74C",dpi:0,description:"\uC815\uBCF4 \uC5C6\uC74C"};let e=t.originalWidth||t.imagePixelWidth||0,n=t.originalHeight||t.imagePixelHeight||0,i=t.pdfWidth||0,a=t.pdfHeight||0;if(e===0||i===0)return{type:"unknown",label:"\uC54C \uC218 \uC5C6\uC74C",dpi:0,description:"DPI \uACC4\uC0B0 \uBD88\uAC00"};let d=e/(i/72),g=n/(a/72),m=Math.round((d+g)/2);return m>=300?{type:"print",label:"\uC778\uC1C4 \uD488\uC9C8",dpi:m,description:"\uACE0\uD488\uC9C8 \uC778\uC1C4\uC5D0 \uC801\uD569 (300+ DPI)"}:m>=150?{type:"good",label:"\uC591\uD638",dpi:m,description:"\uC77C\uBC18 \uC778\uC1C4/\uD654\uBA74 \uD45C\uC2DC \uC801\uD569 (150-300 DPI)"}:m>=72?{type:"screen",label:"\uD654\uBA74\uC6A9",dpi:m,description:"\uD654\uBA74 \uD45C\uC2DC\uC6A9 (72-150 DPI)"}:{type:"low",label:"\uC800\uD488\uC9C8",dpi:m,description:"\uD655\uB300 \uC2DC \uD53D\uC140\uC774 \uBCF4\uC77C \uC218 \uC788\uC74C (<72 DPI)"}}getImageScaleInfo(t){if(!t)return{scaleFactor:1,isScaled:!1,description:"\uC815\uBCF4 \uC5C6\uC74C"};let e=t.detectedScaleFactor||1;return e>1?{scaleFactor:e,isScaled:!0,description:`PDF \uCF58\uD150\uCE20 \uC2A4\uD2B8\uB9BC\uC5D0\uC11C ${e}x \uC2A4\uCF00\uC77C \uAC10\uC9C0. \uC88C\uD45C\uAC00 \uC790\uB3D9 \uC815\uADDC\uD654\uB428.`}:{scaleFactor:1,isScaled:!1,description:"\uC2A4\uCF00\uC77C \uBCC0\uD658 \uC5C6\uC74C (1:1)"}}getImageClassification(t){return{size:this.getImageSizeCategory(t),position:this.getImagePositionCategory(t),aspectRatio:this.getImageAspectRatioCategory(t),quality:this.getImageQualityCategory(t),scale:this.getImageScaleInfo(t)}}getPageImageStats(){let t=this.getSelectedPageImages();if(!t||t.length===0)return null;let e={total:t.length,bySize:{fullpage:0,large:0,medium:0,small:0,thumbnail:0,icon:0},byPosition:{},byAspectRatio:{square:0,landscape:0,portrait:0,widescreen:0,panorama:0,tall:0,standard:0},byQuality:{print:0,good:0,screen:0,low:0,unknown:0},averageDpi:0,scaledImages:0,totalArea:0,pageWidth:0,pageHeight:0},n=0,i=0;return t.forEach(a=>{let d=this.getImageClassification(a),g=d.size.type;e.bySize.hasOwnProperty(g)&&e.bySize[g]++;let m=d.position.label;e.byPosition[m]=(e.byPosition[m]||0)+1;let h=d.aspectRatio.type;e.byAspectRatio.hasOwnProperty(h)&&e.byAspectRatio[h]++;let f=d.quality.type;e.byQuality.hasOwnProperty(f)&&e.byQuality[f]++,d.quality.dpi>0&&(n+=d.quality.dpi,i++),d.scale.isScaled&&e.scaledImages++;let C=a.pdfWidth||0,_=a.pdfHeight||0;e.totalArea+=C*_,e.pageWidth=a.pageWidth||595,e.pageHeight=a.pageHeight||842}),e.averageDpi=i>0?Math.round(n/i):0,e}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=ae({type:o,selectors:[["shared-pdf-analysis-dashboard"]],inputs:{analysisData:"analysisData",isCollapsed:"isCollapsed",isDraggable:"isDraggable",isCompact:"isCompact",vectorData:"vectorData",imageData:"imageData",vectorMinimaps:"vectorMinimaps",hasGeneratedDocument:"hasGeneratedDocument",analyzedPage:"analyzedPage"},outputs:{closeEvent:"closeEvent",createSvgPdfEvent:"createSvgPdfEvent",createTextStructureDocEvent:"createTextStructureDocEvent",createCombinedDocEvent:"createCombinedDocEvent",viewOriginalEvent:"viewOriginalEvent",createNewDocumentEvent:"createNewDocumentEvent",requestMinimapEvent:"requestMinimapEvent",exportPdfEvent:"exportPdfEvent",createImagePdfEvent:"createImagePdfEvent",exportOriginalPdfEvent:"exportOriginalPdfEvent"},features:[Ge],decls:7,vars:22,consts:[[1,"pdf-analysis-dashboard"],["class","dashboard-container",4,"ngIf"],["class","dashboard-empty",4,"ngIf"],["class","vector-detail-modal",3,"click",4,"ngIf"],["class","vector-detail-modal","tabindex","0",3,"click","keydown.escape",4,"ngIf"],[1,"dashboard-container"],["title","PDF \uBD84\uC11D","icon","\u{1F4CA}",3,"isDraggable","isMinimized","showViewOriginalButton","showNewDocumentButton","newDocumentButtonText","newDocumentButtonTitle","dragStart","minimize","viewOriginal","newDocument","close",4,"ngIf"],["class","dashboard-header",4,"ngIf"],["class","page-analysis-section",4,"ngIf"],["title","PDF \uBD84\uC11D","icon","\u{1F4CA}",3,"dragStart","minimize","viewOriginal","newDocument","close","isDraggable","isMinimized","showViewOriginalButton","showNewDocumentButton","newDocumentButtonText","newDocumentButtonTitle"],[1,"dashboard-header"],[1,"header-left"],[1,"header-icon"],[1,"header-title"],[4,"ngIf"],[1,"header-right"],["title","\uB2EB\uAE30",1,"close-btn",3,"click"],[2,"font-size","14px","font-weight","normal","margin-left","8px","color","#666"],[1,"page-analysis-section"],[1,"section-header",3,"click"],[1,"expand-icon"],[1,"page-count-badge"],["class","section-content",4,"ngIf"],[1,"section-content"],[1,"page-navigation"],[1,"nav-btn","prev",3,"click","disabled"],[1,"page-selector-wrapper"],[1,"page-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"page-info"],[1,"nav-btn","next",3,"click","disabled"],["class","selected-page-info",4,"ngIf"],["class","no-page-data",4,"ngIf"],[3,"value"],[1,"selected-page-info"],[1,"page-header"],[1,"info-card"],[1,"card-title"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],["class","info-card",4,"ngIf"],[1,"text-items-section"],[1,"text-items-header",3,"click"],["class","text-items-list",4,"ngIf"],[1,"text-items-list"],["class","text-item",4,"ngFor","ngForOf"],["class","load-more",4,"ngIf"],[1,"text-item"],[1,"text-item-header"],[1,"item-index"],[1,"item-text",3,"title"],[1,"text-item-details"],[1,"detail-badge","font"],[1,"detail-badge","size"],[1,"detail-badge","color"],[1,"detail-badge","position"],[1,"load-more"],[1,"load-more-btn",3,"click"],["class","info-item",4,"ngIf"],["class","vector-preview",4,"ngIf"],[1,"vector-preview"],[1,"preview-header"],[1,"preview-btn",3,"click"],[1,"preview-container",3,"innerHTML"],["class","image-stats-summary",4,"ngIf"],["class","image-detail-list",4,"ngIf"],["class","no-images",4,"ngIf"],[1,"image-stats-summary"],[1,"stats-header"],[1,"stats-grid"],[1,"stat-group"],[1,"stat-label"],[1,"stat-badges"],["class","badge fullpage",4,"ngIf"],["class","badge large",4,"ngIf"],["class","badge medium",4,"ngIf"],["class","badge small",4,"ngIf"],["class","badge thumbnail",4,"ngIf"],["class","badge icon",4,"ngIf"],["class","badge print",4,"ngIf"],["class","badge good",4,"ngIf"],["class","badge screen",4,"ngIf"],["class","badge low",4,"ngIf"],[1,"stat-info"],["class","scaled-info",4,"ngIf"],[1,"badge","fullpage"],[1,"badge","large"],[1,"badge","medium"],[1,"badge","small"],[1,"badge","thumbnail"],[1,"badge","icon"],[1,"badge","print"],[1,"badge","good"],[1,"badge","screen"],[1,"badge","low"],[1,"scaled-info"],[1,"image-detail-list"],["class","image-detail-item",4,"ngFor","ngForOf"],[1,"image-detail-item"],[1,"image-detail-header"],[1,"image-index"],["class","image-name",4,"ngIf"],[1,"classification-badges"],[1,"badge","size"],[1,"badge","quality",3,"ngClass"],[1,"badge","aspect"],[1,"image-thumbnail-row"],["class","thumbnail",4,"ngIf"],["class","thumbnail placeholder",4,"ngIf"],[1,"detail-section","classification-section"],[1,"detail-title"],[1,"classification-grid"],[1,"classification-item"],[1,"class-label"],[1,"class-value"],[1,"class-desc"],[1,"class-value",3,"ngClass"],["class","classification-item",4,"ngIf"],[1,"detail-section"],[1,"detail-grid"],[1,"detail-item"],[1,"label"],[1,"value"],["class","detail-section",4,"ngIf"],["class","warning-section",4,"ngIf"],[1,"image-name"],[1,"thumbnail"],[3,"src","alt"],[1,"thumbnail","placeholder"],[1,"class-value","warning"],[1,"transform-matrix"],[1,"transform-explanation"],["class","explain-item",4,"ngIf"],[1,"explain-item"],[1,"warning-section"],[1,"warning-title"],[1,"warning-list"],[4,"ngFor","ngForOf"],[1,"no-images"],[1,"no-page-data"],[1,"empty-icon"],[1,"dashboard-empty"],[1,"empty-text"],[1,"vector-detail-modal",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn-close-modal",3,"click"],[1,"modal-body"],["class","minimap-section",4,"ngIf"],[1,"summary-section"],[1,"summary-card"],[1,"summary-icon"],[1,"summary-content"],[1,"summary-label"],[1,"summary-value"],[1,"summary-detail"],["class","vector-item",4,"ngIf"],[1,"stats-summary"],[1,"stat-box"],[1,"stat-box-label"],[1,"stat-box-value"],[1,"minimap-section"],["class","page-selector",4,"ngIf"],["class","page-info",4,"ngIf"],[1,"generation-method-info"],["class","method-text",4,"ngIf"],[1,"operations-text"],["class","minimap-container",4,"ngIf"],[1,"page-selector"],["class","page-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"page-btn",3,"click"],[1,"single-page-label"],[1,"method-text"],[1,"minimap-container"],[1,"minimap-wrapper",3,"innerHTML"],[1,"loading-state"],[1,"spinner"],[1,"vector-item"],[1,"vector-item-header"],[1,"vector-item-icon"],[1,"vector-item-title"],[1,"vector-item-count"],[1,"vector-item-bar"],[1,"bar-fill"],[1,"vector-item-desc"],[1,"bar-fill","lines"],[1,"bar-fill","curves"],[1,"bar-fill","rectangles"],[1,"bar-fill","fill"],[1,"bar-fill","stroke"],[1,"modal-content","text-modal",3,"click"],[1,"btn-close",3,"click"],[1,"bar-fill","korean"],[1,"bar-fill","english"],[1,"bar-fill","mixed"],[1,"bar-fill","numbers"],[1,"summary-card",2,"margin-bottom","1rem"],[1,"font-list"],["class","font-item",4,"ngFor","ngForOf"],[1,"font-item"],[1,"font-index"],[1,"font-name"],[1,"color-list"],["class","color-item",4,"ngFor","ngForOf"],[1,"color-item"],[1,"color-sample"],[1,"color-info"],[1,"color-code"],[1,"color-usage"],[1,"color-bar-wrapper"],[1,"color-bar"],[1,"text-items-container"],["class","text-item-card",4,"ngFor","ngForOf"],["class","text-pagination",4,"ngIf"],[1,"text-item-card"],[1,"text-item-index"],[1,"text-item-color-info"],[1,"color-sample-large",3,"title"],[1,"color-info-text"],[1,"color-hex-label"],[1,"color-hex"],[1,"text-item-content"],[1,"text-item-meta"],[1,"meta-item"],[1,"text-pagination"],[1,"btn-pagination",3,"click","disabled"],[1,"pagination-info"],[1,"modal-content","combined-modal",3,"click"],[1,"action-buttons"],["class","action-btn combined-btn","title","\uBCA1\uD130 \uADF8\uB798\uD53D\uACFC \uD14D\uC2A4\uD2B8\uB97C \uC21C\uCC28\uC801\uC73C\uB85C \uACB0\uD569\uD55C \uC0C8 \uBB38\uC11C \uC0DD\uC131",3,"click",4,"ngIf"],["title","\uD604\uC7AC \uB85C\uB4DC\uB41C \uC6D0\uBCF8 PDF \uD30C\uC77C\uC744 \uB2E4\uC6B4\uB85C\uB4DC",1,"action-btn","download-btn",3,"click"],["title","\uBCA1\uD130 \uADF8\uB798\uD53D\uACFC \uD14D\uC2A4\uD2B8\uB97C \uC21C\uCC28\uC801\uC73C\uB85C \uACB0\uD569\uD55C \uC0C8 \uBB38\uC11C \uC0DD\uC131",1,"action-btn","combined-btn",3,"click"],[1,"summary-section",2,"margin-bottom","1rem"],[1,"action-buttons",2,"margin-top","1rem"],["title","\uC774\uBBF8\uC9C0 \uC0C1\uC138 \uC815\uBCF4 \uBCF4\uAE30",1,"action-btn","image-btn",3,"click"],[1,"bar-fill","image"],[1,"bar-fill","jpeg"],[1,"bar-fill","png"],[1,"comparison-chart"],["class","comparison-item",4,"ngIf"],[1,"comparison-summary"],[1,"comparison-item"],[1,"comparison-label"],[1,"comparison-icon"],[1,"comparison-bar-wrapper"],[1,"comparison-bar","vector-bar"],[1,"comparison-value"],[1,"comparison-count"],[1,"comparison-bar","text-bar"],[1,"comparison-bar","image-bar"],["tabindex","0",1,"vector-detail-modal",3,"click","keydown.escape"],[1,"modal-content","image-modal",3,"click"],["title","\uB2EB\uAE30 (ESC)",1,"btn-close",3,"click"],["class","page-images",4,"ngFor","ngForOf"],[1,"bar-fill","xobject"],[1,"bar-fill","inline"],[1,"page-images"],[1,"page-number-badge"],[1,"page-image-count"],[1,"image-list"],["class","image-item",4,"ngFor","ngForOf"],[1,"image-item"],["class","image-thumbnail",4,"ngIf"],["class","image-placeholder",4,"ngIf"],[1,"image-info"],[1,"image-details"],[1,"detail-label"],[1,"detail-value"],["class","image-detail-item",4,"ngIf"],["class","image-detail-item transform-section",4,"ngIf"],["class","image-detail-item scale-info",4,"ngIf"],["class","transform-details",4,"ngIf"],[1,"image-thumbnail"],[1,"image-placeholder"],[1,"placeholder-icon"],[1,"placeholder-text"],[1,"image-detail-item","transform-section"],[1,"detail-value","transform-array"],[1,"image-detail-item","scale-info"],[1,"scale-badge"],[1,"y-type-badge"],["class","rotation-info",4,"ngIf"],[1,"rotation-info"],[1,"transform-details"],[1,"transform-summary"],["class","viewport-transform-info",4,"ngIf"],["class","coordinate-issue-warning",4,"ngIf"],["class","viewport-correction-info",4,"ngIf"],[1,"transform-matrix-grid"],[1,"matrix-item"],[1,"matrix-label"],[1,"matrix-value"],[1,"transform-info"],[1,"viewport-transform-info"],[1,"correction-header"],[1,"transform-type"],[1,"transform-note"],[1,"coordinate-issue-warning"],[1,"warning-header"],["class","warning-details",4,"ngIf"],["class","original-coords",4,"ngIf"],[1,"warning-details"],[1,"original-coords"],[1,"viewport-correction-info"],[1,"correction-grid"],[1,"correction-item"],[1,"correction-label"],[1,"correction-value"],[1,"correction-transforms"],[1,"transform-arrow"]],template:function(e,n){e&1&&(r(0,"div",0),I(1,ya,4,3,"div",1)(2,Ma,5,0,"div",2),s(),I(3,Na,11,1,"div",3)(4,Za,69,14,"div",3)(5,ur,33,13,"div",3)(6,$r,73,12,"div",4)),e&2&&(H("left",n.isDraggable?n.currentX:null,"px")("top",n.isDraggable?n.currentY:null,"px")("position",n.isDraggable?"fixed":"relative"),q("collapsed",n.isCollapsed)("compact",n.isCompact)("draggable",n.isDraggable)("minimized",n.isMinimized)("dragging",n.isDragging),c(),u("ngIf",n.analysisData),c(),u("ngIf",!n.analysisData),c(),u("ngIf",n.showVectorDetailModal),c(),u("ngIf",n.showTextDetailModal&&n.analysisData),c(),u("ngIf",n.showCombinedAnalysisModal&&n.analysisData),c(),u("ngIf",n.showImageDetailModal&&n.analysisData&&n.analysisData.imageInfo))},dependencies:[ne,Pt,Ve,Pe,Ne,nt,it,tt,Ue,Ye,At,kt],styles:['@charset "UTF-8";.pdf-analysis-dashboard[_ngcontent-%COMP%]{width:100%;margin-bottom:16px;animation:_ngcontent-%COMP%_slideDown .3s ease-out;z-index:1001}.pdf-analysis-dashboard.draggable[_ngcontent-%COMP%]{position:fixed;width:380px;max-width:90vw;cursor:move;box-shadow:0 8px 24px #0000004d;z-index:9999}.pdf-analysis-dashboard.draggable.dragging[_ngcontent-%COMP%]{cursor:grabbing;opacity:.95}.pdf-analysis-dashboard.compact[_ngcontent-%COMP%]   .dashboard-container[_ngcontent-%COMP%]{padding:12px}.pdf-analysis-dashboard.compact[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:8px}.pdf-analysis-dashboard.compact[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{padding:8px}.pdf-analysis-dashboard.compact[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:20px}.pdf-analysis-dashboard.compact[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:16px}.pdf-analysis-dashboard.compact[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:10px}.pdf-analysis-dashboard.compact[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]{margin-bottom:10px}.pdf-analysis-dashboard.compact[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:14px}.pdf-analysis-dashboard.minimized[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%], .pdf-analysis-dashboard.minimized[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]{display:none}.pdf-analysis-dashboard.minimized[_ngcontent-%COMP%]   .dashboard-container[_ngcontent-%COMP%]{padding:8px 12px}.pdf-analysis-dashboard.collapsed[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%], .pdf-analysis-dashboard.collapsed[_ngcontent-%COMP%]   .fonts-section[_ngcontent-%COMP%]{display:none}.dashboard-container[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--border-color);padding:16px;box-shadow:0 4px 12px #0000001a;color:var(--text-primary)}.dashboard-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:16px;-webkit-user-select:none;user-select:none}.dashboard-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.dashboard-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.dashboard-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .view-original-header-btn[_ngcontent-%COMP%]{background:transparent;border:1.5px solid #3b82f6;color:#3b82f6;padding:6px 12px;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:4px}.dashboard-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .view-original-header-btn[_ngcontent-%COMP%]:hover{background:#3b82f61a;border-color:#2563eb;color:#2563eb;transform:translateY(-1px)}.dashboard-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .view-original-header-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.dashboard-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .new-document-header-btn[_ngcontent-%COMP%]{background:transparent;border:1.5px solid #22c55e;color:#22c55e;padding:6px 12px;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:4px}.dashboard-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .new-document-header-btn[_ngcontent-%COMP%]:hover{background:#22c55e1a;border-color:#16a34a;color:#16a34a;transform:translateY(-1px)}.dashboard-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .new-document-header-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.dashboard-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);border:1px solid var(--border-color);width:28px;height:28px;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text-secondary);font-size:18px;font-weight:700;transition:all .2s ease;padding:0}.dashboard-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ef44441a;border-color:#ef44444d;color:#ef4444;transform:scale(1.05)}.dashboard-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.dashboard-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{font-size:20px}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:var(--text-primary)}.dashboard-header[_ngcontent-%COMP%]   .header-controls[_ngcontent-%COMP%]{display:flex;gap:6px}.dashboard-header[_ngcontent-%COMP%]   .header-controls[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);border:1px solid var(--border-color);width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text-primary);font-size:14px;font-weight:700;transition:all .2s ease}.dashboard-header[_ngcontent-%COMP%]   .header-controls[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]:hover{background:var(--bg-hover, #e9ecef);transform:scale(1.1)}.dashboard-header[_ngcontent-%COMP%]   .header-controls[_ngcontent-%COMP%]   .control-btn.close-btn[_ngcontent-%COMP%]:hover{background:#ef4444cc;color:#fff}.dashboard-header.draggable-handle[_ngcontent-%COMP%]{cursor:move;padding:4px;margin:-4px -4px 12px}.dashboard-header.draggable-handle[_ngcontent-%COMP%]:hover{background:var(--bg-hover, rgba(0, 0, 0, .05))}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:12px}  .view-original-btn-card .stat-card,   .new-document-btn-card .stat-card{min-height:60px!important;padding:12px 14px!important;cursor:pointer;border:1.5px solid;transition:all .2s ease}  .view-original-btn-card .stat-card:hover,   .new-document-btn-card .stat-card:hover{transform:translateY(-2px)!important;box-shadow:0 4px 12px #00000026!important}  .view-original-btn-card .stat-card .stat-content,   .new-document-btn-card .stat-card .stat-content{text-align:center}  .view-original-btn-card .stat-card .stat-label,   .new-document-btn-card .stat-card .stat-label{font-size:13px!important;font-weight:600!important;margin-bottom:0!important}  .view-original-btn-card .stat-card .stat-value,   .new-document-btn-card .stat-card .stat-value{display:none!important}  .view-original-btn-card .stat-card .stat-icon,   .new-document-btn-card .stat-card .stat-icon{font-size:20px!important}  .view-original-btn-card .stat-card{border-color:#3b82f6;background:#3b82f60d}  .view-original-btn-card .stat-card:hover{background:#3b82f61a!important;border-color:#2563eb}  .view-original-btn-card .stat-card .stat-label{color:#3b82f6!important}  .new-document-btn-card .stat-card{border-color:#22c55e;background:#22c55e0d}  .new-document-btn-card .stat-card:hover{background:#22c55e1a!important;border-color:#16a34a}  .new-document-btn-card .stat-card .stat-label{color:#22c55e!important}.stat-card[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);padding:12px;display:flex;align-items:center;gap:10px;transition:all .3s ease;border:1px solid var(--border-color)}.stat-card[_ngcontent-%COMP%]:hover{background:var(--bg-hover, #e9ecef);transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.stat-card.empty[_ngcontent-%COMP%]{opacity:.6}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:28px;line-height:1}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{flex:1;min-width:0}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:11px;font-weight:500;color:var(--text-secondary, #6c757d);text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-primary);line-height:1.2;margin-bottom:2px}.stat-card[_ngcontent-%COMP%]   .stat-value.empty-text[_ngcontent-%COMP%]{font-size:16px;font-weight:500;opacity:.7}.stat-card[_ngcontent-%COMP%]   .stat-detail[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary, #6c757d);line-height:1.3}.details-section[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);padding:12px;margin-bottom:12px;border:1px solid var(--border-color)}.details-section[_ngcontent-%COMP%]   .details-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-primary);text-transform:uppercase;letter-spacing:.5px;margin-bottom:10px}.details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:8px}.details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:12px;padding:4px 0}.details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{color:var(--text-secondary, #6c757d);font-weight:500}.details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600}.details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]   .rotation-info[_ngcontent-%COMP%]{color:var(--primary-color, #007bff);font-size:.9em;margin-left:4px}.fonts-section[_ngcontent-%COMP%]   .fonts-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.fonts-section[_ngcontent-%COMP%]   .font-tag[_ngcontent-%COMP%]{background:var(--bg-secondary, #e9ecef);padding:4px 8px;font-size:11px;color:var(--text-primary);font-weight:500;white-space:nowrap;border:1px solid var(--border-color)}.fonts-section[_ngcontent-%COMP%]   .font-tag.more[_ngcontent-%COMP%]{background:var(--bg-tertiary, #dee2e6);font-style:italic}.pdf-structure-section[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);padding:0;margin-top:12px;border:1px solid var(--border-color);border-radius:4px;overflow:hidden;transition:all .3s ease}.pdf-structure-section.expanded[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{border-bottom:2px solid var(--primary-color, #007bff)}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;cursor:pointer;-webkit-user-select:none;user-select:none;transition:all .2s;position:sticky;top:0;background:var(--bg-secondary, #f8f9fa);z-index:2;border-bottom:1px solid transparent}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]:hover{background:var(--bg-primary, #ffffff)}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{font-size:10px;color:var(--text-secondary, #6c757d);transition:transform .2s}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary);margin:0}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .json-toggle-btn[_ngcontent-%COMP%], .pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .copy-json-btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:11px;font-weight:600;border:1px solid var(--border-color);border-radius:4px;background:var(--bg-primary, #ffffff);color:var(--text-primary);cursor:pointer;transition:all .2s}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .json-toggle-btn[_ngcontent-%COMP%]:hover, .pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .copy-json-btn[_ngcontent-%COMP%]:hover, .pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .json-toggle-btn.active[_ngcontent-%COMP%], .pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .copy-json-btn.active[_ngcontent-%COMP%]{background:var(--primary-color, #007bff);color:#fff;border-color:var(--primary-color, #007bff)}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .copy-dropdown[_ngcontent-%COMP%]{position:relative}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .copy-dropdown[_ngcontent-%COMP%]:hover   .copy-menu[_ngcontent-%COMP%]{display:block}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .copy-dropdown[_ngcontent-%COMP%]   .copy-json-btn[_ngcontent-%COMP%]{white-space:nowrap}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .copy-dropdown[_ngcontent-%COMP%]   .copy-menu[_ngcontent-%COMP%]{display:none;position:absolute;top:100%;right:0;margin-top:4px;background:var(--bg-primary, #ffffff);border:1px solid var(--border-color);border-radius:6px;box-shadow:0 4px 12px #00000026;min-width:160px;z-index:1000;overflow:hidden}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .copy-dropdown[_ngcontent-%COMP%]   .copy-menu[_ngcontent-%COMP%]   .copy-menu-item[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 16px;font-size:12px;font-weight:500;text-align:left;border:none;background:var(--bg-primary, #ffffff);color:var(--text-primary);cursor:pointer;transition:all .2s}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .copy-dropdown[_ngcontent-%COMP%]   .copy-menu[_ngcontent-%COMP%]   .copy-menu-item[_ngcontent-%COMP%]:hover{background:var(--primary-color, #007bff);color:#fff}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .copy-dropdown[_ngcontent-%COMP%]   .copy-menu[_ngcontent-%COMP%]   .copy-menu-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid var(--border-color)}.pdf-structure-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary, #6c757d);font-style:italic}.pdf-structure-section[_ngcontent-%COMP%]   .section-content[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto;padding:16px}.pdf-structure-section[_ngcontent-%COMP%]   .section-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.pdf-structure-section[_ngcontent-%COMP%]   .section-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-primary, #ffffff);border-radius:4px}.pdf-structure-section[_ngcontent-%COMP%]   .section-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color, #dee2e6);border-radius:4px}.pdf-structure-section[_ngcontent-%COMP%]   .section-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary, #6c757d)}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]{margin-bottom:16px;padding:12px;background:var(--bg-primary, #ffffff);border:1px solid var(--border-color);border-radius:4px}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--primary-color, #007bff);margin-bottom:10px;padding-bottom:6px;border-bottom:1px solid var(--border-color)}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:6px 8px;background:var(--bg-secondary, #f8f9fa);border-radius:3px}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary, #6c757d);font-weight:500}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:12px;color:var(--text-primary);font-weight:600}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{margin-bottom:6px;padding:8px;background:var(--bg-secondary, #f8f9fa);border-radius:3px}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .image-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:8px}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .image-info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{flex:1;font-size:11px;color:var(--text-secondary, #6c757d);font-weight:500}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .image-info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:11px;color:var(--text-primary);font-weight:600;white-space:nowrap}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .image-info-row[_ngcontent-%COMP%]   .info-detail[_ngcontent-%COMP%]{font-size:10px;color:var(--primary-color, #007bff);background:#007bff1a;padding:2px 6px;border-radius:3px;white-space:nowrap}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{margin-bottom:12px;padding:8px;background:var(--bg-tertiary, #e9ecef);border-radius:4px;border-left:3px solid var(--primary-color, #007bff)}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]   .sentence-item[_ngcontent-%COMP%]{margin-bottom:12px;padding:10px;background:var(--bg-secondary, #f8f9fa);border:1px solid var(--border-color, #dee2e6);border-radius:4px;transition:all .2s ease}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]   .sentence-item[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary, #e9ecef);box-shadow:0 2px 4px #0000000d}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]   .sentence-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]   .sentence-item[_ngcontent-%COMP%]   .sentence-header[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid var(--border-color, #dee2e6)}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]   .sentence-item[_ngcontent-%COMP%]   .sentence-header[_ngcontent-%COMP%]   .sentence-number[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:var(--primary-color, #007bff);min-width:24px}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]   .sentence-item[_ngcontent-%COMP%]   .sentence-header[_ngcontent-%COMP%]   .sentence-text[_ngcontent-%COMP%]{flex:1;font-size:12px;color:var(--text-primary);font-weight:500;line-height:1.4;word-break:break-word}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]   .sentence-item[_ngcontent-%COMP%]   .sentence-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]   .sentence-item[_ngcontent-%COMP%]   .sentence-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:10px}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]   .sentence-item[_ngcontent-%COMP%]   .sentence-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{min-width:50px;color:var(--text-secondary, #6c757d);font-weight:600}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]   .sentence-item[_ngcontent-%COMP%]   .sentence-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{flex:1;color:var(--text-primary);font-family:Courier New,monospace;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]   .more-sentences[_ngcontent-%COMP%]{margin-top:12px;padding:8px;text-align:center;background:var(--bg-tertiary, #e9ecef);border-radius:4px}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .text-sentences-info[_ngcontent-%COMP%]   .sentences-detail[_ngcontent-%COMP%]   .more-sentences[_ngcontent-%COMP%]   .more-text[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary, #6c757d);font-style:italic}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .stream-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .stream-list[_ngcontent-%COMP%]   .stream-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:6px 10px;background:var(--bg-secondary, #f8f9fa);border:1px solid var(--border-color);border-radius:4px;font-size:11px}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .stream-list[_ngcontent-%COMP%]   .stream-item[_ngcontent-%COMP%]   .stream-type[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:600}.pdf-structure-section[_ngcontent-%COMP%]   .summary-view[_ngcontent-%COMP%]   .structure-group[_ngcontent-%COMP%]   .stream-list[_ngcontent-%COMP%]   .stream-item[_ngcontent-%COMP%]   .stream-count[_ngcontent-%COMP%]{color:var(--primary-color, #007bff);font-weight:700}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]{background:#1e1e1e;border:1px solid #3c3c3c;border-radius:6px;overflow:hidden;font-family:Consolas,Monaco,Courier New,monospace}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]   .terminal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:#2d2d2d;border-bottom:1px solid #3c3c3c}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]   .terminal-header[_ngcontent-%COMP%]   .terminal-title[_ngcontent-%COMP%]{font-size:12px;color:#4ec9b0;font-weight:600;font-family:Consolas,Monaco,Courier New,monospace}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]   .terminal-header[_ngcontent-%COMP%]   .terminal-title[_ngcontent-%COMP%]:before{content:"\\25cf  \\25cf  \\25cf  ";color:#ff5f56;margin-right:8px}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]   .terminal-header[_ngcontent-%COMP%]   .terminal-copy-btn[_ngcontent-%COMP%]{padding:4px 8px;background:transparent;border:1px solid #4ec9b0;border-radius:3px;color:#4ec9b0;cursor:pointer;font-size:10px;transition:all .2s}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]   .terminal-header[_ngcontent-%COMP%]   .terminal-copy-btn[_ngcontent-%COMP%]:hover{background:#4ec9b0;color:#1e1e1e}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]   .terminal-header[_ngcontent-%COMP%]   .terminal-copy-btn[_ngcontent-%COMP%]   .copy-icon[_ngcontent-%COMP%]{font-size:12px}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]   .terminal-content[_ngcontent-%COMP%]{margin:0;padding:16px;background:#1e1e1e;color:#d4d4d4;font-size:12px;line-height:1.6;max-height:400px;overflow-y:auto;overflow-x:hidden;white-space:pre-wrap;word-wrap:break-word}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]   .terminal-content[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#d4d4d4;font-family:Consolas,Monaco,Courier New,monospace;white-space:pre-wrap;word-break:break-all}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]   .terminal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]   .terminal-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#2d2d2d}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]   .terminal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4ec9b0;border-radius:4px}.pdf-structure-section[_ngcontent-%COMP%]   .json-terminal-view[_ngcontent-%COMP%]   .terminal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6fddbe}.dashboard-empty[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);border:2px dashed var(--border-color);padding:32px 16px;text-align:center;color:var(--text-secondary, #6c757d)}.dashboard-empty[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:12px;opacity:.6}.dashboard-empty[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{font-size:14px;font-weight:500;opacity:.8}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.dashboard-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:16px}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 480px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.dashboard-container[_ngcontent-%COMP%]{padding:12px}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.stat-card.clickable[_ngcontent-%COMP%]{cursor:pointer}.stat-card.clickable[_ngcontent-%COMP%]:not(.empty):hover{background:var(--bg-hover, #e9ecef);transform:translateY(-3px) scale(1.02);box-shadow:0 6px 12px #00000026}.stat-card.clickable[_ngcontent-%COMP%]:not(.empty):active{transform:translateY(-1px) scale(1.01)}.stat-card.clickable.empty[_ngcontent-%COMP%]{cursor:not-allowed}.vector-detail-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000bf;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.vector-detail-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:var(--bg-primary);border:1px solid var(--border-color);width:90%;max-width:600px;max-height:85vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.vector-detail-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--border-color);color:var(--text-primary)}.vector-detail-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600}.vector-detail-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);border:1px solid var(--border-color);width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text-primary);font-size:18px;font-weight:700;transition:all .2s ease}.vector-detail-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#ef4444cc;color:#fff;transform:scale(1.1)}.vector-detail-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:24px;color:var(--text-primary)}.vector-detail-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.vector-detail-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-secondary, #f8f9fa)}.vector-detail-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color)}.vector-detail-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--text-secondary, #6c757d)}.vector-detail-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;gap:12px}.vector-detail-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);border:none;padding:12px 20px;color:#fff;font-size:14px;font-weight:600;border-radius:6px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px}.vector-detail-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2980b9,#1f5f8b);transform:translateY(-2px);box-shadow:0 4px 12px #3498db4d}.vector-detail-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 6px #3498db4d}.vector-detail-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-close-modal[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);border:1px solid var(--border-color);padding:10px 24px;color:var(--text-primary);font-size:14px;font-weight:600;border-radius:6px;cursor:pointer;transition:all .2s ease}.vector-detail-modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-close-modal[_ngcontent-%COMP%]:hover{background:var(--bg-hover, #e9ecef);transform:translateY(-2px)}.vector-detail-modal[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]{margin-bottom:24px}.vector-detail-modal[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);padding:20px;display:flex;align-items:center;gap:16px;border:1px solid var(--border-color)}.vector-detail-modal[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{font-size:48px;line-height:1}.vector-detail-modal[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]{flex:1}.vector-detail-modal[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:var(--text-secondary, #6c757d);text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px}.vector-detail-modal[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:var(--text-primary);line-height:1;margin-bottom:6px}.vector-detail-modal[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-detail[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary, #6c757d)}.vector-detail-modal[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]{margin-bottom:24px}.vector-detail-modal[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary);text-transform:uppercase;letter-spacing:.5px;margin:0 0 16px;padding-bottom:8px;border-bottom:1px solid var(--border-color)}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);padding:14px;margin-bottom:12px;border:1px solid var(--border-color);transition:all .2s ease}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]:hover{background:var(--bg-hover, #e9ecef);transform:translate(4px)}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]   .vector-item-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:8px}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]   .vector-item-header[_ngcontent-%COMP%]   .vector-item-icon[_ngcontent-%COMP%]{font-size:20px;line-height:1}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]   .vector-item-header[_ngcontent-%COMP%]   .vector-item-title[_ngcontent-%COMP%]{flex:1;font-size:14px;font-weight:600;color:var(--text-primary)}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]   .vector-item-header[_ngcontent-%COMP%]   .vector-item-count[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-primary);background:var(--bg-tertiary, #dee2e6);padding:4px 12px}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]   .vector-item-bar[_ngcontent-%COMP%]{background:var(--bg-tertiary, rgba(0, 0, 0, .1));height:8px;overflow:hidden;margin-bottom:6px}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]   .vector-item-bar[_ngcontent-%COMP%]   .bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#4ade80,#22c55e);transition:width .5s ease}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]   .vector-item-bar[_ngcontent-%COMP%]   .bar-fill.lines[_ngcontent-%COMP%]{background:linear-gradient(90deg,#60a5fa,#3b82f6)}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]   .vector-item-bar[_ngcontent-%COMP%]   .bar-fill.curves[_ngcontent-%COMP%]{background:linear-gradient(90deg,#a78bfa,#8b5cf6)}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]   .vector-item-bar[_ngcontent-%COMP%]   .bar-fill.rectangles[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f472b6,#ec4899)}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]   .vector-item-bar[_ngcontent-%COMP%]   .bar-fill.fill[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fbbf24,#f59e0b)}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]   .vector-item-bar[_ngcontent-%COMP%]   .bar-fill.stroke[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fb923c,#f97316)}.vector-detail-modal[_ngcontent-%COMP%]   .vector-item[_ngcontent-%COMP%]   .vector-item-desc[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary, #6c757d);font-style:italic}.vector-detail-modal[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:24px}.vector-detail-modal[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);padding:16px;text-align:center;border:1px solid var(--border-color)}.vector-detail-modal[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-box-label[_ngcontent-%COMP%]{font-size:11px;font-weight:500;color:var(--text-secondary, #6c757d);text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px}.vector-detail-modal[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .stat-box[_ngcontent-%COMP%]   .stat-box-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--text-primary)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.vector-detail-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{width:95%;max-height:90vh}.vector-detail-modal[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.vector-detail-modal[_ngcontent-%COMP%]   .summary-section[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:28px}.vector-detail-modal[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]{grid-template-columns:1fr}}.minimap-section[_ngcontent-%COMP%]{margin-bottom:24px;background:var(--bg-secondary, #f8f9fa);padding:16px;border:1px solid var(--border-color)}.minimap-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary);text-transform:uppercase;letter-spacing:.5px;margin:0 0 12px}.minimap-section[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}.minimap-section[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]   .page-btn[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);border:1px solid var(--border-color);padding:6px 12px;color:var(--text-primary);font-size:12px;font-weight:600;cursor:pointer;transition:all .2s ease;min-width:40px}.minimap-section[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]   .page-btn[_ngcontent-%COMP%]:hover{background:var(--bg-hover, #e9ecef);transform:translateY(-2px)}.minimap-section[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]   .page-btn.active[_ngcontent-%COMP%]{background:var(--primary-color, #007bff);color:#fff;border-color:var(--primary-color, #007bff);box-shadow:0 0 12px #007bff4d}.minimap-section[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{margin-bottom:12px}.minimap-section[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]   .single-page-label[_ngcontent-%COMP%]{display:inline-block;background:#fff3;border:1px solid rgba(255,255,255,.3);border-radius:6px;padding:6px 12px;color:#fff;font-size:12px;font-weight:600}.minimap-section[_ngcontent-%COMP%]   .generation-method-info[_ngcontent-%COMP%]{margin-bottom:8px;text-align:center;display:flex;justify-content:center;align-items:center;gap:8px}.minimap-section[_ngcontent-%COMP%]   .generation-method-info[_ngcontent-%COMP%]   .method-text[_ngcontent-%COMP%]{display:inline-block;background:#667eea26;border:1px solid rgba(102,126,234,.3);border-radius:6px;padding:4px 10px;color:#333;font-size:11px;font-weight:600;letter-spacing:.5px}.minimap-section[_ngcontent-%COMP%]   .generation-method-info[_ngcontent-%COMP%]   .operations-text[_ngcontent-%COMP%]{display:inline-block;background:#ffffffe6;border:1px solid rgba(0,0,0,.1);border-radius:6px;padding:4px 10px;color:#333;font-size:11px;font-weight:600}.minimap-section[_ngcontent-%COMP%]   .minimap-container[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:8px;padding:12px;box-shadow:0 4px 12px #0003}.minimap-section[_ngcontent-%COMP%]   .minimap-container[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#667eeacc}.minimap-section[_ngcontent-%COMP%]   .minimap-container[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:inline-block;width:32px;height:32px;border:3px solid rgba(102,126,234,.3);border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:12px}.minimap-section[_ngcontent-%COMP%]   .minimap-container[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;font-weight:500}.minimap-section[_ngcontent-%COMP%]   .minimap-container[_ngcontent-%COMP%]   .minimap-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.minimap-section[_ngcontent-%COMP%]   .minimap-container[_ngcontent-%COMP%]   .minimap-wrapper[_ngcontent-%COMP%]     svg{max-width:100%;height:auto;border-radius:4px;box-shadow:0 2px 8px #0000001a}.minimap-section[_ngcontent-%COMP%]   .minimap-container[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px}.minimap-section[_ngcontent-%COMP%]   .minimap-container[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%]   .info-badge[_ngcontent-%COMP%]{background:#667eeaf2;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.3);border-radius:20px;padding:6px 14px;color:#fff;font-size:11px;font-weight:600;display:flex;align-items:center;gap:6px;box-shadow:0 2px 8px #0003}.minimap-section[_ngcontent-%COMP%]   .minimap-container[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%]   .info-badge[_ngcontent-%COMP%]   .badge-icon[_ngcontent-%COMP%]{font-size:14px;line-height:1}.debug-log-box[_ngcontent-%COMP%]{position:relative;background:#1e1e1e;border:1px solid #3a3a3a;border-radius:8px;padding:16px;margin-top:12px}.debug-log-box[_ngcontent-%COMP%]   .debug-log-content[_ngcontent-%COMP%]{color:#d4d4d4;font-family:Courier New,Consolas,monospace;font-size:11px;line-height:1.6;white-space:pre-wrap;word-break:break-all;-webkit-user-select:text;user-select:text;margin:0;max-height:300px;overflow-y:auto;padding:12px;background:#252526;border-radius:4px}.debug-log-box[_ngcontent-%COMP%]   .debug-log-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.debug-log-box[_ngcontent-%COMP%]   .debug-log-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1e1e1e;border-radius:4px}.debug-log-box[_ngcontent-%COMP%]   .debug-log-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#424242;border-radius:4px}.debug-log-box[_ngcontent-%COMP%]   .debug-log-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#4a4a4a}.debug-log-box[_ngcontent-%COMP%]   .btn-copy-debug[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;background:#007acc;color:#fff;border:none;padding:6px 12px;border-radius:4px;font-size:11px;font-weight:600;cursor:pointer;transition:all .2s ease;z-index:10}.debug-log-box[_ngcontent-%COMP%]   .btn-copy-debug[_ngcontent-%COMP%]:hover{background:#005a9e;transform:translateY(-1px);box-shadow:0 2px 8px #007acc4d}.debug-log-box[_ngcontent-%COMP%]   .btn-copy-debug[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 768px){.minimap-section[_ngcontent-%COMP%]   .minimap-container[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%]{top:12px;right:12px}.minimap-section[_ngcontent-%COMP%]   .minimap-container[_ngcontent-%COMP%]   .minimap-info[_ngcontent-%COMP%]   .info-badge[_ngcontent-%COMP%]{padding:4px 10px;font-size:10px}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.text-modal[_ngcontent-%COMP%]{max-width:700px}.text-modal[_ngcontent-%COMP%]   .font-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;max-height:300px;overflow-y:auto;padding:8px;background:#0000000d;border-radius:8px}.text-modal[_ngcontent-%COMP%]   .font-list[_ngcontent-%COMP%]   .font-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 12px;background:#fff;border-radius:6px;border:1px solid #e0e0e0;transition:all .2s ease}.text-modal[_ngcontent-%COMP%]   .font-list[_ngcontent-%COMP%]   .font-item[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 2px 8px #3b82f61a;transform:translate(4px)}.text-modal[_ngcontent-%COMP%]   .font-list[_ngcontent-%COMP%]   .font-item[_ngcontent-%COMP%]   .font-index[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:28px;height:28px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;font-size:11px;font-weight:700;border-radius:50%;flex-shrink:0}.text-modal[_ngcontent-%COMP%]   .font-list[_ngcontent-%COMP%]   .font-item[_ngcontent-%COMP%]   .font-name[_ngcontent-%COMP%]{flex:1;font-size:14px;font-weight:500;color:#1e293b;word-break:break-all;font-family:monospace;letter-spacing:-.5px}.text-modal[_ngcontent-%COMP%]   .font-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.text-modal[_ngcontent-%COMP%]   .font-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000000d;border-radius:4px}.text-modal[_ngcontent-%COMP%]   .font-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0003;border-radius:4px}.text-modal[_ngcontent-%COMP%]   .font-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0000004d}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;max-height:400px;overflow-y:auto;padding:8px;background:#00000005;border-radius:8px}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:#fff;border-radius:8px;border:1px solid #e5e7eb;transition:all .2s ease}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 2px 8px #3b82f61a;transform:translate(4px)}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]   .color-sample[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;border:2px solid #e5e7eb;box-shadow:0 2px 4px #0000001a;flex-shrink:0;transition:all .2s ease}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]   .color-sample[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 8px #00000026}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]   .color-info[_ngcontent-%COMP%]{flex:1;min-width:0}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]   .color-info[_ngcontent-%COMP%]   .color-code[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#1e293b;font-family:Courier New,monospace;letter-spacing:.5px;text-transform:uppercase}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]   .color-info[_ngcontent-%COMP%]   .color-usage[_ngcontent-%COMP%]{font-size:11px;color:#64748b;margin-top:2px}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]   .color-bar-wrapper[_ngcontent-%COMP%]{width:80px;height:6px;background:#e5e7eb;border-radius:3px;overflow:hidden;flex-shrink:0}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]   .color-item[_ngcontent-%COMP%]   .color-bar-wrapper[_ngcontent-%COMP%]   .color-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#3b82f6,#2563eb);border-radius:3px;transition:width .5s ease}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000000d;border-radius:4px}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0003;border-radius:4px}.text-modal[_ngcontent-%COMP%]   .color-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0000004d}.text-modal[_ngcontent-%COMP%]   .bar-fill.korean[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3b82f6,#2563eb)}.text-modal[_ngcontent-%COMP%]   .bar-fill.english[_ngcontent-%COMP%]{background:linear-gradient(90deg,#10b981,#059669)}.text-modal[_ngcontent-%COMP%]   .bar-fill.mixed[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f59e0b,#d97706)}.text-modal[_ngcontent-%COMP%]   .bar-fill.numbers[_ngcontent-%COMP%]{background:linear-gradient(90deg,#8b5cf6,#7c3aed)}.combined-analysis[_ngcontent-%COMP%]{transition:all .3s ease;background:transparent;border:2px solid rgba(255,255,255,.2)}.combined-analysis.has-both[_ngcontent-%COMP%]{border-color:#667eea}.combined-analysis.has-both[_ngcontent-%COMP%]:hover{border-color:#5568d3;background:#667eea1a;transform:translateY(-2px)}.combined-analysis.text-only[_ngcontent-%COMP%]{border-color:#3b82f6}.combined-analysis.text-only[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#3b82f61a;transform:translateY(-2px)}.combined-analysis.vector-only[_ngcontent-%COMP%]{border-color:#10b981}.combined-analysis.vector-only[_ngcontent-%COMP%]:hover{border-color:#059669;background:#10b9811a;transform:translateY(-2px)}.combined-modal[_ngcontent-%COMP%]{max-width:900px;max-height:90vh;overflow-y:auto}.combined-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.combined-modal[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1e293b;margin-bottom:16px;padding-bottom:8px;border-bottom:2px solid #e2e8f0;display:flex;align-items:center;gap:8px}.combined-modal[_ngcontent-%COMP%]   .comparison-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px;background:#f8fafc;border-radius:8px}.combined-modal[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.combined-modal[_ngcontent-%COMP%]   .comparison-label[_ngcontent-%COMP%]{min-width:120px;display:flex;align-items:center;gap:6px;font-size:14px;font-weight:500;color:#475569}.combined-modal[_ngcontent-%COMP%]   .comparison-label[_ngcontent-%COMP%]   .comparison-icon[_ngcontent-%COMP%]{font-size:18px}.combined-modal[_ngcontent-%COMP%]   .comparison-bar-wrapper[_ngcontent-%COMP%]{flex:1;position:relative;background:#e2e8f0;border-radius:6px;height:32px;overflow:hidden}.combined-modal[_ngcontent-%COMP%]   .comparison-bar[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:flex-end;padding-right:8px;transition:width .5s ease;border-radius:6px}.combined-modal[_ngcontent-%COMP%]   .comparison-bar.vector-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#10b981,#059669)}.combined-modal[_ngcontent-%COMP%]   .comparison-bar.text-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3b82f6,#2563eb)}.combined-modal[_ngcontent-%COMP%]   .comparison-bar[_ngcontent-%COMP%]   .comparison-value[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.2)}.combined-modal[_ngcontent-%COMP%]   .comparison-count[_ngcontent-%COMP%]{min-width:100px;text-align:right;font-size:13px;color:#64748b}.combined-modal[_ngcontent-%COMP%]   .comparison-summary[_ngcontent-%COMP%]{margin-top:12px;padding:12px 16px;background:#fff;border-left:4px solid #667eea;border-radius:4px}.combined-modal[_ngcontent-%COMP%]   .comparison-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;line-height:1.6;color:#475569}.combined-modal[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}.combined-modal[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.combined-modal[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.combined-modal[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.combined-modal[_ngcontent-%COMP%]   .action-btn.vector-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.combined-modal[_ngcontent-%COMP%]   .action-btn.vector-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857)}.combined-modal[_ngcontent-%COMP%]   .action-btn.text-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.combined-modal[_ngcontent-%COMP%]   .action-btn.text-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1d4ed8)}.combined-modal[_ngcontent-%COMP%]   .action-btn.create-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.combined-modal[_ngcontent-%COMP%]   .action-btn.create-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8a)}.combined-modal[_ngcontent-%COMP%]   .action-btn.combined-btn[_ngcontent-%COMP%]{background:transparent;border:2px solid #f59e0b;color:#f59e0b;font-weight:600}.combined-modal[_ngcontent-%COMP%]   .action-btn.combined-btn[_ngcontent-%COMP%]:hover{background:#f99e0b1a;border-color:#d97706;color:#d97706}.combined-modal[_ngcontent-%COMP%]   .action-btn.view-original-btn[_ngcontent-%COMP%]{background:transparent;border:2px solid #3b82f6;color:#3b82f6;font-weight:600}.combined-modal[_ngcontent-%COMP%]   .action-btn.view-original-btn[_ngcontent-%COMP%]:hover{background:#3b82f61a;border-color:#2563eb;color:#2563eb}.combined-modal[_ngcontent-%COMP%]   .action-btn.export-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;font-weight:600;border:none}.combined-modal[_ngcontent-%COMP%]   .action-btn.export-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857)}.combined-modal[_ngcontent-%COMP%]   .action-btn.export-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.combined-modal[_ngcontent-%COMP%]   .action-btn.download-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;font-weight:600;border:none}.combined-modal[_ngcontent-%COMP%]   .action-btn.download-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#7c3aed,#6d28d9)}.combined-modal[_ngcontent-%COMP%]   .action-btn.download-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.combined-modal[_ngcontent-%COMP%]   .action-btn.pdf-create-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;font-weight:600;border:none}.combined-modal[_ngcontent-%COMP%]   .action-btn.pdf-create-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#d97706,#b45309)}.combined-modal[_ngcontent-%COMP%]   .action-btn.pdf-create-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.combined-modal[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#f8fafc;border-radius:8px;margin-bottom:16px}.combined-modal[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#475569;font-size:14px}.combined-modal[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]   .page-select[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:2px solid #e2e8f0;border-radius:6px;font-size:14px;background:#fff;color:#1e293b;cursor:pointer;transition:all .2s ease}.combined-modal[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]   .page-select[_ngcontent-%COMP%]:hover{border-color:#3b82f6}.combined-modal[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]   .page-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.combined-modal[_ngcontent-%COMP%]   .text-items-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-height:500px;overflow-y:auto;padding:4px}.combined-modal[_ngcontent-%COMP%]   .text-items-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.combined-modal[_ngcontent-%COMP%]   .text-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:4px}.combined-modal[_ngcontent-%COMP%]   .text-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:4px}.combined-modal[_ngcontent-%COMP%]   .text-items-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #e2e8f0;border-radius:8px;padding:12px;transition:all .2s ease}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 4px 12px #3b82f626;transform:translateY(-1px)}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid #f1f5f9}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]   .text-item-index[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#64748b;background:#f1f5f9;padding:4px 8px;border-radius:4px}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]   .text-item-color-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]   .text-item-color-info[_ngcontent-%COMP%]   .color-sample-small[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:4px;border:2px solid #e2e8f0;box-shadow:0 2px 4px #0000001a;cursor:pointer;transition:transform .2s ease}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]   .text-item-color-info[_ngcontent-%COMP%]   .color-sample-small[_ngcontent-%COMP%]:hover{transform:scale(1.2);box-shadow:0 4px 8px #0003}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]   .text-item-color-info[_ngcontent-%COMP%]   .color-sample-large[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:8px;box-shadow:0 2px 8px #00000026;cursor:pointer;transition:all .3s ease;flex-shrink:0}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]   .text-item-color-info[_ngcontent-%COMP%]   .color-sample-large[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 12px #00000040}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]   .text-item-color-info[_ngcontent-%COMP%]   .color-info-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]   .text-item-color-info[_ngcontent-%COMP%]   .color-info-text[_ngcontent-%COMP%]   .color-hex-label[_ngcontent-%COMP%]{font-size:11px;color:#888;font-weight:500}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]   .text-item-color-info[_ngcontent-%COMP%]   .color-info-text[_ngcontent-%COMP%]   .color-hex[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:#333;font-size:13px}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]   .text-item-color-info[_ngcontent-%COMP%]   .color-hex[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:12px;font-weight:600;color:#475569;background:#f8fafc;padding:4px 8px;border-radius:4px;border:1px solid #e2e8f0}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-content[_ngcontent-%COMP%]{font-size:16px;line-height:1.7;margin-bottom:10px;padding:18px;border-radius:8px;word-break:break-word;border:2px solid var(--border-color, #e2e8f0);min-height:65px;display:flex;align-items:center;justify-content:flex-start;box-shadow:inset 0 2px 4px #0000000f,0 1px 3px #00000014;font-weight:600;text-align:left;white-space:pre-wrap;transition:all .2s ease;position:relative;overflow:hidden}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-content[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;opacity:.03;pointer-events:none;background-image:repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(0,0,0,.02) 10px,rgba(0,0,0,.02) 20px)}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-content[_ngcontent-%COMP%]:hover{box-shadow:inset 0 2px 8px #0000001a,0 4px 12px #00000026;transform:scale(1.02);border-color:#3b82f6}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;font-size:11px;color:#64748b}.combined-modal[_ngcontent-%COMP%]   .text-item-card[_ngcontent-%COMP%]   .text-item-meta[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:4px 8px;background:#f1f5f9;border-radius:4px;border:1px solid #e2e8f0}.combined-modal[_ngcontent-%COMP%]   .text-pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:16px;margin-top:16px;padding:16px;background:#f8fafc;border-radius:8px}.combined-modal[_ngcontent-%COMP%]   .text-pagination[_ngcontent-%COMP%]   .btn-pagination[_ngcontent-%COMP%]{padding:8px 16px;background:#fff;border:2px solid #e2e8f0;border-radius:6px;font-size:14px;font-weight:600;color:#475569;cursor:pointer;transition:all .2s ease}.combined-modal[_ngcontent-%COMP%]   .text-pagination[_ngcontent-%COMP%]   .btn-pagination[_ngcontent-%COMP%]:hover:not(:disabled){background:#3b82f6;border-color:#3b82f6;color:#fff;transform:translateY(-1px);box-shadow:0 4px 8px #3b82f633}.combined-modal[_ngcontent-%COMP%]   .text-pagination[_ngcontent-%COMP%]   .btn-pagination[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.combined-modal[_ngcontent-%COMP%]   .text-pagination[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#475569;padding:8px 16px;background:#fff;border-radius:6px;border:2px solid #e2e8f0}.combined-modal[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.combined-modal[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:5px}.combined-modal[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:5px}.combined-modal[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding:1rem;background:var(--bg-secondary, #f8f9fa);border-radius:8px;border:1px solid var(--border-color)}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid var(--border-color)}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-number-badge[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--primary-color);background:linear-gradient(135deg,#dbeafe,#bfdbfe);padding:6px 12px;border-radius:6px}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-image-count[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);font-weight:600}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);border-radius:8px;padding:.75rem;transition:all .2s ease}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a;transform:translateY(-2px)}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-thumbnail[_ngcontent-%COMP%]{width:100%;height:150px;display:flex;align-items:center;justify-content:center;background:#f1f5f9;border-radius:6px;margin-bottom:.75rem;overflow:hidden}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-placeholder[_ngcontent-%COMP%]{width:100%;height:150px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#f1f5f9,#e2e8f0);border-radius:6px;margin-bottom:.75rem;border:2px dashed #cbd5e1}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:.5rem;opacity:.5}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);font-weight:500}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-name[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--text-primary);margin-bottom:.5rem;word-break:break-all}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:600}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:500}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .detail-value.transform-array[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:11px;color:#3b82f6;word-break:break-all}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .image-detail-item.transform-section[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem;background:#3b82f60d;padding:.5rem;border-radius:4px;margin-top:.5rem}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .image-detail-item.scale-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf614,#3b82f614);padding:.5rem;border-radius:6px;margin-top:.5rem;border:1px solid rgba(139,92,246,.2)}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .image-detail-item.scale-info[_ngcontent-%COMP%]   .scale-badge[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:4px;font-weight:600;font-size:11px;background:#e5e7eb;color:#374151;margin-right:6px}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .image-detail-item.scale-info[_ngcontent-%COMP%]   .scale-badge.scaled[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#6366f1);color:#fff;box-shadow:0 2px 4px #8b5cf64d}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .image-detail-item.scale-info[_ngcontent-%COMP%]   .y-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:4px;font-weight:500;font-size:10px;background:#d1fae5;color:#065f46}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .image-detail-item.scale-info[_ngcontent-%COMP%]   .y-type-badge.from-top[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]{margin-top:.75rem;padding:.75rem;background:#3b82f608;border:1px solid rgba(59,130,246,.1);border-radius:6px}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .transform-summary[_ngcontent-%COMP%]{cursor:pointer;font-size:12px;font-weight:600;color:#3b82f6;-webkit-user-select:none;user-select:none;list-style:none;padding:.5rem;border-radius:4px;transition:all .2s}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .transform-summary[_ngcontent-%COMP%]:hover{background:#3b82f61a}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .transform-summary[_ngcontent-%COMP%]::-webkit-details-marker{display:none}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .transform-matrix-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.5rem;margin-top:.75rem;padding:.75rem;background:#ffffff80;border-radius:4px}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .transform-matrix-grid[_ngcontent-%COMP%]   .matrix-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:11px;padding:.375rem;background:#fff;border-radius:3px;border:1px solid rgba(59,130,246,.1)}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .transform-matrix-grid[_ngcontent-%COMP%]   .matrix-item[_ngcontent-%COMP%]   .matrix-label[_ngcontent-%COMP%]{color:#64748b;font-weight:600}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .transform-matrix-grid[_ngcontent-%COMP%]   .matrix-item[_ngcontent-%COMP%]   .matrix-value[_ngcontent-%COMP%]{color:#1e293b;font-family:Courier New,monospace;font-weight:600}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .transform-info[_ngcontent-%COMP%]{margin-top:.75rem;padding:.5rem;background:#ff98000d;border-left:3px solid #ff9800;border-radius:3px}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .transform-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px;color:#f57c00;line-height:1.4}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-transform-info[_ngcontent-%COMP%]{margin-bottom:1rem;padding:.75rem;background:linear-gradient(135deg,#10b9810d,#3b82f60d);border:2px solid rgba(16,185,129,.3);border-radius:6px}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-transform-info[_ngcontent-%COMP%]   .correction-header[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#10b981;margin-bottom:.5rem}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-transform-info[_ngcontent-%COMP%]   .transform-type[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-size:11px;color:#059669;background:#10b9811a;padding:.25rem .5rem;border-radius:4px}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-transform-info[_ngcontent-%COMP%]   .transform-note[_ngcontent-%COMP%]{margin-top:.5rem}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-transform-info[_ngcontent-%COMP%]   .transform-note[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px;color:#6b7280}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .coordinate-issue-warning[_ngcontent-%COMP%]{margin-bottom:1rem;padding:.75rem;background:linear-gradient(135deg,#ef44441a,#f973161a);border:2px solid rgba(239,68,68,.4);border-radius:6px}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .coordinate-issue-warning[_ngcontent-%COMP%]   .warning-header[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#dc2626;margin-bottom:.5rem}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .coordinate-issue-warning[_ngcontent-%COMP%]   .warning-details[_ngcontent-%COMP%]{font-size:11px;color:#b91c1c;margin-bottom:.25rem}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .coordinate-issue-warning[_ngcontent-%COMP%]   .warning-details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;background:#ef444426;padding:.125rem .375rem;border-radius:3px;margin-right:.25rem;margin-bottom:.25rem}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .coordinate-issue-warning[_ngcontent-%COMP%]   .original-coords[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px;color:#9ca3af;font-family:Courier New,monospace}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-correction-info[_ngcontent-%COMP%]{margin-bottom:1rem;padding:1rem;background:linear-gradient(135deg,#3b82f60d,#9333ea0d);border:2px solid rgba(59,130,246,.2);border-radius:6px}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-correction-info[_ngcontent-%COMP%]   .correction-header[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#3b82f6;margin-bottom:.75rem;padding-bottom:.5rem;border-bottom:1px solid rgba(59,130,246,.2)}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-correction-info[_ngcontent-%COMP%]   .correction-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.5rem;margin-bottom:.75rem}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-correction-info[_ngcontent-%COMP%]   .correction-grid[_ngcontent-%COMP%]   .correction-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem;background:#fff;border-radius:4px;border:1px solid rgba(59,130,246,.15)}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-correction-info[_ngcontent-%COMP%]   .correction-grid[_ngcontent-%COMP%]   .correction-item[_ngcontent-%COMP%]   .correction-label[_ngcontent-%COMP%]{font-size:10px;color:#64748b;font-weight:600}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-correction-info[_ngcontent-%COMP%]   .correction-grid[_ngcontent-%COMP%]   .correction-item[_ngcontent-%COMP%]   .correction-value[_ngcontent-%COMP%]{font-size:11px;color:#3b82f6;font-family:Courier New,monospace;font-weight:700}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-correction-info[_ngcontent-%COMP%]   .correction-transforms[_ngcontent-%COMP%]   .transform-type[_ngcontent-%COMP%]{padding:.5rem;margin-bottom:.25rem;background:#fff;border-radius:4px}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-correction-info[_ngcontent-%COMP%]   .correction-transforms[_ngcontent-%COMP%]   .transform-type[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:10px;color:#64748b;display:block;margin-bottom:.25rem}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-correction-info[_ngcontent-%COMP%]   .correction-transforms[_ngcontent-%COMP%]   .transform-type[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-size:10px;color:#3b82f6;font-family:Courier New,monospace;background:#3b82f60d;padding:.25rem .5rem;border-radius:3px;display:block;word-break:break-all;line-height:1.5}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-correction-info[_ngcontent-%COMP%]   .correction-transforms[_ngcontent-%COMP%]   .transform-arrow[_ngcontent-%COMP%]{text-align:center;font-size:14px;margin:.25rem 0;color:#9333ea;font-weight:600}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-correction-info[_ngcontent-%COMP%]   .correction-transforms[_ngcontent-%COMP%]   .transform-note[_ngcontent-%COMP%]{margin-top:.5rem;padding:.5rem;background:#22c55e0d;border-left:3px solid #22c55e;border-radius:3px}.image-modal[_ngcontent-%COMP%]   .page-images[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]   .transform-details[_ngcontent-%COMP%]   .viewport-correction-info[_ngcontent-%COMP%]   .correction-transforms[_ngcontent-%COMP%]   .transform-note[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:11px;color:#16a34a;font-weight:600}.image-modal[_ngcontent-%COMP%]   .bar-fill.xobject[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3b82f6,#2563eb)}.image-modal[_ngcontent-%COMP%]   .bar-fill.inline[_ngcontent-%COMP%]{background:linear-gradient(90deg,#8b5cf6,#7c3aed)}.stat-card.image-info[_ngcontent-%COMP%]{border-left:4px solid #a855f7}.stat-card.image-info.empty[_ngcontent-%COMP%]{opacity:.6;border-left-color:#cbd5e1}.stat-card.image-info[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:32px}.action-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.action-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]{flex:1;min-width:150px;padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.action-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.btn-export[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.action-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.btn-export[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1d4ed8);transform:translateY(-2px);box-shadow:0 4px 12px #3b82f64d}.action-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.btn-download[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff}.action-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action.btn-download[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#7c3aed,#6d28d9);transform:translateY(-2px);box-shadow:0 4px 12px #8b5cf64d}.action-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]:active{transform:translateY(0)}.action-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none!important}.pdf-generation-section[_ngcontent-%COMP%]{margin-top:16px;padding:16px;background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border:2px solid #3b82f6;border-radius:8px}.pdf-generation-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#1e40af;margin-bottom:12px;display:flex;align-items:center;gap:6px}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-buttons-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:6px;padding:12px 8px;border:2px solid transparent;border-radius:8px;background:#fff;cursor:pointer;transition:all .3s ease;font-family:inherit;position:relative}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:24px;line-height:1}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:12px;font-weight:600;text-align:center;line-height:1.2}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn[_ngcontent-%COMP%]   .btn-badge[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background:#fbbf24;color:#78350f;font-size:9px;font-weight:700;padding:2px 6px;border-radius:10px}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 6px 16px #00000026}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px)}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;filter:grayscale(.5)}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.recommended[_ngcontent-%COMP%]{border-color:#fbbf24;background:linear-gradient(135deg,#fef3c7,#fde68a)}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.recommended[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{color:#78350f}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.recommended[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#f59e0b;background:linear-gradient(135deg,#fde68a,#fcd34d);box-shadow:0 6px 20px #f59e0b66}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.combined[_ngcontent-%COMP%]{border-color:#8b5cf6;background:linear-gradient(135deg,#f3e8ff,#e9d5ff)}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.combined[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{color:#6b21a8}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.combined[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#7c3aed;background:linear-gradient(135deg,#e9d5ff,#d8b4fe);box-shadow:0 6px 20px #8b5cf666}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.vector[_ngcontent-%COMP%]{border-color:#3b82f6;background:linear-gradient(135deg,#dbeafe,#bfdbfe)}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.vector[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{color:#1e40af}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.vector[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#2563eb;background:linear-gradient(135deg,#bfdbfe,#93c5fd);box-shadow:0 6px 20px #3b82f666}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.text[_ngcontent-%COMP%]{border-color:#10b981;background:linear-gradient(135deg,#d1fae5,#a7f3d0)}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.text[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{color:#065f46}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.text[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#059669;background:linear-gradient(135deg,#a7f3d0,#6ee7b7);box-shadow:0 6px 20px #10b98166}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.image[_ngcontent-%COMP%]{border-color:#f59e0b;background:linear-gradient(135deg,#fed7aa,#fdba74)}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.image[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{color:#92400e}.pdf-generation-section[_ngcontent-%COMP%]   .pdf-btn.image[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#d97706;background:linear-gradient(135deg,#fdba74,#fb923c);box-shadow:0 6px 20px #f59e0b66}.page-analysis-section[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);padding:0;margin-top:12px;border:1px solid var(--border-color);border-radius:8px;overflow:hidden}.page-analysis-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;cursor:pointer;-webkit-user-select:none;user-select:none;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.page-analysis-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a67d8,#6b46a1)}.page-analysis-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.page-analysis-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{font-size:10px;transition:transform .2s}.page-analysis-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin:0}.page-analysis-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .page-count-badge[_ngcontent-%COMP%]{font-size:11px;padding:2px 8px;background:#fff3;border-radius:10px}.page-analysis-section[_ngcontent-%COMP%]   .section-content[_ngcontent-%COMP%]{padding:16px;max-height:600px;overflow-y:auto}.page-analysis-section[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:12px;background:var(--bg-primary, #ffffff);border-radius:8px;margin-bottom:16px;box-shadow:0 2px 4px #0000000d}.page-analysis-section[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:12px;font-weight:600;border:1px solid var(--border-color);border-radius:6px;background:var(--bg-secondary, #f8f9fa);color:var(--text-primary);cursor:pointer;transition:all .2s}.page-analysis-section[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-color, #007bff);color:#fff;border-color:var(--primary-color, #007bff)}.page-analysis-section[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.page-analysis-section[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .page-selector-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.page-analysis-section[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .page-selector-wrapper[_ngcontent-%COMP%]   .page-select[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px;font-weight:600;border:2px solid var(--primary-color, #007bff);border-radius:6px;background:#fff;color:var(--primary-color, #007bff);cursor:pointer;min-width:100px}.page-analysis-section[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .page-selector-wrapper[_ngcontent-%COMP%]   .page-select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #007bff33}.page-analysis-section[_ngcontent-%COMP%]   .page-navigation[_ngcontent-%COMP%]   .page-selector-wrapper[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary, #6c757d)}.page-analysis-section[_ngcontent-%COMP%]   .selected-page-info[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:16px}.page-analysis-section[_ngcontent-%COMP%]   .selected-page-info[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-primary);margin:0;padding-bottom:8px;border-bottom:2px solid var(--primary-color, #007bff)}.page-analysis-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background:var(--bg-primary, #ffffff);border:1px solid var(--border-color);border-radius:8px;padding:12px 16px;margin-bottom:12px}.page-analysis-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--text-primary);margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border-color)}.page-analysis-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}.page-analysis-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 8px;background:var(--bg-secondary, #f8f9fa);border-radius:4px}.page-analysis-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary, #6c757d)}.page-analysis-section[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:var(--text-primary)}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]{margin-top:12px}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-items-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:var(--bg-tertiary, #e9ecef);border-radius:4px;cursor:pointer;font-size:12px;font-weight:600;color:var(--text-primary)}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-items-header[_ngcontent-%COMP%]:hover{background:var(--bg-secondary, #dee2e6)}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-items-header[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{font-size:10px}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-items-list[_ngcontent-%COMP%]{margin-top:8px;max-height:400px;overflow-y:auto;padding:8px;background:var(--bg-tertiary, #f1f3f5);border-radius:4px}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-item[_ngcontent-%COMP%]{background:var(--bg-primary, #ffffff);border:1px solid var(--border-color);border-radius:4px;padding:8px 12px;margin-bottom:6px}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-item[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;margin-bottom:6px}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-item[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]   .item-index[_ngcontent-%COMP%]{font-size:10px;font-weight:700;color:var(--primary-color, #007bff);min-width:24px}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-item[_ngcontent-%COMP%]   .text-item-header[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%]{flex:1;font-size:12px;color:var(--text-primary);word-break:break-word}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-item[_ngcontent-%COMP%]   .text-item-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-item[_ngcontent-%COMP%]   .text-item-details[_ngcontent-%COMP%]   .detail-badge[_ngcontent-%COMP%]{font-size:10px;padding:2px 6px;border-radius:3px;background:var(--bg-secondary, #e9ecef);color:var(--text-secondary, #6c757d)}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-item[_ngcontent-%COMP%]   .text-item-details[_ngcontent-%COMP%]   .detail-badge.font[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-item[_ngcontent-%COMP%]   .text-item-details[_ngcontent-%COMP%]   .detail-badge.size[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-item[_ngcontent-%COMP%]   .text-item-details[_ngcontent-%COMP%]   .detail-badge.color[_ngcontent-%COMP%]{color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3)}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .text-item[_ngcontent-%COMP%]   .text-item-details[_ngcontent-%COMP%]   .detail-badge.position[_ngcontent-%COMP%]{font-family:monospace;background:#fef3c7;color:#92400e}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .load-more[_ngcontent-%COMP%]{margin-top:8px;text-align:center}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .load-more[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:12px;font-weight:600;border:1px solid var(--primary-color, #007bff);border-radius:6px;background:transparent;color:var(--primary-color, #007bff);cursor:pointer;transition:all .2s}.page-analysis-section[_ngcontent-%COMP%]   .text-items-section[_ngcontent-%COMP%]   .load-more[_ngcontent-%COMP%]   .load-more-btn[_ngcontent-%COMP%]:hover{background:var(--primary-color, #007bff);color:#fff}.page-analysis-section[_ngcontent-%COMP%]   .vector-preview[_ngcontent-%COMP%]{margin-top:12px}.page-analysis-section[_ngcontent-%COMP%]   .vector-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.page-analysis-section[_ngcontent-%COMP%]   .vector-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-primary)}.page-analysis-section[_ngcontent-%COMP%]   .vector-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .preview-btn[_ngcontent-%COMP%]{padding:4px 8px;font-size:10px;border:1px solid var(--primary-color, #007bff);border-radius:4px;background:transparent;color:var(--primary-color, #007bff);cursor:pointer}.page-analysis-section[_ngcontent-%COMP%]   .vector-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .preview-btn[_ngcontent-%COMP%]:hover{background:var(--primary-color, #007bff);color:#fff}.page-analysis-section[_ngcontent-%COMP%]   .vector-preview[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);border-radius:4px;padding:8px;max-height:200px;overflow:hidden}.page-analysis-section[_ngcontent-%COMP%]   .vector-preview[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:auto;max-height:180px}.page-analysis-section[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]{margin-top:12px;display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:8px}.page-analysis-section[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);border-radius:4px;overflow:hidden}.page-analysis-section[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-thumbnail[_ngcontent-%COMP%]{width:100%;height:60px;overflow:hidden}.page-analysis-section[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.page-analysis-section[_ngcontent-%COMP%]   .image-list[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .image-info[_ngcontent-%COMP%]{padding:4px;font-size:9px;color:var(--text-secondary, #6c757d);text-align:center;background:var(--bg-secondary, #f8f9fa)}.page-analysis-section[_ngcontent-%COMP%]   .no-page-data[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:var(--text-secondary, #6c757d)}.page-analysis-section[_ngcontent-%COMP%]   .no-page-data[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.page-analysis-section[_ngcontent-%COMP%]   .no-page-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-top:12px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]{background:var(--bg-secondary, #f8f9fa);border:1px solid var(--border-color);border-radius:8px;padding:12px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .image-detail-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--border-color)}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .image-detail-header[_ngcontent-%COMP%]   .image-index[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--primary-color, #007bff)}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .image-detail-header[_ngcontent-%COMP%]   .image-name[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary, #6c757d);font-family:monospace}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .image-thumbnail-row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:12px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .image-thumbnail-row[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:120px;height:80px;border:1px solid var(--border-color);border-radius:4px;overflow:hidden;background:#fff}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .image-thumbnail-row[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .image-thumbnail-row[_ngcontent-%COMP%]   .thumbnail.placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:32px;background:var(--bg-tertiary, #e9ecef)}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]{margin-bottom:12px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:var(--text-primary);margin-bottom:6px;padding:4px 8px;background:var(--bg-tertiary, #e9ecef);border-radius:4px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:4px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:4px 8px;background:#fff;border-radius:3px;font-size:11px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-secondary, #6c757d)}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);font-family:monospace}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .detail-section[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .value.warning[_ngcontent-%COMP%]{color:#dc3545;background:#dc35451a;padding:0 4px;border-radius:2px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .transform-matrix[_ngcontent-%COMP%]{background:#1e1e1e;color:#d4d4d4;padding:8px 12px;border-radius:4px;font-family:Consolas,Monaco,monospace;font-size:11px;margin-bottom:8px;overflow-x:auto}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .transform-matrix[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#9cdcfe}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .transform-explanation[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:4px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .transform-explanation[_ngcontent-%COMP%]   .explain-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:3px 6px;background:#fff;border-radius:3px;font-size:10px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .transform-explanation[_ngcontent-%COMP%]   .explain-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-secondary, #6c757d)}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .transform-explanation[_ngcontent-%COMP%]   .explain-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-family:monospace;font-weight:600}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .warning-section[_ngcontent-%COMP%]{margin-top:12px;padding:10px;background:#dc35451a;border:1px solid rgba(220,53,69,.3);border-radius:6px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .warning-section[_ngcontent-%COMP%]   .warning-title[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#dc3545;margin-bottom:8px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .warning-section[_ngcontent-%COMP%]   .warning-list[_ngcontent-%COMP%]{margin:0;padding-left:20px;font-size:11px;color:#721c24}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .warning-section[_ngcontent-%COMP%]   .warning-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:4px}.page-analysis-section[_ngcontent-%COMP%]   .image-detail-item[_ngcontent-%COMP%]   .warning-section[_ngcontent-%COMP%]   .warning-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.page-analysis-section[_ngcontent-%COMP%]   .no-images[_ngcontent-%COMP%]{text-align:center;padding:20px;color:var(--text-secondary, #6c757d);font-size:12px}.image-stats-summary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:1px solid #dee2e6;border-radius:8px;padding:12px;margin-bottom:16px}.image-stats-summary[_ngcontent-%COMP%]   .stats-header[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#495057;margin-bottom:10px;display:flex;align-items:center;gap:6px}.image-stats-summary[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.image-stats-summary[_ngcontent-%COMP%]   .stat-group[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:10px;color:#6c757d;margin-bottom:4px;font-weight:500}.image-stats-summary[_ngcontent-%COMP%]   .stat-group[_ngcontent-%COMP%]   .stat-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}.image-stats-summary[_ngcontent-%COMP%]   .stat-group[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:11px;color:#495057}.image-stats-summary[_ngcontent-%COMP%]   .stat-group[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .scaled-info[_ngcontent-%COMP%]{color:#e67e22;font-weight:500}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:2px 8px;border-radius:12px;font-size:10px;font-weight:500;white-space:nowrap}.badge.fullpage[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.badge.large[_ngcontent-%COMP%]{background:#e67e22;color:#fff}.badge.medium[_ngcontent-%COMP%]{background:#f39c12;color:#fff}.badge.small[_ngcontent-%COMP%]{background:#27ae60;color:#fff}.badge.thumbnail[_ngcontent-%COMP%]{background:#3498db;color:#fff}.badge.icon[_ngcontent-%COMP%]{background:#9b59b6;color:#fff}.badge.print[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.badge.good[_ngcontent-%COMP%]{background:#3498db;color:#fff}.badge.screen[_ngcontent-%COMP%]{background:#f39c12;color:#fff}.badge.low[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.badge.unknown[_ngcontent-%COMP%]{background:#95a5a6;color:#fff}.badge.aspect[_ngcontent-%COMP%]{background:#8e44ad;color:#fff}.badge.size[_ngcontent-%COMP%], .badge.quality[_ngcontent-%COMP%]{color:#fff}.badge.quality.print[_ngcontent-%COMP%]{background:#2ecc71}.badge.quality.good[_ngcontent-%COMP%]{background:#3498db}.badge.quality.screen[_ngcontent-%COMP%]{background:#f39c12}.badge.quality.low[_ngcontent-%COMP%]{background:#e74c3c}.badge.quality.unknown[_ngcontent-%COMP%]{background:#95a5a6}.classification-badges[_ngcontent-%COMP%]{display:flex;gap:4px;margin-left:auto;flex-wrap:wrap}.classification-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f4fd,#f0f7ff);border:1px solid #b3d7f5}.classification-section[_ngcontent-%COMP%]   .detail-title[_ngcontent-%COMP%]{color:#2980b9}.classification-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.classification-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:100px 1fr;grid-template-rows:auto auto;gap:2px 8px;padding:6px 8px;background:#fff;border-radius:6px;border:1px solid #e0e0e0}.classification-item[_ngcontent-%COMP%]   .class-label[_ngcontent-%COMP%]{grid-column:1;grid-row:1;font-size:10px;color:#6c757d;font-weight:500}.classification-item[_ngcontent-%COMP%]   .class-value[_ngcontent-%COMP%]{grid-column:2;grid-row:1;font-size:11px;font-weight:600;color:#333}.classification-item[_ngcontent-%COMP%]   .class-value.warning[_ngcontent-%COMP%]{color:#e67e22}.classification-item[_ngcontent-%COMP%]   .class-value.quality-print[_ngcontent-%COMP%]{color:#27ae60}.classification-item[_ngcontent-%COMP%]   .class-value.quality-good[_ngcontent-%COMP%]{color:#3498db}.classification-item[_ngcontent-%COMP%]   .class-value.quality-screen[_ngcontent-%COMP%]{color:#f39c12}.classification-item[_ngcontent-%COMP%]   .class-value.quality-low[_ngcontent-%COMP%]{color:#e74c3c}.classification-item[_ngcontent-%COMP%]   .class-desc[_ngcontent-%COMP%]{grid-column:1/-1;grid-row:2;font-size:9px;color:#999;font-style:italic}.image-detail-header[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:8px;padding:8px 10px;background:#f8f9fa;border-radius:6px;margin-bottom:10px}.image-detail-header[_ngcontent-%COMP%]   .image-index[_ngcontent-%COMP%]{font-weight:600;color:#495057;font-size:12px}.image-detail-header[_ngcontent-%COMP%]   .image-name[_ngcontent-%COMP%]{font-size:10px;color:#6c757d;font-family:monospace;background:#e9ecef;padding:2px 6px;border-radius:4px}']})};var ai=()=>[];function Nr(o,t){o&1&&(se(),r(0,"g"),R(1,"path",20)(2,"path",21),s())}function Rr(o,t){o&1&&(se(),r(0,"g"),R(1,"circle",22)(2,"path",23),s())}function jr(o,t){o&1&&(se(),r(0,"g"),R(1,"circle",24)(2,"path",25),s())}function Wr(o,t){o&1&&(se(),r(0,"g"),R(1,"path",26)(2,"path",27),s())}function Gr(o,t){o&1&&(se(),r(0,"g"),R(1,"rect",28)(2,"path",29)(3,"circle",30)(4,"circle",31)(5,"circle",32),s())}function Hr(o,t){if(o&1&&(r(0,"div",16),se(),r(1,"svg",17),Qe(2,18),I(3,Nr,3,0,"g",19)(4,Rr,3,0,"g",19)(5,jr,3,0,"g",19)(6,Wr,3,0,"g",19)(7,Gr,6,0,"g",19),et(),s()()),o&2){let e=t.$implicit;u("title",e.title),c(2),u("ngSwitch",e.id),c(),u("ngSwitchCase","pdf-editor"),c(),u("ngSwitchCase","element-properties"),c(),u("ngSwitchCase","ai-translate"),c(),u("ngSwitchCase","ai-summary"),c(),u("ngSwitchCase","form-tools")}}function Ur(o,t){if(o&1){let e=L();r(0,"div",13),w("click",function(){b(e);let i=p();return v(i.onExpand())}),r(1,"div",14),I(2,Hr,8,7,"div",15),s()()}if(o&2){let e=p();c(2),u("ngForOf",e.getVisibleMenuGroups())}}function Yr(o,t){o&1&&(se(),r(0,"g"),R(1,"path",20)(2,"path",21),s())}function Xr(o,t){o&1&&(se(),r(0,"g"),R(1,"circle",22)(2,"path",23),s())}function qr(o,t){o&1&&(se(),r(0,"g"),R(1,"circle",24)(2,"path",25),s())}function Kr(o,t){o&1&&(se(),r(0,"g"),R(1,"path",26)(2,"path",27),s())}function Jr(o,t){o&1&&(se(),r(0,"g"),R(1,"rect",28)(2,"path",29)(3,"circle",30)(4,"circle",31)(5,"circle",32),s())}function Zr(o,t){if(o&1&&(r(0,"div",44),l(1),s()),o&2){let e=p().$implicit;c(),M("",e.items.length,"\uAC1C \uD56D\uBAA9")}}function Qr(o,t){if(o&1&&(r(0,"div",44),l(1),s()),o&2){let e=p(3);c(),M(" ",e.selectedElement?e.getElementTypeName(e.selectedElement.type)+" \uC120\uD0DD\uB428":"\uC120\uD0DD\uB41C \uC694\uC18C \uC5C6\uC74C"," ")}}function es(o,t){o&1&&(r(0,"div",44),l(1," PDF \uBDF0\uC5B4 \uC804\uC6A9 "),s())}function ts(o,t){if(o&1){let e=L();r(0,"div",38),w("click",function(){let i=b(e).$implicit,a=p(2);return v(a.onMenuClick(i.id))}),r(1,"div",39),se(),r(2,"svg",17),Qe(3,18),I(4,Yr,3,0,"g",19)(5,Xr,3,0,"g",19)(6,qr,3,0,"g",19)(7,Kr,3,0,"g",19)(8,Jr,6,0,"g",19),et(),s()(),Ct(),r(9,"div",40)(10,"div",41),l(11),s(),I(12,Zr,2,1,"div",42)(13,Qr,2,1,"div",42)(14,es,2,0,"div",42),s(),r(15,"div",43),l(16,"\u203A"),s()()}if(o&2){let e=t.$implicit,n=p(2);q("disabled",n.isMenuDisabled(e.id)),c(3),u("ngSwitch",e.id),c(),u("ngSwitchCase","pdf-editor"),c(),u("ngSwitchCase","element-properties"),c(),u("ngSwitchCase","ai-translate"),c(),u("ngSwitchCase","ai-summary"),c(),u("ngSwitchCase","form-tools"),c(3),T(e.title),c(),u("ngIf",e.id!=="element-properties"&&e.id!=="ai-translate"&&e.id!=="ai-summary"),c(),u("ngIf",e.id==="element-properties"),c(),u("ngIf",(e.id==="ai-translate"||e.id==="ai-summary")&&!n.isPdfViewer)}}function ns(o,t){if(o&1){let e=L();r(0,"div",33)(1,"div",5)(2,"div",34)(3,"span",35),l(4,"\u{1F6E0}\uFE0F"),s(),r(5,"h3"),l(6,"PDF \uB3C4\uAD6C"),s()(),r(7,"button",7),w("click",function(){b(e);let i=p();return v(i.onClose())}),l(8,"\xD7"),s()(),r(9,"div",36),I(10,ts,17,12,"div",37),s()()}if(o&2){let e=p();c(10),u("ngForOf",e.getVisibleMenuGroups())}}function is(o,t){if(o&1){let e=L();r(0,"div",47)(1,"h4"),l(2,"\uD14D\uC2A4\uD2B8"),s(),r(3,"div",48)(4,"div",53)(5,"label"),l(6,"\uB0B4\uC6A9:"),s(),r(7,"textarea",58),w("change",function(i){b(e);let a=p(2);return v(a.onPropertyChange("text",i))}),s()(),r(8,"div",49)(9,"label"),l(10,"\uAE00\uAF34 \uD06C\uAE30:"),s(),r(11,"input",50),w("change",function(i){b(e);let a=p(2);return v(a.onPropertyChange("fontSize",i))}),s(),r(12,"span",51),l(13,"px"),s()(),r(14,"div",53)(15,"label"),l(16,"\uAE00\uAF34:"),s(),r(17,"select",59),w("change",function(i){b(e);let a=p(2);return v(a.onPropertyChange("fontFamily",i))}),r(18,"optgroup",60)(19,"option",61),l(20,"Noto Sans KR"),s(),r(21,"option",62),l(22,"\uB098\uB214\uACE0\uB515"),s(),r(23,"option",63),l(24,"\uB098\uB214\uBC14\uB978\uACE0\uB515"),s(),r(25,"option",64),l(26,"IBM Plex Sans KR"),s(),r(27,"option",65),l(28,"\uB098\uB214\uC2A4\uD018\uC5B4"),s(),r(29,"option",66),l(30,"Black Han Sans (\uAD75\uC740\uCCB4)"),s()(),r(31,"optgroup",67)(32,"option",68),l(33,"Noto Serif KR"),s(),r(34,"option",69),l(35,"\uB098\uB214\uBA85\uC870"),s()(),r(36,"optgroup",70)(37,"option",71),l(38,"\uB098\uB214\uC190\uAE00\uC528\uD39C"),s(),r(39,"option",72),l(40,"\uB098\uB214\uC190\uAE00\uC528\uBD93"),s(),r(41,"option",73),l(42,"\uB3C4\uD604\uCCB4"),s(),r(43,"option",74),l(44,"\uC8FC\uC544\uCCB4"),s(),r(45,"option",75),l(46,"\uAC1C\uAD6C\uC7C1\uC774\uCCB4"),s(),r(47,"option",76),l(48,"\uAC10\uC790\uAF43\uCCB4"),s(),r(49,"option",77),l(50,"\uD574\uBC14\uB77C\uAE30\uCCB4"),s(),r(51,"option",78),l(52,"\uB3D9\uD574\uB3C5\uB3C4\uCCB4"),s(),r(53,"option",79),l(54,"\uD558\uC774\uBA5C\uB85C\uB514\uCCB4"),s()(),r(55,"optgroup",80)(56,"option",81),l(57,"Arial"),s(),r(58,"option",82),l(59,"Helvetica"),s(),r(60,"option",83),l(61,"Times New Roman"),s(),r(62,"option",84),l(63,"Courier New"),s(),r(64,"option",85),l(65,"Georgia"),s(),r(66,"option",86),l(67,"Verdana"),s(),r(68,"option",87),l(69,"Roboto"),s(),r(70,"option",88),l(71,"Open Sans"),s(),r(72,"option",89),l(73,"Lato"),s(),r(74,"option",90),l(75,"Montserrat"),s(),r(76,"option",91),l(77,"Poppins"),s(),r(78,"option",92),l(79,"Inter"),s(),r(80,"option",93),l(81,"Ubuntu"),s()()()(),r(82,"div",49)(83,"label"),l(84,"\uAD75\uAE30:"),s(),r(85,"select",59),w("change",function(i){b(e);let a=p(2);return v(a.onPropertyChange("fontWeight",i))}),r(86,"option",94),l(87,"Thin (100)"),s(),r(88,"option",95),l(89,"Extra Light (200)"),s(),r(90,"option",96),l(91,"Light (300)"),s(),r(92,"option",97),l(93,"Normal (400)"),s(),r(94,"option",98),l(95,"Medium (500)"),s(),r(96,"option",99),l(97,"Semi Bold (600)"),s(),r(98,"option",100),l(99,"Bold (700)"),s(),r(100,"option",101),l(101,"Extra Bold (800)"),s(),r(102,"option",102),l(103,"Black (900)"),s()()(),r(104,"div",49)(105,"label"),l(106,"\uC2A4\uD0C0\uC77C:"),s(),r(107,"div",54)(108,"button",103),w("click",function(){b(e);let i=p(2);return v(i.onPropertyChange("fontStyle",{target:{value:"normal"}}))}),l(109,"\uC77C\uBC18"),s(),r(110,"button",104),w("click",function(){b(e);let i=p(2);return v(i.onPropertyChange("fontStyle",{target:{value:"italic"}}))}),l(111,"\uAE30\uC6B8\uC784"),s()()(),r(112,"div",49)(113,"label"),l(114,"\uC0C9\uC0C1:"),s(),r(115,"input",105),w("change",function(i){b(e);let a=p(2);return v(a.onPropertyChange("color",i))}),s()(),r(116,"div",53)(117,"label"),l(118,"\uC815\uB82C:"),s(),r(119,"div",54)(120,"button",103),w("click",function(){b(e);let i=p(2);return v(i.onPropertyChange("textAlign",{target:{value:"left"}}))}),l(121,"\uC67C\uCABD"),s(),r(122,"button",103),w("click",function(){b(e);let i=p(2);return v(i.onPropertyChange("textAlign",{target:{value:"center"}}))}),l(123,"\uAC00\uC6B4\uB370"),s(),r(124,"button",103),w("click",function(){b(e);let i=p(2);return v(i.onPropertyChange("textAlign",{target:{value:"right"}}))}),l(125,"\uC624\uB978\uCABD"),s()()()()()}if(o&2){let e=p(2);c(7),u("value",e.selectedElement.text),c(4),u("value",e.selectedElement.fontSize),c(6),u("value",e.selectedElement.fontFamily),c(68),u("value",e.selectedElement.fontWeight||"normal"),c(23),q("active",!e.selectedElement.fontStyle||e.selectedElement.fontStyle==="normal"),c(2),q("active",e.selectedElement.fontStyle==="italic"),c(5),u("value",e.selectedElement.color),c(5),q("active",e.selectedElement.textAlign==="left"),c(2),q("active",e.selectedElement.textAlign==="center"),c(2),q("active",e.selectedElement.textAlign==="right")}}function os(o,t){if(o&1){let e=L();r(0,"div",47)(1,"h4"),l(2,"\uC774\uBBF8\uC9C0"),s(),r(3,"div",48)(4,"div",49)(5,"label"),l(6,"\uD22C\uBA85\uB3C4:"),s(),r(7,"input",106),w("input",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.opacity",i))}),s(),r(8,"span",107),l(9),s()(),r(10,"div",49)(11,"label"),l(12,"\uD68C\uC804:"),s(),r(13,"input",50),w("change",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.rotation",i))}),s(),r(14,"span",51),l(15,"\xB0"),s()()()()}if(o&2){let e=p(2);c(7),u("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.opacity)||1),c(2),M("",((e.selectedElement.properties==null?null:e.selectedElement.properties.opacity)||1)*100,"%"),c(4),u("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.rotation)||0)}}function as(o,t){if(o&1){let e=L();r(0,"div",47)(1,"h4"),l(2,"\uB3C4\uD615 \uC2A4\uD0C0\uC77C"),s(),r(3,"div",48)(4,"div",49)(5,"label"),l(6,"\uCC44\uC6B0\uAE30 \uC0C9\uC0C1:"),s(),r(7,"input",105),w("change",function(i){b(e);let a=p(2);return v(a.onPropertyChange("fillColor",i))}),s()(),r(8,"div",49)(9,"label"),l(10,"\uD14C\uB450\uB9AC \uC0C9\uC0C1:"),s(),r(11,"input",105),w("change",function(i){b(e);let a=p(2);return v(a.onPropertyChange("strokeColor",i))}),s()(),r(12,"div",49)(13,"label"),l(14,"\uD14C\uB450\uB9AC \uB450\uAED8:"),s(),r(15,"input",50),w("change",function(i){b(e);let a=p(2);return v(a.onPropertyChange("strokeWidth",i))}),s(),r(16,"span",51),l(17,"px"),s()()()()}if(o&2){let e=p(2);c(7),u("value",e.selectedElement.fillColor||"#000000"),c(4),u("value",e.selectedElement.strokeColor||"#000000"),c(4),u("value",e.selectedElement.strokeWidth||1)}}function rs(o,t){if(o&1){let e=L();r(0,"div",47)(1,"h4"),l(2,"\uD3FC \uCCB4\uD06C\uBC15\uC2A4"),s(),r(3,"div",48)(4,"div",53)(5,"label"),l(6,"\uB808\uC774\uBE14:"),s(),r(7,"input",108),w("input",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.label",i))}),s()(),r(8,"div",109)(9,"label"),l(10,"\uAE30\uBCF8 \uC0C1\uD0DC:"),s(),r(11,"label",110)(12,"input",111),w("change",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.checked",i.target.checked))}),s(),r(13,"span"),l(14),s()()()()()}if(o&2){let e=p(2);c(7),u("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.label)||""),c(5),u("checked",e.selectedElement.properties==null?null:e.selectedElement.properties.checked),c(2),T(e.selectedElement.properties!=null&&e.selectedElement.properties.checked?"\uC120\uD0DD\uB428":"\uC120\uD0DD \uC548 \uD568")}}function ss(o,t){if(o&1){let e=L();r(0,"div",47)(1,"h4"),l(2,"\uD3FC \uB77C\uB514\uC624 \uBC84\uD2BC"),s(),r(3,"div",48)(4,"div",53)(5,"label"),l(6,"\uB808\uC774\uBE14:"),s(),r(7,"input",108),w("input",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.label",i))}),s()(),r(8,"div",53)(9,"label"),l(10,"\uADF8\uB8F9 \uC774\uB984:"),s(),r(11,"input",108),w("input",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.groupName",i))}),s()(),r(12,"div",53)(13,"label"),l(14,"\uC635\uC158 \uAC12:"),s(),r(15,"input",108),w("input",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.value",i))}),s()(),r(16,"div",109)(17,"label"),l(18,"\uAE30\uBCF8 \uC120\uD0DD:"),s(),r(19,"label",110)(20,"input",111),w("change",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.selected",i.target.checked))}),s(),r(21,"span"),l(22),s()()()()()}if(o&2){let e=p(2);c(7),u("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.label)||""),c(4),u("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.groupName)||""),c(4),u("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.value)||""),c(5),u("checked",e.selectedElement.properties==null?null:e.selectedElement.properties.selected),c(2),T(e.selectedElement.properties!=null&&e.selectedElement.properties.selected?"\uC120\uD0DD\uB428":"\uC120\uD0DD \uC548 \uD568")}}function ls(o,t){if(o&1&&(r(0,"option",115),l(1),s()),o&2){let e=t.$implicit;u("value",e),c(),M(" ",e," ")}}function cs(o,t){if(o&1){let e=L();r(0,"div",47)(1,"h4"),l(2,"\uD3FC \uB4DC\uB86D\uB2E4\uC6B4"),s(),r(3,"div",48)(4,"div",53)(5,"label"),l(6,"\uB808\uC774\uBE14:"),s(),r(7,"input",108),w("input",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.label",i))}),s()(),r(8,"div",53)(9,"label"),l(10,"\uC635\uC158 \uBAA9\uB85D:"),s(),r(11,"textarea",112),w("input",function(i){b(e);let a=p(2);return v(a.onDropdownOptionsChange(i))}),s(),r(12,"small",113),l(13,"\uC904\uBC14\uAFC8\uC73C\uB85C \uC635\uC158\uC744 \uAD6C\uBD84\uD558\uC138\uC694."),s()(),r(14,"div",53)(15,"label"),l(16,"\uAE30\uBCF8 \uC120\uD0DD:"),s(),r(17,"select",59),w("change",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.selectedOption",i))}),I(18,ls,2,2,"option",114),s()()()()}if(o&2){let e=p(2);c(7),u("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.label)||""),c(4),u("value",((e.selectedElement.properties==null?null:e.selectedElement.properties.options)||ut(4,ai)).join(`
`)),c(6),u("value",e.selectedElement.properties==null?null:e.selectedElement.properties.selectedOption),c(),u("ngForOf",(e.selectedElement.properties==null?null:e.selectedElement.properties.options)||ut(5,ai))}}function ds(o,t){if(o&1){let e=L();r(0,"div",47)(1,"h4"),l(2,"\uD3FC \uB0A0\uC9DC \uD544\uB4DC"),s(),r(3,"div",48)(4,"div",53)(5,"label"),l(6,"\uB808\uC774\uBE14:"),s(),r(7,"input",108),w("input",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.label",i))}),s()(),r(8,"div",53)(9,"label"),l(10,"\uC790\uB9AC\uD45C\uC2DC\uC790:"),s(),r(11,"input",108),w("input",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.placeholder",i))}),s()(),r(12,"div",53)(13,"label"),l(14,"\uB0A0\uC9DC \uD615\uC2DD:"),s(),r(15,"input",108),w("input",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.dateFormat",i))}),s()(),r(16,"div",53)(17,"label"),l(18,"\uAE30\uBCF8 \uAC12:"),s(),r(19,"input",108),w("input",function(i){b(e);let a=p(2);return v(a.onPropertyChange("properties.defaultValue",i))}),s()()()()}if(o&2){let e=p(2);c(7),u("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.label)||""),c(4),u("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.placeholder)||""),c(4),u("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.dateFormat)||""),c(4),u("value",(e.selectedElement.properties==null?null:e.selectedElement.properties.defaultValue)||"")}}function gs(o,t){if(o&1){let e=L();r(0,"div",45)(1,"div",46)(2,"div",47)(3,"h4"),l(4,"\uC704\uCE58 \uBC0F \uD06C\uAE30"),s(),r(5,"div",48)(6,"div",49)(7,"label"),l(8,"X:"),s(),r(9,"input",50),w("change",function(i){b(e);let a=p();return v(a.onPropertyChange("x",i))}),s(),r(10,"span",51),l(11,"px"),s()(),r(12,"div",49)(13,"label"),l(14,"Y:"),s(),r(15,"input",50),w("change",function(i){b(e);let a=p();return v(a.onPropertyChange("y",i))}),s(),r(16,"span",51),l(17,"px"),s()(),r(18,"div",49)(19,"label"),l(20,"\uB108\uBE44:"),s(),r(21,"input",50),w("change",function(i){b(e);let a=p();return v(a.onPropertyChange("width",i))}),s(),r(22,"span",51),l(23,"px"),s()(),r(24,"div",49)(25,"label"),l(26,"\uB192\uC774:"),s(),r(27,"input",50),w("change",function(i){b(e);let a=p();return v(a.onPropertyChange("height",i))}),s(),r(28,"span",51),l(29,"px"),s()()()(),I(30,is,126,15,"div",52)(31,os,16,3,"div",52)(32,as,18,3,"div",52)(33,rs,15,3,"div",52)(34,ss,23,5,"div",52)(35,cs,19,6,"div",52)(36,ds,20,4,"div",52),r(37,"div",47)(38,"h4"),l(39,"\uB808\uC774\uC5B4 \uBC0F \uD45C\uC2DC"),s(),r(40,"div",48)(41,"div",49)(42,"label"),l(43,"Z-Index:"),s(),r(44,"input",50),w("change",function(i){b(e);let a=p();return v(a.onPropertyChange("zIndex",i))}),s()(),r(45,"div",53)(46,"label"),l(47,"\uD45C\uC2DC:"),s(),r(48,"div",54)(49,"button",55),w("click",function(){b(e);let i=p();return v(i.onPropertyChange("properties.visible",{target:{value:!0}}))}),l(50,"\uBCF4\uC784"),s(),r(51,"button",55),w("click",function(){b(e);let i=p();return v(i.onPropertyChange("properties.visible",{target:{value:!1}}))}),l(52,"\uC228\uAE40"),s()()()()(),r(53,"div",56)(54,"button",57),w("click",function(){b(e);let i=p();return v(i.onDeleteElement())}),l(55," \u{1F5D1}\uFE0F \uC694\uC18C \uC0AD\uC81C "),s()()()()}if(o&2){let e=p();c(9),u("value",e.selectedElement.x),c(6),u("value",e.selectedElement.y),c(6),u("value",e.selectedElement.width),c(6),u("value",e.selectedElement.height),c(3),u("ngIf",e.selectedElement.type==="text"),c(),u("ngIf",e.selectedElement.type==="image"),c(),u("ngIf",e.selectedElement.type==="shape"),c(),u("ngIf",e.selectedElement.type==="form-checkbox"),c(),u("ngIf",e.selectedElement.type==="form-radio"),c(),u("ngIf",e.selectedElement.type==="form-dropdown"),c(),u("ngIf",e.selectedElement.type==="form-date"),c(8),u("value",e.selectedElement.zIndex||0),c(5),q("active",(e.selectedElement.properties==null?null:e.selectedElement.properties.visible)!==!1),c(2),q("active",(e.selectedElement.properties==null?null:e.selectedElement.properties.visible)===!1)}}function ps(o,t){if(o&1&&(r(0,"div",123),l(1),s()),o&2){let e=p().$implicit;c(),T(e.description)}}function ms(o,t){if(o&1){let e=L();r(0,"div",118),w("click",function(){let i=b(e).$implicit,a=p(2);return v(a.onSubItemClick(i.id))}),r(1,"div",119)(2,"div",120),l(3),s(),I(4,ps,2,1,"div",121),s(),r(5,"div",122),l(6,"\u203A"),s()()}if(o&2){let e=t.$implicit;c(3),T(e.label),c(),u("ngIf",e.description)}}function us(o,t){if(o&1&&(r(0,"div",116),I(1,ms,7,2,"div",117),s()),o&2){let e=p();c(),u("ngForOf",e.getMenuItems())}}function fs(o,t){o&1&&(r(0,"div",140),R(1,"div",141),s())}function hs(o,t){if(o&1&&R(0,"img",142),o&2){let e=p().$implicit;u("src",e.icon,Te)("alt","Page "+e.pageNumber)}}function Cs(o,t){o&1&&(r(0,"div",143),l(1,"\u2713"),s())}function _s(o,t){if(o&1){let e=L();r(0,"div",135),w("click",function(){let i=b(e).$implicit,a=p(4);return v(a.onSelectPageForAnalysis(i.pageNumber))}),I(1,fs,2,0,"div",136)(2,hs,1,2,"img",137),r(3,"div",138),l(4),s(),I(5,Cs,2,0,"div",139),s()}if(o&2){let e=t.$implicit,n=p(4);q("selected",n.selectedPageForAnalysis===e.pageNumber)("loading",e.isLoading),c(),u("ngIf",e.isLoading),c(),u("ngIf",!e.isLoading&&e.icon),c(2),T(e.pageNumber),c(),u("ngIf",n.selectedPageForAnalysis===e.pageNumber)}}function xs(o,t){if(o&1&&(r(0,"div",133),I(1,_s,6,8,"div",134),s()),o&2){let e=p(3);c(),u("ngForOf",e.pageThumbnails)}}function Ps(o,t){o&1&&(r(0,"span"),l(1,"\uD398\uC774\uC9C0 \uC120\uD0DD \uD655\uC778"),s())}function bs(o,t){o&1&&(r(0,"span"),l(1,"\uC378\uB124\uC77C \uC0DD\uC131 \uC911..."),s())}function vs(o,t){if(o&1&&(r(0,"span"),l(1),s()),o&2){let e=p(3);c(),M("",e.selectedPageForAnalysis,"\uD398\uC774\uC9C0 \uBD84\uC11D \uC2DC\uC791")}}function ys(o,t){if(o&1){let e=L();r(0,"div",127)(1,"div",128)(2,"h4",129),l(3,"\uBD84\uC11D\uD560 \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694"),s(),r(4,"p",130),l(5,"\uC120\uD0DD\uD55C \uD398\uC774\uC9C0\uC758 \uD14D\uC2A4\uD2B8\uAC00 AI \uBC88\uC5ED\uB429\uB2C8\uB2E4."),s()(),I(6,xs,2,1,"div",131),r(7,"div",128)(8,"button",132),w("click",function(){b(e);let i=p(2);return v(i.onConfirmPageSelection())}),I(9,Ps,2,0,"span",126)(10,bs,2,0,"span",126)(11,vs,2,1,"span",126),s()()()}if(o&2){let e=p(2);c(6),u("ngIf",e.pageThumbnails.length>0),c(2),u("disabled",e.isConfirmDisabled()),c(),u("ngIf",e.pageThumbnails.length===0),c(),u("ngIf",e.isThumbnailsLoading()),c(),u("ngIf",e.pageThumbnails.length>0&&!e.isThumbnailsLoading())}}function Ms(o,t){if(o&1){let e=L();r(0,"div",128)(1,"div",157)(2,"label",145),l(3,"\uBD84\uC11D \uD398\uC774\uC9C0"),s(),r(4,"select",158),_e("ngModelChange",function(i){b(e);let a=p(3);return Ce(a.selectedPageForAnalysis,i)||(a.selectedPageForAnalysis=i),v(i)}),w("change",function(){b(e);let i=p(3);return v(i.onSelectedPageChange())}),r(5,"option",115),l(6),s()(),r(7,"div",159)(8,"small"),l(9),s()()()()}if(o&2){let e=p(3);c(4),he("ngModel",e.selectedPageForAnalysis),c(),u("value",e.selectedPageForAnalysis),c(),M("",e.selectedPageForAnalysis,"\uD398\uC774\uC9C0 (\uC120\uD0DD\uB428)"),c(3),M("\uC120\uD0DD\uD55C ",e.selectedPageForAnalysis,"\uD398\uC774\uC9C0\uB97C \uBD84\uC11D\uD569\uB2C8\uB2E4.")}}function Os(o,t){if(o&1&&(r(0,"span"),l(1),s()),o&2){let e=p(4);c(),M(" (",e.selectedPageForAnalysis,"\uD398\uC774\uC9C0)")}}function ws(o,t){if(o&1&&(r(0,"div",128)(1,"div",160),l(2),s(),r(3,"div",161),l(4),s(),r(5,"div",162),l(6),I(7,Os,2,1,"span",126),s()()),o&2){let e=p(3);c(2),M(" ",e.selectedAnalysisScope==="all"?"PDF \uC804\uCCB4 \uB0B4\uC6A9":e.selectedPageForAnalysis+"\uD398\uC774\uC9C0 \uB0B4\uC6A9"," "),c(2),M(" ",e.pdfContent.length>500?e.pdfContent.substring(0,500)+"...":e.pdfContent," "),c(2),M(" \uCD1D \uAE00\uC790 \uC218: ",e.pdfContent.length," "),c(),u("ngIf",e.selectedAnalysisScope==="single")}}function Ds(o,t){if(o&1&&(r(0,"option",115),l(1),s()),o&2){let e=t.$implicit;u("value",e.value),c(),M(" ",e.label," ")}}function Ss(o,t){o&1&&(r(0,"span"),l(1,"AI \uBC88\uC5ED\uD558\uAE30"),s())}function Es(o,t){o&1&&(r(0,"span"),l(1,"\uBC88\uC5ED \uC911..."),s())}function Is(o,t){if(o&1&&(r(0,"div",163)(1,"div",164),R(2,"div",165),s(),r(3,"div",166),l(4),s()()),o&2){let e=p(3);c(2),H("width",e.translationProgress,"%"),c(2),M("\uBC88\uC5ED \uC9C4\uD589 \uC911... ",e.translationProgress,"%")}}function ks(o,t){if(o&1&&(r(0,"div",172)(1,"div",173),l(2),s()()),o&2){let e=p().$implicit;c(2),T(e.translatedText)}}function Ts(o,t){if(o&1&&(r(0,"div",174),l(1),s()),o&2){let e=p().$implicit;c(),M(" \uBC88\uC5ED \uC2E4\uD328: ",e.error," ")}}function Fs(o,t){if(o&1&&(r(0,"div"),I(1,ks,3,1,"div",170)(2,Ts,2,1,"div",171),s()),o&2){let e=t.$implicit;c(),u("ngIf",e.success),c(),u("ngIf",!e.success)}}function As(o,t){if(o&1&&(r(0,"div",128)(1,"div",160),l(2,"\uBC88\uC5ED \uACB0\uACFC"),s(),r(3,"div",167),I(4,Fs,3,2,"div",168),s(),r(5,"div",169),l(6),s()()),o&2){let e=p(3);c(4),u("ngForOf",e.translations),c(2),le(" \uC131\uACF5: ",e.getSuccessfulTranslationCount()," / ",e.translations.length," ")}}function Bs(o,t){if(o&1){let e=L();r(0,"div")(1,"div",128)(2,"div",144)(3,"label",145),l(4,"\uBD84\uC11D \uBC94\uC704"),s(),r(5,"div",146)(6,"label",147)(7,"input",148),_e("ngModelChange",function(i){b(e);let a=p(2);return Ce(a.selectedAnalysisScope,i)||(a.selectedAnalysisScope=i),v(i)}),w("change",function(){b(e);let i=p(2);return v(i.onAnalysisScopeChange())}),s(),r(8,"span",149),l(9,"\uC804\uCCB4 \uD398\uC774\uC9C0 (\uBE44\uD65C\uC131\uD654)"),s()(),r(10,"label",150)(11,"input",151),_e("ngModelChange",function(i){b(e);let a=p(2);return Ce(a.selectedAnalysisScope,i)||(a.selectedAnalysisScope=i),v(i)}),w("change",function(){b(e);let i=p(2);return v(i.onAnalysisScopeChange())}),s(),r(12,"span",149),l(13,"\uD398\uC774\uC9C0\uBCC4 \uBD84\uC11D (\uC120\uD0DD\uB41C \uD398\uC774\uC9C0)"),s()()()()(),I(14,Ms,10,4,"div",152)(15,ws,8,4,"div",152),r(16,"div",128)(17,"div",153)(18,"label",145),l(19,"\uBC88\uC5ED\uD560 \uC5B8\uC5B4"),s(),r(20,"select",154),_e("ngModelChange",function(i){b(e);let a=p(2);return Ce(a.selectedLanguage,i)||(a.selectedLanguage=i),v(i)}),w("change",function(){b(e);let i=p(2);return v(i.onLanguageChange(i.selectedLanguage))}),I(21,Ds,2,2,"option",114),s()()(),r(22,"div",128)(23,"button",155),w("click",function(i){return b(e),p(2).onStartTranslation(),v(i.stopPropagation())}),I(24,Ss,2,0,"span",126)(25,Es,2,0,"span",126),s(),I(26,Is,5,3,"div",156),s(),I(27,As,7,3,"div",152),s()}if(o&2){let e=p(2);c(7),he("ngModel",e.selectedAnalysisScope),c(4),he("ngModel",e.selectedAnalysisScope),c(3),u("ngIf",e.selectedAnalysisScope==="single"),c(),u("ngIf",e.showPdfContent&&e.pdfContent),c(5),he("ngModel",e.selectedLanguage),c(),u("ngForOf",e.languages),c(2),u("disabled",e.isTranslating),c(),u("ngIf",!e.isTranslating),c(),u("ngIf",e.isTranslating),c(),u("ngIf",e.isTranslating),c(),u("ngIf",e.translations.length>0)}}function Vs(o,t){if(o&1&&(r(0,"div",124),I(1,ys,12,5,"div",125)(2,Bs,28,11,"div",126),s()),o&2){let e=p();c(),u("ngIf",e.needsPageSelection),c(),u("ngIf",!e.needsPageSelection)}}function zs(o,t){o&1&&(r(0,"div",140),R(1,"div",141),s())}function $s(o,t){if(o&1&&R(0,"img",142),o&2){let e=p().$implicit;u("src",e.icon,Te)("alt","Page "+e.pageNumber)}}function Ls(o,t){o&1&&(r(0,"div",143),l(1,"\u2713"),s())}function Ns(o,t){if(o&1){let e=L();r(0,"div",135),w("click",function(){let i=b(e).$implicit,a=p(4);return v(a.onSelectPageForAnalysis(i.pageNumber))}),I(1,zs,2,0,"div",136)(2,$s,1,2,"img",137),r(3,"div",138),l(4),s(),I(5,Ls,2,0,"div",139),s()}if(o&2){let e=t.$implicit,n=p(4);q("selected",n.selectedPageForAnalysis===e.pageNumber)("loading",e.isLoading),c(),u("ngIf",e.isLoading),c(),u("ngIf",!e.isLoading&&e.icon),c(2),T(e.pageNumber),c(),u("ngIf",n.selectedPageForAnalysis===e.pageNumber)}}function Rs(o,t){if(o&1&&(r(0,"div",133),I(1,Ns,6,8,"div",134),s()),o&2){let e=p(3);c(),u("ngForOf",e.pageThumbnails)}}function js(o,t){o&1&&(r(0,"span"),l(1,"\uD398\uC774\uC9C0 \uC120\uD0DD \uD655\uC778"),s())}function Ws(o,t){o&1&&(r(0,"span"),l(1,"\uC378\uB124\uC77C \uC0DD\uC131 \uC911..."),s())}function Gs(o,t){if(o&1&&(r(0,"span"),l(1),s()),o&2){let e=p(3);c(),M("",e.selectedPageForAnalysis,"\uD398\uC774\uC9C0 \uBD84\uC11D \uC2DC\uC791")}}function Hs(o,t){if(o&1){let e=L();r(0,"div",127)(1,"div",128)(2,"h4",129),l(3,"\uBD84\uC11D\uD560 \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694"),s(),r(4,"p",130),l(5,"\uC120\uD0DD\uD55C \uD398\uC774\uC9C0\uC758 \uD14D\uC2A4\uD2B8\uAC00 AI \uC694\uC57D\uB429\uB2C8\uB2E4."),s()(),I(6,Rs,2,1,"div",131),r(7,"div",128)(8,"button",132),w("click",function(){b(e);let i=p(2);return v(i.onConfirmPageSelection())}),I(9,js,2,0,"span",126)(10,Ws,2,0,"span",126)(11,Gs,2,1,"span",126),s()()()}if(o&2){let e=p(2);c(6),u("ngIf",e.pageThumbnails.length>0),c(2),u("disabled",e.isConfirmDisabled()),c(),u("ngIf",e.pageThumbnails.length===0),c(),u("ngIf",e.isThumbnailsLoading()),c(),u("ngIf",e.pageThumbnails.length>0&&!e.isThumbnailsLoading())}}function Us(o,t){if(o&1&&(r(0,"div",161),l(1),s()),o&2){let e=p(3);c(),M(" ",e.pdfContent.length>500?e.pdfContent.substring(0,500)+"...":e.pdfContent," ")}}function Ys(o,t){if(o&1&&(r(0,"span"),l(1),s()),o&2){let e=p(4);c(),M(" (",e.selectedPageForAnalysis,"\uD398\uC774\uC9C0)")}}function Xs(o,t){if(o&1&&(r(0,"div",162),l(1),I(2,Ys,2,1,"span",126),s()),o&2){let e=p(3);c(),M(" \uCD1D \uAE00\uC790 \uC218: ",e.pdfContent.length," "),c(),u("ngIf",e.selectedAnalysisScope==="single")}}function qs(o,t){o&1&&(r(0,"div",187),l(1," PDF\uB97C \uB85C\uB4DC\uD558\uBA74 \uBCF8\uBB38 \uB0B4\uC6A9\uC774 \uC5EC\uAE30\uC5D0 \uD45C\uC2DC\uB429\uB2C8\uB2E4. "),s())}function Ks(o,t){if(o&1&&(r(0,"option",115),l(1),s()),o&2){let e=t.$implicit;u("value",e.value),c(),M(" ",e.label," ")}}function Js(o,t){if(o&1&&(r(0,"option",115),l(1),s()),o&2){let e=t.$implicit;u("value",e.value),c(),M(" ",e.label," ")}}function Zs(o,t){o&1&&(r(0,"span"),l(1,"AI \uC694\uC57D \uC0DD\uC131"),s())}function Qs(o,t){o&1&&(r(0,"span"),l(1,"\uC0DD\uC131 \uC911..."),s())}function el(o,t){if(o&1){let e=L();r(0,"div",190)(1,"div",191),l(2),s(),r(3,"div",192)(4,"button",193),w("click",function(){b(e);let i=p(4);return v(i.onCopySummary())}),l(5," \u{1F4CB} \uBCF5\uC0AC "),s(),r(6,"button",194),w("click",function(){b(e);let i=p(4);return v(i.onExportSummary())}),l(7," \u{1F4BE} \uC800\uC7A5 "),s()()()}if(o&2){let e=p(4);c(2),T(e.summaryText)}}function tl(o,t){o&1&&(r(0,"div",195),R(1,"div",141),r(2,"div",196),l(3,"AI\uAC00 \uBB38\uC11C\uB97C \uBD84\uC11D\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4..."),s()())}function nl(o,t){if(o&1&&(r(0,"div",128)(1,"div",160),l(2,"\uC694\uC57D \uACB0\uACFC"),s(),I(3,el,8,1,"div",188)(4,tl,4,0,"div",189),s()),o&2){let e=p(3);c(3),u("ngIf",!e.isLoadingSummary),c(),u("ngIf",e.isLoadingSummary)}}function il(o,t){o&1&&(r(0,"div",128)(1,"div",197)(2,"div",178),l(3,"\u{1F916}"),s(),r(4,"div",179)(5,"p")(6,"strong"),l(7,"AI \uC694\uC57D \uAE30\uB2A5"),s()(),r(8,"p"),l(9,"\uBB38\uC11C\uC758 \uD575\uC2EC \uB0B4\uC6A9\uC744 AI\uAC00 \uC790\uB3D9\uC73C\uB85C \uC694\uC57D\uD574\uB4DC\uB9BD\uB2C8\uB2E4."),s(),r(10,"ul")(11,"li"),l(12,"\u2022 \uBE60\uB978 \uBB38\uC11C \uC774\uD574"),s(),r(13,"li"),l(14,"\u2022 \uD575\uC2EC \uD3EC\uC778\uD2B8 \uCD94\uCD9C"),s(),r(15,"li"),l(16,"\u2022 \uB2E4\uC591\uD55C \uC694\uC57D \uC2A4\uD0C0\uC77C"),s()()()()())}function ol(o,t){if(o&1){let e=L();r(0,"div")(1,"div",128)(2,"div",176)(3,"label",145),l(4,"\uBD84\uC11D \uBC94\uC704"),s(),r(5,"div",177)(6,"span",178),l(7,"\u{1F4C4}"),s(),r(8,"span",179),l(9),s()()()(),r(10,"div",128)(11,"div",160),l(12),s(),I(13,Us,2,1,"div",180)(14,Xs,3,2,"div",181)(15,qs,2,0,"div",182),s(),r(16,"div",128)(17,"div",160),l(18,"\uC694\uC57D \uC124\uC815"),s(),r(19,"div",183)(20,"label",184),l(21,"\uC694\uC57D \uAE38\uC774"),s(),r(22,"select",185),_e("ngModelChange",function(i){b(e);let a=p(2);return Ce(a.summaryLength,i)||(a.summaryLength=i),v(i)}),I(23,Ks,2,2,"option",114),s()(),r(24,"div",183)(25,"label",184),l(26,"\uC694\uC57D \uC720\uD615"),s(),r(27,"select",185),_e("ngModelChange",function(i){b(e);let a=p(2);return Ce(a.summaryType,i)||(a.summaryType=i),v(i)}),I(28,Js,2,2,"option",114),s()(),r(29,"button",186),w("click",function(i){return b(e),p(2).onGenerateSummary(),v(i.stopPropagation())}),I(30,Zs,2,0,"span",126)(31,Qs,2,0,"span",126),s()(),I(32,nl,5,2,"div",152)(33,il,17,0,"div",152),s()}if(o&2){let e=p(2);c(9),M("",e.selectedPageForAnalysis,"\uD398\uC774\uC9C0\uB9CC \uC694\uC57D\uD569\uB2C8\uB2E4"),c(3),M(" ",e.selectedAnalysisScope==="all"?"PDF \uC804\uCCB4 \uB0B4\uC6A9":e.selectedPageForAnalysis+"\uD398\uC774\uC9C0 \uB0B4\uC6A9"," "),c(),u("ngIf",e.pdfContent),c(),u("ngIf",e.pdfContent),c(),u("ngIf",!e.pdfContent),c(7),he("ngModel",e.summaryLength),c(),u("ngForOf",e.summaryLengthOptions),c(4),he("ngModel",e.summaryType),c(),u("ngForOf",e.summaryTypeOptions),c(),u("disabled",e.isLoadingSummary),c(),u("ngIf",!e.isLoadingSummary),c(),u("ngIf",e.isLoadingSummary),c(),u("ngIf",e.summaryText||e.isLoadingSummary),c(),u("ngIf",!e.summaryText&&!e.isLoadingSummary)}}function al(o,t){if(o&1&&(r(0,"div",175),I(1,Hs,12,5,"div",125)(2,ol,34,14,"div",126),s()),o&2){let e=p();c(),u("ngIf",e.needsPageSelection),c(),u("ngIf",!e.needsPageSelection)}}function rl(o,t){if(o&1&&(r(0,"div",198),R(1,"div",199),r(2,"div",200),l(3,"\uD604\uC7AC \uC0C1\uD0DC"),s(),r(4,"div",201)(5,"div",202)(6,"span",203),l(7,"\uD398\uC774\uC9C0:"),s(),r(8,"span",204),l(9),s()(),r(10,"div",202)(11,"span",203),l(12,"\uC90C:"),s(),r(13,"span",204),l(14),s()()()()),o&2){let e=p();c(9),le("",e.currentPage," / ",e.totalPages),c(5),M("",e.zoomLevel,"%")}}var Vt=class o{constructor(t,e,n,i,a){this.cdr=t;this.geminiTranslationService=e;this.snackbarService=n;this.geminiApiManager=i;this.dialog=a}selectedElement=null;currentPage=1;totalPages=1;zoomLevel=100;pdfPages=[];isPdfViewer=!1;isCollapsed=!1;pdfTextStreamData=null;openMenuId=null;pageThumbnails=[];currentMode="\uD648";panelAction=new $;close=new $;expand=new $;addText=new $;addImage=new $;addShape=new $;addSignature=new $;addWatermark=new $;addVectorPath=new $;addFormCheckbox=new $;addFormRadio=new $;addFormDropdown=new $;addFormDateField=new $;addPage=new $;deletePage=new $;rotatePage=new $;pageSelect=new $;zoomIn=new $;zoomOut=new $;elementPropertyChange=new $;deleteElement=new $;deselectElement=new $;keepOnlyFirstPage=new $;translationCompleted=new $;expandedMenuId=null;selectedLanguage="english";isTranslating=!1;translationProgress=0;translations=[];showHighlight=!1;pdfContent="";showPdfContent=!1;selectedAnalysisScope="single";selectedPageForAnalysis=1;needsPageSelection=!1;languages=[{value:"english",label:"\uC601\uC5B4"},{value:"korean",label:"\uD55C\uAD6D\uC5B4"},{value:"japanese",label:"\uC77C\uBCF8\uC5B4"},{value:"chinese",label:"\uC911\uAD6D\uC5B4"},{value:"spanish",label:"\uC2A4\uD398\uC778\uC5B4"},{value:"french",label:"\uD504\uB791\uC2A4\uC5B4"},{value:"german",label:"\uB3C5\uC77C\uC5B4"}];summaryText="";isLoadingSummary=!1;summaryLength="medium";summaryType="general";summaryLengthOptions=[{value:"short",label:"\uC9E7\uAC8C (1-2\uBB38\uB2E8)"},{value:"medium",label:"\uBCF4\uD1B5 (3-4\uBB38\uB2E8)"},{value:"long",label:"\uC790\uC138\uD788 (5-6\uBB38\uB2E8)"}];summaryTypeOptions=[{value:"general",label:"\uC77C\uBC18 \uC694\uC57D"},{value:"bullet",label:"\uD575\uC2EC \uD3EC\uC778\uD2B8"},{value:"qa",label:"Q&A \uD615\uC2DD"},{value:"structure",label:"\uAD6C\uC870\uC801 \uC694\uC57D"}];menuGroups=[{id:"pdf-editor",title:"PDF \uD3B8\uC9D1",icon:"\u270F\uFE0F",modes:["\uD3B8\uC9D1"],items:[{id:"add-text",label:"\uD14D\uC2A4\uD2B8 \uCD94\uAC00",description:"PDF\uC5D0 \uD14D\uC2A4\uD2B8 \uC0BD\uC785"},{id:"add-image",label:"\uC774\uBBF8\uC9C0 \uCD94\uAC00",description:"PDF\uC5D0 \uC774\uBBF8\uC9C0 \uC0BD\uC785"},{id:"add-shape",label:"\uB3C4\uD615 \uCD94\uAC00",description:"\uC0AC\uAC01\uD615, \uC6D0 \uB4F1 \uCD94\uAC00"},{id:"add-signature",label:"\uC11C\uBA85 \uCD94\uAC00",description:"\uC804\uC790 \uC11C\uBA85 \uC0BD\uC785"},{id:"add-watermark",label:"\uC6CC\uD130\uB9C8\uD06C",description:"\uC6CC\uD130\uB9C8\uD06C \uCD94\uAC00"},{id:"add-vector-path",label:"\uBCA1\uD130 \uD328\uC2A4",description:"\uBCA1\uD130 \uADF8\uB9AC\uAE30"}]},{id:"form-tools",title:"\uD3FC \uB3C4\uAD6C",icon:"\u{1F9FE}",modes:["\uD3B8\uC9D1"],items:[{id:"form-checkbox",label:"\uCCB4\uD06C\uBC15\uC2A4 \uCD94\uAC00",description:"\uB2E4\uC911 \uC120\uD0DD\uC744 \uC704\uD55C \uCCB4\uD06C\uBC15\uC2A4"},{id:"form-radio",label:"\uB77C\uB514\uC624 \uBC84\uD2BC \uCD94\uAC00",description:"\uB2E8\uC77C \uC120\uD0DD \uC635\uC158 \uADF8\uB8F9"},{id:"form-dropdown",label:"\uB4DC\uB86D\uB2E4\uC6B4 \uCD94\uAC00",description:"\uC120\uD0DD\uD615 \uC785\uB825 \uC694\uC18C"},{id:"form-date-field",label:"\uB0A0\uC9DC \uD544\uB4DC \uCD94\uAC00",description:"\uB0A0\uC9DC \uC120\uD0DD \uC785\uB825 \uC694\uC18C"}]},{id:"element-properties",title:"\uC694\uC18C \uC18D\uC131",icon:"\u2699\uFE0F",modes:["\uD3B8\uC9D1"],items:[]},{id:"ai-translate",title:"AI \uBC88\uC5ED",icon:"\u{1F310}",modes:["\uD648"],items:[]},{id:"ai-summary",title:"AI \uC694\uC57D",icon:"\u{1F916}",modes:["\uD648"],items:[]}];ngOnInit(){this.selectedPageForAnalysis=1,this.selectedAnalysisScope="single",this.pdfTextStreamData&&this.extractAndDisplayPdfContent()}ngOnChanges(t){t.openMenuId&&(!t.openMenuId.isFirstChange()&&t.openMenuId.previousValue!==t.openMenuId.currentValue?this.expandedMenuId=this.openMenuId:t.openMenuId.isFirstChange()&&this.openMenuId&&(this.expandedMenuId=this.openMenuId),this.cdr.detectChanges()),t.currentPage&&this.cdr.detectChanges(),t.selectedElement&&(this.selectedElement?(this.updateElementPropertiesMenu(),(this.isCollapsed||this.expandedMenuId!=="element-properties")&&(this.expandedMenuId="element-properties",this.isCollapsed&&this.expand.emit())):this.expandedMenuId==="element-properties"&&(this.expandedMenuId=null)),t.pdfTextStreamData&&this.pdfTextStreamData&&this.extractAndDisplayPdfContent(),t.openMenuId&&this.openMenuId&&(this.expandedMenuId=this.openMenuId,this.cdr.detectChanges()),t.pageThumbnails&&this.cdr.detectChanges()}onMenuClick(t){if(!(this.expandedMenuId!==t)){this.expandedMenuId=null,this.cdr.markForCheck(),this.cdr.detectChanges();return}if(this.panelAction.emit({type:"menu-click",menuId:t}),t==="ai-translate")try{this.isPdfViewer?(this.needsPageSelection=!0,this.selectedPageForAnalysis=this.currentPage||1):this.pdfTextStreamData&&this.extractAndDisplayPdfContent()}catch(n){console.error("\u274C [PdfToolsPanel] AI \uBC88\uC5ED \uBA54\uB274 \uCC98\uB9AC \uC624\uB958:",n)}if(t==="ai-summary")try{this.isPdfViewer?(this.needsPageSelection=!0,this.selectedPageForAnalysis=this.currentPage||1):this.pdfTextStreamData&&this.extractAndDisplayPdfContent()}catch(n){console.error("\u274C [PdfToolsPanel] AI \uC694\uC57D \uBA54\uB274 \uCC98\uB9AC \uC624\uB958:",n)}this.expandedMenuId=t,this.cdr.markForCheck(),this.cdr.detectChanges()}onSubItemClick(t){this.panelAction.emit({type:"menu-click",menuId:t}),this.handleAction(t)}onBack(){let t=this.expandedMenuId;this.expandedMenuId=null,this.panelAction.emit({type:"menu-click",menuId:""}),this.cdr.markForCheck(),this.cdr.detectChanges()}onClose(){this.expandedMenuId=null,this.close.emit()}onExpand(){this.expand.emit()}getMenuTitle(){let t=this.menuGroups.find(e=>e.id===this.expandedMenuId);return t?t.title:""}getMenuItems(){let t=this.menuGroups.find(e=>e.id===this.expandedMenuId);return t?t.items:[]}getVisibleMenuGroups(){return this.menuGroups.filter(t=>t.modes.includes(this.currentMode))}isMenuDisabled(t){return!1}handleAction(t){let n={"add-text":()=>this.addText.emit(),"add-image":()=>this.addImage.emit(),"add-shape":()=>this.addShape.emit(),"add-signature":()=>this.addSignature.emit(),"add-watermark":()=>this.addWatermark.emit(),"add-vector-path":()=>this.addVectorPath.emit(),"form-checkbox":()=>this.addFormCheckbox.emit(),"form-radio":()=>this.addFormRadio.emit(),"form-dropdown":()=>this.addFormDropdown.emit(),"form-date-field":()=>this.addFormDateField.emit(),"add-page":()=>this.addPage.emit(),"delete-page":()=>this.deletePage.emit(),"rotate-page":()=>this.rotatePage.emit(),"zoom-in":()=>this.zoomIn.emit(),"zoom-out":()=>this.zoomOut.emit(),"keep-only-first-page":()=>this.keepOnlyFirstPage.emit()}[t];n&&n()}updateElementPropertiesMenu(){let t=this.menuGroups.find(n=>n.id==="element-properties");if(!t||!this.selectedElement)return;let e=this.getElementTypeName(this.selectedElement.type);t.title=`${e} \uC18D\uC131`,t.icon=this.getElementIcon(this.selectedElement.type),t.items=[]}onPropertyChange(t,e){if(!this.selectedElement)return;let n=e.target?.value!==void 0?e.target.value:e;if(t.includes(".")){let i=t.split("."),a=this.selectedElement;for(let d=0;d<i.length-1;d++)a[i[d]]||(a[i[d]]={}),a=a[i[d]];a[i[i.length-1]]=this.parseValue(n)}else this.selectedElement[t]=this.parseValue(n);this.elementPropertyChange.emit({elementId:this.selectedElement.id,property:t,value:this.parseValue(n)})}onDeleteElement(){this.deleteElement.emit()}onDeselectElement(){this.deselectElement.emit()}onDropdownOptionsChange(t){if(!this.selectedElement)return;let i=(t.target?.value??"").split(/\r?\n/).map(a=>a.trim()).filter(a=>a.length>0);this.elementPropertyChange.emit({elementId:this.selectedElement.id,property:"properties.options",value:i}),i.length>0&&(!this.selectedElement.properties?.selectedOption||!i.includes(this.selectedElement.properties.selectedOption))&&this.elementPropertyChange.emit({elementId:this.selectedElement.id,property:"properties.selectedOption",value:i[0]})}getElementIcon(t){return{text:"\u{1F4DD}",image:"\u{1F5BC}\uFE0F",shape:"\u{1F537}",signature:"\u270D\uFE0F",watermark:"\u{1F4A7}","vector-path":"\u{1F3A8}",line:"\u{1F4CF}","form-checkbox":"\u2611\uFE0F","form-radio":"\u{1F518}","form-dropdown":"v","form-date":"\u{1F4C5}"}[t]||"\u{1F4C4}"}getElementTypeName(t){return{text:"\uD14D\uC2A4\uD2B8",image:"\uC774\uBBF8\uC9C0",shape:"\uB3C4\uD615",signature:"\uC11C\uBA85",watermark:"\uC6CC\uD130\uB9C8\uD06C","vector-path":"\uBCA1\uD130 \uD328\uC2A4",line:"\uC120","form-checkbox":"\uD3FC \uCCB4\uD06C\uBC15\uC2A4","form-radio":"\uD3FC \uB77C\uB514\uC624 \uBC84\uD2BC","form-dropdown":"\uD3FC \uB4DC\uB86D\uB2E4\uC6B4","form-date":"\uD3FC \uB0A0\uC9DC \uD544\uB4DC"}[t]||"\uC694\uC18C"}parseValue(t){if(typeof t=="string"){let e=parseFloat(t);if(!isNaN(e)&&t.trim()!=="")return e;if(t==="true")return!0;if(t==="false")return!1}return t}onDocumentClick(t){this.expandedMenuId==="ai-translate"||this.expandedMenuId==="ai-summary"||this.expandedMenuId&&(t.target.closest(".pdf-tools-panel")||(this.expandedMenuId=null))}extractAndDisplayPdfContent(){let t=this.extractTextFromPdf();this.pdfContent=t.join(`
`).replace(/\n+/g,`
`).trim(),this.showPdfContent=!0,this.cdr.detectChanges()}onLanguageChange(t){this.selectedLanguage=t,this.cdr.detectChanges()}onAnalysisScopeChange(){this.selectedAnalysisScope="single",this.selectedPageForAnalysis=1,this.pdfTextStreamData&&this.extractAndDisplayPdfContent(),this.cdr.detectChanges()}onSelectedPageChange(){this.pdfTextStreamData&&this.extractAndDisplayPdfContent(),this.cdr.detectChanges()}onSelectPageForAnalysis(t){this.selectedPageForAnalysis=t,this.cdr.detectChanges()}isThumbnailsLoading(){return this.pageThumbnails.length>0&&this.pageThumbnails.some(t=>t.isLoading)}isConfirmDisabled(){return this.pageThumbnails.length>0&&(this.isThumbnailsLoading()||!this.selectedPageForAnalysis)}onConfirmPageSelection(){let t=this.expandedMenuId==="ai-translate"?"ai-translate":"ai-summary";this.pageThumbnails.length===0?(this.snackbarService.showInfo(`${this.selectedPageForAnalysis}\uD398\uC774\uC9C0 \uC378\uB124\uC77C\uC744 \uC0DD\uC131\uD569\uB2C8\uB2E4...`),this.panelAction.emit({type:"menu-click",menuId:"request-thumbnails",source:t,data:{targetPage:this.selectedPageForAnalysis}})):(this.needsPageSelection=!1,this.snackbarService.showInfo(`${this.selectedPageForAnalysis}\uD398\uC774\uC9C0 \uBD84\uC11D\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4...`),this.panelAction.emit({type:"menu-click",menuId:"pdf-analysis",source:t,data:{targetPage:this.selectedPageForAnalysis}}),this.pdfTextStreamData&&this.extractAndDisplayPdfContent()),this.cdr.detectChanges()}getPageNumbers(){return Array.from({length:this.totalPages},(t,e)=>e+1)}onStartTranslation(){return E(this,null,function*(){if(this.selectedAnalysisScope,!this.geminiApiManager.getApiKey()){this.snackbarService.showInfo("Gemini API \uD0A4\uB97C \uC124\uC815\uD574\uC8FC\uC138\uC694."),this.openPdfSettingsModal();return}if(!this.pdfTextStreamData){this.snackbarService.showError("PDF\uB97C \uBA3C\uC800 \uB85C\uB4DC\uD574\uC8FC\uC138\uC694.");return}if(this.pdfContent||this.extractAndDisplayPdfContent(),!this.pdfContent||this.pdfContent.trim().length===0){this.snackbarService.showError("PDF\uC5D0\uC11C \uD14D\uC2A4\uD2B8\uB97C \uCD94\uCD9C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.isTranslating=!0,this.translationProgress=0,this.translations=[],this.cdr.detectChanges();try{this.translationProgress=25,this.cdr.detectChanges(),this.geminiTranslationService.translateText(this.pdfContent,this.selectedLanguage).subscribe({next:e=>{this.translationProgress=100,this.translations=[e],e.success?(this.translationCompleted.emit([e]),this.snackbarService.showSuccess("AI \uBC88\uC5ED\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")):this.snackbarService.showError(`\uBC88\uC5ED \uC2E4\uD328: ${e.error}`),this.isTranslating=!1,this.cdr.detectChanges()},error:e=>{this.snackbarService.showError(`\uBC88\uC5ED \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${e.error||e.message||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`),this.isTranslating=!1,this.cdr.detectChanges()}})}catch{this.snackbarService.showError("\uBC88\uC5ED\uC744 \uC2DC\uC791\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),this.isTranslating=!1,this.cdr.detectChanges()}})}extractTextFromPdf(){let t=[];if(!this.pdfTextStreamData?.pages)return t;let e=this.selectedAnalysisScope==="single"?this.selectedPageForAnalysis-1:0,n=this.selectedAnalysisScope==="single"?this.selectedPageForAnalysis:this.pdfTextStreamData.pages.length;for(let i=e;i<n;i++){let a=this.pdfTextStreamData.pages[i];if(a.sentences&&a.sentences.length>0)for(let d=0;d<a.sentences.length;d++){let g=a.sentences[d];if(g.text&&g.text.trim().length>0){let m=g.text.trim();t.push(m)}}else if(a.textItems&&a.textItems.length>0){let d=a.textItems.filter(C=>C.text&&C.text.trim().length>0).map(C=>({text:C.text.trim(),x:C.position.x,y:C.position.y,width:C.position.width,height:C.position.height})).sort((C,_)=>{let y=_.y-C.y;return Math.abs(y)>15?y:C.x-_.x}),g=[],m="",h=d.length>0?d[0].y:0,f=d.length>0?d[0].x:0;for(let C of d)Math.abs(C.y-h)>15?(m.trim()&&g.push(m.trim()),m=C.text,h=C.y,f=C.x):(C.x-(f+50)>20?m+=" "+C.text:m+=C.text,f=C.x);m.trim()&&g.push(m.trim()),t.push(...g)}}return t}getSuccessfulTranslationCount(){return this.translations.filter(t=>t.success).length}onGenerateSummary(){if(this.selectedAnalysisScope,!this.pdfTextStreamData||!this.pdfContent){this.snackbarService.showError("PDF\uB97C \uBA3C\uC800 \uB85C\uB4DC\uD574\uC8FC\uC138\uC694.");return}if(this.pdfContent||this.extractAndDisplayPdfContent(),!this.pdfContent||this.pdfContent.trim().length===0){this.snackbarService.showError("PDF \uB0B4\uC6A9\uC744 \uCD94\uCD9C\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");return}this.isLoadingSummary=!0,this.summaryText="",this.cdr.detectChanges();let t=this.generateSummaryPrompt();this.geminiTranslationService.translateText(t,"korean").subscribe({next:e=>{e.success?(this.summaryText=e.translatedText,this.snackbarService.showSuccess("AI \uC694\uC57D\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")):this.snackbarService.showError(`\uC694\uC57D \uC2E4\uD328: ${e.error}`),this.isLoadingSummary=!1,this.cdr.detectChanges()},error:e=>{this.snackbarService.showError(`\uC694\uC57D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4: ${e.error||e.message||"\uC54C \uC218 \uC5C6\uB294 \uC624\uB958"}`),this.isLoadingSummary=!1,this.cdr.detectChanges()}})}generateSummaryPrompt(){let t="\uB2F9\uC2E0\uC740 \uC804\uBB38 \uBB38\uC11C \uC694\uC57D \uC804\uBB38\uAC00\uC785\uB2C8\uB2E4. \uB2E4\uC74C \uBB38\uC11C\uB97C \uBD84\uC11D\uD558\uC5EC ";switch(this.summaryType){case"bullet":t+=`\uD575\uC2EC \uD3EC\uC778\uD2B8\uB97C \uBC88\uD638 \uBAA9\uB85D\uC73C\uB85C \uC815\uB9AC\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
- \uAC01 \uD56D\uBAA9\uC740 \uD558\uB098\uC758 \uD575\uC2EC \uC544\uC774\uB514\uC5B4
- \uC911\uC694\uB3C4 \uC21C\uC73C\uB85C \uBC30\uC5F4
- \uAD6C\uCCB4\uC801\uC774\uACE0 \uBA85\uD655\uD55C \uD45C\uD604 \uC0AC\uC6A9`;break;case"qa":t+=`Q&A \uD615\uC2DD\uC73C\uB85C \uC815\uB9AC\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
- \uBB38\uC11C\uC758 \uC8FC\uC694 \uC8FC\uC81C\uB97C \uC9C8\uBB38\uC73C\uB85C
- \uD575\uC2EC \uB0B4\uC6A9\uC744 \uB2F5\uBCC0\uC73C\uB85C
- 3-5\uAC1C\uC758 \uC911\uC694\uD55C Q&A \uC30D`;break;case"structure":t+=`\uAD6C\uC870\uC801\uC73C\uB85C \uBD84\uC11D\uD558\uC5EC \uC815\uB9AC\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
- \uBB38\uC11C\uC758 \uC804\uCCB4 \uAD6C\uC870 \uD30C\uC545
- \uC81C\uBAA9\uACFC \uC8FC\uC694 \uC139\uC158 \uBA85\uC2DC
- \uAC01 \uC139\uC158\uC758 \uD575\uC2EC \uB0B4\uC6A9
- \uC139\uC158 \uAC04 \uC5F0\uACB0\uC131 \uD45C\uD604`;break;default:t+=`\uD575\uC2EC \uB0B4\uC6A9\uC744 \uBA85\uD655\uD558\uAC8C \uC694\uC57D\uD574\uC8FC\uC138\uC694.

\uC694\uAD6C\uC0AC\uD56D:
- \uC8FC\uC694 \uC544\uC774\uB514\uC5B4\uC640 \uACB0\uB860\uC744 \uD3EC\uD568
- \uC911\uC694\uD55C \uC138\uBD80\uC0AC\uD56D \uC720\uC9C0
- \uB17C\uB9AC\uC801 \uD750\uB984 \uBCF4\uC874`}switch(this.summaryLength){case"short":t+=`

\uAE38\uC774: \uD575\uC2EC\uB9CC \uAC04\uACB0\uD558\uAC8C 1-2\uBB38\uB2E8 (100-150\uC790)`;break;case"long":t+=`

\uAE38\uC774: \uC0C1\uC138\uD558\uAC8C 5-6\uBB38\uB2E8 (400-500\uC790)`;break;default:t+=`

\uAE38\uC774: \uC801\uC808\uD55C \uC0C1\uC138\uB3C4\uB85C 3-4\uBB38\uB2E8 (200-300\uC790)`}return t+=`

\uCD9C\uB825 \uC5B8\uC5B4: \uD55C\uAD6D\uC5B4
\uCD9C\uB825 \uD615\uC2DD: \uC694\uC57D \uB0B4\uC6A9\uB9CC \uC791\uC131 (\uC124\uBA85\uC774\uB098 \uBA54\uD0C0\uC815\uBCF4 \uC81C\uC678)

\uBB38\uC11C \uB0B4\uC6A9:
---
${this.pdfContent}
---`,t}onCopySummary(){this.summaryText&&(navigator.clipboard.writeText(this.summaryText),this.snackbarService.showSuccess("\uC694\uC57D \uB0B4\uC6A9\uC774 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."))}onExportSummary(){if(this.summaryText){let t=new Blob([this.summaryText],{type:"text/plain"}),e=URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.download="ai-summary.txt",n.click(),URL.revokeObjectURL(e),this.snackbarService.showSuccess("\uC694\uC57D\uC774 \uC800\uC7A5\uB418\uC5C8\uC2B5\uB2C8\uB2E4.")}}openPdfSettingsModal(){import("./chunk-6N5LZC2M.js").then(t=>{let e={width:"800px",maxWidth:"90vw",panelClass:"pdf-settings-dialog",hasBackdrop:!0,disableClose:!1,autoFocus:!0,restoreFocus:!0,data:{initialTab:"gemini"}};this.dialog.open(t.PdfSettingsModalComponent,e)})}static \u0275fac=function(e){return new(e||o)(ge(He),ge(Xn),ge($e),ge(Yn),ge(Vn))};static \u0275cmp=ae({type:o,selectors:[["shared-pdf-tools-panel"]],hostBindings:function(e,n){e&1&&w("click",function(a){return n.onDocumentClick(a)},_t)},inputs:{selectedElement:"selectedElement",currentPage:"currentPage",totalPages:"totalPages",zoomLevel:"zoomLevel",pdfPages:"pdfPages",isPdfViewer:"isPdfViewer",isCollapsed:"isCollapsed",pdfTextStreamData:"pdfTextStreamData",openMenuId:"openMenuId",pageThumbnails:"pageThumbnails",currentMode:"currentMode"},outputs:{panelAction:"panelAction",close:"close",expand:"expand",addText:"addText",addImage:"addImage",addShape:"addShape",addSignature:"addSignature",addWatermark:"addWatermark",addVectorPath:"addVectorPath",addFormCheckbox:"addFormCheckbox",addFormRadio:"addFormRadio",addFormDropdown:"addFormDropdown",addFormDateField:"addFormDateField",addPage:"addPage",deletePage:"deletePage",rotatePage:"rotatePage",pageSelect:"pageSelect",zoomIn:"zoomIn",zoomOut:"zoomOut",elementPropertyChange:"elementPropertyChange",deleteElement:"deleteElement",deselectElement:"deselectElement",keepOnlyFirstPage:"keepOnlyFirstPage",translationCompleted:"translationCompleted"},features:[Ge],decls:17,vars:10,consts:[[1,"pdf-tools-panel"],["class","collapsed-view",3,"click",4,"ngIf"],["class","main-menu",4,"ngIf"],[1,"expanded-panel"],[1,"panel-content"],[1,"panel-header"],["title","\uB4A4\uB85C\uAC00\uAE30",1,"back-btn",3,"click"],["title","\uCD95\uC18C",1,"close-btn",3,"click"],["class","element-properties-content",4,"ngIf"],["class","panel-items",4,"ngIf"],["class","ai-translate-content",4,"ngIf"],["class","ai-summary-content",4,"ngIf"],["class","pdf-info-section",4,"ngIf"],[1,"collapsed-view",3,"click"],[1,"icon-list"],["class","menu-icon",3,"title",4,"ngFor","ngForOf"],[1,"menu-icon",3,"title"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[3,"ngSwitch"],[4,"ngSwitchCase"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["cx","12","cy","12","r","3"],["d","M12 1v6m0 6v6M5.6 5.6l4.2 4.2m4.4 4.4l4.2 4.2M1 12h6m6 0h6M5.6 18.4l4.2-4.2m4.4-4.4l4.2-4.2"],["cx","12","cy","12","r","10"],["d","M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"],["d","M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],["d","M8 10h8M8 14h4"],["x","4","y","3","width","16","height","18","rx","2"],["d","M8 8h8M8 12h8M8 16h8"],["cx","6","cy","8","r","1"],["cx","6","cy","12","r","1"],["cx","6","cy","16","r","1"],[1,"main-menu"],[1,"header-title"],[1,"header-icon"],[1,"category-list"],["class","category-item",3,"disabled","click",4,"ngFor","ngForOf"],[1,"category-item",3,"click"],[1,"category-icon"],[1,"category-content"],[1,"category-title"],["class","category-count",4,"ngIf"],[1,"category-arrow"],[1,"category-count"],[1,"element-properties-content"],[1,"properties-content"],[1,"property-section"],[1,"property-group"],[1,"property-row"],["type","number",1,"property-input",3,"change","value"],[1,"unit"],["class","property-section",4,"ngIf"],[1,"property-row","full-width"],[1,"button-group"],[1,"toggle-btn",3,"click"],[1,"property-actions"],[1,"action-btn","delete-btn",3,"click"],["rows","3",1,"property-textarea",3,"change","value"],[1,"property-select",3,"change","value"],["label","\uD55C\uAE00 \uACE0\uB515\uCCB4"],["value","Noto Sans KR"],["value","NanumGothic"],["value","NanumBarunGothic"],["value","IBM Plex Sans KR"],["value","NanumSquare"],["value","Black Han Sans"],["label","\uD55C\uAE00 \uBA85\uC870\uCCB4"],["value","Noto Serif KR"],["value","NanumMyeongjo"],["label","\uD55C\uAE00 \uC190\uAE00\uC528/\uCE90\uC8FC\uC5BC"],["value","NanumPen"],["value","NanumBrush"],["value","DoHyeon"],["value","Jua"],["value","Gaegu"],["value","GamjaFlower"],["value","Sunflower"],["value","EastSeaDokdo"],["value","HiMelody"],["label","\uC601\uBB38 \uD3F0\uD2B8"],["value","Arial"],["value","Helvetica"],["value","Times New Roman"],["value","Courier New"],["value","Georgia"],["value","Verdana"],["value","Roboto"],["value","Open Sans"],["value","Lato"],["value","Montserrat"],["value","Poppins"],["value","Inter"],["value","Ubuntu"],["value","100"],["value","200"],["value","300"],["value","normal"],["value","500"],["value","600"],["value","bold"],["value","800"],["value","900"],[1,"align-btn",3,"click"],[1,"align-btn",2,"font-style","italic",3,"click"],["type","color",1,"property-color",3,"change","value"],["type","range","min","0","max","1","step","0.1",1,"property-range",3,"input","value"],[1,"value"],["type","text",1,"property-input",3,"input","value"],[1,"property-row","full-width","checkbox-row"],[1,"checkbox-toggle"],["type","checkbox",3,"change","checked"],["rows","4",1,"property-textarea",3,"input","value"],[1,"helper-text"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"panel-items"],["class","menu-item",3,"click",4,"ngFor","ngForOf"],[1,"menu-item",3,"click"],[1,"item-content"],[1,"item-label"],["class","item-description",4,"ngIf"],[1,"item-arrow"],[1,"item-description"],[1,"ai-translate-content"],["class","page-selection-step",4,"ngIf"],[4,"ngIf"],[1,"page-selection-step"],[1,"panel-section"],[1,"section-title"],[1,"section-description"],["class","thumbnail-grid",4,"ngIf"],[1,"confirm-btn",3,"click","disabled"],[1,"thumbnail-grid"],["class","thumbnail-card",3,"selected","loading","click",4,"ngFor","ngForOf"],[1,"thumbnail-card",3,"click"],["class","thumbnail-loading",4,"ngIf"],[3,"src","alt",4,"ngIf"],[1,"page-number-badge"],["class","selected-check",4,"ngIf"],[1,"thumbnail-loading"],[1,"spinner"],[3,"src","alt"],[1,"selected-check"],[1,"page-analysis-selector"],[1,"selector-label"],[1,"analysis-options"],[1,"analysis-option","disabled"],["type","radio","name","analysisScope","value","all","disabled","",3,"ngModelChange","change","ngModel"],[1,"option-label"],[1,"analysis-option"],["type","radio","name","analysisScope","value","single","checked","",3,"ngModelChange","change","ngModel"],["class","panel-section",4,"ngIf"],[1,"language-selector"],[1,"language-dropdown",3,"ngModelChange","change","ngModel"],[1,"translate-start-btn",3,"click","disabled"],["class","translation-progress",4,"ngIf"],[1,"page-selector"],["disabled","",1,"page-dropdown",3,"ngModelChange","change","ngModel"],[1,"page-info"],[1,"panel-title"],[1,"pdf-content-preview"],[1,"content-stats"],[1,"translation-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"translation-full-content"],[4,"ngFor","ngForOf"],[1,"translation-stats"],["class","translation-item",4,"ngIf"],["class","translation-error",4,"ngIf"],[1,"translation-item"],[1,"translation-text"],[1,"translation-error"],[1,"ai-summary-content"],[1,"page-analysis-info"],[1,"fixed-page-info"],[1,"info-icon"],[1,"info-text"],["class","pdf-content-preview",4,"ngIf"],["class","content-stats",4,"ngIf"],["class","no-content-message",4,"ngIf"],[1,"setting-group"],[1,"setting-label"],[1,"property-input",3,"ngModelChange","ngModel"],[1,"generate-btn",3,"click","disabled"],[1,"no-content-message"],["class","summary-result",4,"ngIf"],["class","loading-state",4,"ngIf"],[1,"summary-result"],[1,"summary-text"],[1,"summary-actions"],["title","\uBCF5\uC0AC",1,"action-btn",3,"click"],["title","\uB0B4\uBCF4\uB0B4\uAE30",1,"action-btn",3,"click"],[1,"loading-state"],[1,"loading-text"],[1,"info-box"],[1,"pdf-info-section"],[1,"info-divider"],[1,"info-title"],[1,"info-items"],[1,"info-item"],[1,"info-label"],[1,"info-value"]],template:function(e,n){e&1&&(r(0,"div",0),I(1,Ur,3,1,"div",1)(2,ns,11,1,"div",2),r(3,"div",3)(4,"div",4)(5,"div",5)(6,"button",6),w("click",function(){return n.onBack()}),l(7,"\u2039"),s(),r(8,"h3"),l(9),s(),r(10,"button",7),w("click",function(){return n.onClose()}),l(11,"\xD7"),s()(),I(12,gs,56,16,"div",8)(13,us,2,1,"div",9)(14,Vs,3,2,"div",10)(15,al,3,2,"div",11)(16,rl,15,3,"div",12),s()()()),e&2&&(q("collapsed",n.isCollapsed),c(),u("ngIf",n.isCollapsed),c(),u("ngIf",!n.expandedMenuId&&!n.isCollapsed),c(7),T(n.getMenuTitle()),c(3),u("ngIf",n.expandedMenuId==="element-properties"&&n.selectedElement),c(),u("ngIf",n.expandedMenuId!=="element-properties"&&n.expandedMenuId!=="ai-translate"&&n.expandedMenuId!=="ai-summary"),c(),u("ngIf",n.expandedMenuId==="ai-translate"),c(),u("ngIf",n.expandedMenuId==="ai-summary"),c(),u("ngIf",n.expandedMenuId==="page-control"&&n.currentPage&&n.totalPages))},dependencies:[ne,Ve,Pe,Mn,On,Ne,nt,it,vt,tt,Sn,Ue,Ye],styles:[`@charset "UTF-8";[_nghost-%COMP%]{display:block;position:relative;width:100%;height:100%}.pdf-tools-panel[_ngcontent-%COMP%]{position:absolute;top:0;right:0;height:100%;width:350px;z-index:1000;margin:0!important;padding:0!important;background:var(--bg-primary);border-left:1px solid var(--border-color);box-shadow:-2px 0 8px var(--shadow);animation:_ngcontent-%COMP%_slideInFromRight .3s ease-out;transition:width .3s ease}.pdf-tools-panel.collapsed[_ngcontent-%COMP%]{width:48px;overflow:hidden}.pdf-tools-panel.collapsed[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:12px 0;height:100%;overflow-y:auto;cursor:pointer}.pdf-tools-panel.collapsed[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .icon-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:100%}.pdf-tools-panel.collapsed[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .icon-list[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{font-size:24px;padding:8px;text-align:center;transition:all .2s ease;border-radius:8px}.pdf-tools-panel.collapsed[_ngcontent-%COMP%]   .collapsed-view[_ngcontent-%COMP%]   .icon-list[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]:hover{background:var(--bg-secondary);transform:scale(1.1)}.pdf-tools-panel[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%], .pdf-tools-panel[_ngcontent-%COMP%]   .expanded-panel[_ngcontent-%COMP%]{height:100%;overflow-y:auto}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px 20px;border-bottom:1px solid var(--border-color);background:var(--bg-secondary);position:sticky;top:0;z-index:10}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{font-size:24px;line-height:1}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:var(--text-primary)}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%], .pdf-tools-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;cursor:pointer;color:var(--text-muted);padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{color:var(--accent-primary);transform:translate(-2px)}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:var(--accent-danger);transform:rotate(90deg)}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]{padding:12px}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;margin-bottom:8px;background:var(--bg-secondary);border-radius:12px;cursor:pointer;transition:all .2s ease;border:1px solid transparent}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary);border-color:var(--primary-color);transform:translate(-4px);box-shadow:0 2px 12px #00000014}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;pointer-events:none}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item.disabled[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{opacity:.6}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item.disabled[_ngcontent-%COMP%]   .category-count[_ngcontent-%COMP%]{font-style:italic}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:var(--bg-tertiary);border-radius:8px;color:var(--text-secondary)}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.7}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]{flex:1}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:var(--text-primary);margin-bottom:4px}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-content[_ngcontent-%COMP%]   .category-count[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);opacity:.7}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]   .category-arrow[_ngcontent-%COMP%]{font-size:24px;color:var(--text-secondary);opacity:.5;transition:all .2s ease}.pdf-tools-panel[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:hover   .category-arrow[_ngcontent-%COMP%]{opacity:1;transform:translate(4px)}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]{padding:12px;min-height:100px}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;margin-bottom:8px;background:var(--bg-secondary);border-radius:8px;cursor:pointer;transition:all .2s ease;border:1px solid transparent}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary);border-color:var(--primary-color);transform:translate(-4px);box-shadow:0 2px 8px #0000001a}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]{flex:1}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-primary);margin-bottom:4px}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);opacity:.8}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .item-arrow[_ngcontent-%COMP%]{font-size:20px;color:var(--text-secondary);opacity:.5;transition:all .2s ease}.pdf-tools-panel[_ngcontent-%COMP%]   .panel-items[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover   .item-arrow[_ngcontent-%COMP%]{opacity:1;transform:translate(4px)}.pdf-tools-panel[_ngcontent-%COMP%]   .pdf-info-section[_ngcontent-%COMP%]{margin-top:20px}.pdf-tools-panel[_ngcontent-%COMP%]   .pdf-info-section[_ngcontent-%COMP%]   .info-divider[_ngcontent-%COMP%]{height:1px;background:var(--border-color);margin:0 12px 16px}.pdf-tools-panel[_ngcontent-%COMP%]   .pdf-info-section[_ngcontent-%COMP%]   .info-title[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px;margin:0 16px 12px}.pdf-tools-panel[_ngcontent-%COMP%]   .pdf-info-section[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]{padding:0 16px}.pdf-tools-panel[_ngcontent-%COMP%]   .pdf-info-section[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;margin-bottom:6px;background:var(--bg-secondary);border-radius:6px}.pdf-tools-panel[_ngcontent-%COMP%]   .pdf-info-section[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);font-weight:500}.pdf-tools-panel[_ngcontent-%COMP%]   .pdf-info-section[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:13px;color:var(--text-primary);font-weight:600}@keyframes _ngcontent-%COMP%_slideInFromRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]{padding:0}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]{border-bottom:1px solid var(--border-color);padding:20px}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]:last-child{border-bottom:none}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:14px;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr auto;align-items:center;gap:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row.full-width[_ngcontent-%COMP%]{grid-template-columns:80px 1fr}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;color:var(--text-primary);font-weight:500}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-input[_ngcontent-%COMP%], .pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%], .pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-textarea[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid var(--border-color);border-radius:6px;font-size:13px;background:var(--bg-secondary);color:var(--text-primary);transition:all .2s ease}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-input[_ngcontent-%COMP%]:focus, .pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]:focus, .pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);background:var(--bg-primary);box-shadow:0 0 0 3px #3b82f61a}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:60px;font-family:inherit}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-color[_ngcontent-%COMP%]{width:100%;height:36px;border:1px solid var(--border-color);border-radius:6px;cursor:pointer;transition:all .2s ease}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-color[_ngcontent-%COMP%]:hover{border-color:var(--primary-color)}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-range[_ngcontent-%COMP%]{width:100%;height:6px;border-radius:3px;background:var(--bg-secondary);outline:none;-webkit-appearance:none;appearance:none}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-range[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:18px;height:18px;border-radius:50%;background:var(--primary-color);cursor:pointer;transition:all .2s ease}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-range[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2);box-shadow:0 0 0 4px #3b82f633}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-range[_ngcontent-%COMP%]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--primary-color);cursor:pointer;border:none;transition:all .2s ease}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .property-range[_ngcontent-%COMP%]::-moz-range-thumb:hover{transform:scale(1.2);box-shadow:0 0 0 4px #3b82f633}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%], .pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);white-space:nowrap}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:4px;width:100%}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .align-btn[_ngcontent-%COMP%], .pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:1px solid var(--border-color);background:var(--bg-secondary);color:var(--text-primary);border-radius:6px;font-size:12px;cursor:pointer;transition:all .2s ease}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .align-btn[_ngcontent-%COMP%]:hover, .pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary);border-color:var(--primary-color)}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .align-btn.active[_ngcontent-%COMP%], .pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border-color:var(--primary-color);font-weight:600}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .checkbox-toggle[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;font-size:13px;color:var(--text-primary)}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-section[_ngcontent-%COMP%]   .property-group[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]   .checkbox-toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;accent-color:var(--primary-color);cursor:pointer}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-actions[_ngcontent-%COMP%]{padding:20px;border-top:1px solid var(--border-color);background:var(--bg-secondary)}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:100%;padding:12px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-actions[_ngcontent-%COMP%]   .action-btn.delete-btn[_ngcontent-%COMP%]{background:#fee;color:#c33;border:1px solid #fcc}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-actions[_ngcontent-%COMP%]   .action-btn.delete-btn[_ngcontent-%COMP%]:hover{background:#fdd;border-color:#fbb;transform:translateY(-1px);box-shadow:0 4px 12px #c333}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .properties-content[_ngcontent-%COMP%]   .property-actions[_ngcontent-%COMP%]   .action-btn.delete-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:8px;font-size:14px}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Arial][_ngcontent-%COMP%]{font-family:Arial,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Helvetica][_ngcontent-%COMP%]{font-family:Helvetica,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value="Times New Roman"][_ngcontent-%COMP%]{font-family:Times New Roman,serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value="Courier New"][_ngcontent-%COMP%]{font-family:Courier New,monospace}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Georgia][_ngcontent-%COMP%]{font-family:Georgia,serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Verdana][_ngcontent-%COMP%]{font-family:Verdana,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value="Noto Sans KR"][_ngcontent-%COMP%]{font-family:Noto Sans KR,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=NanumGothic][_ngcontent-%COMP%]{font-family:NanumGothic,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=NanumBarunGothic][_ngcontent-%COMP%]{font-family:NanumBarunGothic,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value="IBM Plex Sans KR"][_ngcontent-%COMP%]{font-family:IBM Plex Sans KR,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=NanumSquare][_ngcontent-%COMP%]{font-family:NanumSquare,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value="Black Han Sans"][_ngcontent-%COMP%]{font-family:Black Han Sans,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value="Noto Serif KR"][_ngcontent-%COMP%]{font-family:"Noto Serif KR",serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=NanumMyeongjo][_ngcontent-%COMP%]{font-family:NanumMyeongjo,serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=NanumPen][_ngcontent-%COMP%]{font-family:NanumPen,cursive}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=NanumBrush][_ngcontent-%COMP%]{font-family:NanumBrush,cursive}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=DoHyeon][_ngcontent-%COMP%]{font-family:DoHyeon,cursive}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Jua][_ngcontent-%COMP%]{font-family:Jua,cursive}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Gaegu][_ngcontent-%COMP%]{font-family:Gaegu,cursive}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=GamjaFlower][_ngcontent-%COMP%]{font-family:GamjaFlower,cursive}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Sunflower][_ngcontent-%COMP%]{font-family:Sunflower,cursive}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=EastSeaDokdo][_ngcontent-%COMP%]{font-family:EastSeaDokdo,cursive}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=HiMelody][_ngcontent-%COMP%]{font-family:HiMelody,cursive}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Roboto][_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value="Open Sans"][_ngcontent-%COMP%]{font-family:Open Sans,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Lato][_ngcontent-%COMP%]{font-family:Lato,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Montserrat][_ngcontent-%COMP%]{font-family:Montserrat,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Poppins][_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Inter][_ngcontent-%COMP%]{font-family:Inter,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   option[value=Ubuntu][_ngcontent-%COMP%]{font-family:Ubuntu,sans-serif}.pdf-tools-panel[_ngcontent-%COMP%]   .element-properties-content[_ngcontent-%COMP%]   .property-select[_ngcontent-%COMP%]   optgroup[_ngcontent-%COMP%]{font-weight:600;color:var(--text-secondary);background:var(--bg-tertiary)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]{padding:20px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .page-selection-step[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-primary);margin:0 0 8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .page-selection-step[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);margin:0 0 16px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .panel-section[_ngcontent-%COMP%]{margin-bottom:20px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-bottom:8px;color:var(--text-primary)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .translation-method-selector[_ngcontent-%COMP%]{margin-bottom:16px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .method-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border-color);border-radius:6px;cursor:pointer;transition:border-color .15s,background-color .15s}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]:hover:not(.disabled){border-color:#007aff;background-color:var(--bg-tertiary)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .method-option.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;background-color:var(--bg-tertiary)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .method-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--text-primary)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .page-analysis-selector[_ngcontent-%COMP%]{margin-bottom:16px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .analysis-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .analysis-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border-color);border-radius:6px;cursor:pointer;transition:border-color .15s,background-color .15s}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .analysis-option[_ngcontent-%COMP%]:hover:not(.disabled){border-color:#007aff;background-color:var(--bg-tertiary)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .analysis-option.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;background-color:var(--bg-tertiary)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .analysis-option.disabled[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{cursor:not-allowed}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .analysis-option.disabled[_ngcontent-%COMP%]   .option-label[_ngcontent-%COMP%]{color:var(--text-muted)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .analysis-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .option-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--text-primary)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .page-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .page-dropdown[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 16px;border:1px solid var(--border-color);border-radius:6px;background:var(--bg-primary);font-size:14px;color:var(--text-primary);cursor:pointer;transition:all .15s;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 12px center;background-size:16px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .page-dropdown[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#007aff;background-color:var(--bg-tertiary)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .page-dropdown[_ngcontent-%COMP%]:focus:not(:disabled){outline:none;border-color:#007aff;box-shadow:0 0 0 3px #007aff1a}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .page-dropdown[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;background-color:var(--bg-tertiary);color:var(--text-muted)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{margin-top:4px;padding:8px;background-color:var(--bg-tertiary);border-radius:4px;border-left:3px solid #007AFF}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .checking[_ngcontent-%COMP%]{color:var(--text-muted);font-size:12px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%]{color:#ff6b6b;font-size:12px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .available[_ngcontent-%COMP%]{color:#28a745;font-size:12px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .method-info[_ngcontent-%COMP%]{margin-top:8px;padding:8px;background-color:var(--bg-tertiary);border-radius:4px;border-left:3px solid #007AFF}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .method-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-muted);font-size:12px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .selector-label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:var(--text-primary);margin-bottom:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .language-dropdown[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 16px;border:1px solid var(--border-color);border-radius:6px;background:var(--bg-primary);font-size:14px;color:var(--text-primary);cursor:pointer;transition:all .15s;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 12px center;background-size:16px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .language-dropdown[_ngcontent-%COMP%]:hover{border-color:#007aff;background-color:var(--bg-tertiary)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .language-dropdown[_ngcontent-%COMP%]:focus{outline:none;border-color:#007aff;box-shadow:0 0 0 3px #007aff1a}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .translate-start-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:#007aff;color:#fff;border:none;border-radius:6px;font-size:15px;font-weight:500;cursor:pointer;transition:background .15s}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .translate-start-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .translate-start-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .translation-progress[_ngcontent-%COMP%]{margin-top:16px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:100%;height:6px;background:var(--bg-tertiary);border-radius:3px;overflow:hidden;margin-bottom:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#007aff,#0056b3);border-radius:3px;transition:width .3s ease}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:12px;color:var(--text-muted);text-align:center}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .translation-full-content[_ngcontent-%COMP%]{background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:6px;padding:16px;margin-bottom:8px;max-height:400px;overflow-y:auto}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .translation-item[_ngcontent-%COMP%]{margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid var(--border-color)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .translation-item[_ngcontent-%COMP%]:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .translation-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.6;color:var(--text-primary);white-space:pre-wrap;word-break:break-word}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .translation-error[_ngcontent-%COMP%]{color:#dc3545;font-size:13px;font-style:italic;padding:8px;background:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;margin-bottom:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .translation-stats[_ngcontent-%COMP%]{font-size:12px;color:var(--text-muted);text-align:center;font-weight:500}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .pdf-content-preview[_ngcontent-%COMP%]{background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:6px;padding:12px;margin-bottom:8px;font-size:12px;line-height:1.4;color:var(--text-secondary);max-height:150px;overflow-y:auto;white-space:pre-wrap;word-break:break-word}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .content-stats[_ngcontent-%COMP%]{font-size:11px;color:var(--text-muted);text-align:right;margin-bottom:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{margin-top:24px;padding:16px;background:var(--bg-tertiary);border-radius:6px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-translate-content[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:12px;color:var(--text-muted);line-height:1.4;text-align:center}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]{padding:20px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .page-selection-step[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-primary);margin:0 0 8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .page-selection-step[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);margin:0 0 16px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .panel-section[_ngcontent-%COMP%]{margin-bottom:20px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-bottom:8px;color:var(--text-primary)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .page-analysis-info[_ngcontent-%COMP%]{margin-bottom:16px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .fixed-page-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background-color:#007aff1a;border:1px solid rgba(0,122,255,.3);border-radius:8px;margin-top:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .fixed-page-info[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:20px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .fixed-page-info[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#007aff}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .setting-group[_ngcontent-%COMP%]{margin-bottom:12px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%]{display:block;font-size:13px;color:var(--text-primary);margin-bottom:6px;font-weight:500}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .selector-label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;color:var(--text-primary);margin-bottom:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .property-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid var(--border-color);border-radius:8px;background:var(--bg-secondary);color:var(--text-primary);font-size:14px;transition:all .2s}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .property-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007aff;box-shadow:0 0 0 3px #007aff1a}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;padding:10px;border-radius:8px;background:var(--bg-secondary);border:1px solid var(--border-color);transition:all .2s}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]:hover:not(.disabled){background:var(--bg-tertiary);border-color:#007aff}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-option.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{cursor:pointer}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:disabled{cursor:not-allowed}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]   .method-label[_ngcontent-%COMP%]{font-size:14px;color:var(--text-primary);flex:1}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]   .method-label[_ngcontent-%COMP%]   .checking[_ngcontent-%COMP%], .pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]   .method-label[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%], .pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]   .method-label[_ngcontent-%COMP%]   .available[_ngcontent-%COMP%]{font-size:12px;margin-left:6px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]   .method-label[_ngcontent-%COMP%]   .checking[_ngcontent-%COMP%]{color:var(--text-muted)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]   .method-label[_ngcontent-%COMP%]   .unavailable[_ngcontent-%COMP%]{color:#ff3b30}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-option[_ngcontent-%COMP%]   .method-label[_ngcontent-%COMP%]   .available[_ngcontent-%COMP%]{color:#34c759}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-info[_ngcontent-%COMP%]{margin-top:8px;padding:8px 12px;background:var(--bg-tertiary);border-radius:6px;border-left:3px solid #007AFF}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .method-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);line-height:1.6}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .pdf-content-preview[_ngcontent-%COMP%]{background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:6px;padding:12px;margin-bottom:8px;font-size:12px;line-height:1.4;color:var(--text-secondary);max-height:150px;overflow-y:auto;white-space:pre-wrap;word-break:break-word}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .content-stats[_ngcontent-%COMP%]{font-size:11px;color:var(--text-muted);text-align:right;margin-bottom:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#007aff,#5856d6);color:#fff;border:none;padding:12px 16px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;margin-top:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #007aff4d}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .generate-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .summary-result[_ngcontent-%COMP%]{background:var(--bg-tertiary);border-radius:8px;padding:16px;border:1px solid var(--border-color)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .summary-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.8;color:var(--text-primary);white-space:pre-wrap;word-break:break-word;margin-bottom:16px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .summary-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:1px solid var(--border-color);background:var(--bg-primary);color:var(--text-primary);border-radius:6px;font-size:13px;cursor:pointer;transition:all .2s}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{background:var(--bg-tertiary);border-color:var(--primary-color)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:40px 20px;gap:16px}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid var(--bg-tertiary);border-top-color:#007aff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{font-size:14px;color:var(--text-muted)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9ff,#fff);border:1px solid #e3e8ff;border-radius:8px;padding:16px;display:flex;gap:12px;align-items:flex-start}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:32px;line-height:1}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{flex:1}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:13px;color:var(--text-primary);line-height:1.6}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary)}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:8px 0 0;padding:0;list-style:none}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);line-height:1.8}.pdf-tools-panel[_ngcontent-%COMP%]   .ai-summary-content[_ngcontent-%COMP%]   .no-content-message[_ngcontent-%COMP%]{font-size:13px;color:var(--text-muted);text-align:center;padding:20px;background:var(--bg-tertiary);border-radius:6px}.page-selection-step[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-primary);margin:0 0 8px}.page-selection-step[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary);margin:0 0 16px}.page-selection-step[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;max-height:400px;overflow-y:auto;padding:8px;background:var(--bg-secondary);border-radius:8px}.page-selection-step[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-card[_ngcontent-%COMP%]{position:relative;cursor:pointer;border:2px solid var(--border-color);border-radius:8px;overflow:hidden;transition:all .2s ease;background:#fff;min-height:150px;aspect-ratio:1/1.414}.page-selection-step[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.page-selection-step[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-card.selected[_ngcontent-%COMP%]{border-color:var(--primary-color);box-shadow:0 0 0 3px #007acc33}.page-selection-step[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-card.loading[_ngcontent-%COMP%]{background:var(--bg-secondary);min-height:150px}.page-selection-step[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-card[_ngcontent-%COMP%]   .thumbnail-loading[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:#ffffffe6;min-height:150px}.page-selection-step[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-card[_ngcontent-%COMP%]   .thumbnail-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:2px solid var(--border-color);border-top-color:var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.page-selection-step[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.page-selection-step[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-card[_ngcontent-%COMP%]   .page-number-badge[_ngcontent-%COMP%]{position:absolute;bottom:8px;left:8px;background:#000000b3;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600}.page-selection-step[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-card[_ngcontent-%COMP%]   .selected-check[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:28px;height:28px;background:var(--primary-color);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:700}.page-selection-step[_ngcontent-%COMP%]   .loading-thumbnails[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.page-selection-step[_ngcontent-%COMP%]   .loading-thumbnails[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--border-color);border-top-color:var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:16px}.page-selection-step[_ngcontent-%COMP%]   .loading-thumbnails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:14px;margin:0}.page-selection-step[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{width:100%;padding:12px;background:#007acc!important;color:#fff!important;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.page-selection-step[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff!important}.page-selection-step[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#005a9e!important;transform:translateY(-1px);box-shadow:0 4px 12px #007acc4d}.page-selection-step[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]:disabled{background:#ccc!important;color:#666!important;cursor:not-allowed}.page-selection-step[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]:disabled   span[_ngcontent-%COMP%]{color:#666!important}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 992px){.pdf-tools-panel[_ngcontent-%COMP%]{width:320px}}@media (max-width: 768px){.pdf-tools-panel[_ngcontent-%COMP%]{width:100%;max-width:350px}.thumbnail-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)!important}}`],changeDetection:0})};var zt=class o{cache=new Map;pdfDocumentCache=new Map;accessOrder=new Map;MAX_THUMBNAILS_PER_PDF=50;MAX_TOTAL_MEMORY_MB=100;currentMemoryUsage=0;getThumbnail(t,e){let n=this.cache.get(t);if(!n)return null;let i=n.get(e);return i&&this.updateAccessOrder(t,e),i||null}setThumbnail(t,e,n){this.cache.has(t)||(this.cache.set(t,new Map),this.accessOrder.set(t,[]));let i=this.cache.get(t),a=i.get(e);a&&(this.currentMemoryUsage-=a.size);let d=n.length*2;this.evictIfNeeded(t,d),i.set(e,{pageNumber:e,imageUrl:n,timestamp:Date.now(),size:d}),this.currentMemoryUsage+=d,this.updateAccessOrder(t,e)}updateAccessOrder(t,e){let n=this.accessOrder.get(t)||[],i=n.indexOf(e);i>-1&&n.splice(i,1),n.push(e),this.accessOrder.set(t,n)}evictIfNeeded(t,e){let n=this.MAX_TOTAL_MEMORY_MB*1024*1024;for(;this.currentMemoryUsage+e>n&&this.cache.size>0;)this.evictOldestGlobal();let i=this.cache.get(t),a=this.accessOrder.get(t)||[];if(i&&i.size>=this.MAX_THUMBNAILS_PER_PDF){let d=a[0];if(d!==void 0){let g=i.get(d);g&&(this.currentMemoryUsage-=g.size,i.delete(d),a.shift())}}}evictOldestGlobal(){let t=null,e=null,n=1/0;if(this.cache.forEach((i,a)=>{i.forEach((d,g)=>{d.timestamp<n&&(n=d.timestamp,t=a,e=g)})}),t&&e!==null){let i=this.cache.get(t),a=i?.get(e);if(a&&i){this.currentMemoryUsage-=a.size,i.delete(e);let d=this.accessOrder.get(t)||[],g=d.indexOf(e);g>-1&&d.splice(g,1),i.size===0&&(this.cache.delete(t),this.accessOrder.delete(t))}}}getAllThumbnails(t){let e=this.cache.get(t);return e?Array.from(e.values()):[]}setPdfDocument(t,e){if(this.pdfDocumentCache.has(t)){let n=this.pdfDocumentCache.get(t);if(n&&typeof n.destroy=="function")try{n.destroy()}catch{}}this.pdfDocumentCache.set(t,e)}getPdfDocument(t){return this.pdfDocumentCache.get(t)||null}clearPdfCache(t){let e=this.cache.get(t);e&&e.forEach(i=>{this.currentMemoryUsage-=i.size}),this.cache.delete(t),this.accessOrder.delete(t);let n=this.pdfDocumentCache.get(t);if(n&&typeof n.destroy=="function")try{n.destroy()}catch{}this.pdfDocumentCache.delete(t)}clearAllCache(){this.pdfDocumentCache.forEach(t=>{if(t&&typeof t.destroy=="function")try{t.destroy()}catch{}}),this.cache.clear(),this.accessOrder.clear(),this.pdfDocumentCache.clear(),this.currentMemoryUsage=0}hasThumbnails(t){let e=this.cache.get(t);return e?e.size>0:!1}getCachedPageCount(t){let e=this.cache.get(t);return e?e.size:0}getMemoryUsageMB(){return this.currentMemoryUsage/(1024*1024)}getStats(){let t=0;return this.cache.forEach(e=>{t+=e.size}),{totalThumbnails:t,memoryUsageMB:this.getMemoryUsageMB(),pdfCount:this.cache.size}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var ll=["thumbnailContainer"];function cl(o,t){if(o&1&&(r(0,"div",2),l(1),s()),o&2){let e=p();c(),le(" ",e.currentPage," \uC911\uC758 ",e.totalPages,`
`)}}function dl(o,t){o&1&&(r(0,"div",10),R(1,"div",11),s())}function gl(o,t){if(o&1&&R(0,"img",12),o&2){let e=p().$implicit;u("src",e.imageUrl,Te)("alt","\uD398\uC774\uC9C0 "+e.pageNumber)}}function pl(o,t){o&1&&(r(0,"div",13),R(1,"img",14),s())}function ml(o,t){if(o&1){let e=L();r(0,"div",5),w("touchstart",function(i){b(e);let a=p(2);return v(a.onTouchStart(i))})("touchmove",function(i){b(e);let a=p(2);return v(a.onTouchMove(i))})("touchend",function(i){let a=b(e).$implicit,d=p(2);return v(d.onTouchEnd(i,a.pageNumber))})("click",function(){let i=b(e).$implicit,a=p(2);return v(a.onThumbnailClick(i.pageNumber))}),I(1,dl,2,0,"div",6)(2,gl,1,2,"img",7)(3,pl,2,0,"div",8),r(4,"div",9),l(5),s()()}if(o&2){let e=t.$implicit,n=p(2);q("active",n.isCurrentPage(e.pageNumber)),Me("data-page",e.pageNumber),c(),u("ngIf",e.isLoading),c(),u("ngIf",!e.isLoading&&e.imageUrl),c(),u("ngIf",!e.isLoading&&!e.imageUrl),c(2),M(" ",e.pageNumber," ")}}function ul(o,t){if(o&1&&(r(0,"div",3),I(1,ml,6,7,"div",4),s()),o&2){let e=p();c(),u("ngForOf",e.thumbnails)}}var $t=class o{constructor(t,e){this.cdr=t;this.thumbnailCache=e}pdfSrc=null;totalPages=0;currentPage=1;visible=!0;pageSelected=new $;thumbnailContainer;thumbnails=[];destroy$=new Ze;renderQueue=new Set;isRendering=!1;pdfDocument=null;loadAttempts=0;maxLoadAttempts=5;intersectionObserver=null;visibleThumbnails=new Set;VISIBLE_BUFFER=3;renderDebounceTimer=null;RENDER_DEBOUNCE_MS=150;touchStartX=0;touchStartY=0;touchStartTime=0;isTouchMove=!1;showPageIndicator=!1;pageIndicatorTimeout;pdfjsLibService=J(be);ngOnInit(){this.pdfSrc&&this.totalPages>0&&(this.loadPdfDocumentWithCache(),setTimeout(()=>this.showPageIndicatorMessage(),300))}ngAfterViewInit(){this.setupIntersectionObserver()}ngOnChanges(t){t.pdfSrc&&this.pdfSrc&&t.pdfSrc.currentValue!==t.pdfSrc.previousValue&&(this.loadPdfDocumentWithCache(),setTimeout(()=>this.showPageIndicatorMessage(),300)),t.totalPages&&this.totalPages>0&&!t.pdfSrc&&(!this.pdfDocument&&this.pdfSrc?(this.loadPdfDocumentWithCache(),setTimeout(()=>this.showPageIndicatorMessage(),300)):this.pdfDocument&&(this.initializeThumbnails(),setTimeout(()=>this.observeAllThumbnails(),100))),t.currentPage&&(this.scrollToCurrentPage(),t.currentPage.firstChange||this.showPageIndicatorMessage())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.cleanupThumbnails(),this.destroyIntersectionObserver(),this.renderDebounceTimer&&clearTimeout(this.renderDebounceTimer)}setupIntersectionObserver(){typeof IntersectionObserver>"u"||(this.intersectionObserver=new IntersectionObserver(t=>{let e=!1;t.forEach(n=>{let i=parseInt(n.target.getAttribute("data-page")||"0",10);i<=0||(n.isIntersecting?this.visibleThumbnails.has(i)||(this.visibleThumbnails.add(i),e=!0):this.visibleThumbnails.has(i)&&(this.visibleThumbnails.delete(i),e=!0))}),e&&this.scheduleRenderVisibleThumbnails()},{root:null,rootMargin:"100px 200px",threshold:.1}))}observeAllThumbnails(){if(!this.intersectionObserver)return;document.querySelectorAll(".thumbnail-item[data-page]").forEach(e=>{this.intersectionObserver.observe(e)})}destroyIntersectionObserver(){this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null),this.visibleThumbnails.clear()}scheduleRenderVisibleThumbnails(){this.renderDebounceTimer&&clearTimeout(this.renderDebounceTimer),this.renderDebounceTimer=setTimeout(()=>{this.renderVisibleThumbnails()},this.RENDER_DEBOUNCE_MS)}renderVisibleThumbnails(){if(!this.pdfDocument||this.visibleThumbnails.size===0)return;let t=[],e=Array.from(this.visibleThumbnails).sort((a,d)=>a-d);if(e.length===0)return;let n=Math.max(1,e[0]-this.VISIBLE_BUFFER),i=Math.min(this.totalPages,e[e.length-1]+this.VISIBLE_BUFFER);for(let a=n;a<=i;a++){let d=this.thumbnails.find(g=>g.pageNumber===a);d&&!d.imageUrl&&!this.renderQueue.has(a)&&t.push(a)}t.length>0&&(t.sort((a,d)=>{let g=Math.abs(a-this.currentPage),m=Math.abs(d-this.currentPage);return g-m}),t.forEach(a=>this.renderQueue.add(a)),this.processRenderQueue())}loadPdfDocumentWithCache(){return E(this,null,function*(){if(!this.pdfSrc)return;let t=this.thumbnailCache.getPdfDocument(this.pdfSrc);if(t){this.pdfDocument=t,this.loadCachedThumbnails();return}try{this.pdfDocument=yield this.pdfjsLibService.getDocument(this.pdfSrc),this.thumbnailCache.setPdfDocument(this.pdfSrc,this.pdfDocument),this.initializeThumbnails(),setTimeout(()=>{this.observeAllThumbnails(),this.renderInitialThumbnails()},100)}catch(e){console.error("PDF \uBB38\uC11C \uB85C\uB4DC \uC2E4\uD328:",e)}})}renderInitialThumbnails(){if(!this.pdfDocument)return;let t=Math.max(1,this.currentPage-3),e=Math.min(this.totalPages,this.currentPage+5);for(let n=t;n<=e;n++){let i=this.thumbnails.find(a=>a.pageNumber===n);i&&!i.imageUrl&&this.renderQueue.add(n)}this.processRenderQueue()}loadCachedThumbnails(){if(!this.pdfSrc)return;this.initializeThumbnails();let t=this.thumbnailCache.getAllThumbnails(this.pdfSrc);t.length>0&&(t.forEach(e=>{let n=this.thumbnails.findIndex(i=>i.pageNumber===e.pageNumber);n!==-1&&(this.thumbnails[n].imageUrl=e.imageUrl,this.thumbnails[n].isLoading=!1)}),this.cdr.detectChanges()),setTimeout(()=>{this.observeAllThumbnails(),this.scheduleRenderVisibleThumbnails()},100)}initializeThumbnails(){this.totalPages<=0||(this.thumbnails=Array.from({length:this.totalPages},(t,e)=>({pageNumber:e+1,imageUrl:"",isLoading:!1,isVisible:!1})),this.cdr.detectChanges())}processRenderQueue(){return E(this,null,function*(){if(this.isRendering||this.renderQueue.size===0)return;this.isRendering=!0;let t=Array.from(this.renderQueue);this.renderQueue.clear();for(let e of t)yield this.renderThumbnail(e);this.isRendering=!1,this.renderQueue.size>0&&this.processRenderQueue()})}renderThumbnail(t){return E(this,null,function*(){let e=this.thumbnails.find(n=>n.pageNumber===t);if(!(!e||e.imageUrl)){if(this.pdfSrc){let n=this.thumbnailCache.getThumbnail(this.pdfSrc,t);if(n){e.imageUrl=n.imageUrl,e.isLoading=!1,this.cdr.detectChanges();return}}try{e.isLoading=!0,this.cdr.detectChanges();let n=yield this.pdfDocument.getPage(t),a=80/n.getViewport({scale:1}).width,d=n.getViewport({scale:a}),g=document.createElement("canvas"),m=g.getContext("2d");if(!m){e.isLoading=!1;return}g.width=d.width,g.height=d.height,yield n.render({canvasContext:m,viewport:d}).promise;let h=g.toDataURL("image/jpeg",.6);e.imageUrl=h,e.isLoading=!1,this.pdfSrc&&this.thumbnailCache.setThumbnail(this.pdfSrc,t,h),this.cdr.detectChanges(),g.width=0,g.height=0}catch(n){console.error(`Failed to render thumbnail for page ${t}:`,n),e&&(e.isLoading=!1,this.cdr.detectChanges())}}})}onThumbnailClick(t){this.isTouchMove||t!==this.currentPage&&(this.pageSelected.emit(t),this.showPageIndicatorMessage())}showPageIndicatorMessage(){this.pageIndicatorTimeout&&clearTimeout(this.pageIndicatorTimeout),this.showPageIndicator=!0,this.cdr.detectChanges(),this.pageIndicatorTimeout=setTimeout(()=>{this.showPageIndicator=!1,this.cdr.detectChanges()},2e3)}onTouchStart(t){this.touchStartX=t.touches[0].clientX,this.touchStartY=t.touches[0].clientY,this.touchStartTime=Date.now(),this.isTouchMove=!1}onTouchMove(t){let e=Math.abs(t.touches[0].clientX-this.touchStartX),n=Math.abs(t.touches[0].clientY-this.touchStartY);(e>5||n>5)&&(this.isTouchMove=!0)}onTouchEnd(t,e){let n=Date.now()-this.touchStartTime,i=t.changedTouches[0].clientX,a=Math.abs(i-this.touchStartX);n<300&&a<10&&!this.isTouchMove&&(t.preventDefault(),this.onThumbnailClick(e)),this.isTouchMove=!1}scrollToCurrentPage(){setTimeout(()=>{let t=document.querySelector(`.thumbnail-item[data-page="${this.currentPage}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},100)}cleanupThumbnails(){this.thumbnails=[],this.renderQueue.clear()}isCurrentPage(t){return t===this.currentPage}static \u0275fac=function(e){return new(e||o)(ge(He),ge(zt))};static \u0275cmp=ae({type:o,selectors:[["shared-pdf-thumbnail-strip"]],viewQuery:function(e,n){if(e&1&&qe(ll,5),e&2){let i;Ke(i=Je())&&(n.thumbnailContainer=i.first)}},inputs:{pdfSrc:"pdfSrc",totalPages:"totalPages",currentPage:"currentPage",visible:"visible"},outputs:{pageSelected:"pageSelected"},features:[Ge],decls:2,vars:2,consts:[["class","page-indicator",4,"ngIf"],["class","thumbnail-list",4,"ngIf"],[1,"page-indicator"],[1,"thumbnail-list"],["class","thumbnail-item","style","touch-action: pan-x;",3,"active","touchstart","touchmove","touchend","click",4,"ngFor","ngForOf"],[1,"thumbnail-item",2,"touch-action","pan-x",3,"touchstart","touchmove","touchend","click"],["class","thumbnail-loading",4,"ngIf"],["class","thumbnail-image",3,"src","alt",4,"ngIf"],["class","thumbnail-error",4,"ngIf"],[1,"thumbnail-page-number"],[1,"thumbnail-loading"],[1,"loading-spinner"],[1,"thumbnail-image",3,"src","alt"],[1,"thumbnail-error"],["src","./images/icons/pc/ico-file.svg","alt","\uC2E4\uD328","width","24","height","24"]],template:function(e,n){e&1&&I(0,cl,2,2,"div",0)(1,ul,2,1,"div",1),e&2&&(u("ngIf",n.showPageIndicator&&n.visible&&n.totalPages>0),c(),u("ngIf",n.visible&&n.totalPages>0))},dependencies:[ne,Ve,Pe],styles:[".page-indicator[_ngcontent-%COMP%]{position:fixed;bottom:130px;left:50%;transform:translate(-50%);z-index:851;background:#616161f2;color:#fff;padding:8px 16px;border-radius:16px;font-size:14px;font-weight:500;box-shadow:0 4px 16px #0000004d;pointer-events:none;animation:_ngcontent-%COMP%_fadeInOut 2s ease-in-out}@keyframes _ngcontent-%COMP%_fadeInOut{0%{opacity:0;transform:translate(-50%) scale(.8)}10%{opacity:1;transform:translate(-50%) scale(1)}90%{opacity:1;transform:translate(-50%) scale(1)}to{opacity:0;transform:translate(-50%) scale(.8)}}.thumbnail-list[_ngcontent-%COMP%]{position:fixed;bottom:60px;left:50%;transform:translate(-50%);height:60px;z-index:850;display:inline-flex;gap:6px;padding:6px 8px;align-items:center;background:#000000b3;border-radius:16px;box-shadow:0 -2px 12px #0003;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;max-width:calc(100vw - 16px)}.thumbnail-list[_ngcontent-%COMP%]::-webkit-scrollbar{height:0;display:none}.thumbnail-item[_ngcontent-%COMP%]{flex:0 0 auto;width:40px;height:48px;position:relative;background:#fafafa;border:1.5px solid transparent;border-radius:6px;cursor:pointer;transition:all .2s ease;box-shadow:0 1px 3px #0003}.thumbnail-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.thumbnail-item[_ngcontent-%COMP%]:active{transform:translateY(0)}.thumbnail-item.active[_ngcontent-%COMP%]{border-color:#007aff;box-shadow:0 2px 8px #007aff4d}.thumbnail-item.active[_ngcontent-%COMP%]   .thumbnail-page-number[_ngcontent-%COMP%]{background:#007aff;color:#fff;font-weight:600}.thumbnail-loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:#f5f5f5;border-radius:6px}.loading-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #e0e0e0;border-top-color:#007aff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.thumbnail-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block;border-radius:4px}.thumbnail-error[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:#999}.thumbnail-error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;opacity:.5}.thumbnail-page-number[_ngcontent-%COMP%]{position:absolute;bottom:2px;left:50%;transform:translate(-50%);background:#0009;color:#fff;padding:1px 4px;border-radius:8px;font-size:8px;font-weight:500;line-height:1.2;transition:all .2s ease}@media (max-width: 768px){.thumbnail-list[_ngcontent-%COMP%]{height:60px;bottom:60px;gap:6px;padding:4px 8px}.thumbnail-item[_ngcontent-%COMP%]{width:40px;height:48px}}"]})};var st=class o{pdfjsLibService=J(be);constructor(){}extractVectorStreamData(t,e){return E(this,null,function*(){let n=yield t.arrayBuffer(),i=yield this.pdfjsLibService.getDocument(n),a=i.numPages,d={};try{d=(yield i.getMetadata())?.info||{}}catch(h){console.warn("\u26A0\uFE0F Metadata \uCD94\uCD9C \uC2E4\uD328:",h)}let g={pageCount:a,totalOperations:0,summary:{totalPaths:0,totalLines:0,totalCurves:0,totalRectangles:0,totalFillOperations:0,totalStrokeOperations:0,totalClipOperations:0,glyphPaths:0,shapePaths:0},pageDetails:[],pdfSrc:"",debugInfo:{totalOperatorsFound:0,recognizedOperators:0,unrecognizedOperators:0,uniqueOperatorCodes:[]}};g.pdfMetadata=d;let m=new Set;try{for(let f=1;f<=a;f++){let C=yield i.getPage(f),_=this.pdfjsLibService.lib;_?_.SVGGraphics:console.error("\u274C\u274C\u274C pdfjsLib\uC774 \uB85C\uB4DC\uB418\uC9C0 \uC54A\uC558\uC2B5\uB2C8\uB2E4! \u274C\u274C\u274C");let y=yield C.getOperatorList({intent:"display"});g.debugInfo.totalOperatorsFound+=y.fnArray.length,y.fnArray.forEach(V=>m.add(V));let S="",D;try{let V=C.getViewport({scale:1}),A=_.OPS,G;try{let B=[A.paintImageXObject,A.paintInlineImageXObject,A.paintImageMaskXObject,A.paintImageMaskXObjectGroup,A.paintJpegXObject],K=[],ee=[];y.fnArray.forEach((Oe,oe)=>{B.includes(Oe)||(K.push(Oe),ee.push(y.argsArray[oe]))});let te={fnArray:new Uint8Array(K),argsArray:ee,lastChunk:!0};G=yield new _.SVGGraphics(C.commonObjs,C.objs,!1).getSVG(te,V),D="SVGGraphics"}catch(B){console.warn("\u26A0\uFE0F [SVG\uC0DD\uC131] \uC774\uBBF8\uC9C0 \uC81C\uC678 SVG \uC0DD\uC131 \uC2E4\uD328:",B?.message||B);try{let K=document.createElement("canvas"),ee=2;K.width=V.width*ee,K.height=V.height*ee;let te=K.getContext("2d");if(!te)throw new Error("Canvas context\uB97C \uC0DD\uC131\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4");yield C.render({canvas:K,canvasContext:te,viewport:C.getViewport({scale:ee})}).promise;let Fe=K.toDataURL("image/png",.95),Oe=`<svg width="${V.width}" height="${V.height}" viewBox="0 0 ${V.width} ${V.height}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <image href="${Fe}" x="0" y="0" width="${V.width}" height="${V.height}" preserveAspectRatio="none"/>
</svg>`;G=new DOMParser().parseFromString(Oe,"image/svg+xml").documentElement,D="Canvas"}catch(K){throw console.error("\u274C [Fallback] Canvas \uB80C\uB354\uB9C1\uB3C4 \uC2E4\uD328:",K),K}}D===void 0&&(D="SVGGraphics"),G.querySelectorAll("text, tspan").forEach(B=>B.remove()),S=new XMLSerializer().serializeToString(G),S=(B=>B.replace(/<svg:svg/g,"<svg").replace(/<\/svg:svg>/g,"</svg>").replace(/<svg:g/g,"<g").replace(/<\/svg:g>/g,"</g>").replace(/<svg:path/g,"<path").replace(/<\/svg:path>/g,"</path>").replace(/<svg:rect/g,"<rect").replace(/<\/svg:rect>/g,"</rect>").replace(/<svg:line/g,"<line").replace(/<\/svg:line>/g,"</line>").replace(/<svg:circle/g,"<circle").replace(/<\/svg:circle>/g,"</circle>").replace(/<svg:ellipse/g,"<ellipse").replace(/<\/svg:ellipse>/g,"</ellipse>").replace(/<svg:polygon/g,"<polygon").replace(/<\/svg:polygon>/g,"</polygon>").replace(/<svg:polyline/g,"<polyline").replace(/<\/svg:polyline>/g,"</polyline>").replace(/<svg:text/g,"<text").replace(/<\/svg:text>/g,"</text>").replace(/<svg:tspan/g,"<tspan").replace(/<\/svg:tspan>/g,"</tspan>").replace(/xmlns:svg="[^"]*"/g,"").replace(/xmlns:xlink="[^"]*"/g,'xmlns:xlink="http://www.w3.org/1999/xlink"').replace(/<svg /g,'<svg xmlns="http://www.w3.org/2000/svg" '))(S)}catch(V){console.error(`\u274C\u274C\u274C \uD398\uC774\uC9C0 ${f} SVG \uC0DD\uC131 \uC2E4\uD328 \u274C\u274C\u274C`),console.error("\uC5D0\uB7EC \uD0C0\uC785:",V?.constructor?.name),console.error("\uC5D0\uB7EC \uBA54\uC2DC\uC9C0:",V?.message),console.error("\uC5D0\uB7EC \uC804\uCCB4:",V),console.error("\uC5D0\uB7EC \uC2A4\uD0DD:",V?.stack),console.error("------- \uD658\uACBD \uC815\uBCF4 -------"),console.error("pdfjsLib \uC874\uC7AC:",!!_),console.error("pdfjsLib.version:",_?.version),console.error("SVGGraphics \uC874\uC7AC:",!!_.SVGGraphics),console.error("SVGGraphics \uD0C0\uC785:",typeof _.SVGGraphics),console.error("page \uAC1D\uCCB4:",{hasCommonObjs:!!C.commonObjs,hasObjs:!!C.objs,pageNumber:C.pageNumber}),console.error("operatorList:",{hasOperatorList:!!y,fnArrayLength:y?.fnArray?.length,argsArrayLength:y?.argsArray?.length}),console.error("------------------------")}let x={pageNumber:f,svgContent:S,originalSvg:S,svgGenerationMethod:D,operations:[],statistics:{totalPaths:0,totalLines:0,totalCurves:0,totalRectangles:0,totalTexts:0,pathCount:0,lineCount:0,curveCount:0,rectangleCount:0,fillCount:0,strokeCount:0,clipCount:0}},P=_.OPS,O={rectangle:P.rectangle,constructPath:P.constructPath,moveTo:P.moveTo,lineTo:P.lineTo,curveTo:P.curveTo,fill:P.fill,stroke:P.stroke},k=[],F=new Set;for(let V=0;V<Math.min(y.fnArray.length,30);V++)F.add(y.fnArray[V]);for(let V=0;V<y.fnArray.length;V++){let A=y.fnArray[V],G=y.argsArray[V];if(V<30){let B=Object.keys(P).find(K=>P[K]===A)||"UNKNOWN";k.push({index:V,fnCode:A,opName:B,args:G})}let X="",Q=!1,Z="text";if(A===P.constructPath){if(G&&Array.isArray(G[0])){let B=G[0];for(let K of B)K===19?(X="rectangle",Z="rectangle",Q=!1,x.statistics.rectangleCount++):K===13?(X="moveTo",Z="path",Q=!0,x.statistics.pathCount++):K===14?(X="lineTo",Z="line",Q=!0,x.statistics.lineCount++):K===15&&(X="curveTo",Z="curve",Q=!0,x.statistics.curveCount++)}}else A===P.moveTo?(X="moveTo",Z="path",Q=!0,x.statistics.pathCount++):A===P.lineTo?(X="lineTo",Z="line",Q=!0,x.statistics.lineCount++):A===P.curveTo||A===P.curveTo2||A===P.curveTo3?(X="curveTo",Z="curve",Q=!0,x.statistics.curveCount++):A===P.rectangle?(X="rectangle",Z="rectangle",Q=!1,x.statistics.rectangleCount++):A===P.fill||A===P.eoFill?(X="fill",Z="text",Q=!1,x.statistics.fillCount++):A===P.stroke?(X="stroke",Z="text",Q=!1,x.statistics.strokeCount++):A===P.clip||A===P.eoClip?(X="clip",Z="text",Q=!1,x.statistics.clipCount++):(X=`unknown_${A}`,Z="text",Q=!1);x.operations.push({type:Z,data:G,operationType:X,isVectorGraphic:Q,args:G,fnCode:A}),Q?g.debugInfo.recognizedOperators++:g.debugInfo.unrecognizedOperators++}g.summary.totalPaths+=x.statistics.pathCount,g.summary.totalLines+=x.statistics.lineCount,g.summary.totalCurves+=x.statistics.curveCount,g.summary.totalRectangles+=x.statistics.rectangleCount,g.summary.totalFillOperations!==void 0&&(g.summary.totalFillOperations+=x.statistics.fillCount),g.summary.totalStrokeOperations!==void 0&&(g.summary.totalStrokeOperations+=x.statistics.strokeCount),g.summary.totalClipOperations!==void 0&&(g.summary.totalClipOperations+=x.statistics.clipCount),x.statistics.totalPaths=x.statistics.pathCount,x.statistics.totalLines=x.statistics.lineCount,x.statistics.totalCurves=x.statistics.curveCount,x.statistics.totalRectangles=x.statistics.rectangleCount;let j=y.fnArray.length;g.totalOperations+=j,x.debugInfo={opsCodeMapping:O,operationSamples:k,totalOperationsInList:y.fnArray.length,actualFnCodesFound:Array.from(F).sort((V,A)=>V-A),opsCodes:{moveTo:P.moveTo,lineTo:P.lineTo,curveTo:P.curveTo,rectangle:P.rectangle,fill:P.fill,stroke:P.stroke,clip:P.clip}},x.debugCounters={pageNum:f,totalOperations:j,paths:x.statistics.pathCount,lines:x.statistics.lineCount,curves:x.statistics.curveCount,rectangles:x.statistics.rectangleCount,fills:x.statistics.fillCount,strokes:x.statistics.strokeCount,clips:x.statistics.clipCount},g.pageDetails.push(x)}g.debugInfo.uniqueOperatorCodes=Array.from(m).sort((f,C)=>f-C);let h={totalOperations:g.totalOperations,totalPaths:g.summary.totalPaths,totalLines:g.summary.totalLines,totalCurves:g.summary.totalCurves,totalRectangles:g.summary.totalRectangles,shapePaths:g.summary.shapePaths,glyphPaths:g.summary.glyphPaths};g.finalDebugSummary=h}catch(h){throw console.error("\u274C \uBCA1\uD130 \uBD84\uC11D \uC2E4\uD328:",h),console.error("\u274C \uC2E4\uD328 \uC2DC\uC810 pageDetails \uAE38\uC774:",g.pageDetails.length),h}return g})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Lt=class o{constructor(t){this.pdfCacheService=t}VERSION="1.0.0";pdfVectorAnalyzer=J(st);analyzePdfStructure(i,a){return E(this,arguments,function*(t,e,n={}){let{extractText:d=!0,extractImages:g=!1,extractVectors:m=!0,singlePageMode:h=!1,enableCache:f=!0,pageRange:C}=n;n.skipCache;try{let[_,y,S]=yield Promise.all([d?this.extractTextStream(t,e,h,C):this.createEmptyTextData(),g?this.extractImages(t,h,C):this.createEmptyImageData(),m?this.extractVectors(t,e,h,C):Promise.resolve(null)]);_&&S&&this.mergeVectorColorsToTextItems(_,S);let D=this.convertToStructureData(_,y,S,t);return{textStreamData:_,imageData:y,vectorData:S,structureData:D}}catch(_){throw console.warn("\u274C PDF \uAD6C\uC870 \uBD84\uC11D \uC2E4\uD328:",_),_}})}extractTextStream(t,e,n,i){return E(this,null,function*(){let a=yield e.extractTextStreamAsJson(t);if(n&&a.pages&&a.pages.length>0){a.pages=[a.pages[0]],a.metadata.pageCount=1;let d=a.pages[0];a.metadata.totalTextItems=d.textItems.length,a.metadata.totalWords=d.statistics.wordCount,a.metadata.totalCharacters=d.statistics.charCount}if(i&&a.pages){let d=Math.max(0,i.start-1),g=Math.min(a.pages.length,i.end);a.pages=a.pages.slice(d,g),a.metadata.pageCount=a.pages.length}return a})}extractImages(t,e,n){return E(this,null,function*(){return{images:[],totalSize:0,pageDistribution:new Map}})}extractVectors(t,e,n,i){return E(this,null,function*(){try{let a=yield this.pdfVectorAnalyzer.extractVectorStreamData(t);if(!a)return console.warn("\u26A0\uFE0F \uBCA1\uD130 \uB370\uC774\uD130 \uC5C6\uC74C"),null;if(n&&a.pageDetails&&a.pageDetails.length>0){let d=a.pageDetails[0];a.pageDetails=[d],a.pageCount=1,a.totalOperations=d.operations.length}if(i&&a.pageDetails){let d=Math.max(0,i.start-1),g=Math.min(a.pageDetails.length,i.end);a.pageDetails=a.pageDetails.slice(d,g),a.pageCount=a.pageDetails.length}return a}catch(a){return console.warn("\u274C \uBCA1\uD130 \uADF8\uB798\uD53D \uCD94\uCD9C \uC2E4\uD328:",a),null}})}mergeVectorColorsToTextItems(t,e){!t.pages||!e.pageDetails||t.pages.forEach((n,i)=>{let a=e.pageDetails[i];!a||!n.textItems||n.textItems.forEach(d=>{let g=this.findNearestVectorColor(d,a.operations);g&&(d.color=g)})})}findNearestVectorColor(t,e){for(let n of e)if(n.color&&n.color!=="#000000")return n.color;return null}convertToStructureData(t,e,n,i){let a=[];t.pages.forEach((m,h)=>{let f={pageNumber:m.pageNumber,width:595,height:842,textBlocks:this.convertToTextBlocks(m.textItems),images:this.getImagesForPage(e,m.pageNumber)};a.push(f)});let d={fileName:i.name,fileSize:i.size,pageCount:t.pageCount},g={totalPages:t.pageCount,totalWords:t.metadata.totalWords,totalCharacters:t.metadata.totalCharacters,totalImages:e.images.length,totalTables:0,averageWordsPerPage:Math.round(t.metadata.totalWords/t.pageCount),averageImagesPerPage:e.images.length/t.pageCount};return{pages:a,metadata:d,statistics:g}}convertToTextBlocks(t){return!t||t.length===0?[]:t.map(e=>({content:e.str||"",x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0,fontSize:e.fontSize||12,fontFamily:e.fontName,color:e.color,isHeading:(e.fontSize||12)>16}))}getImagesForPage(t,e){return t.images.filter(n=>n.pageNumber===e).map(n=>({id:n.id,x:n.x||0,y:n.y||0,width:n.width,height:n.height,dataUrl:n.dataUrl}))}createEmptyTextData(){return{pageCount:0,pages:[],metadata:{pageCount:0,totalTextItems:0,totalWords:0,totalCharacters:0,uniqueFonts:[],hasImages:!1,hasVectorGraphics:!1}}}createEmptyImageData(){return{images:[],totalSize:0,pageDistribution:new Map}}static \u0275fac=function(e){return new(e||o)(Ie(ot))};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Nt=class o{fontCache=new Map;embeddedFonts=new Map;LANGUAGE_FONT_MAP=[{language:"korean",fontPath:"fonts/NanumGothic-Regular.ttf",fontName:"NanumGothic",script:"Hangul"},{language:"english",fontPath:"fonts/Roboto-Regular.ttf",fontName:"Roboto",script:"Latin"},{language:"japanese",fontPath:"fonts/NotoSansJP-Regular.ttf",fontName:"NotoSansJP",script:"CJK-JP"},{language:"chinese",fontPath:"fonts/NotoSansSC-Regular.ttf",fontName:"NotoSansSC",script:"CJK-SC",fallback:"fonts/NotoSansTC-Regular.ttf"},{language:"spanish",fontPath:"fonts/Roboto-Regular.ttf",fontName:"Roboto",script:"Latin"},{language:"french",fontPath:"fonts/Roboto-Regular.ttf",fontName:"Roboto",script:"Latin"},{language:"german",fontPath:"fonts/Roboto-Regular.ttf",fontName:"Roboto",script:"Latin"}];FALLBACK_FONT_PATH="fonts/Roboto-Regular.ttf";constructor(){console.log("\u2705 [FontManager] \uC11C\uBE44\uC2A4 \uCD08\uAE30\uD654 \uC644\uB8CC")}getFontConfig(t){let e=this.LANGUAGE_FONT_MAP.find(n=>n.language===t);return e||(console.warn(`\u26A0\uFE0F [FontManager] \uBBF8\uC9C0\uC6D0 \uC5B8\uC5B4: ${t}, \uC601\uC5B4 \uD3F0\uD2B8 \uC0AC\uC6A9`),this.LANGUAGE_FONT_MAP.find(n=>n.language==="english"))}detectLanguage(t){return t?/[가-힣]/.test(t)?"korean":/[\u3040-\u309F\u30A0-\u30FF]/.test(t)?"japanese":/[\u4E00-\u9FFF]/.test(t)&&!/[\u3040-\u309F\u30A0-\u30FF]/.test(t)?"chinese":"english":"english"}detectMixedLanguages(t){let e=new Set;return/[가-힣]/.test(t)&&e.add("korean"),/[\u3040-\u309F\u30A0-\u30FF]/.test(t)&&e.add("japanese"),/[\u4E00-\u9FFF]/.test(t)&&e.add("chinese"),/[a-zA-Z]/.test(t)&&e.add("english"),Array.from(e)}loadFont(t){return E(this,null,function*(){if(this.fontCache.has(t))return console.log(`\u2705 [FontManager] \uCE90\uC2DC\uC5D0\uC11C \uD3F0\uD2B8 \uB85C\uB4DC: ${t}`),this.fontCache.get(t);console.log(`\u{1F4E5} [FontManager] \uD3F0\uD2B8 \uB2E4\uC6B4\uB85C\uB4DC \uC911: ${t}`);try{let e=yield fetch(t);if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);let n=yield e.arrayBuffer();return this.fontCache.set(t,n),console.log(`\u2705 [FontManager] \uD3F0\uD2B8 \uB85C\uB4DC \uC644\uB8CC: ${t} (${(n.byteLength/1024/1024).toFixed(2)} MB)`),n}catch(e){throw console.error(`\u274C [FontManager] \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328: ${t}`,e),e}})}loadFontForLanguage(t){return E(this,null,function*(){let e=this.getFontConfig(t);try{return yield this.loadFont(e.fontPath)}catch{if(console.warn(`\u26A0\uFE0F [FontManager] ${t} \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328, \uD3F4\uBC31 \uC2DC\uB3C4`),e.fallback)try{return yield this.loadFont(e.fallback)}catch{console.warn("\u26A0\uFE0F [FontManager] \uD3F4\uBC31 \uD3F0\uD2B8\uB3C4 \uC2E4\uD328, \uAE30\uBCF8 \uD3F0\uD2B8 \uC0AC\uC6A9")}return yield this.loadFont(this.FALLBACK_FONT_PATH)}})}embedFontForPdf(t,e){return E(this,null,function*(){let n=`${e}_embedded`;if(this.embeddedFonts.has(n))return console.log(`\u2705 [FontManager] \uCE90\uC2DC\uB41C \uC784\uBCA0\uB514\uB4DC \uD3F0\uD2B8 \uC0AC\uC6A9: ${e}`),this.embeddedFonts.get(n);console.log(`\u{1F4E6} [FontManager] PDF\uC5D0 \uD3F0\uD2B8 \uC784\uBCA0\uB529 \uC911: ${e}`);try{let i=yield this.loadFontForLanguage(e),a=yield t.embedFont(new Uint8Array(i));return this.embeddedFonts.set(n,a),console.log(`\u2705 [FontManager] \uD3F0\uD2B8 \uC784\uBCA0\uB529 \uC644\uB8CC: ${e}`),a}catch(i){throw console.error(`\u274C [FontManager] \uD3F0\uD2B8 \uC784\uBCA0\uB529 \uC2E4\uD328: ${e}`,i),i}})}selectFontForText(t,e,n){return E(this,null,function*(){let i=n||this.detectLanguage(e);return yield this.embedFontForPdf(t,i)})}preloadFonts(t){return E(this,null,function*(){console.log(`\u{1F4E6} [FontManager] ${t.length}\uAC1C \uD3F0\uD2B8 \uC0AC\uC804 \uB85C\uB4DC \uC2DC\uC791...`);try{yield Promise.all(t.map(e=>this.loadFontForLanguage(e))),console.log(`\u2705 [FontManager] \uC0AC\uC804 \uB85C\uB4DC \uC644\uB8CC: ${t.join(", ")}`)}catch(e){console.error("\u274C [FontManager] \uC0AC\uC804 \uB85C\uB4DC \uC911 \uC624\uB958:",e)}})}clearCache(){this.fontCache.clear(),this.embeddedFonts.clear(),console.log("\u{1F5D1}\uFE0F [FontManager] \uD3F0\uD2B8 \uCE90\uC2DC \uCD08\uAE30\uD654 \uC644\uB8CC")}getCacheStatus(){return{fontCache:this.fontCache.size,embeddedFonts:this.embeddedFonts.size}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Rt=class o{constructor(t){this.debugLogger=t}pdfLibLoaded=!1;fontkitLoaded=!1;koreanFontData=null;fontManager=J(Nt);createPdf(t,e){return E(this,null,function*(){let{analysisResult:n,vectorData:i,fileName:a}=t;return!i&&this.isSimpleTextOnly(n)?(this.debugLogger.info("PDF\uC0DD\uC131","\uAC04\uB2E8\uD55C \uD14D\uC2A4\uD2B8 PDF \uC0DD\uC131\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4."),this.generateTextPdf(n,a,e)):(this.debugLogger.info("PDF\uC0DD\uC131","\uD63C\uD569\uD615 PDF \uC0DD\uC131\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4."),this.generateCombinedPdf(n,i,a))})}isSimpleTextOnly(t){return!t.textStreamData||!t.textStreamData.pages?!0:t.textStreamData.pages.length<5}generateTextPdf(t,e="text-document.pdf",n){return E(this,null,function*(){yield this.loadPdfLib(),yield this.loadFontkit();let{PDFDocument:i,rgb:a,StandardFonts:d}=window.PDFLib,g=yield i.create();g.registerFontkit(window.fontkit);let m=t.textStreamData;if(!m||!m.pages||m.pages.length===0)throw new Error("\uD14D\uC2A4\uD2B8 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");let h=n;if(!h&&m.pages.length>0){let x=m.pages[0].textItems?.map(P=>P.str||"").join(" ")||"";h=this.fontManager.detectLanguage(x)}console.log(`\u{1F4DD} [PdfGenerator] \uBB38\uC11C \uC5B8\uC5B4: ${h}`);let f=yield this.fontManager.embedFontForPdf(g,h||"korean"),C=new Map;C.set(h||"korean",f);let _=x=>E(this,null,function*(){if(!x)return f;let P=this.fontManager.detectLanguage(x);if(C.has(P))return C.get(P);try{let O=yield this.fontManager.embedFontForPdf(g,P);return C.set(P,O),O}catch(O){return console.warn(`\uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328 (${P}), primaryFont \uC0AC\uC6A9`,O),f}}),y=-.9,S=-.1;for(let x=0;x<m.pages.length;x++){let P=m.pages[x],O=P.width||595,k=P.height||842,F=g.addPage([O,k]);P.textItems&&P.textItems.length>0&&(yield this.drawTextItems(F,P.textItems,_,y,S))}let D=yield g.save();return new Blob([D],{type:"application/pdf"})})}generateVectorPdf(t,e="vector-document.pdf"){return E(this,null,function*(){this.debugLogger.info("PDF\uC0DD\uC131","\u{1F3A8} \uBCA1\uD130 PDF \uC0DD\uC131 \uC2DC\uC791..."),yield this.loadPdfLib();let{PDFDocument:n,rgb:i,StandardFonts:a}=window.PDFLib,d=yield n.create();if(!t||!t.pageDetails||t.pageDetails.length===0)throw this.debugLogger.error("PDF\uC0DD\uC131","\u274C \uBCA1\uD130 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."),new Error("\uBCA1\uD130 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");let g=yield d.embedFont(a.Helvetica);this.debugLogger.info("PDF\uC0DD\uC131",`\u{1F4C4} \uCD1D ${t.pageDetails.length}\uAC1C \uD398\uC774\uC9C0 \uCC98\uB9AC \uC911...`);for(let h=0;h<t.pageDetails.length;h++){let f=t.pageDetails[h],C=d.addPage([595,842]),{width:_,height:y}=C.getSize();if(C.drawText(`Vector Page ${h+1}`,{x:50,y:y-50,size:14,font:g,color:i(1,.6,.34)}),f.svgContent)try{let S=new Blob([f.svgContent],{type:"image/svg+xml"}),D=URL.createObjectURL(S),x=new Image;yield new Promise((k,F)=>{x.onload=k,x.onerror=F,x.src=D});let P=document.createElement("canvas");P.width=_,P.height=y;let O=P.getContext("2d");if(O){O.drawImage(x,0,0,P.width,P.height);let F=P.toDataURL("image/png").split(",")[1],j=Uint8Array.from(atob(F),A=>A.charCodeAt(0)),V=yield d.embedPng(j);C.drawImage(V,{x:0,y:0,width:_,height:y}),this.debugLogger.info("PDF\uC0DD\uC131",`  \u{1F4C3} \uD398\uC774\uC9C0 ${h+1}: SVG \uBCA1\uD130 \uB80C\uB354\uB9C1 \uC644\uB8CC`)}URL.revokeObjectURL(D)}catch(S){this.debugLogger.error("PDF\uC0DD\uC131",`\u274C SVG \uB80C\uB354\uB9C1 \uC2E4\uD328: ${S.message}`)}else C.drawText("No SVG content",{x:50,y:y-75,size:12,font:g,color:i(.5,.5,.5)})}let m=yield d.save();return this.debugLogger.success("PDF\uC0DD\uC131",`\u2705 \uBCA1\uD130 PDF \uC0DD\uC131 \uC644\uB8CC (\uD398\uC774\uC9C0: ${t.pageDetails.length}, \uD06C\uAE30: ${(m.length/1024).toFixed(2)} KB)`),new Blob([m],{type:"application/pdf"})})}generateCombinedPdf(t,e,n="combined-document.pdf"){return E(this,null,function*(){this.debugLogger.info("PDF\uC0DD\uC131",`\u{1F4CA} \uD63C\uD569\uD615 PDF \uC0DD\uC131 \uC2DC\uC791 (\uD30C\uC77C\uBA85: ${n})`),this.debugLogger.info("PDF\uC0DD\uC131","\u{1F50D} \uC785\uB825 \uB370\uC774\uD130 \uAC80\uC99D \uC911...");let i=t.textStreamData;if(!i)throw this.debugLogger.error("PDF\uC0DD\uC131","\u274C textStreamData\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4!"),new Error("\uD14D\uC2A4\uD2B8 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");if(!i.pages)throw this.debugLogger.error("PDF\uC0DD\uC131","\u274C textStreamData.pages\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4!"),new Error("\uD398\uC774\uC9C0 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");if(i.pages.length===0)throw this.debugLogger.error("PDF\uC0DD\uC131","\u274C textStreamData.pages\uAC00 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4!"),new Error("\uD398\uC774\uC9C0\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");this.debugLogger.info("PDF\uC0DD\uC131",`\u2705 \uCD1D ${i.pages.length}\uAC1C \uD398\uC774\uC9C0 \uBC1C\uACAC (\uCCAB \uD398\uC774\uC9C0 \uC544\uC774\uD15C: ${i.pages[0]?.textItems?.length||0}\uAC1C)`),this.debugLogger.info("PDF\uC0DD\uC131","\u{1F4DA} \uB77C\uC774\uBE0C\uB7EC\uB9AC \uB85C\uB529 \uC911..."),yield this.loadPdfLib(),yield this.loadFontkit(),yield this.loadKoreanFont();let{PDFDocument:a,rgb:d,StandardFonts:g}=window.PDFLib;if(!a)throw this.debugLogger.error("PDF\uC0DD\uC131","\u274C PDFLib \uB85C\uB4DC \uC2E4\uD328!"),new Error("PDFLib\uC744 \uB85C\uB4DC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");let m=yield a.create();this.debugLogger.info("PDF\uC0DD\uC131","\u2705 PDF \uBB38\uC11C \uC0DD\uC131 \uC644\uB8CC"),m.registerFontkit(window.fontkit);let h=yield this.fontManager.embedFontForPdf(m,"korean");this.debugLogger.info("PDF\uC0DD\uC131","\u2705 \uAE30\uBCF8 \uD3F0\uD2B8 \uC784\uBCA0\uB529 \uC644\uB8CC (Korean)");let f=new Map;f.set("korean",h);let C=P=>E(this,null,function*(){if(!P)return h;let O=this.fontManager.detectLanguage(P);if(f.has(O))return f.get(O);try{let k=yield this.fontManager.embedFontForPdf(m,O);return f.set(O,k),k}catch{return this.debugLogger.warn("PDF\uC0DD\uC131",`\u26A0\uFE0F \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328 (${O}), primaryFont \uC0AC\uC6A9`),h}}),_=-.9,y=-.1;this.debugLogger.info("PDF\uC0DD\uC131",`\u{1F4D0} \uC88C\uD45C \uC624\uD504\uC14B \uC124\uC815 (X: ${y}, Y: ${_})`);let S=0,D=0;for(let P=0;P<i.pages.length;P++){let O=i.pages[P],k=O.width||595,F=O.height||842,j=m.addPage([k,F]),V=e&&e.pageDetails&&e.pageDetails[P],A=V&&e.pageDetails[P].operations?.length||0;if(this.debugLogger.info("PDF\uC0DD\uC131",`\u{1F4C3} \uD398\uC774\uC9C0 ${P+1}/${i.pages.length} \uCC98\uB9AC \uC2DC\uC791 (${k}x${F}, \uD14D\uC2A4\uD2B8: ${O.textItems?.length||0}\uAC1C, \uBCA1\uD130: ${A}\uAC1C)`),V){let G=e.pageDetails[P];if(G.svgContent)try{let X=new Blob([G.svgContent],{type:"image/svg+xml"}),Q=URL.createObjectURL(X),Z=new Image;yield new Promise((ee,te)=>{Z.onload=ee,Z.onerror=te,Z.src=Q});let B=document.createElement("canvas");B.width=k,B.height=F;let K=B.getContext("2d");if(K){K.drawImage(Z,0,0,B.width,B.height);let te=B.toDataURL("image/png").split(",")[1],Fe=Uint8Array.from(atob(te),oe=>oe.charCodeAt(0)),Oe=yield m.embedPng(Fe);j.drawImage(Oe,{x:0,y:0,width:k,height:F}),D++,this.debugLogger.info("PDF\uC0DD\uC131","  \u{1F3A8} SVG \uBCA1\uD130 \uB80C\uB354\uB9C1 \uC644\uB8CC")}URL.revokeObjectURL(Q)}catch(X){this.debugLogger.error("PDF\uC0DD\uC131",`\u274C SVG \uB80C\uB354\uB9C1 \uC2E4\uD328: ${X.message}`)}}if(O.textItems&&O.textItems.length>0){let G=yield this.drawTextItems(j,O.textItems,C,_,y);S+=G,this.debugLogger.info("PDF\uC0DD\uC131",`  \u270F\uFE0F \uD14D\uC2A4\uD2B8 \uB80C\uB354\uB9C1 \uC644\uB8CC (${G}\uAC1C)`)}else this.debugLogger.info("PDF\uC0DD\uC131",`\u26A0\uFE0F \uD398\uC774\uC9C0 ${P+1}\uC5D0 \uD14D\uC2A4\uD2B8 \uC544\uC774\uD15C \uC5C6\uC74C!`)}this.debugLogger.info("PDF\uC0DD\uC131","\u{1F4BE} PDF \uC800\uC7A5 \uC911...");let x=yield m.save();return this.debugLogger.success("PDF\uC0DD\uC131",`\u2705 \uD63C\uD569\uD615 PDF \uC0DD\uC131 \uC644\uB8CC (\uD398\uC774\uC9C0: ${i.pages.length}, \uD14D\uC2A4\uD2B8: ${S}\uAC1C, \uBCA1\uD130: ${D}\uAC1C, \uD06C\uAE30: ${(x.length/1024).toFixed(2)} KB)`),new Blob([x],{type:"application/pdf"})})}drawTextItems(t,e,n,i,a){return E(this,null,function*(){let{rgb:d}=window.PDFLib,g=0;for(let m of e)try{let h=(m.text||m.str||"").trim();if(!h)continue;let f=yield n(h),C=m.font?.size||m.height||12,_=C*a,y=C*i,S=(m.position?.x||m.x||0)+_,D=(m.position?.y||m.y||0)+y,x=this.parseAndAdjustColor(m.style?.color||m.color||"#000000");t.drawText(h,{x:S,y:D,size:C,font:f,color:d(x.r,x.g,x.b)}),g++}catch(h){console.warn("\uD14D\uC2A4\uD2B8 \uB80C\uB354\uB9C1 \uC2E4\uD328:",h)}return g})}parseAndAdjustColor(t){let e=t;if((t==="#ffffff"||t==="#FFFFFF"||t==="rgb(255, 255, 255)"||t==="white")&&(e="#000000"),e&&e.startsWith("#")){let n=e.replace("#","");if(n.length===6)return{r:parseInt(n.substring(0,2),16)/255,g:parseInt(n.substring(2,4),16)/255,b:parseInt(n.substring(4,6),16)/255}}return{r:0,g:0,b:0}}exportOriginalPdf(t){return E(this,null,function*(){return t})}downloadPdf(t,e){let n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}loadPdfLib(){return E(this,null,function*(){if(!(this.pdfLibLoaded&&window.PDFLib))return new Promise((t,e)=>{let n=document.createElement("script");n.src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js",n.onload=()=>{window.PDFLib?(this.pdfLibLoaded=!0,t()):e(new Error("pdf-lib \uB85C\uB4DC \uC2E4\uD328"))},n.onerror=()=>e(new Error("pdf-lib \uC2A4\uD06C\uB9BD\uD2B8 \uB85C\uB4DC \uC2E4\uD328")),document.head.appendChild(n)})})}loadFontkit(){return E(this,null,function*(){if(!(this.fontkitLoaded&&window.fontkit))return new Promise((t,e)=>{let n=document.createElement("script");n.src="https://unpkg.com/@pdf-lib/fontkit@1.1.1/dist/fontkit.umd.min.js",n.onload=()=>{window.fontkit?(this.fontkitLoaded=!0,t()):e(new Error("fontkit \uB85C\uB4DC \uC2E4\uD328"))},n.onerror=()=>e(new Error("fontkit \uC2A4\uD06C\uB9BD\uD2B8 \uB85C\uB4DC \uC2E4\uD328")),document.head.appendChild(n)})})}loadKoreanFont(){return E(this,null,function*(){if(this.koreanFontData)return;let t=["fonts/NanumGothic-Regular.ttf","fonts/NanumGothic.ttf","assets/fonts/NanumGothic-Regular.ttf"];for(let e of t)try{let n=yield fetch(e);if(n.ok){this.koreanFontData=yield n.arrayBuffer();return}}catch{continue}console.warn("\u26A0\uFE0F \uD55C\uAE00 \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328 - \uBAA8\uB4E0 \uACBD\uB85C \uC2DC\uB3C4 \uC644\uB8CC"),console.warn("\uD55C\uAE00\uC774 \uD45C\uC2DC\uB418\uC9C0 \uC54A\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4.")})}loadJsPDF(){return E(this,null,function*(){return window.jspdf?window.jspdf.jsPDF:new Promise((t,e)=>{let n=document.createElement("script");n.src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js",n.onload=()=>{window.jspdf?t(window.jspdf.jsPDF):e(new Error("jsPDF \uB85C\uB4DC \uC2E4\uD328"))},n.onerror=()=>e(new Error("jsPDF \uC2A4\uD06C\uB9BD\uD2B8 \uB85C\uB4DC \uC2E4\uD328")),document.head.appendChild(n)})})}static \u0275fac=function(e){return new(e||o)(Ie(ze))};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var jt=class o{applyPermissionsAsMetadata(t,e){return E(this,null,function*(){try{let i=yield(yield fetch(t)).arrayBuffer(),a=yield PDFLib.PDFDocument.load(i),d={printing:e.printing,modifying:e.modifying,copying:e.copying,annotating:e.annotating,fillingForms:e.fillingForms,contentAccessibility:e.contentAccessibility,documentAssembly:e.documentAssembly};a.setSubject(`Security: ${JSON.stringify(d)}`),a.setKeywords(["security","permissions"]);let g=yield a.save(),m=new Blob([g],{type:"application/pdf"});return URL.createObjectURL(m)}catch(n){throw console.error("\uAD8C\uD55C \uC124\uC815 \uC2E4\uD328:",n),new Error("PDF \uAD8C\uD55C \uC124\uC815\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}readPermissionsFromMetadata(t){return E(this,null,function*(){try{let n=yield(yield fetch(t)).arrayBuffer(),a=(yield PDFLib.PDFDocument.load(n)).getSubject();if(a&&a.startsWith("Security:")){let d=a.replace("Security:","").trim();return JSON.parse(d)}return null}catch(e){return console.error("\uAD8C\uD55C \uC815\uBCF4 \uC77D\uAE30 \uC2E4\uD328:",e),null}})}validatePasswordStrength(t){if(!t)return{isValid:!1,strength:"weak",message:"\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",score:0};let e=t.length,n=/[A-Z]/.test(t),i=/[a-z]/.test(t),a=/[0-9]/.test(t),d=/[!@#$%^&*(),.?":{}|<>]/.test(t);if(e<6)return{isValid:!1,strength:"weak",message:"\uBE44\uBC00\uBC88\uD638\uB294 \uCD5C\uC18C 6\uC790 \uC774\uC0C1\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.",score:Math.min(e/6*30,30)};let g=[n,i,a,d].filter(Boolean).length,m=0;return m+=Math.min(e*4,40),m+=g*15,g>=3&&e>=12?{isValid:!0,strength:"strong",message:"\uB9E4\uC6B0 \uAC15\uB825\uD55C \uBE44\uBC00\uBC88\uD638\uC785\uB2C8\uB2E4.",score:Math.min(m,100)}:g>=3&&e>=10?{isValid:!0,strength:"strong",message:"\uAC15\uB825\uD55C \uBE44\uBC00\uBC88\uD638\uC785\uB2C8\uB2E4.",score:Math.min(m,90)}:g>=2&&e>=8?{isValid:!0,strength:"medium",message:"\uBCF4\uD1B5 \uAC15\uB3C4\uC758 \uBE44\uBC00\uBC88\uD638\uC785\uB2C8\uB2E4.",score:Math.min(m,70)}:{isValid:!0,strength:"weak",message:"\uC57D\uD55C \uBE44\uBC00\uBC88\uD638\uC785\uB2C8\uB2E4. \uB354 \uBCF5\uC7A1\uD55C \uBE44\uBC00\uBC88\uD638\uB97C \uC0AC\uC6A9\uD558\uC138\uC694.",score:Math.min(m,50)}}validatePasswordMatch(t,e){return t===e}validateSecurityConfig(t){let e=[];if(t.passwords){if(t.passwords.userPassword){let i=this.validatePasswordStrength(t.passwords.userPassword);i.isValid||e.push(`\uC0AC\uC6A9\uC790 \uBE44\uBC00\uBC88\uD638: ${i.message}`)}if(t.passwords.ownerPassword){let i=this.validatePasswordStrength(t.passwords.ownerPassword);i.isValid||e.push(`\uC18C\uC720\uC790 \uBE44\uBC00\uBC88\uD638: ${i.message}`)}!t.passwords.userPassword&&!t.passwords.ownerPassword&&e.push("\uCD5C\uC18C \uD558\uB098\uC758 \uBE44\uBC00\uBC88\uD638\uB97C \uC124\uC815\uD574\uC8FC\uC138\uC694.")}return Object.values(t.permissions).some(i=>i===!0)||e.push("\uCD5C\uC18C \uD558\uB098\uC758 \uAD8C\uD55C\uC740 \uD5C8\uC6A9\uB418\uC5B4\uC57C \uD569\uB2C8\uB2E4."),{isValid:e.length===0,errors:e}}encryptPdfOnServer(t,e){return E(this,null,function*(){try{let n=new FormData;n.append("pdf",t,"document.pdf"),n.append("config",JSON.stringify(e));let i=yield fetch("/api/pdf/encrypt",{method:"POST",body:n});if(!i.ok)throw new Error("\uC11C\uBC84 \uC554\uD638\uD654 \uC2E4\uD328");return yield i.blob()}catch(n){throw console.error("\uC11C\uBC84 \uC554\uD638\uD654 \uC2E4\uD328:",n),new Error("PDF \uC554\uD638\uD654\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. \uC11C\uBC84\uB97C \uD655\uC778\uD574\uC8FC\uC138\uC694.")}})}getPermissionDescription(t){let e=[],n=[];t.printing?e.push("\uC778\uC1C4"):n.push("\uC778\uC1C4"),t.copying?e.push("\uBCF5\uC0AC"):n.push("\uBCF5\uC0AC"),t.modifying?e.push("\uC218\uC815"):n.push("\uC218\uC815"),t.annotating?e.push("\uC8FC\uC11D"):n.push("\uC8FC\uC11D");let i="";return e.length>0&&(i+=`\uD5C8\uC6A9: ${e.join(", ")}`),n.length>0&&(i&&(i+=" / "),i+=`\uAE08\uC9C0: ${n.join(", ")}`),i||"\uBAA8\uB4E0 \uC791\uC5C5 \uD5C8\uC6A9"}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Wt=class o{constructor(){}rotatePage(t,e,n){return E(this,null,function*(){let a=yield(yield fetch(t)).arrayBuffer(),d=yield PDFLib.PDFDocument.load(a),g=d.getPages();if(e<1||e>g.length)throw new Error(`Invalid page number: ${e}`);let m=g[e-1],h=m.getRotation().angle;m.setRotation(PDFLib.degrees(h+n));let f=yield d.save(),C=new Blob([f],{type:"application/pdf"});return URL.createObjectURL(C)})}rotateAllPages(t,e){return E(this,null,function*(){let i=yield(yield fetch(t)).arrayBuffer(),a=yield PDFLib.PDFDocument.load(i);a.getPages().forEach(h=>{let f=h.getRotation().angle;h.setRotation(PDFLib.degrees(f+e))});let g=yield a.save(),m=new Blob([g],{type:"application/pdf"});return URL.createObjectURL(m)})}deletePages(t,e){return E(this,null,function*(){let i=yield(yield fetch(t)).arrayBuffer(),a=yield PDFLib.PDFDocument.load(i),d=[...e].sort((h,f)=>f-h);for(let h of d)h>=1&&h<=a.getPageCount()&&a.removePage(h-1);let g=yield a.save(),m=new Blob([g],{type:"application/pdf"});return URL.createObjectURL(m)})}extractPages(t,e){return E(this,null,function*(){let i=yield(yield fetch(t)).arrayBuffer(),a=yield PDFLib.PDFDocument.load(i),d=yield PDFLib.PDFDocument.create();for(let h of e)if(h>=1&&h<=a.getPageCount()){let[f]=yield d.copyPages(a,[h-1]);d.addPage(f)}let g=yield d.save(),m=new Blob([g],{type:"application/pdf"});return URL.createObjectURL(m)})}mergePdfs(t){return E(this,null,function*(){let e=yield PDFLib.PDFDocument.create();for(let a of t){let g=yield(yield fetch(a)).arrayBuffer(),m=yield PDFLib.PDFDocument.load(g),h=m.getPageCount(),f=Array.from({length:h},(_,y)=>y);(yield e.copyPages(m,f)).forEach(_=>{e.addPage(_)})}let n=yield e.save(),i=new Blob([n],{type:"application/pdf"});return URL.createObjectURL(i)})}downloadPdf(t,e){let n=document.createElement("a");n.href=t,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}revokeBlobUrl(t){URL.revokeObjectURL(t)}getPageCount(t){return E(this,null,function*(){let n=yield(yield fetch(t)).arrayBuffer();return(yield PDFLib.PDFDocument.load(n)).getPageCount()})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Gt=class o{selectedElement$=new we(null);selectedPageNumber$=new we(1);select(t,e){this.selectedElement$.next(t),e!==void 0&&this.selectedPageNumber$.next(e)}deselect(){this.selectedElement$.next(null)}getSelected(){return this.selectedElement$.value}getSelected$(){return this.selectedElement$.asObservable()}getSelectedPageNumber(){return this.selectedPageNumber$.value}getSelectedPageNumber$(){return this.selectedPageNumber$.asObservable()}isSelected(t){return this.selectedElement$.value?.id===t}clear(){this.selectedElement$.next(null),this.selectedPageNumber$.next(1)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ht=class o{repository;setRepository(t){this.repository=t}createElement(t,e){return this.repository?this.repository.create(t,e):ie(()=>new Error("Repository not initialized"))}getElement(t){return this.repository?this.repository.findById(t):ie(()=>new Error("Repository not initialized"))}getElementsByPage(t){return this.repository?this.repository.findByPage(t):ie(()=>new Error("Repository not initialized"))}updateElement(t){return this.repository?this.repository.update(t):ie(()=>new Error("Repository not initialized"))}deleteElement(t){return this.repository?this.repository.delete(t):ie(()=>new Error("Repository not initialized"))}bulkCreateElements(t,e){return this.repository?this.repository.bulkCreate(t,e):ie(()=>new Error("Repository not initialized"))}bulkDeleteElements(t){return this.repository?this.repository.bulkDelete(t):ie(()=>new Error("Repository not initialized"))}getAllElements(){return this.repository?this.repository.findAll():ie(()=>new Error("Repository not initialized"))}getElementsByType(t,e){return(e!==void 0?this.getElementsByPage(e):this.getAllElements()).pipe(pt(i=>i.filter(a=>a.type===t)))}clearAll(){return this.repository?this.repository.clear():ie(()=>new Error("Repository not initialized"))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ut=class o{undoStack=[];redoStack=[];maxStackSize=50;canUndoSubject=new we(!1);canRedoSubject=new we(!1);saveState(t,e){let n={state:JSON.parse(JSON.stringify(t)),timestamp:Date.now(),description:e};this.undoStack.push(n),this.undoStack.length>this.maxStackSize&&this.undoStack.shift(),this.redoStack=[],this.updateCanUndoRedo()}undo(){if(this.undoStack.length===0)return null;let t=this.undoStack.pop();this.redoStack.push(t);let e=this.undoStack[this.undoStack.length-1];return this.updateCanUndoRedo(),e?e.state:null}redo(){if(this.redoStack.length===0)return null;let t=this.redoStack.pop();return this.undoStack.push(t),this.updateCanUndoRedo(),t.state}canUndo(){return this.undoStack.length>1}canRedo(){return this.redoStack.length>0}canUndo$(){return this.canUndoSubject.asObservable()}canRedo$(){return this.canRedoSubject.asObservable()}getUndoStackSize(){return this.undoStack.length}getRedoStackSize(){return this.redoStack.length}clear(){this.undoStack=[],this.redoStack=[],this.updateCanUndoRedo()}setMaxStackSize(t){this.maxStackSize=t}getCurrentState(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1].state:null}getHistory(){return[...this.undoStack]}updateCanUndoRedo(){this.canUndoSubject.next(this.canUndo()),this.canRedoSubject.next(this.canRedo())}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Yt=class o{editorState$=new we({isVisible:!1,currentElement:null,config:null,position:null});showEditor(t,e){let n=t?this.elementToConfig(t):this.getDefaultConfig();this.editorState$.next({isVisible:!0,currentElement:t||null,config:n,position:e||null})}hideEditor(){this.editorState$.next({isVisible:!1,currentElement:null,config:null,position:null})}isEditorVisible(){return this.editorState$.value.isVisible}getCurrentElement(){return this.editorState$.value.currentElement}getCurrentConfig(){return this.editorState$.value.config}getEditorState$(){return this.editorState$.asObservable()}updateConfig(t){let e=this.editorState$.value;e.config&&this.editorState$.next(pe(Y({},e),{config:Y(Y({},e.config),t)}))}elementToConfig(t){return{content:t.content,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,color:t.color,textAlign:t.textAlign,lineHeight:t.lineHeight}}configToElement(t,e){return Y({type:"text",id:e?.id||this.generateId(),x:e?.x||0,y:e?.y||0,width:e?.width||200,height:e?.height||50,content:t.content,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStyle:t.fontStyle,color:t.color,textAlign:t.textAlign,lineHeight:t.lineHeight},e)}getDefaultConfig(){return{content:"",fontSize:16,fontFamily:"Arial",color:"#000000",textAlign:"left"}}generateId(){return`text-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}reset(){this.hideEditor()}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Xt=class o{pdfToScreen(t,e){let n=e.scale||1;return{x:t.x*n,y:(e.height-t.y)*n}}screenToPdf(t,e){let n=e.scale||1;return{x:t.x/n,y:e.height-t.y/n}}relativeToAbsolute(t,e){return{x:t.x*e.width,y:t.y*e.height}}absoluteToRelative(t,e){return{x:t.x/e.width,y:t.y/e.height}}validateCoordinate(t,e){return t.x>=0&&t.x<=e.width&&t.y>=0&&t.y<=e.height}clampCoordinate(t,e){return{x:Math.max(0,Math.min(t.x,e.width)),y:Math.max(0,Math.min(t.y,e.height))}}distance(t,e){let n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}rotate(t,e,n={x:0,y:0}){let i=e*Math.PI/180,a=Math.cos(i),d=Math.sin(i),g=t.x-n.x,m=t.y-n.y;return{x:g*a-m*d+n.x,y:g*d+m*a+n.y}}scale(t,e,n){return{x:t.x*e,y:t.y*n}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var lt=class o{getSupportedType(){return"text"}create(t){let e=this.getDefaults();return Y({id:this.generateId(),type:"text",x:t.position.x,y:t.position.y,width:t.size?.width||e.width,height:t.size?.height||e.height,content:e.content,fontSize:e.fontSize,fontFamily:e.fontFamily,color:e.color,textAlign:e.textAlign},t.defaults)}getDefaults(){return{width:200,height:50,content:"New Text",fontSize:16,fontFamily:"Arial",fontWeight:"normal",fontStyle:"normal",color:"#000000",textAlign:"left",lineHeight:1.2,opacity:1,rotation:0,zIndex:1}}validate(t){return!!(t.id&&t.type==="text"&&t.content!==void 0&&t.fontSize>0&&t.fontFamily&&t.color&&t.x!==void 0&&t.y!==void 0&&t.width>0&&t.height>0)}generateId(){return`text-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var ct=class o{getSupportedType(){return"image"}create(t){let e=this.getDefaults();return Y({id:this.generateId(),type:"image",x:t.position.x,y:t.position.y,width:t.size?.width||e.width,height:t.size?.height||e.height,src:e.src,alt:e.alt,objectFit:e.objectFit},t.defaults)}getDefaults(){return{width:150,height:150,src:"",alt:"New Image",objectFit:"contain",opacity:1,rotation:0,zIndex:1}}validate(t){return!!(t.id&&t.type==="image"&&t.src&&t.x!==void 0&&t.y!==void 0&&t.width>0&&t.height>0)}generateId(){return`image-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var dt=class o{getSupportedType(){return"shape"}create(t){let e=this.getDefaults();return Y({id:this.generateId(),type:"shape",x:t.position.x,y:t.position.y,width:t.size?.width||e.width,height:t.size?.height||e.height,shapeType:e.shapeType,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,fillColor:e.fillColor},t.defaults)}getDefaults(){return{width:100,height:100,shapeType:"rectangle",strokeColor:"#000000",strokeWidth:2,fillColor:"transparent",opacity:1,rotation:0,zIndex:1}}validate(t){return!!(t.id&&t.type==="shape"&&t.shapeType&&t.x!==void 0&&t.y!==void 0&&t.width>0&&t.height>0)}generateId(){return`shape-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var qt=class o{constructor(t,e,n){this.textFactory=t;this.imageFactory=e;this.shapeFactory=n;this.registerFactory(t),this.registerFactory(e),this.registerFactory(n)}factories=new Map;registerFactory(t){let e=t.getSupportedType();this.factories.set(e,t)}unregisterFactory(t){this.factories.delete(t)}createElement(t,e){let n=this.factories.get(t);if(!n)throw new Error(`No factory registered for type: ${t}`);let i=n.create(e);if(!n.validate(i))throw new Error(`Invalid element created for type: ${t}`);return i}getDefaults(t){let e=this.factories.get(t);if(!e)throw new Error(`No factory registered for type: ${t}`);return e.getDefaults()}validate(t){let e=this.factories.get(t.type);return e?e.validate(t):!1}getSupportedTypes(){return Array.from(this.factories.keys())}supportsType(t){return this.factories.has(t)}static \u0275fac=function(e){return new(e||o)(Ie(lt),Ie(ct),Ie(dt))};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Kt=class o{pdfDataProvider;setPdfDataProvider(t){this.pdfDataProvider=t}create(t,e){return this.pdfDataProvider?new Ae(n=>{this.pdfDataProvider.addElementToPage(e.pageNumber,t).subscribe({next:()=>{n.next(t),n.complete()},error:i=>n.error(i)})}):ie(()=>new Error("PDF data provider not initialized"))}findById(t){return this.pdfDataProvider?new Ae(e=>{this.pdfDataProvider.getPages().subscribe({next:n=>{for(let i of n){let a=i.elements?.find(d=>d.id===t);if(a){e.next(a),e.complete();return}}e.next(null),e.complete()},error:n=>e.error(n)})}):ie(()=>new Error("PDF data provider not initialized"))}findByPage(t){return this.pdfDataProvider?new Ae(e=>{this.pdfDataProvider.getPageAt(t-1).subscribe({next:n=>{e.next(n?.elements||[]),e.complete()},error:n=>e.error(n)})}):ie(()=>new Error("PDF data provider not initialized"))}update(t){return this.pdfDataProvider?new Ae(e=>{this.findById(t.elementId).subscribe({next:n=>{if(!n){e.error(new Error(`Element not found: ${t.elementId}`));return}this.pdfDataProvider.getPages().subscribe({next:i=>{for(let a=0;a<i.length;a++)if(i[a].elements?.find(g=>g.id===t.elementId)){this.pdfDataProvider.updateElementInPage(a+1,t.elementId,t.changes).subscribe({next:()=>{let g=Y(Y({},n),t.changes);e.next(g),e.complete()},error:g=>e.error(g)});return}e.error(new Error(`Element not found in any page: ${t.elementId}`))},error:i=>e.error(i)})},error:n=>e.error(n)})}):ie(()=>new Error("PDF data provider not initialized"))}delete(t){return this.pdfDataProvider?new Ae(e=>{this.pdfDataProvider.getPages().subscribe({next:n=>{for(let i=0;i<n.length;i++){let a=n[i].elements?.findIndex(d=>d.id===t);if(a!==void 0&&a>=0){this.pdfDataProvider.removeElementFromPage(i+1,t).subscribe({next:()=>{e.next(!0),e.complete()},error:d=>e.error(d)});return}}e.next(!1),e.complete()},error:n=>e.error(n)})}):ie(()=>new Error("PDF data provider not initialized"))}bulkCreate(t,e){let n=t.map(i=>this.create(i,{position:{x:i.x,y:i.y},pageNumber:e}));return new Ae(i=>{let a=[],d=0;n.forEach(g=>{g.subscribe({next:m=>{a.push(m),d++,d===n.length&&(i.next(a),i.complete())},error:m=>i.error(m)})})})}bulkDelete(t){let e=t.map(n=>this.delete(n));return new Ae(n=>{let i=0,a=!0;e.forEach(d=>{d.subscribe({next:g=>{g||(a=!1),i++,i===e.length&&(n.next(a),n.complete())},error:g=>n.error(g)})})})}findAll(){return this.pdfDataProvider?new Ae(t=>{this.pdfDataProvider.getPages().subscribe({next:e=>{let n=[];e.forEach(i=>{i.elements&&n.push(...i.elements)}),t.next(n),t.complete()},error:e=>t.error(e)})}):ie(()=>new Error("PDF data provider not initialized"))}clear(){return this.pdfDataProvider?new Ae(t=>{this.pdfDataProvider.getPages().subscribe({next:e=>{e.forEach(n=>{n.elements=[]}),t.next(!0),t.complete()},error:e=>t.error(e)})}):ie(()=>new Error("PDF data provider not initialized"))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Jt=class o{STORAGE_KEY="docs_mobile_elements";cache=new Map;constructor(){this.loadFromStorage()}create(t,e){try{let n=this.cache.get(e.pageNumber)||[];return n.push(t),this.cache.set(e.pageNumber,n),this.saveToStorage(),Be(t)}catch(n){return ie(()=>n)}}findById(t){try{for(let e of this.cache.values()){let n=e.find(i=>i.id===t);if(n)return Be(n)}return Be(null)}catch(e){return ie(()=>e)}}findByPage(t){try{let e=this.cache.get(t)||[];return Be([...e])}catch(e){return ie(()=>e)}}update(t){try{for(let[e,n]of this.cache.entries()){let i=n.findIndex(a=>a.id===t.elementId);if(i>=0){let a=Y(Y({},n[i]),t.changes);return n[i]=a,this.cache.set(e,n),t.skipHistory||this.saveToStorage(),Be(a)}}return ie(()=>new Error(`Element not found: ${t.elementId}`))}catch(e){return ie(()=>e)}}delete(t){try{for(let[e,n]of this.cache.entries()){let i=n.findIndex(a=>a.id===t);if(i>=0)return n.splice(i,1),this.cache.set(e,n),this.saveToStorage(),Be(!0)}return Be(!1)}catch(e){return ie(()=>e)}}bulkCreate(t,e){try{let n=this.cache.get(e)||[];return n.push(...t),this.cache.set(e,n),this.saveToStorage(),Be([...t])}catch(n){return ie(()=>n)}}bulkDelete(t){try{let e=0;for(let[n,i]of this.cache.entries()){let a=i.filter(g=>!t.includes(g.id)),d=i.length-a.length;e+=d,d>0&&this.cache.set(n,a)}return this.saveToStorage(),Be(e===t.length)}catch(e){return ie(()=>e)}}findAll(){try{let t=[];for(let e of this.cache.values())t.push(...e);return Be(t)}catch(t){return ie(()=>t)}}clear(){try{return this.cache.clear(),localStorage.removeItem(this.STORAGE_KEY),Be(!0)}catch(t){return ie(()=>t)}}loadFromStorage(){try{let t=localStorage.getItem(this.STORAGE_KEY);t&&JSON.parse(t).forEach(n=>{this.cache.set(n.pageNumber,n.elements)})}catch(t){console.warn("Failed to load from storage:",t)}}saveToStorage(){try{let t=[];this.cache.forEach((e,n)=>{t.push({pageNumber:n,elements:e})}),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(t){console.warn("Failed to save to storage:",t)}}getElementCount(t){return(this.cache.get(t)||[]).length}getTotalElementCount(){let t=0;return this.cache.forEach(e=>{t+=e.length}),t}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var ri=class o{constructor(){}static \u0275fac=function(e){return new(e||o)};static \u0275mod=xn({type:o});static \u0275inj=hn({providers:[at,Lt,Rt,jt,Wt,Gt,Ht,Ut,Yt,Xt,qt,lt,ct,dt,Kt,Jt],imports:[ne,Ne,St,wt,Et,It,Bt,Vt,$t,ne,Ne]})};var Zt=class o{constructor(t){this.sanitizer=t}transform(t){return t?this.sanitizer.bypassSecurityTrustHtml(t):""}static \u0275fac=function(e){return new(e||o)(ge(bt,16))};static \u0275pipe=xt({name:"sanitizeHtml",type:o,pure:!0})};var _l=(o,t)=>t.id||o;function xl(o,t){if(o&1&&(N(0,"div",20)(1,"span",21),l(2,"\uCC44\uC6B0\uAE30:"),W(),N(3,"div",22),Xe(4,"div",23),N(5,"span",24),l(6),W()()()),o&2){let e=p(2).$implicit;c(4),H("background-color",e.fill_color_hex),c(2),le("",e.fill_color," (",e.fill_color_hex,")")}}function Pl(o,t){if(o&1&&(N(0,"div",20)(1,"span",21),l(2,"\uD14C\uB450\uB9AC:"),W(),N(3,"div",22),Xe(4,"div",23),N(5,"span",24),l(6),W()()()),o&2){let e=p(2).$implicit;c(4),H("background-color",e.stroke_color_hex),c(2),le("",e.stroke_color," (",e.stroke_color_hex,")")}}function bl(o,t){if(o&1&&(N(0,"div",15)(1,"div",16),l(2,"\u{1F3A8} \uC0C9\uC0C1"),W(),ce(3,xl,7,4,"div",20),ce(4,Pl,7,4,"div",20),W()),o&2){let e=p().$implicit;c(3),de(e.fill_color?3:-1),c(),de(e.stroke_color?4:-1)}}function vl(o,t){if(o&1&&(N(0,"div",12)(1,"div",13)(2,"strong"),l(3),W(),N(4,"span",14),l(5),W()(),N(6,"div",15)(7,"div",16),l(8,"\u{1F4D0} \uC88C\uD45C & \uD06C\uAE30"),W(),N(9,"div",17)(10,"span"),l(11),W(),N(12,"span"),l(13),W(),N(14,"span"),l(15),W(),N(16,"span"),l(17),W()(),N(18,"div",17)(19,"span",18),l(20,"\uBA74\uC801:"),W(),N(21,"span",19),l(22),W()()(),ce(23,bl,5,2,"div",15),W()),o&2){let e=t.$implicit,n=p(3);c(3),M("Rectangle #",e.index),c(2),M("\uD398\uC774\uC9C0 ",n.currentPage),c(6),M("X: ",e.x.toFixed(2),"pt"),c(2),M("Y: ",e.y.toFixed(2),"pt"),c(2),M("W: ",e.width.toFixed(2),"pt"),c(2),M("H: ",e.height.toFixed(2),"pt"),c(5),M("",e.area.toFixed(2)," pt\xB2"),c(),de(e.fill_color||e.stroke_color?23:-1)}}function yl(o,t){if(o&1&&(N(0,"div",9)(1,"div",10)(2,"h5"),l(3,"\u{1F7E6} \uBCA1\uD130 \uADF8\uB798\uD53D"),W(),N(4,"span",11),l(5),W()(),je(6,vl,24,8,"div",12,bn),W()),o&2){let e=p(2);c(5),M("",e.getVectorCount(),"\uAC1C"),c(),We(e.getRectangles())}}function Ml(o,t){if(o&1&&(N(0,"div",15)(1,"div",16),l(2,"\u{1F4C4} \uC6D0\uBCF8 PDF Transform Matrix"),W(),N(3,"div",28)(4,"div",29)(5,"span",30),l(6,"scaleX (\uB108\uBE44):"),W(),N(7,"span",31),l(8),W()(),N(9,"div",29)(10,"span",30),l(11,"skewY (Y\uAE30\uC6B8\uC784):"),W(),N(12,"span",31),l(13),W()(),N(14,"div",29)(15,"span",30),l(16,"skewX (X\uAE30\uC6B8\uC784):"),W(),N(17,"span",31),l(18),W()(),N(19,"div",29)(20,"span",30),l(21,"scaleY (\uB192\uC774):"),W(),N(22,"span",31),l(23),W()(),N(24,"div",29)(25,"span",30),l(26,"translateX (X\uC704\uCE58):"),W(),N(27,"span",31),l(28),W()(),N(29,"div",29)(30,"span",30),l(31,"translateY (Y\uC704\uCE58):"),W(),N(32,"span",31),l(33),W()()(),N(34,"div",32),l(35),W()()),o&2){let e=p(2).$implicit,n=p(3);c(8),M("",e.transform[0].toFixed(6)," pt"),c(5),M("",e.transform[1].toFixed(6)," pt"),c(5),M("",e.transform[2].toFixed(6)," pt"),c(5),M("",e.transform[3].toFixed(6)," pt"),c(5),M("",e.transform[4].toFixed(6)," pt"),c(5),M("",e.transform[5].toFixed(6)," pt"),c(2),M(" [",n.formatTransformArray(e.transform),"] ")}}function Ol(o,t){if(o&1&&(N(0,"div",25)(1,"div",13)(2,"strong"),l(3),W(),N(4,"span",14),l(5),W()(),N(6,"div",15)(7,"div",16),l(8,"\u{1F3AF} \uACC4\uC0B0\uB41C \uC88C\uD45C (Canvas)"),W(),N(9,"div",17)(10,"span"),l(11),W(),N(12,"span"),l(13),W(),N(14,"span"),l(15),W(),N(16,"span"),l(17),W()()(),ce(18,Ml,36,7,"div",15),N(19,"div",26)(20,"div",27)(21,"span",18),l(22,"\u{1F4D0} \uC88C\uD45C\uACC4:"),W(),N(23,"span",19),l(24,"PDF (\uC6D0\uC810: \uC67C\uCABD \uD558\uB2E8, Y\u2191)"),W()(),N(25,"div",27)(26,"span",18),l(27,"\u{1F4CF} \uB2E8\uC704:"),W(),N(28,"span",19),l(29,"pt (1pt = 1/72 inch)"),W()()()()),o&2){let e=p().$implicit,n=p(3);c(3),T(e.id),c(2),M("\uD398\uC774\uC9C0 ",n.currentPage),c(6),M("X: ",e.x.toFixed(2),"pt"),c(2),M("Y: ",e.y.toFixed(2),"pt"),c(2),M("W: ",e.width.toFixed(2),"pt"),c(2),M("H: ",e.height.toFixed(2),"pt"),c(),de(e.transform&&e.transform.length===6?18:-1)}}function wl(o,t){if(o&1&&ce(0,Ol,30,7,"div",25),o&2){let e=t.$implicit;de(e.type==="image"?0:-1)}}function Dl(o,t){if(o&1&&(N(0,"div",9)(1,"div",10)(2,"h5"),l(3,"\u{1F5BC}\uFE0F \uC774\uBBF8\uC9C0"),W(),N(4,"span",11),l(5),W()(),je(6,wl,1,1,null,null,_l),W()),o&2){let e=p(2);c(5),M("",e.getImageCount(),"\uAC1C"),c(),We(e.elements)}}function Sl(o,t){if(o&1){let e=L();N(0,"div",1),fe("click",function(){b(e);let i=p();return v(i.onClose())}),N(1,"div",2),fe("click",function(i){return b(e),v(i.stopPropagation())}),N(2,"div",3)(3,"h4"),l(4,"\u{1F4CD} \uB9AC\uC18C\uC2A4 \uC88C\uD45C \uC815\uBCF4"),W(),N(5,"div",4)(6,"button",5),fe("click",function(){b(e);let i=p();return v(i.copyDebugInfo())}),l(7," \u{1F41B} \uB514\uBC84\uADF8 "),W(),N(8,"button",6),fe("click",function(){b(e);let i=p();return v(i.copyCoordinatesAsJson())}),l(9," \u{1F4CB} \uBCF5\uC0AC "),W(),N(10,"button",7),fe("click",function(){b(e);let i=p();return v(i.onClose())}),l(11,"\u2715"),W()()(),N(12,"div",8),ce(13,yl,8,1,"div",9),ce(14,Dl,8,1,"div",9),W()()()}if(o&2){let e=p();c(13),de(e.hasVectorData()?13:-1),c(),de(e.hasImageElements()?14:-1)}}var Qt=class o{visible=!1;elements=[];currentPage=1;analysisData=null;close=new $;snackbar=J($e);_cachedRectangles=null;_lastAnalysisData=null;_lastCurrentPage=-1;get rectangles(){return(this._lastAnalysisData!==this.analysisData||this._lastCurrentPage!==this.currentPage)&&(this._cachedRectangles=this.extractRectangles(),this._lastAnalysisData=this.analysisData,this._lastCurrentPage=this.currentPage),this._cachedRectangles||[]}onClose(){this.close.emit()}formatTransformArray(t){return!t||t.length!==6?"":t.map(e=>e.toFixed(2)).join(", ")}hasVectorData(){return this.rectangles.length>0}getVectorCount(){return this.rectangles.length}extractRectangles(){if(!this.analysisData?.vectorInfo?.pageDetails)return console.warn("\u26A0\uFE0F [extractRectangles] vectorInfo.pageDetails \uC5C6\uC74C"),[];let t=this.analysisData.vectorInfo.pageDetails.find(e=>e.pageNumber===this.currentPage);return t?.debugInfo?.rectangles_detail?t.debugInfo.rectangles_detail:t?.operations&&t.operations.length>0?this.extractRectanglesFromOperations(t.operations):(console.warn("\u26A0\uFE0F [extractRectangles] \uB370\uC774\uD130 \uC5C6\uC74C"),[])}extractRectanglesFromOperations(t){let e=[],n=null,i=null,a=null,d=null,g=[];for(let m of t){if(m.fnCode===31){g.push({fill:n,fillHex:i,stroke:a,strokeHex:d});continue}if(m.fnCode===32){let h=g.pop();h&&(n=h.fill,i=h.fillHex,a=h.stroke,d=h.strokeHex);continue}if(m.fnCode===59&&m.args){let h=m.args,f=h[0]||h.r||0,C=h[1]||h.g||0,_=h[2]||h.b||0,y=f<=1?Math.round(f*255):Math.round(f),S=C<=1?Math.round(C*255):Math.round(C),D=_<=1?Math.round(_*255):Math.round(_);n=`rgb(${y},${S},${D})`,i=`#${y.toString(16).padStart(2,"0")}${S.toString(16).padStart(2,"0")}${D.toString(16).padStart(2,"0")}`}if(m.fnCode===60&&m.args){let h=m.args,f=h[0]||h.r||0,C=h[1]||h.g||0,_=h[2]||h.b||0,y=f<=1?Math.round(f*255):Math.round(f),S=C<=1?Math.round(C*255):Math.round(C),D=_<=1?Math.round(_*255):Math.round(_);a=`rgb(${y},${S},${D})`,d=`#${y.toString(16).padStart(2,"0")}${S.toString(16).padStart(2,"0")}${D.toString(16).padStart(2,"0")}`}if(m.fnCode===91&&m.args&&Array.isArray(m.args[0])&&m.args[0].includes(19)){let f=m.args[1];if(f&&f.length>=4){let C={index:e.length+1,x:f[0],y:f[1],width:f[2],height:f[3],area:f[2]*f[3]};n&&(C.fill_color=n,C.fill_color_hex=i),a&&(C.stroke_color=a,C.stroke_color_hex=d),e.push(C)}}}return e}getRectangles(){return this.rectangles}hasImageElements(){return this.elements.some(t=>t.type==="image")}getImageCount(){return this.elements.filter(t=>t.type==="image").length}getOriginalTransform(t){if(!this.analysisData?.imageInfo?.images)return console.warn("\u26A0\uFE0F [getOriginalTransform] analysisData.imageInfo.images \uC5C6\uC74C"),null;let n=this.elements.filter(g=>g.type==="image").findIndex(g=>g.id===t.id);if(n===-1)return console.warn("\u26A0\uFE0F [getOriginalTransform] element\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C"),null;let i=this.analysisData.imageInfo.images.find(g=>g.pageNumber===this.currentPage);if(!i?.images||n>=i.images.length)return console.warn("\u26A0\uFE0F [getOriginalTransform] \uBD84\uC11D \uB370\uC774\uD130\uC5D0\uC11C \uC774\uBBF8\uC9C0\uB97C \uCC3E\uC744 \uC218 \uC5C6\uC74C",{elementIndex:n,availableImages:i?.images?.length||0}),null;let a=i.images[n];return a.rawTransform||a.transform||null}copyDebugInfo(){let t={timestamp:new Date().toISOString(),elements:this.elements.map(n=>({id:n.id,type:n.type,hasTransform:!!n.transform,canvasCoordinates:{x:n.x,y:n.y,width:n.width,height:n.height}})),analysisData:{exists:!!this.analysisData,hasImageInfo:!!this.analysisData?.imageInfo,images:this.analysisData?.imageInfo?.images?.map(n=>({pageNumber:n.pageNumber,imageCount:n.images?.length||0,images:n.images?.map(i=>({name:i.name,type:i.type,hasRawTransform:!!i.rawTransform,hasTransform:!!i.transform,hasWidth:i.width!==void 0,hasHeight:i.height!==void 0,hasX:i.x!==void 0,hasY:i.y!==void 0,rawTransformPreview:i.rawTransform?`[${i.rawTransform.slice(0,6).map(a=>a.toFixed(2)).join(", ")}]`:null}))}))||[]}},e=JSON.stringify(t,null,2);navigator.clipboard.writeText(e).then(()=>{this.snackbar.showSuccess("\u{1F41B} \uB514\uBC84\uADF8 \uC815\uBCF4\uAC00 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4")},n=>{this.snackbar.showError("\uBCF5\uC0AC \uC2E4\uD328"),console.error("\u274C \uBCF5\uC0AC \uC2E4\uD328:",n)})}copyCoordinatesAsJson(){let t=[],e=[],n=this.analysisData?.pageWidth||595.28,i=this.analysisData?.pageHeight||841.89,a=this.elements.filter(f=>f.type==="image").map(f=>{let C=this.getOriginalTransform(f),y=this.elements.filter(x=>x.type==="image").findIndex(x=>x.id===f.id),S=this.analysisData?.imageInfo?.images?.find(x=>x.pageNumber===this.currentPage),D=S?.images?.[y];if(t.push({elementId:f.id,elementIndex:y,hasAnalysisData:!!this.analysisData,hasImageInfo:!!this.analysisData?.imageInfo,hasImages:!!this.analysisData?.imageInfo?.images,currentPageNumber:this.currentPage,foundPageData:!!S,pageImageCount:S?.images?.length||0,imgDataName:D?.name||"N/A",hasRawTransform:!!D?.rawTransform,transformResult:C?"SUCCESS":"NULL",rawTransformPreview:D?.rawTransform||null,elementSize:{width:f.width,height:f.height,x:f.x,y:f.y},analysisSize:D?{width:D.width,height:D.height,x:D.x,y:D.y,originalWidth:D.originalWidth,originalHeight:D.originalHeight}:null}),D){let x=D.x||0,P=D.y||0,O=D.width||f.width,k=D.height||f.height,F=x+O,j=P+k,V=x<0||P<0||F>n||j>i,A=[];(x<0||P<0)&&A.push("\uC774\uBBF8\uC9C0\uAC00 \uD398\uC774\uC9C0 \uC67C\uCABD/\uD558\uB2E8\uC744 \uBC97\uC5B4\uB0A8"),F>n&&A.push(`\uC624\uB978\uCABD \uACBD\uACC4 \uCD08\uACFC (${F.toFixed(1)} > ${n})`),j>i&&A.push(`\uC0C1\uB2E8 \uACBD\uACC4 \uCD08\uACFC (${j.toFixed(1)} > ${i})`),e.push({imageName:D.name,willBeRendered:!V,pdfCoordinates:{x:parseFloat(x.toFixed(2)),y:parseFloat(P.toFixed(2)),width:parseFloat(O.toFixed(2)),height:parseFloat(k.toFixed(2))},boundingBox:{left:parseFloat(x.toFixed(2)),bottom:parseFloat(P.toFixed(2)),right:parseFloat(F.toFixed(2)),top:parseFloat(j.toFixed(2))},pageSize:{width:n,height:i},isOutOfBounds:V,warnings:A.length>0?A:null})}return{id:f.id,page:this.currentPage,canvas_coordinates:{x:parseFloat(f.x.toFixed(2)),y:parseFloat(f.y.toFixed(2)),width:parseFloat(f.width.toFixed(2)),height:parseFloat(f.height.toFixed(2))},pdf_transform_matrix:C?{scaleX:parseFloat(C[0].toFixed(6)),skewY:parseFloat(C[1].toFixed(6)),skewX:parseFloat(C[2].toFixed(6)),scaleY:parseFloat(C[3].toFixed(6)),translateX:parseFloat(C[4].toFixed(6)),translateY:parseFloat(C[5].toFixed(6)),array:C.map(x=>parseFloat(x.toFixed(6)))}:null}}),g=this.getRectangles().map(f=>({index:f.index,page:this.currentPage,coordinates:{x:parseFloat(f.x.toFixed(2)),y:parseFloat(f.y.toFixed(2)),width:parseFloat(f.width.toFixed(2)),height:parseFloat(f.height.toFixed(2)),area:parseFloat(f.area.toFixed(2))},colors:{fill:f.fill_color||null,fill_hex:f.fill_color_hex||null,stroke:f.stroke_color||null,stroke_hex:f.stroke_color_hex||null}})),m={timestamp:new Date().toISOString(),page:this.currentPage,images:{count:a.length,data:a},vectors:{rectangles:{count:g.length,data:g}},pdfPlacementSimulation:e,diagnostics:t},h=JSON.stringify(m,null,2);navigator.clipboard.writeText(h).then(()=>{this.snackbar.showSuccess("\u{1F4CB} \uB9AC\uC18C\uC2A4 \uC88C\uD45C \uC815\uBCF4\uAC00 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4")},f=>{this.snackbar.showError("\uBCF5\uC0AC \uC2E4\uD328"),console.error("\u274C \uBCF5\uC0AC \uC2E4\uD328:",f)})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=ae({type:o,selectors:[["app-image-coordinates-modal"]],inputs:{visible:"visible",elements:"elements",currentPage:"currentPage",analysisData:"analysisData"},outputs:{close:"close"},decls:1,vars:1,consts:[[1,"image-coordinates-modal-overlay"],[1,"image-coordinates-modal-overlay",3,"click"],[1,"coordinates-modal-content",3,"click"],[1,"modal-header"],[1,"header-actions"],["title","\uB514\uBC84\uADF8 \uC815\uBCF4 \uBCF5\uC0AC",1,"btn-debug",3,"click"],["title","JSON\uC73C\uB85C \uBCF5\uC0AC",1,"btn-copy",3,"click"],["title","\uB2EB\uAE30 (ESC)",1,"btn-close",3,"click"],[1,"modal-body"],[1,"resource-section"],[1,"section-header"],[1,"item-count"],[1,"coord-item-detailed","vector-item"],[1,"coord-header"],[1,"page-badge"],[1,"coord-section"],[1,"section-title"],[1,"coord-values"],[1,"info-label"],[1,"info-value"],[1,"color-row"],[1,"color-label"],[1,"color-info"],[1,"color-swatch"],[1,"color-value"],[1,"coord-item-detailed","image-item"],[1,"coord-section","coord-info"],[1,"info-row"],[1,"transform-matrix"],[1,"matrix-row"],[1,"label"],[1,"value"],[1,"matrix-array"]],template:function(e,n){e&1&&ce(0,Sl,15,2,"div",0),e&2&&de(n.visible?0:-1)},dependencies:[ne],styles:[".image-coordinates-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.coordinates-modal-content[_ngcontent-%COMP%]{background:#1e1e23fa;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px;width:90%;max-width:600px;max-height:85vh;display:flex;flex-direction:column;box-shadow:0 24px 48px #00000080;border:1px solid rgba(255,255,255,.1);animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid rgba(255,255,255,.1)}.modal-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#fff}.modal-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.modal-header[_ngcontent-%COMP%]   .btn-debug[_ngcontent-%COMP%]{background:#a855f733;border:1px solid rgba(168,85,247,.4);color:#c084fc;padding:6px 12px;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:4px}.modal-header[_ngcontent-%COMP%]   .btn-debug[_ngcontent-%COMP%]:hover{background:#a855f74d;border-color:#a855f799;color:#e9d5ff;transform:translateY(-1px)}.modal-header[_ngcontent-%COMP%]   .btn-debug[_ngcontent-%COMP%]:active{transform:translateY(0)}.modal-header[_ngcontent-%COMP%]   .btn-copy[_ngcontent-%COMP%]{background:#3b82f633;border:1px solid rgba(59,130,246,.4);color:#60a5fa;padding:6px 12px;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:4px}.modal-header[_ngcontent-%COMP%]   .btn-copy[_ngcontent-%COMP%]:hover{background:#3b82f64d;border-color:#3b82f699;color:#93c5fd;transform:translateY(-1px)}.modal-header[_ngcontent-%COMP%]   .btn-copy[_ngcontent-%COMP%]:active{transform:translateY(0)}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff9;font-size:24px;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:4px;transition:all .2s}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.modal-body[_ngcontent-%COMP%]{padding:20px 24px;overflow-y:auto;flex:1}.resource-section[_ngcontent-%COMP%]{margin-bottom:24px}.resource-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.resource-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:8px;border-bottom:2px solid rgba(255,255,255,.1)}.resource-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:600;color:#fff}.resource-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{font-size:12px;background:#ffffff1a;color:#fff;padding:4px 10px;border-radius:12px;font-weight:500}.vector-item[_ngcontent-%COMP%]{background:#8b5cf614;border:1px solid rgba(139,92,246,.3)}.vector-item[_ngcontent-%COMP%]   .coord-header[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#c084fc}.vector-item[_ngcontent-%COMP%]   .page-badge[_ngcontent-%COMP%]{background:#8b5cf64d;color:#e9d5ff}.vector-item[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:#c084fc;border-left-color:#8b5cf6}.image-item[_ngcontent-%COMP%]{background:#1976d214;border:1px solid rgba(25,118,210,.3)}.image-item[_ngcontent-%COMP%]   .coord-header[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#64b5f6}.image-item[_ngcontent-%COMP%]   .page-badge[_ngcontent-%COMP%]{background:#1976d24d;color:#90caf9}.image-item[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:#90caf9;border-left-color:#1976d2}.color-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 0}.color-row[_ngcontent-%COMP%]   .color-label[_ngcontent-%COMP%]{font-size:10px;color:#c084fc;font-weight:500;min-width:50px}.color-row[_ngcontent-%COMP%]   .color-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1}.color-row[_ngcontent-%COMP%]   .color-swatch[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:4px;border:1px solid rgba(255,255,255,.2);box-shadow:0 2px 4px #0003}.color-row[_ngcontent-%COMP%]   .color-value[_ngcontent-%COMP%]{font-size:10px;color:#fff;font-family:Courier New,monospace}.coord-item-detailed[_ngcontent-%COMP%]{background:#1976d214;border:1px solid rgba(25,118,210,.3);border-radius:8px;padding:16px;margin-bottom:16px}.coord-item-detailed[_ngcontent-%COMP%]:last-child{margin-bottom:0}.coord-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;padding-bottom:10px;border-bottom:1px solid rgba(255,255,255,.1)}.coord-header[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:12px;color:#64b5f6;font-family:Courier New,monospace;font-weight:600}.coord-header[_ngcontent-%COMP%]   .page-badge[_ngcontent-%COMP%]{font-size:10px;background:#1976d24d;color:#90caf9;padding:3px 8px;border-radius:10px;font-weight:500}.coord-section[_ngcontent-%COMP%]{margin-bottom:12px}.coord-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.coord-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:#90caf9;margin-bottom:8px;padding-left:4px;border-left:3px solid #1976d2}.coord-values[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:6px;padding:8px;background:#0003;border-radius:4px}.coord-values[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:#fff;font-family:Courier New,monospace}.transform-matrix[_ngcontent-%COMP%]{background:#0000004d;border-radius:4px;padding:10px}.transform-matrix[_ngcontent-%COMP%]   .matrix-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:4px 0}.transform-matrix[_ngcontent-%COMP%]   .matrix-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:10px;color:#90caf9;font-family:Courier New,monospace;font-weight:500}.transform-matrix[_ngcontent-%COMP%]   .matrix-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:11px;color:#fff;font-family:Courier New,monospace;font-weight:600;text-align:right}.matrix-array[_ngcontent-%COMP%]{margin-top:8px;padding:6px 10px;background:#1976d226;border-radius:4px;font-size:10px;color:#64b5f6;font-family:Courier New,monospace;word-break:break-all;line-height:1.4}.coord-info[_ngcontent-%COMP%]{background:#ff980014;border-left:3px solid #ff9800;padding:8px 10px;border-radius:4px}.coord-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:3px 0}.coord-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:10px;color:#ffb74d;font-weight:500}.coord-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:10px;color:#ffe0b2;font-family:Courier New,monospace}"]})};var El=()=>[],Il=(o,t)=>t.pageNumber||o,kl=(o,t)=>t.id||o;function Tl(o,t){if(o&1&&(r(0,"div",1)(1,"div",5),R(2,"div",6),r(3,"div",7)(4,"h3"),l(5),s(),r(6,"div",8),R(7,"div",9),s(),r(8,"p",10),l(9),s()()()()),o&2){let e=p();c(5),T(e.creationStep),c(2),H("width",e.creationProgress,"%"),c(2),M("",e.creationProgress,"%")}}function Fl(o,t){if(o&1){let e=L();r(0,"div",19),w("mousedown",function(i){b(e);let a=p().$implicit,d=p(3);return v(d.startElementDrag(i,a))})("click",function(i){b(e);let a=p().$implicit,d=p(3);return i.stopPropagation(),v(d.onElementClick(a))}),r(1,"span",20),l(2),s()()}if(o&2){let e=p().$implicit,n=p(3);H("left",e.x,"px")("top",e.y,"px")("width",e.width,"px")("height",e.height,"px")("transform","rotate("+(e.rotation||0)+"deg)")("opacity",e.opacity||1),q("selected",(n.selectedElement==null?null:n.selectedElement.id)===e.id),c(),H("color",e.color)("font-size",e.fontSize,"px"),c(),M(" ",e.text||"WATERMARK"," ")}}function Al(o,t){if(o&1){let e=L();r(0,"div",21),w("mousedown",function(i){b(e);let a=p().$implicit,d=p(3);return v(d.startElementDrag(i,a))})("click",function(i){b(e);let a=p().$implicit,d=p(3);return i.stopPropagation(),v(d.onElementClick(a))}),se(),r(1,"svg",22),R(2,"path",23),s()()}if(o&2){let e=p().$implicit,n=p(3);H("left",e.x,"px")("top",e.y,"px")("width",e.width,"px")("height",e.height,"px"),q("selected",(n.selectedElement==null?null:n.selectedElement.id)===e.id),c(),Me("width",e.width)("height",e.height)("viewBox",(e.properties==null?null:e.properties.viewBox)||"0 0 "+e.width+" "+e.height),c(),Me("d",e.pathData)("stroke",e.strokeColor||"#2c3e50")("stroke-width",e.strokeWidth||2)("fill",e.fill||"none")("fill-opacity",e.fillOpacity||1)("stroke-opacity",e.strokeOpacity||1)}}function Bl(o,t){if(o&1){let e=L();r(0,"div",35),w("dblclick",function(){b(e);let i=p(2).$implicit,a=p(3);return v(a.startEditingText(i))})("blur",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.stopEditingText(a,i))})("keydown.enter",function(i){b(e);let a=p(2).$implicit,d=p(3);return i.preventDefault(),v(d.stopEditingText(a,i))})("keydown.escape",function(){b(e);let i=p(2).$implicit,a=p(3);return v(a.cancelEditingText(i))})("click",function(i){b(e);let a=p(2).$implicit,d=p(3);return i.stopPropagation(),v(d.onElementClick(a))}),l(1),s()}if(o&2){let e=p(2).$implicit,n=p(3);H("font-size",e.fontSize||16,"px")("font-family",e.fontFamily||"Arial")("font-weight",e.fontWeight||"normal")("font-style",e.fontStyle||"normal")("color",e.color||"#000"),q("editing",(n.editingElement==null?null:n.editingElement.id)===e.id),u("contentEditable",(n.editingElement==null?null:n.editingElement.id)===e.id),c(),T(e.text)}}function Vl(o,t){if(o&1){let e=L();r(0,"img",36),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startElementDrag(i,a))})("click",function(i){b(e);let a=p(2).$implicit,d=p(3);return i.stopPropagation(),v(d.onElementClick(a))}),s()}if(o&2){let e=p(2).$implicit;H("width",e.width,"px")("height",e.height,"px"),u("src",e.src,Te)}}function zl(o,t){if(o&1){let e=L();r(0,"div",37),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startElementDrag(i,a))})("click",function(i){b(e);let a=p(2).$implicit,d=p(3);return i.stopPropagation(),v(d.onElementClick(a))}),s()}if(o&2){let e=p(2).$implicit;H("width",e.width,"px")("height",e.height,"px")("background-color",e.fillColor)("border",e.strokeWidth+"px solid "+e.strokeColor)("border-radius",e.shapeType==="circle"?"50%":"0"),q("shape-circle",e.shapeType==="circle")("shape-rectangle",e.shapeType==="rectangle")("shape-line",e.shapeType==="line")}}function $l(o,t){o&1&&(se(),r(0,"svg",42),R(1,"path",43),s())}function Ll(o,t){if(o&1){let e=L();r(0,"div",38),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startElementDrag(i,a))})("click",function(i){b(e);let a=p(2).$implicit,d=p(3);return i.stopPropagation(),v(d.onElementClick(a))}),r(1,"div",39),I(2,$l,2,0,"svg",40),s(),r(3,"span",41),l(4),s()()}if(o&2){let e=p(2).$implicit;c(),H("width",(e.properties==null?null:e.properties.boxSize)||18,"px")("height",(e.properties==null?null:e.properties.boxSize)||18,"px"),q("checked",e.properties==null?null:e.properties.checked),c(),u("ngIf",e.properties==null?null:e.properties.checked),c(2),T((e.properties==null?null:e.properties.label)||"\uCCB4\uD06C\uBC15\uC2A4")}}function Nl(o,t){o&1&&R(0,"div",48)}function Rl(o,t){if(o&1){let e=L();r(0,"div",44),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startElementDrag(i,a))})("click",function(i){b(e);let a=p(2).$implicit,d=p(3);return i.stopPropagation(),v(d.onElementClick(a))}),r(1,"div",45),I(2,Nl,1,0,"div",46),s(),r(3,"span",47),l(4),s()()}if(o&2){let e=p(2).$implicit;c(),H("width",(e.properties==null?null:e.properties.circleSize)||18,"px")("height",(e.properties==null?null:e.properties.circleSize)||18,"px"),q("selected",e.properties==null?null:e.properties.selected),c(),u("ngIf",e.properties==null?null:e.properties.selected),c(2),T((e.properties==null?null:e.properties.label)||"\uB77C\uB514\uC624 \uC635\uC158")}}function jl(o,t){if(o&1){let e=L();r(0,"div",49),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startElementDrag(i,a))})("click",function(i){b(e);let a=p(2).$implicit,d=p(3);return i.stopPropagation(),v(d.onElementClick(a))}),r(1,"label",50),l(2),s(),r(3,"div",51)(4,"span",52),l(5),s(),r(6,"span",53),l(7,"v"),s()()()}if(o&2){let e=p(2).$implicit;c(2),T((e.properties==null?null:e.properties.label)||"\uB4DC\uB86D\uB2E4\uC6B4"),c(3),T((e.properties==null?null:e.properties.selectedOption)||(e.properties==null||e.properties.options==null?null:e.properties.options[0])||"\uC635\uC158 \uC120\uD0DD")}}function Wl(o,t){if(o&1){let e=L();r(0,"div",54),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startElementDrag(i,a))})("click",function(i){b(e);let a=p(2).$implicit,d=p(3);return i.stopPropagation(),v(d.onElementClick(a))}),r(1,"label",55),l(2),s(),r(3,"div",56)(4,"span",57),l(5),s()(),r(6,"div",58),l(7),s()()}if(o&2){let e=p(2).$implicit;c(2),T((e.properties==null?null:e.properties.label)||"\uB0A0\uC9DC \uD544\uB4DC"),c(3),T((e.properties==null?null:e.properties.defaultValue)||(e.properties==null?null:e.properties.placeholder)||"YYYY-MM-DD"),c(2),M("\uD615\uC2DD: ",(e.properties==null?null:e.properties.dateFormat)||"YYYY-MM-DD")}}function Gl(o,t){if(o&1){let e=L();r(0,"img",59),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startElementDrag(i,a))})("click",function(i){b(e);let a=p(2).$implicit,d=p(3);return i.stopPropagation(),v(d.onElementClick(a))}),s()}if(o&2){let e=p(2).$implicit;H("width",e.width,"px")("height",e.height,"px"),u("src",e.src,Te)}}function Hl(o,t){if(o&1){let e=L();r(0,"div",60),ft(1,"sanitizeHtml"),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startElementDrag(i,a))})("click",function(i){b(e);let a=p(2).$implicit,d=p(3);return i.stopPropagation(),v(d.onElementClick(a))}),s()}if(o&2){let e=p(2).$implicit;H("width",e.width,"px")("height",e.height,"px"),u("innerHTML",ht(1,5,e.svgContent),mt)}}function Ul(o,t){if(o&1){let e=L();r(0,"div",34)(1,"div",61),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startResize(i,a,"nw"))}),s(),r(2,"div",62),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startResize(i,a,"ne"))}),s(),r(3,"div",63),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startResize(i,a,"sw"))}),s(),r(4,"div",64),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startResize(i,a,"se"))}),s(),r(5,"div",65),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startResize(i,a,"n"))}),s(),r(6,"div",66),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startResize(i,a,"s"))}),s(),r(7,"div",67),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startResize(i,a,"w"))}),s(),r(8,"div",68),w("mousedown",function(i){b(e);let a=p(2).$implicit,d=p(3);return v(d.startResize(i,a,"e"))}),s()()}}function Yl(o,t){if(o&1){let e=L();r(0,"div",24),w("click",function(){b(e);let i=p().$implicit,a=p(3);return v(a.onElementClick(i))})("mousedown",function(i){b(e);let a=p().$implicit,d=p(3);return v(d.startElementDrag(i,a))}),ce(1,Bl,2,14,"div",25),ce(2,Vl,1,5,"img",26),ce(3,zl,1,16,"div",27),ce(4,Ll,5,8,"div",28),ce(5,Rl,5,8,"div",29),ce(6,jl,8,2,"div",30),ce(7,Wl,8,3,"div",31),ce(8,Gl,1,5,"img",32),ce(9,Hl,2,7,"div",33),ce(10,Ul,9,0,"div",34),s()}if(o&2){let e=p().$implicit,n=p(3);H("left",e.x,"px")("top",e.y,"px")("width",e.width,"px")("height",e.height,"px"),q("selected",(n.selectedElement==null?null:n.selectedElement.id)===e.id),u("ngClass","element-"+e.type),c(),de(e.type==="text"?1:-1),c(),de(e.type==="image"?2:-1),c(),de(e.type==="shape"?3:-1),c(),de(e.type==="form-checkbox"?4:-1),c(),de(e.type==="form-radio"?5:-1),c(),de(e.type==="form-dropdown"?6:-1),c(),de(e.type==="form-date"?7:-1),c(),de(e.type==="signature"?8:-1),c(),de(e.type==="svg"?9:-1),c(),de((n.selectedElement==null?null:n.selectedElement.id)===e.id?10:-1)}}function Xl(o,t){if(o&1&&(ce(0,Fl,3,19,"div",16),ce(1,Al,3,19,"div",17),ce(2,Yl,11,21,"div",18)),o&2){let e=t.$implicit;de(e.type==="watermark"?0:-1),c(),de(e.type==="vector-path"?1:-1),c(),de(e.type!=="watermark"&&e.type!=="vector-path"?2:-1)}}function ql(o,t){if(o&1){let e=L();r(0,"div",13)(1,"div",14),l(2),s(),r(3,"div",15),w("click",function(){let i=b(e).$index,a=p(2);return v(a.onPageClick(i+1))}),je(4,Xl,3,3,null,null,kl),s()()}if(o&2){let e=t.$implicit,n=t.$index,i=p(2);q("current-page",i.currentPage===n+1),Me("data-page-number",n+1),c(2),le("",n+1," / ",i.totalPages),c(),H("width",e.width,"px")("height",e.height,"px"),c(),We(e.elements)}}function Kl(o,t){if(o&1&&(r(0,"div",2)(1,"div",11),je(2,ql,6,9,"div",12,Il),s()()),o&2){let e=p();c(2),We(e.pdfPages)}}function Jl(o,t){o&1&&(r(0,"div",3)(1,"div",69),l(2,"\u{1F4C4}"),s(),r(3,"h3"),l(4,"\uBB38\uC11C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4"),s(),r(5,"p"),l(6,"\uBB38\uC11C \uB370\uC774\uD130\uB97C \uC81C\uACF5\uD558\uAC70\uB098 \uC0C8 \uBB38\uC11C\uB97C \uC0DD\uC131\uD558\uC138\uC694."),s()())}var si=class o{constructor(t){this.cdr=t}config={mode:"create",showToolbar:!0,allowExport:!0};documentData;pdfPages=[];pdfAnalysisData=null;documentCreated=new $;exportPdf=new $;close=new $;pdfPagesChange=new $;elementSelected=new $;elementUpdated=new $;selectedElement=null;editingElement=null;currentPage=1;totalPages=0;isCreating=!1;creationProgress=0;creationStep="";isDraggingElement=!1;isResizingElement=!1;currentDragElement=null;resizeDirection="";dragStartPosition={x:0,y:0};elementStartPosition={x:0,y:0,width:0,height:0};showImageCoordinates=!1;showImageCoordinatesChange=new $;pdfjsLibService=J(be);ngOnInit(){this.pdfPages.length===0?this.config.mode==="create"&&this.documentData&&this.createDocument():(this.totalPages=this.pdfPages.length,this.currentPage=1),this.setupGlobalEventListeners()}ngDoCheck(){this.cdr.markForCheck()}ngOnDestroy(){this.removeGlobalEventListeners()}setupGlobalEventListeners(){document.addEventListener("mousemove",this.onDocumentMouseMove),document.addEventListener("mouseup",this.onDocumentMouseUp)}removeGlobalEventListeners(){document.removeEventListener("mousemove",this.onDocumentMouseMove),document.removeEventListener("mouseup",this.onDocumentMouseUp)}createDocument(){return E(this,null,function*(){if(!this.documentData){console.error("\u274C [SharedPdfEditor] documentData\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4");return}this.isCreating=!0,this.creationProgress=0,this.creationStep="\uBB38\uC11C \uC0DD\uC131 \uC900\uBE44 \uC911...",this.cdr.detectChanges();try{if(this.documentData.pdfSrc){this.creationStep="PDF \uB85C\uB4DC \uC911...",this.cdr.detectChanges();let t=yield this.pdfjsLibService.getDocument(this.documentData.pdfSrc),e=t.numPages;this.creationStep=`${e}\uD398\uC774\uC9C0 \uC0DD\uC131 \uC911...`,this.cdr.detectChanges();let n=[];for(let i=1;i<=e;i++){let a=yield t.getPage(i),d=a.getViewport({scale:1}),g=yield this.extractImageElements(a,i,d);n.push({pageNumber:i,elements:g,width:d.width,height:d.height}),this.creationProgress=Math.round(i/e*100),this.cdr.detectChanges()}this.pdfPages=n,this.totalPages=e,this.currentPage=1}else this.pdfPages=this.createTemporaryPages(),this.totalPages=this.pdfPages.length,this.currentPage=1;this.pdfPagesChange.emit(this.pdfPages),this.creationProgress=100,this.creationStep="\uBB38\uC11C \uC0DD\uC131 \uC644\uB8CC!",this.isCreating=!1,this.documentCreated.emit({success:!0,pdfPages:this.pdfPages,totalPages:this.totalPages,message:"\uBB38\uC11C\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4."}),this.cdr.detectChanges()}catch(t){console.error("\u274C [SharedPdfEditor] \uBB38\uC11C \uC0DD\uC131 \uC2E4\uD328:",t),this.isCreating=!1,this.creationStep="\uBB38\uC11C \uC0DD\uC131 \uC2E4\uD328",this.documentCreated.emit({success:!1,pdfPages:[],totalPages:0,message:"\uBB38\uC11C \uC0DD\uC131 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."}),this.cdr.detectChanges()}})}createTemporaryPages(){let e=[];for(let n=0;n<3;n++)e.push({pageNumber:n+1,elements:[{id:`temp-${n}-1`,type:"text",x:50,y:50,width:200,height:30,text:`\uD398\uC774\uC9C0 ${n+1}`,fontSize:24,fontFamily:"Arial",color:"#000000"},{id:`temp-${n}-2`,type:"text",x:50,y:100,width:200,height:20,text:"\uD14C\uC2A4\uD2B8 \uBB38\uC11C\uC785\uB2C8\uB2E4.",fontSize:14,fontFamily:"Arial",color:"#666666"}],width:this.documentData?.pageWidth||595,height:this.documentData?.pageHeight||842});return e}goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.cdr.detectChanges())}onPageClick(t){this.currentPage=t,this.selectedElement=null}previousPage(){this.goToPage(this.currentPage-1)}nextPage(){this.goToPage(this.currentPage+1)}onExportPdf(){this.exportPdf.emit()}onClose(){this.close.emit()}get currentPageData(){return this.pdfPages[this.currentPage-1]||null}onElementClick(t){this.selectedElement=t,this.elementSelected.emit(t)}onElementUpdate(t){this.elementUpdated.emit(t),this.pdfPagesChange.emit(this.pdfPages),this.cdr.detectChanges()}startElementDrag(t,e){t.target.classList.contains("resize-handle")||(this.isDraggingElement=!0,this.currentDragElement=e,this.dragStartPosition.x=t.clientX,this.dragStartPosition.y=t.clientY,this.elementStartPosition.x=e.x,this.elementStartPosition.y=e.y,t.preventDefault(),t.stopPropagation())}startResize(t,e,n){this.isResizingElement=!0,this.currentDragElement=e,this.resizeDirection=n,this.dragStartPosition.x=t.clientX,this.dragStartPosition.y=t.clientY,this.elementStartPosition.x=e.x,this.elementStartPosition.y=e.y,this.elementStartPosition.width=e.width,this.elementStartPosition.height=e.height,t.preventDefault(),t.stopPropagation()}onDocumentMouseMove=t=>{if(this.isDraggingElement&&this.currentDragElement){let e=t.clientX-this.dragStartPosition.x,n=t.clientY-this.dragStartPosition.y;this.currentDragElement.x=Math.max(0,this.elementStartPosition.x+e),this.currentDragElement.y=Math.max(0,this.elementStartPosition.y+n),this.cdr.detectChanges(),t.preventDefault();return}if(this.isResizingElement&&this.currentDragElement){let e=t.clientX-this.dragStartPosition.x,n=t.clientY-this.dragStartPosition.y;this.handleResize(e,n),t.preventDefault()}};onDocumentMouseUp=()=>{(this.isDraggingElement||this.isResizingElement)&&(this.currentDragElement&&(this.pdfPages=[...this.pdfPages],this.pdfPagesChange.emit(this.pdfPages),this.elementUpdated.emit(this.currentDragElement),this.cdr.detectChanges()),this.isDraggingElement=!1,this.isResizingElement=!1,this.currentDragElement=null,this.resizeDirection="")};handleResize(t,e){if(!this.currentDragElement)return;let n=this.currentDragElement,i=20;switch(this.resizeDirection){case"se":n.width=Math.max(i,this.elementStartPosition.width+t),n.height=Math.max(i,this.elementStartPosition.height+e);break;case"sw":let a=this.elementStartPosition.width-t;a>=i&&(n.width=a,n.x=this.elementStartPosition.x+t),n.height=Math.max(i,this.elementStartPosition.height+e);break;case"ne":n.width=Math.max(i,this.elementStartPosition.width+t);let d=this.elementStartPosition.height-e;d>=i&&(n.height=d,n.y=this.elementStartPosition.y+e);break;case"nw":let g=this.elementStartPosition.width-t,m=this.elementStartPosition.height-e;g>=i&&(n.width=g,n.x=this.elementStartPosition.x+t),m>=i&&(n.height=m,n.y=this.elementStartPosition.y+e);break;case"n":let h=this.elementStartPosition.height-e;h>=i&&(n.height=h,n.y=this.elementStartPosition.y+e);break;case"s":n.height=Math.max(i,this.elementStartPosition.height+e);break;case"w":let f=this.elementStartPosition.width-t;f>=i&&(n.width=f,n.x=this.elementStartPosition.x+t);break;case"e":n.width=Math.max(i,this.elementStartPosition.width+t);break}this.cdr.detectChanges()}startEditingText(t){t.type==="text"&&(this.editingElement=t,this.selectedElement=t,this.cdr.detectChanges(),setTimeout(()=>{let e=document.querySelector(".text-element.editing");if(e){e.focus();let n=document.createRange();n.selectNodeContents(e);let i=window.getSelection();i?.removeAllRanges(),i?.addRange(n)}},0))}stopEditingText(t,e){if(t.type!=="text")return;let i=e.target.textContent||"";t.text!==i&&(t.text=i,this.pdfPages=[...this.pdfPages],this.pdfPagesChange.emit(this.pdfPages),this.elementUpdated.emit(t)),this.editingElement=null,this.cdr.detectChanges()}cancelEditingText(t){this.editingElement=null,this.cdr.detectChanges()}extractImageElements(t,e,n){return E(this,null,function*(){let i=[];try{let a=yield t.getOperatorList(),d=[];for(let C=0;C<a.fnArray.length;C++){let _=a.fnArray[C],y=a.argsArray[C];if(_===85||_===86){let S=null,D=[];for(let x=C-1;x>=0&&x>=C-20;x--){let P=a.fnArray[x],O=a.argsArray[x];if((P===12||P===74||P===75)&&D.unshift({fn:P,args:O}),P===11)break}if(D.length>0){let x=(O,k)=>[O[0]*k[0]+O[2]*k[1],O[1]*k[0]+O[3]*k[1],O[0]*k[2]+O[2]*k[3],O[1]*k[2]+O[3]*k[3],O[0]*k[4]+O[2]*k[5]+O[4],O[1]*k[4]+O[3]*k[5]+O[5]],P=D[0].args;for(let O=1;O<D.length;O++)P=x(P,D[O].args);S=P}d.push({name:y[0],transform:S,index:C})}}if(d.length===0)return i;let g=document.createElement("canvas");g.width=n.width,g.height=n.height;let m=g.getContext("2d");if(!m)return i;yield t.render({canvas:g,canvasContext:m,viewport:n}).promise;let h=this.pdfAnalysisData?.pageHeight||t.view[3]||595.28,f=n.height/h;for(let C of d)if(C.transform)try{let[_,,,y,S,D]=C.transform.map(Math.abs),x=h-D-y,P=S*f,O=x*f,k=_*f,F=y*f,j=document.createElement("canvas");j.width=_*2,j.height=y*2;let V=j.getContext("2d");if(V){V.drawImage(g,P,O,k,F,0,0,_*2,y*2);let A={id:`image-extracted-${Date.now()}-${e}-${C.index}`,type:"image",x:S,y:x,width:_,height:y,src:j.toDataURL("image/png")};i.push(A)}}catch(_){console.error(`\u274C [SharedPdfEditor] \uC774\uBBF8\uC9C0 \uCC98\uB9AC \uC2E4\uD328 (\uD398\uC774\uC9C0 ${e}):`,_)}}catch(a){console.error(`\u274C [SharedPdfEditor] \uD398\uC774\uC9C0 ${e} \uC774\uBBF8\uC9C0 \uCD94\uCD9C \uC2E4\uD328:`,a)}return i})}toggleImageCoordinates(){this.showImageCoordinates=!this.showImageCoordinates,this.showImageCoordinatesChange.emit(this.showImageCoordinates),this.cdr.detectChanges()}static \u0275fac=function(e){return new(e||o)(ge(He))};static \u0275cmp=ae({type:o,selectors:[["shared-pdf-editor"]],inputs:{config:"config",documentData:"documentData",pdfPages:"pdfPages",pdfAnalysisData:"pdfAnalysisData",showImageCoordinates:"showImageCoordinates"},outputs:{documentCreated:"documentCreated",exportPdf:"exportPdf",close:"close",pdfPagesChange:"pdfPagesChange",elementSelected:"elementSelected",elementUpdated:"elementUpdated",showImageCoordinatesChange:"showImageCoordinatesChange"},decls:5,vars:8,consts:[[1,"pdf-editor-container"],[1,"creation-progress"],[1,"editor-content"],[1,"empty-state"],[3,"close","visible","elements","currentPage","analysisData"],[1,"progress-content"],[1,"spinner"],[1,"progress-info"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"canvas-container"],[1,"page-wrapper",3,"current-page"],[1,"page-wrapper"],[1,"page-number-badge"],[1,"page-canvas",3,"click"],["title","\uC6CC\uD130\uB9C8\uD06C",1,"watermark-element",3,"selected","left","top","width","height","transform","opacity"],["title","\uBCA1\uD130 \uADF8\uB798\uD53D",1,"vector-path-element",3,"selected","left","top","width","height"],[1,"pdf-element",3,"ngClass","selected","left","top","width","height"],["title","\uC6CC\uD130\uB9C8\uD06C",1,"watermark-element",3,"mousedown","click"],[2,"width","100%","height","100%","display","flex","align-items","center","justify-content","center","font-weight","bold","white-space","nowrap","pointer-events","none"],["title","\uBCA1\uD130 \uADF8\uB798\uD53D",1,"vector-path-element",3,"mousedown","click"],["preserveAspectRatio","xMidYMid meet",2,"overflow","visible","display","block"],["stroke-linecap","round","stroke-linejoin","round","vector-effect","non-scaling-stroke"],[1,"pdf-element",3,"click","mousedown","ngClass"],[1,"text-element",3,"editing","font-size","font-family","font-weight","font-style","color","contentEditable"],[1,"image-element",3,"src","width","height"],[1,"shape-element",3,"shape-circle","shape-rectangle","shape-line","width","height","backgroundColor","border","borderRadius"],[1,"form-checkbox-element"],[1,"form-radio-element"],[1,"form-dropdown-element"],[1,"form-date-element"],[1,"signature-element",3,"src","width","height"],[1,"svg-element",3,"width","height","innerHTML"],[1,"resize-handles"],[1,"text-element",3,"dblclick","blur","keydown.enter","keydown.escape","click","contentEditable"],[1,"image-element",3,"mousedown","click","src"],[1,"shape-element",3,"mousedown","click"],[1,"form-checkbox-element",3,"mousedown","click"],[1,"checkbox-box"],["viewBox","0 0 24 24","aria-hidden","true",4,"ngIf"],[1,"checkbox-label"],["viewBox","0 0 24 24","aria-hidden","true"],["d","M4 12l4 4 8-8","fill","none","stroke","currentColor","stroke-width","3","stroke-linecap","round","stroke-linejoin","round"],[1,"form-radio-element",3,"mousedown","click"],[1,"radio-circle"],["class","radio-dot",4,"ngIf"],[1,"radio-label"],[1,"radio-dot"],[1,"form-dropdown-element",3,"mousedown","click"],[1,"dropdown-label"],[1,"dropdown-field"],[1,"dropdown-value"],[1,"dropdown-icon"],[1,"form-date-element",3,"mousedown","click"],[1,"date-label"],[1,"date-field"],[1,"date-placeholder"],[1,"date-format"],[1,"signature-element",3,"mousedown","click","src"],[1,"svg-element",3,"mousedown","click","innerHTML"],[1,"resize-handle","corner-handle","nw-resize",2,"top","-5px","left","-5px",3,"mousedown"],[1,"resize-handle","corner-handle","ne-resize",2,"top","-5px","right","-5px",3,"mousedown"],[1,"resize-handle","corner-handle","sw-resize",2,"bottom","-5px","left","-5px",3,"mousedown"],[1,"resize-handle","corner-handle","se-resize",2,"bottom","-5px","right","-5px",3,"mousedown"],[1,"resize-handle","edge-handle","n-resize",2,"top","-4px","left","50%","transform","translateX(-50%)",3,"mousedown"],[1,"resize-handle","edge-handle","s-resize",2,"bottom","-4px","left","50%","transform","translateX(-50%)",3,"mousedown"],[1,"resize-handle","edge-handle","w-resize",2,"left","-4px","top","50%","transform","translateY(-50%)",3,"mousedown"],[1,"resize-handle","edge-handle","e-resize",2,"right","-4px","top","50%","transform","translateY(-50%)",3,"mousedown"],[1,"empty-icon"]],template:function(e,n){e&1&&(r(0,"div",0),ce(1,Tl,10,4,"div",1),ce(2,Kl,4,0,"div",2),ce(3,Jl,7,0,"div",3),s(),r(4,"app-image-coordinates-modal",4),w("close",function(){return n.toggleImageCoordinates()}),s()),e&2&&(c(),de(n.isCreating?1:-1),c(),de(!n.isCreating&&n.totalPages>0?2:-1),c(),de(!n.isCreating&&n.totalPages===0?3:-1),c(),u("visible",n.showImageCoordinates)("elements",(n.currentPageData==null?null:n.currentPageData.elements)||ut(7,El))("currentPage",n.currentPage)("analysisData",n.pdfAnalysisData))},dependencies:[ne,Pt,Pe,Qt,Zt],styles:['@font-face{font-family:Noto Sans KR;src:url(/ezReader_Page/fonts/NotoSansKR-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:NanumGothic;src:url(/ezReader_Page/fonts/NanumGothic-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:NanumBarunGothic;src:url(/ezReader_Page/fonts/NanumBarunGothic-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:IBM Plex Sans KR;src:url(/ezReader_Page/fonts/IBMPlexSansKR-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:NanumSquare;src:url(/ezReader_Page/fonts/NanumSquare-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Black Han Sans;src:url(/ezReader_Page/fonts/BlackHanSans-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:"Noto Serif KR";src:url(/ezReader_Page/fonts/NotoSerifKR-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:NanumMyeongjo;src:url(/ezReader_Page/fonts/NanumMyeongjo-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:NanumPen;src:url(/ezReader_Page/fonts/NanumPen-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:NanumBrush;src:url(/ezReader_Page/fonts/NanumBrush-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:DoHyeon;src:url(/ezReader_Page/fonts/DoHyeon-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Jua;src:url(/ezReader_Page/fonts/Jua-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Gaegu;src:url(/ezReader_Page/fonts/Gaegu-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:GamjaFlower;src:url(/ezReader_Page/fonts/GamjaFlower-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Sunflower;src:url(/ezReader_Page/fonts/Sunflower-Medium.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:EastSeaDokdo;src:url(/ezReader_Page/fonts/EastSeaDokdo-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:HiMelody;src:url(/ezReader_Page/fonts/HiMelody-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Roboto;src:url(/ezReader_Page/fonts/Roboto-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Open Sans;src:url(/ezReader_Page/fonts/OpenSans-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Lato;src:url(/ezReader_Page/fonts/Lato-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Montserrat;src:url(/ezReader_Page/fonts/Montserrat-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Poppins;src:url(/ezReader_Page/fonts/Poppins-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Inter;src:url(/ezReader_Page/fonts/Inter-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Ubuntu;src:url(/ezReader_Page/fonts/Ubuntu-Regular.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}.pdf-editor-container[_ngcontent-%COMP%]{position:absolute;inset:0;background:#f5f5f5;display:flex;flex-direction:column;z-index:100}.creation-progress[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;background:#fff}.progress-content[_ngcontent-%COMP%]{text-align:center;max-width:400px}.spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:4px solid #f3f3f3;border-top:4px solid #1976d2;border-radius:50%;margin:0 auto 24px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.progress-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;font-weight:500;color:#333}.progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;margin-bottom:8px}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#1976d2,#42a5f5);transition:width .3s ease}.progress-text[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666}.editor-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.canvas-container[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:24px;display:flex;flex-direction:column;align-items:center;gap:24px}.page-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center}.page-wrapper.current-page[_ngcontent-%COMP%]   .page-canvas[_ngcontent-%COMP%]{box-shadow:0 4px 16px #007bff4d;border:2px solid #007bff}.page-number-badge[_ngcontent-%COMP%]{margin-bottom:8px;padding:4px 12px;font-size:12px;color:#666;font-weight:500;background:#0000000d;border-radius:12px}.page-canvas[_ngcontent-%COMP%]{position:relative;background:#fff;box-shadow:0 4px 12px #0000001a;border-radius:4px;cursor:pointer;transition:box-shadow .2s ease,border-color .2s ease}.page-canvas[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #00000026}.pdf-element[_ngcontent-%COMP%]{position:absolute;border:1px solid transparent;cursor:move;transition:all .2s ease;-webkit-user-select:none;user-select:none}.pdf-element[_ngcontent-%COMP%]:hover{border-color:var(--selection-color, #F44336)}.pdf-element.selected[_ngcontent-%COMP%]{border-color:var(--selection-color, #F44336);box-shadow:0 0 5px var(--selection-color-light, rgba(244, 67, 54, .5))}.text-element[_ngcontent-%COMP%]{width:auto;min-width:100%;height:auto;padding:.1em .1em .3em;border:none;background:transparent;resize:none;outline:none;cursor:text;-webkit-user-select:text;user-select:text;white-space:nowrap;word-break:keep-all;overflow:visible;line-height:1}.text-element.editing[_ngcontent-%COMP%]{background:#ffffffe6;border:2px solid var(--selection-color, #F44336);box-shadow:0 0 5px var(--selection-color-light, rgba(244, 67, 54, .3));cursor:text}.text-element[_ngcontent-%COMP%]:focus{outline:none}.image-element[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:fill;pointer-events:none}.shape-element[_ngcontent-%COMP%]{width:100%;height:100%;pointer-events:none}.shape-element.shape-circle[_ngcontent-%COMP%]{border-radius:50%}.shape-element.shape-rectangle[_ngcontent-%COMP%], .shape-element.shape-line[_ngcontent-%COMP%]{border-radius:0}.form-checkbox-element[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;height:100%;font-family:Noto Sans KR,Arial,sans-serif;font-size:14px;color:#1f2937;cursor:pointer}.form-checkbox-element[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]{border:2px solid #4b5563;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#2563eb;background:#fff;transition:all .15s ease}.form-checkbox-element[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.form-checkbox-element[_ngcontent-%COMP%]   .checkbox-box.checked[_ngcontent-%COMP%]{background:#2563eb;border-color:#2563eb;color:#fff;box-shadow:0 2px 6px #2563eb59}.form-checkbox-element[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{flex:1;line-height:1.3;pointer-events:none}.form-radio-element[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;height:100%;font-family:Noto Sans KR,Arial,sans-serif;font-size:14px;color:#1f2937;cursor:pointer}.form-radio-element[_ngcontent-%COMP%]   .radio-circle[_ngcontent-%COMP%]{border:2px solid #4b5563;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#fff;transition:all .15s ease}.form-radio-element[_ngcontent-%COMP%]   .radio-circle.selected[_ngcontent-%COMP%]{border-color:#2563eb;box-shadow:0 2px 6px #2563eb59}.form-radio-element[_ngcontent-%COMP%]   .radio-circle[_ngcontent-%COMP%]   .radio-dot[_ngcontent-%COMP%]{width:60%;height:60%;border-radius:50%;background:#2563eb}.form-radio-element[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{flex:1;line-height:1.3;pointer-events:none}.form-dropdown-element[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;width:100%;height:100%;font-family:Noto Sans KR,Arial,sans-serif;color:#1f2937;cursor:pointer}.form-dropdown-element[_ngcontent-%COMP%]   .dropdown-label[_ngcontent-%COMP%]{font-size:13px;color:#4b5563}.form-dropdown-element[_ngcontent-%COMP%]   .dropdown-field[_ngcontent-%COMP%]{flex:1;border:1.5px solid #cbd5f5;border-radius:8px;padding:8px 12px;display:flex;align-items:center;justify-content:space-between;background:#fff;box-shadow:inset 0 1px 2px #0f172a14}.form-dropdown-element[_ngcontent-%COMP%]   .dropdown-value[_ngcontent-%COMP%]{font-size:14px;color:#111827}.form-dropdown-element[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{font-size:14px;color:#6b7280}.form-date-element[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;width:100%;height:100%;font-family:Noto Sans KR,Arial,sans-serif;color:#1f2937;cursor:pointer}.form-date-element[_ngcontent-%COMP%]   .date-label[_ngcontent-%COMP%]{font-size:13px;color:#4b5563}.form-date-element[_ngcontent-%COMP%]   .date-field[_ngcontent-%COMP%]{border:1.5px solid #d1d5db;border-radius:8px;padding:10px 12px;background:#fff;box-shadow:inset 0 1px 2px #0f172a14}.form-date-element[_ngcontent-%COMP%]   .date-placeholder[_ngcontent-%COMP%]{font-size:14px;color:#111827}.form-date-element[_ngcontent-%COMP%]   .date-format[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.signature-element[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;pointer-events:none}.svg-element[_ngcontent-%COMP%]{width:100%;height:100%;pointer-events:none}.svg-element[_ngcontent-%COMP%]     svg{width:100%;height:100%;display:block}.watermark-element[_ngcontent-%COMP%]{position:absolute;cursor:pointer;-webkit-user-select:none;user-select:none;pointer-events:all;transform-origin:center;z-index:10;background:#ffffff03}.watermark-element.selected[_ngcontent-%COMP%]{outline:2px solid var(--selection-color, #F44336);outline-offset:-2px}.watermark-element[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-weight:700;white-space:nowrap;pointer-events:none;-webkit-user-select:none;user-select:none}.vector-path-element[_ngcontent-%COMP%]{position:absolute;cursor:move;border:2px solid transparent;border-radius:3px;transition:all .3s ease}.vector-path-element[_ngcontent-%COMP%]:hover{border-color:var(--selection-color-light, rgba(244, 67, 54, .5));box-shadow:0 2px 8px var(--selection-color-light, rgba(244, 67, 54, .2))}.vector-path-element.selected[_ngcontent-%COMP%]{border-color:var(--selection-color, #F44336);box-shadow:0 0 0 2px var(--selection-color-light, rgba(244, 67, 54, .3))}.vector-path-element[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.vector-path-element[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:all .3s ease}.vector-path-element[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]:hover{filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.resize-handles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.resize-handle[_ngcontent-%COMP%]{position:absolute;background:#007bff;border:2px solid white;border-radius:50%;width:8px;height:8px;pointer-events:auto;z-index:1000;transition:all .2s ease}.resize-handle[_ngcontent-%COMP%]:hover{background:#0056b3;transform:scale(1.3);box-shadow:0 2px 6px #007bff66}.resize-handle.corner-handle[_ngcontent-%COMP%]{width:10px;height:10px;background:#007bff;border:2px solid white;box-shadow:0 1px 3px #0003}.resize-handle.edge-handle[_ngcontent-%COMP%]{width:8px;height:8px;background:#28a745;border:1px solid white}.resize-handle.nw-resize[_ngcontent-%COMP%]{cursor:nw-resize}.resize-handle.ne-resize[_ngcontent-%COMP%]{cursor:ne-resize}.resize-handle.sw-resize[_ngcontent-%COMP%]{cursor:sw-resize}.resize-handle.se-resize[_ngcontent-%COMP%]{cursor:se-resize}.resize-handle.n-resize[_ngcontent-%COMP%]{cursor:n-resize}.resize-handle.s-resize[_ngcontent-%COMP%]{cursor:s-resize}.resize-handle.w-resize[_ngcontent-%COMP%]{cursor:w-resize}.resize-handle.e-resize[_ngcontent-%COMP%]{cursor:e-resize}.empty-state[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#fff}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px;opacity:.3}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:500;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666}'],changeDetection:0})};var li=class o{constructor(t,e){this.dialogRef=t;this.data=e}onCancel(){this.dialogRef.close("cancel")}onReanalyze(){this.dialogRef.close("reanalyze")}onContinue(){this.dialogRef.close("continue")}static \u0275fac=function(e){return new(e||o)(ge(An),ge(Bn))};static \u0275cmp=ae({type:o,selectors:[["app-editor-resume-dialog"]],decls:20,vars:2,consts:[[1,"editor-resume-dialog"],[1,"dialog-header"],[1,"dialog-icon"],["mat-dialog-title",""],[1,"dialog-message"],["align","end"],["mat-stroked-button","",1,"cancel-btn",3,"click"],["mat-stroked-button","","color","accent",1,"reanalyze-btn",3,"click"],["mat-flat-button","","color","primary","cdkFocusInitial","",1,"continue-btn",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"mat-icon",2),l(3,"edit_note"),s(),r(4,"h2",3),l(5),s()(),r(6,"mat-dialog-content")(7,"p",4),l(8),s()(),r(9,"mat-dialog-actions",5)(10,"button",6),w("click",function(){return n.onCancel()}),l(11," \uCDE8\uC18C "),s(),r(12,"button",7),w("click",function(){return n.onReanalyze()}),r(13,"mat-icon"),l(14,"refresh"),s(),l(15," \uB2E4\uC2DC \uBD84\uC11D "),s(),r(16,"button",8),w("click",function(){return n.onContinue()}),r(17,"mat-icon"),l(18,"edit"),s(),l(19," \uACC4\uC18D \uD3B8\uC9D1 "),s()()()),e&2&&(c(5),T(n.data.title||"\uD3B8\uC9D1 \uBAA8\uB4DC"),c(3),T(n.data.message))},dependencies:[ne,Nn,zn,Ln,$n,Gn,Wn,Un,Hn],styles:[".editor-resume-dialog[_ngcontent-%COMP%]{min-width:400px;max-width:500px}.dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:20px 24px 16px;border-bottom:1px solid #e0e0e0;background:linear-gradient(135deg,#e8f5e9,#fff)}.dialog-header[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:28px;width:28px;height:28px}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#1b5e20}mat-dialog-content[_ngcontent-%COMP%]{padding:24px}mat-dialog-content[_ngcontent-%COMP%]   .dialog-message[_ngcontent-%COMP%]{margin:0;font-size:15px;line-height:1.6;color:#424242;white-space:pre-line}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px 20px;gap:12px}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:90px}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px;font-size:18px;width:18px;height:18px;vertical-align:middle}mat-dialog-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{color:#757575}mat-dialog-actions[_ngcontent-%COMP%]   .reanalyze-btn[_ngcontent-%COMP%]{border-color:#ff6f00;color:#ff6f00}mat-dialog-actions[_ngcontent-%COMP%]   .reanalyze-btn[_ngcontent-%COMP%]:hover{background-color:#fff3e0}mat-dialog-actions[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]{background-color:#4caf50}mat-dialog-actions[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]:hover{background-color:#388e3c}"]})};function Zl(o,t){o&1&&(r(0,"div",22),R(1,"div",23),r(2,"span"),l(3,"\uC0DD\uC131 \uC911..."),s()())}function Ql(o,t){if(o&1&&R(0,"img",24),o&2){let e=p().$implicit;u("src",e.thumbnail,Te)("alt","Page "+e.pageNumber)}}function ec(o,t){o&1&&(r(0,"div",25),R(1,"img",26),s())}function tc(o,t){if(o&1){let e=L();r(0,"div",16),w("click",function(){let i=b(e).$implicit,a=p(3);return v(a.onSelectPage(i.pageNumber))}),r(1,"div",17),I(2,Zl,4,0,"div",18)(3,Ql,1,2,"img",19),r(4,"div",20),l(5),s(),I(6,ec,2,0,"div",21),s()()}if(o&2){let e=t.$implicit;q("selected",e.selected),c(2),u("ngIf",e.isLoading),c(),u("ngIf",!e.isLoading),c(2),T(e.pageNumber),c(),u("ngIf",e.selected)}}function nc(o,t){if(o&1&&(r(0,"div",14),I(1,tc,7,6,"div",15),s()),o&2){let e=p(2);c(),u("ngForOf",e.thumbnails)}}function ic(o,t){o&1&&(r(0,"div",27),R(1,"div",28),r(2,"p"),l(3,"\uC378\uB124\uC77C \uC0DD\uC131 \uC911..."),s()())}function oc(o,t){if(o&1){let e=L();r(0,"div",2),w("click",function(i){b(e);let a=p();return v(a.onOverlayClick(i))}),r(1,"div",3),w("click",function(i){return b(e),v(i.stopPropagation())}),r(2,"div",4)(3,"h2"),l(4,"\uD3B8\uC9D1\uD560 \uD398\uC774\uC9C0 \uC120\uD0DD"),s(),r(5,"button",5),w("click",function(){b(e);let i=p();return v(i.onClose())}),R(6,"img",6),s()(),r(7,"div",7)(8,"div",8),R(9,"img",9),r(10,"span"),l(11,"\uD3B8\uC9D1\uD560 \uD398\uC774\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694. \uC120\uD0DD\uD55C \uD398\uC774\uC9C0\uC758 \uD14D\uC2A4\uD2B8, \uC774\uBBF8\uC9C0, \uBCA1\uD130\uAC00 \uBD84\uC11D\uB429\uB2C8\uB2E4."),s()(),I(12,nc,2,1,"div",10)(13,ic,4,0,"ng-template",null,0,yn),s(),r(15,"div",11)(16,"button",12),w("click",function(){b(e);let i=p();return v(i.onClose())}),l(17,"\uCDE8\uC18C"),s(),r(18,"button",13),w("click",function(){b(e);let i=p();return v(i.onConfirm())}),l(19),s()()()()}if(o&2){let e=vn(14),n=p();c(12),u("ngIf",n.thumbnails.length>0)("ngIfElse",e),c(6),u("disabled",n.selectedPage===null),c(),M(" \uC120\uD0DD \uC644\uB8CC (",n.selectedPage,"\uD398\uC774\uC9C0) ")}}var ci=class o{isVisible=!1;thumbnails=[];close=new $;confirm=new $;selectedPage=1;ngOnInit(){this.thumbnails.length>0&&(this.thumbnails[0].selected=!0,this.selectedPage=1)}onSelectPage(t){this.thumbnails.forEach(n=>n.selected=!1);let e=this.thumbnails.find(n=>n.pageNumber===t);e&&(e.selected=!0,this.selectedPage=t)}onOverlayClick(t){t.target===t.currentTarget&&this.onClose()}onClose(){this.close.emit()}onConfirm(){this.selectedPage!==null&&this.confirm.emit(this.selectedPage)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=ae({type:o,selectors:[["app-page-selector-modal"]],inputs:{isVisible:"isVisible",thumbnails:"thumbnails"},outputs:{close:"close",confirm:"confirm"},decls:1,vars:1,consts:[["loading",""],["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["src","./images/icons/pc/ico-close.svg","alt","\uB2EB\uAE30","width","24","height","24"],[1,"modal-body"],[1,"info-message"],["src","./images/icons/pc/img-alert.svg","alt","\uC548\uB0B4","width","20","height","20"],["class","thumbnail-grid",4,"ngIf","ngIfElse"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-confirm",3,"click","disabled"],[1,"thumbnail-grid"],["class","thumbnail-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"thumbnail-item",3,"click"],[1,"thumbnail-wrapper"],["class","thumbnail-loading",4,"ngIf"],[3,"src","alt",4,"ngIf"],[1,"page-number"],["class","selected-badge",4,"ngIf"],[1,"thumbnail-loading"],[1,"loading-spinner"],[3,"src","alt"],[1,"selected-badge"],["src","./images/icons/pc/ico-check.svg","alt","\uC120\uD0DD","width","24","height","24"],[1,"loading-state"],[1,"spinner"]],template:function(e,n){e&1&&I(0,oc,20,4,"div",1),e&2&&u("ngIf",n.isVisible)},dependencies:[ne,Ve,Pe],styles:['@charset "UTF-8";.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:1000px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 10px 40px #0003;animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{padding:24px;border-bottom:1px solid #e0e0e0;display:flex;align-items:center;justify-content:space-between}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#222}.close-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:8px;color:#666;border-radius:4px;transition:all .2s}.close-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:#222}.modal-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1;min-height:300px}.info-message[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:16px;background:#e3f2fd;border-radius:8px;margin-bottom:24px;border-left:4px solid #007acc}.info-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;margin-top:2px}.info-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1565c0;font-size:14px;line-height:1.5}.thumbnail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:8px}.thumbnail-item[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s}.thumbnail-item[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.thumbnail-wrapper[_ngcontent-%COMP%]{position:relative;border:2px solid transparent;border-radius:6px;overflow:hidden;background:#f9f9f9;transition:all .2s;min-height:100px}.thumbnail-item.selected[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]{border-color:#007acc;box-shadow:0 4px 12px #007acc4d}.thumbnail-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block;background:#fff}.thumbnail-loading[_ngcontent-%COMP%]{width:100%;height:100px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#f0f0f0,#e0e0e0);color:#666;font-size:10px;gap:8px}.loading-spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:2px solid #e0e0e0;border-top:2px solid #007acc;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.page-number[_ngcontent-%COMP%]{position:absolute;bottom:4px;left:4px;background:#000000b3;color:#fff;padding:2px 6px;border-radius:3px;font-size:10px;font-weight:600}.selected-badge[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background:#fff;border-radius:50%;box-shadow:0 2px 8px #0003}.selected-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;display:block}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#666}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #007acc;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0;display:flex;gap:12px;justify-content:flex-end}.btn-cancel[_ngcontent-%COMP%], .btn-confirm[_ngcontent-%COMP%]{padding:10px 24px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.btn-cancel[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.btn-cancel[_ngcontent-%COMP%]:hover{background:#e0e0e0}.btn-confirm[_ngcontent-%COMP%]{background:#007acc;color:#fff}.btn-confirm[_ngcontent-%COMP%]:hover:not(:disabled){background:#005fa3}.btn-confirm[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}.modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}']})};var di=class o{resourcesLoaded=!1;loadingPromise=null;constructor(){}loadAllResources(){return E(this,null,function*(){if(this.resourcesLoaded)return Promise.resolve();if(this.loadingPromise)return this.loadingPromise;this.loadingPromise=this.loadResources(),yield this.loadingPromise})}loadResources(){return E(this,null,function*(){try{yield Promise.all([this.loadFonts(),this.loadPdfLibraries()]),this.resourcesLoaded=!0}catch(t){throw this.loadingPromise=null,t}})}loadFonts(){return E(this,null,function*(){let e=[{name:"Pretendard Variable (Local)",type:"stylesheet",href:"assets/fonts/pretendard-variable.css",crossorigin:!1,preload:!0},{name:"Material Icons (Local)",type:"stylesheet",href:"assets/fonts/material-icons.css",crossorigin:!1,preload:!0}].map(n=>this.loadFont(n));yield Promise.all(e)})}loadFont(t){return new Promise((e,n)=>{if(t.preload){let a=document.createElement("link");a.rel="preload",a.as="style",t.crossorigin&&(a.crossOrigin="anonymous"),a.href=t.href,document.head.appendChild(a)}if(t.type==="preconnect"){let a=document.createElement("link");a.rel="preconnect",a.href=t.href,t.crossorigin&&(a.crossOrigin="anonymous"),document.head.appendChild(a),e();return}let i=document.createElement("link");i.rel="stylesheet",i.href=t.href,t.crossorigin&&(i.crossOrigin="anonymous"),i.onload=()=>{e()},i.onerror=()=>{console.warn(`\u26A0\uFE0F ${t.name} \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328 (\uACC4\uC18D \uC9C4\uD589)`),e()},document.head.appendChild(i)})}loadPdfLibraries(){return E(this,null,function*(){let e=[{name:"fontkit",url:"assets/libs/fontkit.umd.min.js",checkLoaded:()=>typeof window.fontkit<"u"},{name:"PDF-lib",url:"assets/libs/pdf-lib.min.js",checkLoaded:()=>typeof window.PDFLib<"u"},{name:"JSZip",url:"assets/libs/jszip.min.js",checkLoaded:()=>typeof window.JSZip<"u"}].filter(i=>!i.checkLoaded());if(e.length===0)return;let n=e.map(i=>this.loadScript(i));yield Promise.all(n)})}loadScript(t){return new Promise((e,n)=>{let i=document.createElement("script");i.src=t.url,i.async=!0,i.onload=()=>{t.postLoad&&t.postLoad(),e()},i.onerror=()=>{n(new Error(`${t.name} \uB85C\uB4DC \uC2E4\uD328`))},document.head.appendChild(i)})}isLoaded(){return this.resourcesLoaded}isLibraryLoaded(t){let e={"PDF.js":()=>typeof window.pdfjsLib<"u",fontkit:()=>typeof window.fontkit<"u","PDF-lib":()=>typeof window.PDFLib<"u",JSZip:()=>typeof window.JSZip<"u"};return e[t]?e[t]():!1}loadNanumGothicFont(){return E(this,null,function*(){try{let t=yield fetch("assets/fonts/NanumGothic-Regular.ttf");if(!t.ok)throw new Error(`NanumGothic \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328: ${t.status}`);return yield t.arrayBuffer()}catch(t){throw console.warn("\u274C NanumGothic \uD3F0\uD2B8 \uB85C\uB4DC \uC2E4\uD328:",t),t}})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var gt=class o{pdfVectorAnalyzer=J(st);pdfjsLibService=J(be);constructor(){}analyzePdfStructure(t,e,n,i,a,d,g,m,h){return E(this,null,function*(){if(!t)throw new Error("PDF \uC18C\uC2A4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");d.startProgress(["\uD14D\uC2A4\uD2B8 \uCD94\uCD9C","\uC774\uBBF8\uC9C0 \uCD94\uCD9C","\uBCA1\uD130 \uADF8\uB798\uD53D \uCD94\uCD9C","\uBD84\uC11D \uB370\uC774\uD130 \uC0DD\uC131"]);let C=yield(yield fetch(t)).blob(),_=new File([C],e||"document.pdf",{type:"application/pdf"}),y=yield n.extractTextStreamAsJson(_,{});d.updateProgress(0);let S=yield i(_);d.updateProgress(1);let D=null;m&&a("VECTOR_EXTRACTION","\uBCA1\uD130 \uADF8\uB798\uD53D \uB370\uC774\uD130 \uCD94\uCD9C \uC2DC\uC791 (\uC804\uCCB4 \uD398\uC774\uC9C0 \uBAA8\uB4DC)");try{D=yield this.pdfVectorAnalyzer.extractVectorStreamData(_,{}),D&&t&&(D.pdfSrc=t);let P={totalOperations:D.totalOperations,totalPaths:D.summary.totalPaths,totalLines:D.summary.totalLines,totalCurves:D.summary.totalCurves,totalRectangles:D.summary.totalRectangles,pageCount:D.pageCount,pagesWithVector:D.pageDetails.length,hasPdfSrc:!!D.pdfSrc};a("VECTOR_EXTRACTION","\uBCA1\uD130 \uADF8\uB798\uD53D \uB370\uC774\uD130 \uCD94\uCD9C \uC644\uB8CC",P),D.pageDetails.forEach(O=>{let k={pageNumber:O.pageNumber,operationCount:O.operations.length,statistics:O.statistics};a("VECTOR_PAGE_DETAIL",`\uD398\uC774\uC9C0 ${O.pageNumber} \uBCA1\uD130 \uB370\uC774\uD130`,k)})}catch(P){a("VECTOR_EXTRACTION","\uBCA1\uD130 \uADF8\uB798\uD53D \uCD94\uCD9C \uC2E4\uD328",{error:P}),D=null}d.updateProgress(2);let x=this.convertTextStreamToStructure(y,_.size,g);return d.updateProgress(3),d.completeProgress(),{textStreamData:y,imageData:S,vectorData:D,structureData:x}})}convertTextStreamToStructure(t,e,n){let i=t.pages||[],a=i[0],d=i.map(m=>({type:"Page",mediaBox:[0,0,m.width||595,m.height||842],contents:"N/A",resources:"N/A"})),g=i.map((m,h)=>({pageNumber:h+1,length:(m.textItems?.length||0)*50,filter:"FlateDecode",decodeParams:null,textItems:m.textItems?.length||0,sampleText:m.textItems?.slice(0,3).map(f=>f.text).join(" ")||""}));return{filename:t.fileName,fileSize:e,header:{version:"1.7",binaryMarker:"Present",raw:"%PDF-1.7"},catalog:{type:"Catalog",pages:"2 0 R",metadata:"N/A"},pageTree:{type:"Pages",count:t.pageCount,kids:d},contentStreams:g,xrefTable:{startOffset:e-1024,entries:[]},trailer:{size:t.pageCount+10,root:"1 0 R",startXref:e-1024},resources:{fonts:t.metadata.uniqueFonts.map((m,h)=>({name:`F${h+1}`,subtype:"Type1",encoding:"Identity-H",originalName:m})),images:[]},compression:{method:"FlateDecode",originalSize:t.metadata.totalCharacters*2,compressedSize:Math.floor(t.metadata.totalCharacters*.4),ratio:60},textStreamAnalysis:{totalPages:t.pageCount,totalTextItems:t.metadata.totalTextItems,totalWords:t.metadata.totalWords,totalCharacters:t.metadata.totalCharacters,uniqueFonts:t.metadata.uniqueFonts,hasImages:t.metadata.hasImages,hasVectorGraphics:t.metadata.hasVectorGraphics,firstPageSample:a?{pageNumber:a.pageNumber,dimensions:`${Math.round(a.width)} x ${Math.round(a.height)}`,textItemCount:a.textItems.length,sentenceCount:a.sentences.length,wordCount:a.statistics.wordCount,sampleSentences:a.sentences.slice(0,Math.min(5,a.sentences.length)).map(m=>m.text.trim()).filter(m=>m.length>0)}:null}}}extractImagesFromPdf(t,e,n,i,a){return E(this,null,function*(){let d=new Map;if(a.detectChanges(),e?.imageInfo?.images&&e.imageInfo.images.length>0){a.detectChanges();try{a.detectChanges();let g=n.extractFromAnalysisData(e,{preferOriginal:!0});a.detectChanges();for(let m of g.images){let h={id:`image-from-analysis-${Date.now()}-${Math.random()}`,type:"image",x:m.x,y:m.y,width:m.width,height:m.height,src:m.src,coordinateSystem:"svg"};i.info("\uC774\uBBF8\uC9C0\uC88C\uD45C",`\u{1F5BC}\uFE0F \uBD84\uC11D\uB370\uC774\uD130\uC5D0\uC11C \uCD94\uCD9C - \uD398\uC774\uC9C0 ${m.pageNumber}: x=${m.x.toFixed(2)}pt, y=${m.y.toFixed(2)}pt, w=${m.width.toFixed(2)}pt, h=${m.height.toFixed(2)}pt (\uC88C\uD45C\uACC4: PDF)`),d.has(m.pageNumber)||d.set(m.pageNumber,[]),d.get(m.pageNumber).push(h),a.detectChanges()}if(a.detectChanges(),g.totalCount>0)return d}catch(g){i.error("\uC774\uBBF8\uC9C0\uCD94\uCD9C",`\u274C PdfImageExtractorService \uC2E4\uD328: ${g}`)}}if(a.detectChanges(),!t)return d;try{let g=yield this.pdfjsLibService.getDocument(t);a.detectChanges();for(let m=1;m<=g.numPages;m++)try{let h=yield g.getPage(m),f=h.getViewport({scale:1}),C=yield h.getOperatorList(),_=[];for(let x=0;x<C.fnArray.length;x++){let P=C.fnArray[x],O=C.argsArray[x];if(P===85||P===86){let k=null,F=[];for(let j=x-1;j>=0&&j>=x-20;j--){let V=C.fnArray[j],A=C.argsArray[j];if((V===12||V===74||V===75)&&F.unshift({fn:V,args:A}),V===11)break}if(F.length>0){let j=(A,G)=>[A[0]*G[0]+A[2]*G[1],A[1]*G[0]+A[3]*G[1],A[0]*G[2]+A[2]*G[3],A[1]*G[2]+A[3]*G[3],A[0]*G[4]+A[2]*G[5]+A[4],A[1]*G[4]+A[3]*G[5]+A[5]],V=F[0].args;for(let A=1;A<F.length;A++)V=j(V,F[A].args);k=V}_.push({name:O[0],transform:k,index:x})}}if(_.length===0)continue;let y=document.createElement("canvas");y.width=f.width,y.height=f.height;let S=y.getContext("2d");if(!S)continue;yield h.render({canvas:y,canvasContext:S,viewport:f}).promise;let D=[];for(let x of _){if(!x.transform)continue;let[P,,,O,k,F]=x.transform.map(Math.abs),j=f.height/2,V=j-F-O,A=(j-F-O)*2,G=document.createElement("canvas");G.width=P*2,G.height=O*2;let X=G.getContext("2d");if(X){X.drawImage(y,k*2,A,P*2,O*2,0,0,P*2,O*2);let Q={id:`image-extracted-${Date.now()}-${m}-${x.index}`,type:"image",x:k,y:V,width:P,height:O,src:G.toDataURL("image/png"),coordinateSystem:"svg"};i.info("\uC774\uBBF8\uC9C0\uC88C\uD45C",`\u{1F5BC}\uFE0F PDF.js\uC5D0\uC11C \uCD94\uCD9C - \uD398\uC774\uC9C0 ${m}: x=${k.toFixed(2)}pt, y=${V.toFixed(2)}pt, w=${P.toFixed(2)}pt, h=${O.toFixed(2)}pt (\uC88C\uD45C\uACC4: SVG)`),D.push(Q)}}D.length>0&&d.set(m,D)}catch(h){i.error("\uC774\uBBF8\uC9C0\uCD94\uCD9C",`\u274C \uD398\uC774\uC9C0 ${m} \uCD94\uCD9C \uC2E4\uD328: ${h}`)}}catch(g){i.error("\uC774\uBBF8\uC9C0\uCD94\uCD9C",`\u274C PDF.js \uCD94\uCD9C \uC2E4\uD328: ${g}`)}return d})}savePdfAnalysisToCache(t,e,n,i,a,d,g){return E(this,null,function*(){try{let m=`pdf_${t}_${e}`;yield g.savePdfAnalysis({id:m,textStreamData:n,vectorData:i,structureData:a,analysisData:d,timestamp:Date.now(),fileSize:e,fileName:t})}catch(m){console.error("\u274C PDF \uBD84\uC11D \uB370\uC774\uD130 \uC800\uC7A5 \uC2E4\uD328:",m)}})}loadPdfAnalysisFromCache(t,e,n){return E(this,null,function*(){try{let i=`pdf_${t}_${e}`,a=yield n.loadPdfAnalysis(i);return a||null}catch(i){return console.error("\u274C PDF \uBD84\uC11D \uB370\uC774\uD130 \uB85C\uB4DC \uC2E4\uD328:",i),null}})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var en=class o{debugLogger=J(ze);snackbar=J($e);pdfCacheService=J(ot);pdfAnalysisService=J(gt);pdfTextStreamService=J(Ot);currentAnalysis=null;constructor(){}analyzePdf(d,g){return E(this,arguments,function*(t,e,n={},i,a){try{this.debugLogger.info("PDF\uBD84\uC11D",`\u{1F680} PDF \uC804\uCCB4 \uBD84\uC11D \uC2DC\uC791: ${e}`);let{singlePageMode:m=!1,targetPage:h=void 0,enableDebugLogs:f=!1,autoCache:C=!0,extractImages:_=!0}=n;if(C){let x=yield this.loadFromCache(e,0);if(x)return this.debugLogger.success("PDF\uBD84\uC11D","\u{1F4C2} \uCE90\uC2DC\uC5D0\uC11C \uBD84\uC11D \uB370\uC774\uD130 \uB85C\uB4DC \uC644\uB8CC"),this.snackbar.showSuccess("\uC774\uC804 \uBD84\uC11D \uACB0\uACFC\uB97C \uBD88\uB7EC\uC654\uC2B5\uB2C8\uB2E4"),x}let y=yield this.pdfAnalysisService.analyzePdfStructure(t,e,this.pdfTextStreamService,i||(()=>E(this,null,function*(){return{hasImages:!1,totalImages:0,images:[]}})),a||(()=>{}),this.snackbar,m,f,h),S=this.generateDashboardData(y.textStreamData,y.vectorData,y.imageData,t),D={textStreamData:y.textStreamData,vectorData:y.vectorData,structureData:y.structureData,analysisData:S,imageData:y.imageData};return C&&(yield this.saveToCache(e,0,D)),this.currentAnalysis=D,this.debugLogger.success("PDF\uBD84\uC11D","\u2705 PDF \uC804\uCCB4 \uBD84\uC11D \uC644\uB8CC"),this.snackbar.showSuccess("PDF \uBD84\uC11D\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4"),D}catch(m){throw this.debugLogger.error("PDF\uBD84\uC11D",`\u274C PDF \uBD84\uC11D \uC2E4\uD328: ${m}`),this.snackbar.showError("PDF \uBD84\uC11D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4"),m}})}generateDashboardData(t,e,n,i){this.debugLogger.info("\uB300\uC2DC\uBCF4\uB4DC\uC0DD\uC131","\u{1F3A8} \uB300\uC2DC\uBCF4\uB4DC \uB370\uC774\uD130 \uC0DD\uC131 \uC2DC\uC791");let a={},d={},g=0;e?.pageDetails&&(this.debugLogger.info("\uB300\uC2DC\uBCF4\uB4DC\uC0DD\uC131","\u{1F3A8} \uBCA1\uD130 \uC0C9\uC0C1 \uC815\uBCF4 \uCD94\uCD9C \uC2DC\uC791"),e.pageDetails.forEach(x=>{x.svgColorInfo&&(x.svgColorInfo.fillColors?.forEach(P=>{a[P]=(a[P]||0)+1,g++}),x.svgColorInfo.strokeColors?.forEach(P=>{a[P]=(a[P]||0)+1,g++})),x.textColorInfo?.colorsByPosition&&(d[x.pageNumber]=x.textColorInfo.colorsByPosition)}),this.debugLogger.success("\uB300\uC2DC\uBCF4\uB4DC\uC0DD\uC131",`\u{1F3A8} \uBCA1\uD130 \uC0C9\uC0C1 \uCD94\uCD9C \uC644\uB8CC (${g}\uAC1C, \uACE0\uC720: ${Object.keys(a).length}\uAC1C)`));let{colorMap:m,colorMappingSuccess:h,colorMappingCount:f}=this.mapColorsToTextItems(t,d);this.debugLogger.info("\uB300\uC2DC\uBCF4\uB4DC\uC0DD\uC131",`\u{1F3A8} \uC0C9\uC0C1 \uB9E4\uCE6D \uC644\uB8CC (${h}/${f}, ${Math.round(h/f*100)}%)`);let C=Y(Y({},m),a),_=Object.keys(C),y=t.pages.reduce((x,P)=>x+P.textItems.reduce((O,k)=>{let F=k.text.replace(/[\s\n\r\t]/g,"");return O+F.length},0),0),S=(n?.hasImages||!1)&&t.metadata.totalTextItems===0,D={fileName:t.fileName,fileSize:0,pageCount:t.pageCount,totalTextItems:t.metadata.totalTextItems,totalWords:t.metadata.totalWords,totalCharacters:t.metadata.totalCharacters,uniqueFonts:t.metadata.uniqueFonts||[],textColors:_.length>0?{uniqueColors:_,colorDistribution:C}:void 0,pages:t.pages.map(x=>({pageNumber:x.pageNumber,textItems:x.textItems.map(P=>({text:P.text,color:P.color||"#000000",font:P.font.name,fontSize:P.font.size,position:{x:P.position.x,y:P.position.y}}))})),hasVectorGraphics:S?!1:!!(e&&e.totalOperations>0)||t.metadata.hasVectorGraphics||!1,totalVectorOperations:S?0:e?.totalOperations||0,hasText:!!(t&&t.pageCount>0&&t.metadata.totalTextItems>0),vectorSummary:S||!e?void 0:{totalPaths:e.summary.totalPaths,totalLines:e.summary.totalLines,totalCurves:e.summary.totalCurves,totalRectangles:e.summary.totalRectangles,totalFillOperations:e.summary.totalFillOperations,totalStrokeOperations:e.summary.totalStrokeOperations,glyphPaths:e.summary.glyphPaths||0,shapePaths:e.summary.shapePaths||0},pdfSrc:i,languageDetection:t.metadata.languageDetection,hasImages:n?.hasImages||t.metadata.hasImages||!1,imageInfo:n?{totalImages:n.totalImages,pagesWithImages:n.pagesWithImages,images:n.images}:void 0,pageWidth:t.pages[0]?.width||n?.images?.[0]?.pageWidth,pageHeight:t.pages[0]?.height||n?.images?.[0]?.pageHeight,pageOrientation:(()=>{let x=t.pages[0]?.width||n?.images?.[0]?.pageWidth||0,P=t.pages[0]?.height||n?.images?.[0]?.pageHeight||0;return x>P?"landscape":"portrait"})(),vectorInfo:e,pdfMetadata:e?.pdfMetadata||{}};return this.debugLogger.success("\uB300\uC2DC\uBCF4\uB4DC\uC0DD\uC131","\u2705 \uB300\uC2DC\uBCF4\uB4DC \uB370\uC774\uD130 \uC0DD\uC131 \uC644\uB8CC"),D}mapColorsToTextItems(t,e){let n={},i=0,a=0,d=(g,m,h)=>{let f=e[g];if(!f||f.length===0)return null;let C=1/0,_=null;for(let y of f){let S=Math.sqrt(Math.pow(y.x-m,2)+Math.pow(y.y-h,2));S<C&&(C=S,_=y.color)}return C<50?_:null};return t.pages.forEach(g=>{g.textItems.forEach(m=>{a++;let h=d(g.pageNumber,m.position.x,m.position.y),f=h||m.style.color||"#000000";h&&i++,n[f]=(n[f]||0)+1,m.color=f})}),{colorMap:n,colorMappingSuccess:i,colorMappingCount:a}}saveToCache(t,e,n){return E(this,null,function*(){try{let i=`pdf_${t}_${e}`;this.debugLogger.info("PDF\uCE90\uC2DC",`\u{1F4BE} \uBD84\uC11D \uACB0\uACFC \uCE90\uC2DC \uC800\uC7A5 \uC2DC\uC791: ${i}`),yield this.pdfCacheService.savePdfAnalysis({id:i,textStreamData:n.textStreamData,vectorData:n.vectorData,structureData:n.structureData,analysisData:n.analysisData,timestamp:Date.now(),fileSize:e,fileName:t}),this.debugLogger.success("PDF\uCE90\uC2DC","\u2705 \uBD84\uC11D \uACB0\uACFC \uCE90\uC2DC \uC800\uC7A5 \uC644\uB8CC")}catch(i){this.debugLogger.error("PDF\uCE90\uC2DC",`\u274C \uBD84\uC11D \uACB0\uACFC \uCE90\uC2DC \uC800\uC7A5 \uC2E4\uD328: ${i}`)}})}loadFromCache(t,e){return E(this,null,function*(){try{let n=`pdf_${t}_${e}`,i=yield this.pdfCacheService.loadPdfAnalysis(n);if(i){let a={textStreamData:i.textStreamData,vectorData:i.vectorData,structureData:i.structureData,analysisData:i.analysisData,imageData:i.analysisData?.imageInfo};return this.currentAnalysis=a,this.debugLogger.success("PDF\uCE90\uC2DC","\u{1F4C2} \uCE90\uC2DC\uC5D0\uC11C \uBD84\uC11D \uACB0\uACFC \uB85C\uB4DC \uC644\uB8CC"),a}return this.debugLogger.info("PDF\uCE90\uC2DC","\u2139\uFE0F \uCE90\uC2DC\uB41C \uBD84\uC11D \uACB0\uACFC \uC5C6\uC74C"),null}catch(n){return this.debugLogger.error("PDF\uCE90\uC2DC",`\u274C \uCE90\uC2DC \uB85C\uB4DC \uC2E4\uD328: ${n}`),null}})}clearAllCache(){return E(this,null,function*(){try{this.debugLogger.info("PDF\uCE90\uC2DC","\u{1F9F9} \uBAA8\uB4E0 \uCE90\uC2DC \uCD08\uAE30\uD654 \uC2DC\uC791"),this.currentAnalysis=null,yield this.pdfCacheService.clearAllPdfAnalysis(),this.debugLogger.success("PDF\uCE90\uC2DC","\u2705 \uBAA8\uB4E0 \uCE90\uC2DC \uCD08\uAE30\uD654 \uC644\uB8CC")}catch(t){throw this.debugLogger.error("PDF\uCE90\uC2DC",`\u274C \uCE90\uC2DC \uCD08\uAE30\uD654 \uC2E4\uD328: ${t}`),t}})}getCurrentAnalysis(){return this.currentAnalysis}getPageTextItems(t){return this.currentAnalysis?.textStreamData?this.currentAnalysis.textStreamData.pages.find(n=>n.pageNumber===t)?.textItems||[]:[]}getColorStatistics(){return this.currentAnalysis?.analysisData?.textColors||null}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var gi=class o{pdfOrchestrator=J(en);imageExtractor=J(rt);pdfAnalysisService=J(gt);pdfjsLibService=J(be);analysisInProgress=!1;currentAnalysisResult=null;currentPdfUrl=null;analyzePdf(t,e,n,i){return E(this,null,function*(){if(this.analysisInProgress)throw new Error("\uC774\uBBF8 PDF \uBD84\uC11D\uC774 \uC9C4\uD589 \uC911\uC785\uB2C8\uB2E4.");try{this.analysisInProgress=!0,this.currentPdfUrl=t;let a=h=>{if(n){let f=this.extractProgressFromMessage(h);n(f,h)}},d=h=>E(this,null,function*(){try{let f=yield h.arrayBuffer(),C=this.pdfjsLibService.OPS,_=yield this.pdfjsLibService.getDocument({data:f}),y=_.numPages,S=[],D=0,x=0;for(let P=1;P<=y;P++){let O=yield _.getPage(P),k=O.getViewport({scale:1}),F=yield O.getOperatorList(),j=[];for(let G=0;G<F.fnArray.length;G++){let X=F.fnArray[G],Q=F.argsArray[G];if(X===C.paintImageXObject||X===C.paintInlineImageXObject){let Z=Q[0],B=[];for(let K=G-1;K>=0&&K>=G-20;K--){let ee=F.fnArray[K],te=F.argsArray[K];if((ee===12||ee===74||ee===75)&&B.unshift({fn:ee,args:te,index:K}),ee===11)break}if(B.length>0){let K=[...B[0].args];for(let ee=1;ee<B.length;ee++){let te=B[ee].args,[Fe,Oe,oe,re,me,ve]=K,[ke,ue,xe,De,Ee,ye]=te;K=[Fe*ke+Oe*xe,Fe*ue+Oe*De,oe*ke+re*xe,oe*ue+re*De,me*ke+ve*xe+Ee,me*ue+ve*De+ye]}try{let ee=yield O.objs.get(Z);ee&&ee.width&&ee.height&&j.push({imgName:Z,transform:K,imgWidth:ee.width,imgHeight:ee.height,opIndex:G})}catch{}}}}let V=1;if(j.length>0){let G=1,X=1;for(let Z of j){let B=Z.transform,K=B[5],ee=B[4],te=Math.abs(B[0]),Fe=Math.abs(B[3]),Oe=K/k.height,oe=(ee+te)/k.width;Oe>G&&(G=Oe),oe>X&&(X=oe)}let Q=Math.max(G,X);Q>1.5&&(V=Math.round(Q),V<1&&(V=1))}let A=[];for(let G=0;G<F.fnArray.length;G++){let X=F.fnArray[G],Q=F.argsArray[G];if(X===C.paintImageXObject||X===C.paintInlineImageXObject){let Z=Q[0];try{let B=yield O.objs.get(Z);if(B&&B.width&&B.height){let K=[];for(let re=G-1;re>=0&&re>=G-20;re--){let me=F.fnArray[re],ve=F.argsArray[re];if((me===12||me===74||me===75)&&K.unshift({fn:me,args:ve,index:re}),me===11)break}let ee,te;if(K.length>0){if(te=[...K[0].args],K.length>1)for(let Ee=1;Ee<K.length;Ee++){let ye=K[Ee].args,Le=te,dn=Le[0],gn=Le[1],pn=Le[2],mn=Le[3],un=Le[4],fn=Le[5],tn=ye[0],nn=ye[1],on=ye[2],an=ye[3],xi=ye[4],Pi=ye[5];te=[dn*tn+gn*on,dn*nn+gn*an,pn*tn+mn*on,pn*nn+mn*an,un*tn+fn*on+xi,un*nn+fn*an+Pi]}let re=B.width,me=B.height;ee=[te[0]/re,te[1]/me,te[2]/re,te[3]/me,te[4],te[5]];let ve=Math.abs(te[0]),ke=Math.abs(te[3]),ue=te[4],xe=te[5],De=ee}let Fe="",Oe="";try{if(B.data){let re=document.createElement("canvas");re.width=B.width,re.height=B.height;let me=re.getContext("2d");if(me){let ve=me.createImageData(B.width,B.height);if(B.data.length===B.width*B.height*4)ve.data.set(B.data);else if(B.data.length===B.width*B.height*3)for(let Ee=0;Ee<B.width*B.height;Ee++){let ye=Ee*3,Le=Ee*4;ve.data[Le]=B.data[ye],ve.data[Le+1]=B.data[ye+1],ve.data[Le+2]=B.data[ye+2],ve.data[Le+3]=255}else console.warn(`      \u26A0\uFE0F \uC608\uC0C1\uCE58 \uBABB\uD55C \uB370\uC774\uD130 \uD06C\uAE30: ${B.data.length} (\uC608\uC0C1: ${B.width*B.height*3} or ${B.width*B.height*4})`);me.putImageData(ve,0,0),Fe=re.toDataURL("image/png");let ke=300,ue=Math.min(ke/B.width,ke/B.height,1),xe=document.createElement("canvas");xe.width=Math.floor(B.width*ue),xe.height=Math.floor(B.height*ue);let De=xe.getContext("2d");De&&(De.drawImage(re,0,0,xe.width,xe.height),Oe=xe.toDataURL("image/png"))}}else if(B.bitmap&&B.bitmap instanceof ImageBitmap){let re=document.createElement("canvas");re.width=B.bitmap.width,re.height=B.bitmap.height;let me=re.getContext("2d");if(me){me.drawImage(B.bitmap,0,0),Fe=re.toDataURL("image/png");let ve=300,ke=Math.min(ve/B.bitmap.width,ve/B.bitmap.height,1),ue=document.createElement("canvas");ue.width=Math.floor(B.bitmap.width*ke),ue.height=Math.floor(B.bitmap.height*ke);let xe=ue.getContext("2d");xe&&(xe.drawImage(re,0,0,ue.width,ue.height),Oe=ue.toDataURL("image/png"))}}}catch(re){console.error("   \u274C Canvas \uB80C\uB354\uB9C1 \uC2E4\uD328:",re)}let oe={pageNumber:P,type:"image",name:Z,transform:K.length>0?ee:void 0,pageWidth:k.width,pageHeight:k.height,pageRotation:O.rotate,viewportTransform:k.transform,originalWidth:B.width,originalHeight:B.height,format:"png",dataUrl:Fe,thumbnail:Oe,image:B};if(K.length>0&&ee&&te){oe.rawTransform=te,oe.imagePixelWidth=B.width,oe.imagePixelHeight=B.height;let re=te[4],me=te[5],ve=Math.abs(te[0]),ke=Math.abs(te[3]),ue=V,xe=re/ue,De=me/ue,Ee=ve/ue,ye=ke/ue;oe.pdfWidth=Ee,oe.pdfHeight=ye,oe.x=xe,oe.y=De,oe.detectedScaleFactor=ue,oe.originalX=re,oe.originalY=me,oe.originalWidth=ve,oe.originalHeight=ke,te[3]<0?oe.yFromTop=k.height-De:oe.yFromTop=k.height-(De+ye),(xe<0||xe>k.width||De<0||De>k.height||Ee>k.width*1.5||ye>k.height*1.5)&&(oe.hasCoordinateIssue=!0,oe.coordinateIssueDetails={outOfBoundsX:xe<0||xe>k.width,outOfBoundsY:De<0||De>k.height,oversizedWidth:Ee>k.width*1.5,oversizedHeight:ye>k.height*1.5,scaleFactor:ue})}else oe.pdfWidth=B.width,oe.pdfHeight=B.height,oe.x=0,oe.y=0,oe.noTransform=!0;A.push(oe),D++}}catch(B){console.warn(`\u26A0\uFE0F \uC774\uBBF8\uC9C0 \uCD94\uCD9C \uC2E4\uD328 (${Z}):`,B)}}}A.length>0&&(x++,S.push({pageNumber:P,pageWidth:k.width,pageHeight:k.height,pageRotation:O.rotate,viewportTransform:k.transform,images:A}))}return{hasImages:D>0,totalImages:D,pagesWithImages:x,images:S}}catch(f){return console.error("\u274C [EzPdfAnalysisManager] \uC774\uBBF8\uC9C0 \uCD94\uCD9C \uC2E4\uD328:",f),{hasImages:!1,totalImages:0,images:[]}}}),g=yield this.pdfOrchestrator.analyzePdf(t,e,{singlePageMode:i?.singlePageMode??!1,targetPage:i?.targetPage||1,enableDebugLogs:!0,autoCache:!1,extractImages:!0},d,a);if(!g.analysisData)throw new Error("\uBD84\uC11D \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.");let m=this.convertToPdfAnalysisSummary(g.analysisData);return this.currentAnalysisResult={summary:m,vectorData:g.vectorData,imageData:g.imageData,textStreamData:g.textStreamData},this.currentAnalysisResult}catch(a){throw console.error("\u274C [EzPdfAnalysisManager] PDF \uBD84\uC11D \uC2E4\uD328:",a),a}finally{this.analysisInProgress=!1}})}getCachedAnalysisData(){return this.currentAnalysisResult?.summary||null}isAnalyzing(){return this.analysisInProgress}clearCache(){this.currentAnalysisResult=null,this.currentPdfUrl=null}extractProgressFromMessage(t){return t.includes("\uC2DC\uC791")?10:t.includes("\uD14D\uC2A4\uD2B8")?30:t.includes("\uBCA1\uD130")?50:t.includes("\uC774\uBBF8\uC9C0")?70:t.includes("\uAD6C\uC870")?90:t.includes("\uC644\uB8CC")?100:0}convertToPdfAnalysisSummary(t){if(!t)throw new Error("\uBD84\uC11D \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4");let e=t.vectorInfo;return{fileName:t.fileName||"\uC54C \uC218 \uC5C6\uC74C",fileSize:t.fileSize||0,pageCount:t.pageCount||0,totalTextItems:t.totalTextItems||0,totalWords:t.totalWords||0,totalCharacters:t.totalCharacters||0,uniqueFonts:t.uniqueFonts||[],textColors:t.textColors||[],pages:t.pages||[],hasVectorGraphics:t.hasVectorGraphics||!1,totalVectorOperations:t.totalVectorOperations||0,vectorSummary:t.vectorSummary||{},hasImages:t.hasImages||!1,imageInfo:t.imageInfo?{totalImages:t.imageInfo.totalImages||0,pagesWithImages:t.imageInfo.pagesWithImages||0,images:(t.imageInfo.images||[]).map(n=>({pageNumber:n.pageNumber||0,pageWidth:n.pageWidth,pageHeight:n.pageHeight,pageRotation:n.pageRotation,images:n.images||[]}))}:void 0,pageWidth:t.pageWidth,pageHeight:t.pageHeight,pageOrientation:t.pageOrientation,textInfo:{pages:t.pages||[],statistics:{totalItems:t.totalTextItems||0,totalWords:t.totalWords||0,totalCharacters:t.totalCharacters||0}},vectorInfo:t.vectorInfo||{totalOperations:t.totalVectorOperations||0,pageDetails:[],summary:t.vectorSummary},pdfMetadata:t.pdfMetadata}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var pi=class o{debugLogger=J(ze);snackbar=J($e);constructor(){this.debugLogger.info("PDF\uBE4C\uB354","\u{1F3D7}\uFE0F PdfDocumentBuilderService \uCD08\uAE30\uD654")}validateVectorSvgData(t){if(!t)return{valid:!1,message:"\uC774\uBCA4\uD2B8 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."};let{vectorData:e,analysisData:n}=t;return e?n?n.hasVectorGraphics?{valid:!0,vectorData:e,analysisData:n}:{valid:!1,message:"\uBCA1\uD130 \uADF8\uB798\uD53D\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}:{valid:!1,message:"\uBD84\uC11D \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}:{valid:!1,message:"\uBCA1\uD130 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}}validateTextStructureData(t){return t?!t.textStreamData&&!t.textAnalysis?{valid:!1,message:"\uD14D\uC2A4\uD2B8 \uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}:{valid:!0}:{valid:!1,message:"\uB370\uC774\uD130\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}}validateCombinedDocumentData(t){let{vectorData:e,textStreamData:n,pdfAnalysisData:i}=t,a=!!(e&&i?.hasVectorGraphics),d=!!(n&&n.pageCount>0),g=!!(i?.hasImages&&i.imageInfo?.totalImages&&i.imageInfo.totalImages>0);return!a&&!d&&!g?{valid:!1,message:"\uBCA1\uD130, \uD14D\uC2A4\uD2B8, \uC774\uBBF8\uC9C0 \uC911 \uD558\uB098 \uC774\uC0C1 \uD544\uC694\uD569\uB2C8\uB2E4.",hasVector:!1,hasText:!1,hasImages:!1}:{valid:!0,hasVector:a,hasText:d,hasImages:g}}validateImagePdfData(t){return t?t.size===0?{valid:!1,message:"PDF \uD30C\uC77C\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4."}:t.type!=="application/pdf"?{valid:!1,message:"\uC62C\uBC14\uB978 PDF \uD30C\uC77C\uC774 \uC544\uB2D9\uB2C8\uB2E4."}:{valid:!0}:{valid:!1,message:"PDF Blob\uC774 \uC5C6\uC2B5\uB2C8\uB2E4."}}validateOriginalPdfData(t){let e=t.pdfSrc||t.sources?.pdfSrc;return e?{valid:!0,pdfSrc:e}:{valid:!1,message:"\uC6D0\uBCF8 PDF \uC18C\uC2A4\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}}calculatePageSize(t){let e={width:595.28,height:841.89};if(!t?.pageSize&&!t?.metadata?.pageSize)return e;let n=t.pageSize||t.metadata?.pageSize;return{width:n.width||e.width,height:n.height||e.height}}generateFileName(t,e){let n=new Date().toISOString().slice(0,19).replace(/[:-]/g,"");return`${e?.replace(".pdf","")||"document"}${{"vector-svg":"_vector_svg","text-structure":"_text_structure",combined:"_combined","image-based":"_image_based","original-export":"_original"}[t]}_${n}.pdf`}formatErrorMessage(t,e){let i={"vector-svg":"\uBCA1\uD130 SVG PDF \uC0DD\uC131","text-structure":"\uD14D\uC2A4\uD2B8 \uAD6C\uC870 \uBB38\uC11C \uC0DD\uC131",combined:"\uD63C\uD569 \uBB38\uC11C \uC0DD\uC131","image-based":"\uC774\uBBF8\uC9C0 PDF \uC0DD\uC131","original-export":"\uC6D0\uBCF8 PDF \uB0B4\uBCF4\uB0B4\uAE30"}[t]||"PDF \uC0DD\uC131";return e?.message?`${i} \uC2E4\uD328: ${e.message}`:`${i}\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.`}formatSuccessMessage(t,e){let i={"vector-svg":"\uBCA1\uD130 SVG PDF\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4","text-structure":"\uD14D\uC2A4\uD2B8 \uAD6C\uC870 \uBB38\uC11C\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4",combined:"\uD63C\uD569 \uBB38\uC11C\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4","image-based":"\uC774\uBBF8\uC9C0 PDF\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4","original-export":"\uC6D0\uBCF8 PDF\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uB0B4\uBCF4\uB0B4\uC84C\uC2B5\uB2C8\uB2E4"}[t]||"PDF\uAC00 \uC131\uACF5\uC801\uC73C\uB85C \uC0DD\uC131\uB418\uC5C8\uC2B5\uB2C8\uB2E4";return e?.pageCount&&(i+=` (${e.pageCount}\uD398\uC774\uC9C0)`),e?.elementCount&&(i+=` [${e.elementCount}\uAC1C \uC694\uC18C]`),i}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var mi=class o{DB_NAME="PdfThumbnailCache";STORE_NAME="thumbnails";DB_VERSION=1;CACHE_EXPIRY_DAYS=7;db=null;dbInitialized=!1;pdfjsLibService=J(be);constructor(){this.initDB()}initDB(){return E(this,null,function*(){if(!this.dbInitialized)return new Promise((t,e)=>{let n=indexedDB.open(this.DB_NAME,this.DB_VERSION);n.onerror=()=>e(n.error),n.onsuccess=()=>{this.db=n.result,this.dbInitialized=!0,t()},n.onupgradeneeded=i=>{let a=i.target.result;if(!a.objectStoreNames.contains(this.STORE_NAME)){let d=a.createObjectStore(this.STORE_NAME,{keyPath:"id"});d.createIndex("pdfHash","pdfHash",{unique:!1}),d.createIndex("timestamp","timestamp",{unique:!1})}}})})}generatePdfHash(t){return E(this,null,function*(){if(t.startsWith("blob:"))return t;if(t.startsWith("data:")){let n=new TextEncoder().encode(t.substring(0,1e3)),i=yield crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(i)).map(d=>d.toString(16).padStart(2,"0")).join("")}return t})}getCachedThumbnail(t,e){return E(this,null,function*(){if(yield this.initDB(),!this.db)return null;try{let i=`${yield this.generatePdfHash(t)}_${e}`;return new Promise(a=>{let m=this.db.transaction([this.STORE_NAME],"readonly").objectStore(this.STORE_NAME).get(i);m.onsuccess=()=>{let h=m.result;if(h){let f=this.CACHE_EXPIRY_DAYS*24*60*60*1e3;if(Date.now()-h.timestamp>f)this.deleteCachedThumbnail(t,e);else{a(h.dataUrl);return}}a(null)},m.onerror=()=>a(null)})}catch(n){return console.error("\uCE90\uC2DC \uC870\uD68C \uC2E4\uD328:",n),null}})}cacheThumbnail(t,e,n){return E(this,null,function*(){if(yield this.initDB(),!!this.db)try{let i=yield this.generatePdfHash(t),d={id:`${i}_${e}`,pdfHash:i,pageNumber:e,dataUrl:n,timestamp:Date.now()};return new Promise((g,m)=>{let C=this.db.transaction([this.STORE_NAME],"readwrite").objectStore(this.STORE_NAME).put(d);C.onsuccess=()=>g(),C.onerror=()=>m(C.error)})}catch(i){console.error("\uCE90\uC2DC \uC800\uC7A5 \uC2E4\uD328:",i)}})}deleteCachedThumbnail(t,e){return E(this,null,function*(){if(yield this.initDB(),!!this.db)try{let i=`${yield this.generatePdfHash(t)}_${e}`;return new Promise(a=>{let m=this.db.transaction([this.STORE_NAME],"readwrite").objectStore(this.STORE_NAME).delete(i);m.onsuccess=()=>a(),m.onerror=()=>a()})}catch(n){console.error("\uCE90\uC2DC \uC0AD\uC81C \uC2E4\uD328:",n)}})}generateThumbnail(i,a){return E(this,arguments,function*(t,e,n={}){let{scale:d=.25,quality:g=.8,format:m="image/webp"}=n;try{let h=yield this.getCachedThumbnail(t,e);if(h)return h;let C=yield(yield this.pdfjsLibService.getDocument(t)).getPage(e),_=C.getViewport({scale:d}),y=document.createElement("canvas"),S=y.getContext("2d",{alpha:!1});if(!S)throw new Error("Canvas context\uB97C \uC0DD\uC131\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");y.width=_.width,y.height=_.height,yield C.render({canvas:y,canvasContext:S,viewport:_}).promise;let D;return m==="image/webp"&&!y.toDataURL("image/webp").startsWith("data:image/webp")?D=y.toDataURL("image/jpeg",g):D=y.toDataURL(m,g),yield this.cacheThumbnail(t,e,D),D}catch(h){return console.error(`\uD398\uC774\uC9C0 ${e} \uC378\uB124\uC77C \uC0DD\uC131 \uC2E4\uD328:`,h),this.generatePlaceholder()}})}generateThumbnailsBatch(a,d){return E(this,arguments,function*(t,e,n={},i){let g=new Map,m=3,h=[];for(let f=0;f<e.length;f+=m)h.push(e.slice(f,f+m));for(let f of h){let C=f.map(_=>E(this,null,function*(){let y=yield this.generateThumbnail(t,_,n);g.set(_,y),i&&i(_,y)}));yield Promise.all(C)}return g})}generatePlaceholder(){let t=document.createElement("canvas");t.width=120,t.height=160;let e=t.getContext("2d");if(e){let n=e.createLinearGradient(0,0,0,160);n.addColorStop(0,"#f9f9f9"),n.addColorStop(1,"#f0f0f0"),e.fillStyle=n,e.fillRect(0,0,120,160),e.strokeStyle="#ddd",e.lineWidth=1,e.strokeRect(0,0,120,160),e.fillStyle="#ccc",e.font="40px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText("\u{1F4C4}",60,80)}return t.toDataURL("image/png")}clearCache(){return E(this,null,function*(){if(yield this.initDB(),!!this.db)return new Promise((t,e)=>{let a=this.db.transaction([this.STORE_NAME],"readwrite").objectStore(this.STORE_NAME).clear();a.onsuccess=()=>t(),a.onerror=()=>e(a.error)})})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var ui=class o{elementIdCounter=0;constructor(){}generateElementId(){return`element-${Date.now()}-${this.elementIdCounter++}`}createTextElement(t){return{id:this.generateElementId(),type:"text",x:t.x,y:t.y,width:t.width,height:t.height,text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight||"normal",fontStyle:t.fontStyle||"normal",color:t.color,textAlign:t.textAlign||"left"}}createImageElement(t){return{id:this.generateElementId(),type:"image",x:t.x,y:t.y,width:t.width,height:t.height,src:t.src}}createShapeElement(t){return{id:this.generateElementId(),type:"shape",x:t.x,y:t.y,width:t.width,height:t.height,shapeType:t.shapeType,fillColor:t.fillColor,strokeColor:t.strokeColor,strokeWidth:t.strokeWidth}}createFormCheckboxElement(t){let e=t.size??18,n=t.width??Math.max(140,e+100),i=t.height??Math.max(28,e+6);return{id:this.generateElementId(),type:"form-checkbox",x:t.x,y:t.y,width:n,height:i,properties:{label:t.label??"\uCCB4\uD06C\uBC15\uC2A4",checked:t.checked??!1,boxSize:e}}}createFormRadioElement(t){let e=t.size??18,n=t.width??Math.max(140,e+100),i=t.height??Math.max(28,e+6);return{id:this.generateElementId(),type:"form-radio",x:t.x,y:t.y,width:n,height:i,properties:{label:t.label??"\uB77C\uB514\uC624 \uC635\uC158",value:t.value??"option",groupName:t.groupName??"radio-group-1",selected:t.selected??!1,circleSize:e}}}createFormDropdownElement(t){let e=t.width??220,n=t.height??40,i=t.options&&t.options.length>0?t.options:["\uC635\uC158 1","\uC635\uC158 2","\uC635\uC158 3"];return{id:this.generateElementId(),type:"form-dropdown",x:t.x,y:t.y,width:e,height:n,properties:{label:t.label??"\uB4DC\uB86D\uB2E4\uC6B4",options:i,selectedOption:t.selectedOption??i[0]}}}createFormDateElement(t){let e=t.width??240,n=t.height??48;return{id:this.generateElementId(),type:"form-date",x:t.x,y:t.y,width:e,height:n,properties:{label:t.label??"\uB0A0\uC9DC \uD544\uB4DC",placeholder:t.placeholder??"YYYY-MM-DD",dateFormat:t.dateFormat??"YYYY-MM-DD",defaultValue:t.defaultValue??""}}}addElementToPage(t,e,n){if(e<0||e>=t.length)return console.error("Invalid page index:",e),t;let i=[...t];return i[e]=pe(Y({},i[e]),{elements:[...i[e].elements,n]}),i}removeElementFromPage(t,e,n){if(e<0||e>=t.length)return console.error("Invalid page index:",e),t;let i=[...t];return i[e]=pe(Y({},i[e]),{elements:i[e].elements.filter(a=>a.id!==n)}),i}updateElementProperties(t,e,n,i){if(e<0||e>=t.length)return console.error("Invalid page index:",e),t;let a=[...t];return a[e]=pe(Y({},a[e]),{elements:a[e].elements.map(d=>d.id===n?Y(Y({},d),i):d)}),a}findElement(t,e){for(let n=0;n<t.length;n++){let i=t[n].elements.find(a=>a.id===e);if(i)return{element:i,pageIndex:n}}return{element:null,pageIndex:-1}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var fi=class o{selectImage(){return E(this,null,function*(){return new Promise(t=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.style.display="none",e.onchange=n=>{let i=n.target.files?.[0];document.body.removeChild(e),t(i||null)},e.oncancel=()=>{document.body.removeChild(e),t(null)},document.body.appendChild(e),e.click()})})}fileToBase64(t){return E(this,null,function*(){return new Promise((e,n)=>{let i=new FileReader;i.onload=a=>{e(a.target.result)},i.onerror=a=>{n(a)},i.readAsDataURL(t)})})}getImageDimensions(t){return E(this,null,function*(){return new Promise((e,n)=>{let i=new Image;i.onload=()=>{e({width:i.width,height:i.height})},i.onerror=a=>{n(a)},i.src=t})})}calculateResizedDimensions(t,e,n,i){let a=t,d=e;if(a>n||d>i){let g=Math.min(n/a,i/d);a=a*g,d=d*g}return{width:a,height:d}}createImageElement(n){return E(this,arguments,function*(t,e={}){let{maxWidth:i=300,maxHeight:a=300,centerOnPage:d=!0,pageWidth:g=595,pageHeight:m=842}=e,h=yield this.fileToBase64(t),f=yield this.getImageDimensions(h),{width:C,height:_}=this.calculateResizedDimensions(f.width,f.height,i,a),y=0,S=0;return d&&(y=(g-C)/2,S=(m-_)/2),{id:`image-${Date.now()}`,type:"image",x:y,y:S,width:C,height:_,src:h,opacity:1}})}uploadAndCreateImageElement(t){return E(this,null,function*(){try{let e=yield this.selectImage();return e?yield this.createImageElement(e,t):null}catch(e){throw console.error("Error uploading image:",e),e}})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var hi=class o{getDefaultShapeConfig(t){let e={strokeColor:"#1967d2",strokeWidth:2};switch(t){case"rectangle":return pe(Y({},e),{type:"rectangle",width:200,height:100,fillColor:"#4285f4",opacity:.8});case"circle":return pe(Y({},e),{type:"circle",width:200,height:200,fillColor:"#4285f4",opacity:.8});case"line":return pe(Y({},e),{type:"line",width:200,height:2,fillColor:"transparent",opacity:1});default:return pe(Y({},e),{type:"rectangle",width:200,height:100,fillColor:"#4285f4",opacity:.8})}}getShapeTypeName(t){return{rectangle:"\uC0AC\uAC01\uD615",circle:"\uC6D0",line:"\uC120"}[t]||"\uB3C4\uD615"}calculateShapePosition(t,e,n){let{centerOnPage:i=!0,pageWidth:a=595,pageHeight:d=842,x:g,y:m}=n;return g!==void 0&&m!==void 0?{x:g,y:m}:i?{x:(a-t)/2,y:(d-e)/2}:{x:0,y:0}}createShape(t,e={}){let n=this.getDefaultShapeConfig(t),i=Y(Y({},n),e.customConfig),a=this.calculateShapePosition(i.width,i.height,e);return{id:`shape-${Date.now()}`,type:"shape",x:a.x,y:a.y,width:i.width,height:i.height,shapeType:t,fillColor:i.fillColor,strokeColor:i.strokeColor,strokeWidth:i.strokeWidth,opacity:i.opacity}}createShapes(t){return t.map(({type:e,options:n})=>this.createShape(e,n))}cloneShape(t,e={x:10,y:10}){return pe(Y({},t),{id:`shape-${Date.now()}`,x:t.x+e.x,y:t.y+e.y})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ci=class o{constructor(){}getDefaultVectorPathStyle(){return{strokeColor:"#2c3e50",strokeWidth:2,fill:"none",fillOpacity:1,strokeOpacity:1}}calculateBoundingBox(t){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",t),e.appendChild(n),document.body.appendChild(e);let i=n.getBBox();return document.body.removeChild(e),{x:i.x,y:i.y,width:Math.max(i.width,5),height:Math.max(i.height,5)}}calculateBoundingBoxFromPoints(t){if(t.length===0)return{x:0,y:0,width:100,height:100};let e=t.map(m=>m.x),n=t.map(m=>m.y),i=Math.min(...e),a=Math.max(...e),d=Math.min(...n),g=Math.max(...n);return{x:i,y:d,width:Math.max(a-i,5),height:Math.max(g-d,5)}}createPathDataFromPoints(t){if(t.length===0)return"";let e=`M ${t[0].x} ${t[0].y}`;for(let n=1;n<t.length;n++)e+=` L ${t[n].x} ${t[n].y}`;return e}createVectorPathElement(t,e={}){let n=this.getDefaultVectorPathStyle(),i=Y(Y({},n),t),a=this.calculateBoundingBox(t.pathData),d=e.x??a.x,g=e.y??a.y;return e.centerOnPage&&e.pageWidth&&e.pageHeight&&(d=(e.pageWidth-a.width)/2,g=(e.pageHeight-a.height)/2),{id:`vector-path-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"vector-path",x:d,y:g,width:a.width,height:a.height,pathData:t.pathData,strokeColor:i.strokeColor,strokeWidth:i.strokeWidth,fill:i.fill,fillOpacity:i.fillOpacity,strokeOpacity:i.strokeOpacity,properties:{originalType:"path",viewBox:`${a.x} ${a.y} ${a.width} ${a.height}`}}}createLine(t,e,n,i,a="#2c3e50",d=2){let g=`M ${t} ${e} L ${n} ${i}`;return this.createVectorPathElement({pathData:g,strokeColor:a,strokeWidth:d,fill:"none"})}createRectanglePath(t,e,n,i,a="#2c3e50",d=2,g="none"){let m=`M ${t} ${e} L ${t+n} ${e} L ${t+n} ${e+i} L ${t} ${e+i} Z`;return this.createVectorPathElement({pathData:m,strokeColor:a,strokeWidth:d,fill:g})}createEllipsePath(t,e,n,i,a="#2c3e50",d=2,g="none"){let m=.5522848,h=n*m,f=i*m,C=`
      M ${t-n} ${e}
      C ${t-n} ${e-f} ${t-h} ${e-i} ${t} ${e-i}
      C ${t+h} ${e-i} ${t+n} ${e-f} ${t+n} ${e}
      C ${t+n} ${e+f} ${t+h} ${e+i} ${t} ${e+i}
      C ${t-h} ${e+i} ${t-n} ${e+f} ${t-n} ${e}
      Z
    `.replace(/\s+/g," ").trim();return this.createVectorPathElement({pathData:C,strokeColor:a,strokeWidth:d,fill:g})}smoothPath(t){if(t.length<2)return"";if(t.length===2)return`M ${t[0].x} ${t[0].y} L ${t[1].x} ${t[1].y}`;let e=`M ${t[0].x} ${t[0].y}`;for(let i=1;i<t.length-2;i++){let a=t[i-1],d=t[i],g=t[i+1],m=t[i+2],h=d.x+(g.x-a.x)/6,f=d.y+(g.y-a.y)/6,C=g.x-(m.x-d.x)/6,_=g.y-(m.y-d.y)/6;e+=` C ${h} ${f} ${C} ${_} ${g.x} ${g.y}`}let n=t[t.length-1];return e+=` L ${n.x} ${n.y}`,e}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};var _i=class o{pdfjsLibService=J(be);constructor(){}exportToPpt(t,e="document",n){return E(this,null,function*(){try{let i=(yield import("./chunk-R7OBOOLO.js")).default,a=new i,d=t.numPages;for(let f=1;f<=d;f++){let C=a.addSlide(),y=yield(yield t.getPage(f)).getTextContent();C.addText(`\uD398\uC774\uC9C0 ${f}`,{x:.5,y:.5,w:"90%",h:.5,fontSize:n?.fontSize||24,bold:!0,color:"363636"});let S=y.items.map(D=>D.str).join(" ");C.addText(S,{x:.5,y:1.2,w:"90%",h:"70%",fontSize:14,color:"363636",valign:"top",wrap:!0})}let g=e.replace(/\.pdf$/i,""),m=new Date().toISOString().replace(/[:.]/g,"-").split("T")[0],h=`${g}_${m}.pptx`;yield a.writeFile({fileName:h});return}catch(i){throw console.error("\u274C PowerPoint \uBCC0\uD658 \uC2E4\uD328:",i),new Error("PowerPoint \uBCC0\uD658\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}exportToDocx(t,e="document"){return E(this,null,function*(){try{let n=yield import("./chunk-Z4QKUDOH.js"),{Document:i,Packer:a,Paragraph:d,TextRun:g,HeadingLevel:m}=n,h=t.numPages,f=[];for(let O=1;O<=h;O++){let F=yield(yield t.getPage(O)).getTextContent();f.push(new d({text:`\uD398\uC774\uC9C0 ${O}`,heading:m.HEADING_1,spacing:{after:200}}));let V=F.items.map(A=>A.str).filter(A=>A.trim()).join(`
`).split(`
`);for(let A of V)A.trim()&&f.push(new d({children:[new g(A)],spacing:{after:100}}));O<h&&f.push(new d({text:"\u2500".repeat(50),spacing:{before:200,after:200}}))}let C=new i({sections:[{children:f}]}),_=e.replace(/\.pdf$/i,""),y=new Date().toISOString().replace(/[:.]/g,"-").split("T")[0],S=`${_}_${y}.docx`,D=yield a.toBlob(C),x=URL.createObjectURL(D),P=document.createElement("a");P.href=x,P.download=S,document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(x)}catch(n){throw console.error("\u274C Word \uBCC0\uD658 \uC2E4\uD328:",n),new Error("Word \uBCC0\uD658\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}exportToExcel(t,e="document"){return E(this,null,function*(){try{let n=yield import("./chunk-7LW56JTG.js"),i=t.numPages,a=[];for(let _=1;_<=i;_++){let D=(yield(yield t.getPage(_)).getTextContent()).items.map(x=>x.str).join(" ").trim();D&&a.push(D)}let d=[["\uD398\uC774\uC9C0","\uB0B4\uC6A9"],...a.map((_,y)=>[y+1,_])],g=n.utils.aoa_to_sheet(d),m=n.utils.book_new();n.utils.book_append_sheet(m,g,"PDF Content");let h=e.replace(/\.pdf$/i,""),f=new Date().toISOString().replace(/[:.]/g,"-").split("T")[0],C=`${h}_${f}.xlsx`;n.writeFile(m,C)}catch(n){throw console.error("\u274C Excel \uBCC0\uD658 \uC2E4\uD328:",n),new Error("Excel \uBCC0\uD658\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}exportToImage(t,e="document",n){return E(this,null,function*(){try{let i=t.numPages,a=n?.scale||2,d=n?.format||"png",g=n?.quality||.92,m=e.replace(/\.pdf$/i,""),h=new Date().toISOString().replace(/[:.]/g,"-").split("T")[0];for(let f=1;f<=i;f++){let C=yield t.getPage(f),_=C.getViewport({scale:a}),y=document.createElement("canvas"),S=y.getContext("2d");if(!S)throw new Error("Canvas context\uB97C \uC0DD\uC131\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.");y.height=_.height,y.width=_.width,yield C.render({canvas:y,canvasContext:S,viewport:_}).promise;let D=d==="png"?"image/png":"image/jpeg";y.toBlob(x=>{if(!x)return;let P=URL.createObjectURL(x),O=document.createElement("a");O.href=P,O.download=`${m}_page_${f}_${h}.${d}`,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(P)},D,g),y.remove()}}catch(i){throw console.error("\u274C \uC774\uBBF8\uC9C0 \uBCC0\uD658 \uC2E4\uD328:",i),new Error("\uC774\uBBF8\uC9C0 \uBCC0\uD658\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.")}})}loadPdfDocument(t){return E(this,null,function*(){try{return yield this.pdfjsLibService.getDocument(t)}catch(e){throw console.error("\u274C PDF \uBB38\uC11C \uB85C\uB4DC \uC2E4\uD328:",e),e}})}getPdfDocumentFromViewer(){let t=window.PDFViewerApplication;return t?.pdfDocument?t.pdfDocument:null}exportToPptBlob(t,e="document",n){return E(this,null,function*(){try{let i=(yield import("./chunk-R7OBOOLO.js")).default,a=new i,d=t.numPages;for(let m=1;m<=d;m++){let h=a.addSlide(),C=yield(yield t.getPage(m)).getTextContent();h.addText(`\uD398\uC774\uC9C0 ${m}`,{x:.5,y:.5,w:"90%",h:.5,fontSize:n?.fontSize||24,bold:!0,color:"363636"});let _=C.items.map(y=>y.str).join(" ");h.addText(_,{x:.5,y:1.2,w:"90%",h:"70%",fontSize:14,color:"363636",valign:"top",wrap:!0})}return yield a.write({outputType:"blob"})}catch(i){throw console.error("\u274C PPT Blob \uC0DD\uC131 \uC2E4\uD328:",i),i}})}exportToDocxBlob(t,e="document"){return E(this,null,function*(){try{let{Document:n,Packer:i,Paragraph:a,TextRun:d,HeadingLevel:g}=yield import("./chunk-Z4QKUDOH.js"),m=[],h=t.numPages;for(let _=1;_<=h;_++){let S=yield(yield t.getPage(_)).getTextContent();m.push(new a({text:`\uD398\uC774\uC9C0 ${_}`,heading:g.HEADING_1,spacing:{after:200}}));let D=S.items.map(x=>x.str).join(" ");m.push(new a({children:[new d({text:D,size:24})],spacing:{after:200}}))}let f=new n({sections:[{properties:{},children:m}]});return yield i.toBlob(f)}catch(n){throw console.error("\u274C Word Blob \uC0DD\uC131 \uC2E4\uD328:",n),n}})}exportToExcelBlob(t,e="document"){return E(this,null,function*(){try{let n=yield import("./chunk-7LW56JTG.js"),i=n.utils.book_new(),a=t.numPages;for(let g=1;g<=a;g++){let C=(yield(yield t.getPage(g)).getTextContent()).items.map(S=>S.str).join(" ").split(/\n+/).filter(S=>S.trim()),_=[[`\uD398\uC774\uC9C0 ${g}`],[""],...C.map(S=>[S])],y=n.utils.aoa_to_sheet(_);n.utils.book_append_sheet(i,y,`Page ${g}`)}let d=n.write(i,{bookType:"xlsx",type:"array"});return new Blob([d],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})}catch(n){throw console.error("\u274C Excel Blob \uC0DD\uC131 \uC2E4\uD328:",n),n}})}exportToImageBlob(t,e="document",n){return E(this,null,function*(){try{let i=n?.scale||2,a=n?.format||"png",d=n?.quality||1,g=n?.pageNumber||1,m=yield t.getPage(g),h=m.getViewport({scale:i}),f=document.createElement("canvas"),C=f.getContext("2d");return f.width=h.width,f.height=h.height,yield m.render({canvas:f,canvasContext:C,viewport:h}).promise,new Promise((_,y)=>{f.toBlob(S=>{f.remove(),S?_(S):y(new Error("Blob \uC0DD\uC131 \uC2E4\uD328"))},a==="jpeg"?"image/jpeg":"image/png",d)})}catch(i){throw console.error("\u274C \uC774\uBBF8\uC9C0 Blob \uC0DD\uC131 \uC2E4\uD328:",i),i}})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=z({token:o,factory:o.\u0275fac,providedIn:"root"})};export{qn as a,bi as b,be as c,Ot as d,rt as e,gi as f,ui as g,fi as h,hi as i,Dt as j,Ci as k,Kn as l,pi as m,Jn as n,Zn as o,Wt as p,mi as q,Nt as r,jt as s,ii as t,wt as u,Bt as v,ei as w,ti as x,ni as y,oi as z,_i as A,$t as B,Rt as C,ri as D,Zt as E,si as F,li as G,ci as H,di as I};
